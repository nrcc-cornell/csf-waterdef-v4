/*! For license information please see toolinit.js.LICENSE.txt */
!function(){var e={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3646:function(e,t,n){var i=n(7228);e.exports=function(e){if(Array.isArray(e))return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9100:function(e,t,n){var i=n(9489),r=n(7067);function a(t,n,o){return r()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3269:function(e,t,n){var i=n(379);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},9842:function(e,t,n){var i=n(9754),r=n(7067),a=n(8585);e.exports=function(e){var t=r();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},6525:function(e,t,n){var i=n(8331);function r(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=r=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=r=function(e,t,n){var r=i(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),r.apply(this,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},9754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,n){var i=n(9489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},862:function(e,t,n){var i=n(8).default;function r(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(a,s,l):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a},e.exports.__esModule=!0,e.exports.default=e.exports},430:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},7067:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8585:function(e,t,n){var i=n(8).default,r=n(1506);e.exports=function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9489:function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var i=n(2858),r=n(3884),a=n(379),o=n(521);e.exports=function(e,t){return i(e)||r(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8331:function(e,t,n){var i=n(9754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},8551:function(e,t,n){var i=n(2858),r=n(6860),a=n(379),o=n(521);e.exports=function(e){return i(e)||r(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,n){var i=n(3646),r=n(6860),a=n(379),o=n(8206);e.exports=function(e){return i(e)||r(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var i=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},5957:function(e,t,n){var i=n(9754),r=n(9489),a=n(430),o=n(9100);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},664:function(e,t){"use strict";t.Z=void 0;var n={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.Z=n},6608:function(e,t,n){"use strict";var i=n(7462),r=n(5987),a=n(2791),o=n(8182),s=n(8317),l=n(1122),u=a.forwardRef((function(e,t){var n=e.children,s=e.classes,u=e.className,c=e.color,h=void 0===c?"inherit":c,d=e.component,p=void 0===d?"svg":d,f=e.fontSize,m=void 0===f?"medium":f,v=e.htmlColor,y=e.titleAccess,g=e.viewBox,_=void 0===g?"0 0 24 24":g,x=(0,r.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return a.createElement(p,(0,i.Z)({className:(0,o.Z)(s.root,u,"inherit"!==h&&s["color".concat((0,l.Z)(h))],"default"!==m&&"medium"!==m&&s["fontSize".concat((0,l.Z)(m))]),focusable:"false",viewBox:_,color:v,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:t},x),n,y?a.createElement("title",null,y):null)}));u.muiName="SvgIcon",t.Z=(0,s.Z)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(u)},4806:function(e,t){"use strict";t.Z={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"}},3108:function(e,t,n){"use strict";n.d(t,{$n:function(){return d},Fq:function(){return c},U1:function(){return u},_j:function(){return h},mi:function(){return s}});var i=n(2929);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error((0,i.Z)(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function s(e,t){var n=l(e),i=l(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function l(e){var t="hsl"===(e=a(e)).type?a(function(e){var t=(e=a(e)).values,n=t[0],i=t[1]/100,r=t[2]/100,s=i*Math.min(r,1-r),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return r-s*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(u+="a",c.push(t[3])),o({type:u,values:c})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){return c(e,t)}function c(e,t){return e=a(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function h(e,t){if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function d(e,t){if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return o(e)}},7121:function(e,t,n){"use strict";n.d(t,{X:function(){return a},Z:function(){return o}});var i=n(7462),r=n(5987),a=["xs","sm","md","lg","xl"];function o(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,o=e.unit,s=void 0===o?"px":o,l=e.step,u=void 0===l?5:l,c=(0,r.Z)(e,["values","unit","step"]);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function d(e,t){var i=a.indexOf(t);return i===a.length-1?h(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(s,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof n[a[i+1]]?n[a[i+1]]:t)-u/100).concat(s,")")}return(0,i.Z)({keys:a,values:n,up:h,down:function(e){var t=a.indexOf(e)+1,i=n[a[t]];return t===a.length?h("xs"):"@media (max-width:".concat(("number"===typeof i&&t>0?i:e)-u/100).concat(s,")")},between:d,only:function(e){return d(e,e)},width:function(e){return n[e]}},c)}},7576:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var i=n(5987),r=n(687),a=n(7121),o=n(4942),s=n(7462);function l(e,t,n){var i;return(0,s.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,s.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,o.Z)({},e.up("sm"),(0,s.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(i={minHeight:56},(0,o.Z)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,o.Z)(i,e.up("sm"),{minHeight:64}),i)},n)}var u=n(2929),c={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},d={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},p={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},v={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y=n(4806),g=n(3108),_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.white,default:h[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:c.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:h[800],default:"#303030"},action:{active:c.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function b(e,t,n,i){var r=i.light||i,a=i.dark||1.5*i;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,g.$n)(e.main,r):"dark"===t&&(e.dark=(0,g._j)(e.main,a)))}function w(e){var t=e.primary,n=void 0===t?{light:d[300],main:d[500],dark:d[700]}:t,a=e.secondary,o=void 0===a?{light:p.A200,main:p.A400,dark:p.A700}:a,l=e.error,w=void 0===l?{light:f[300],main:f[500],dark:f[700]}:l,k=e.warning,S=void 0===k?{light:m[300],main:m[500],dark:m[700]}:k,T=e.info,C=void 0===T?{light:v[300],main:v[500],dark:v[700]}:T,E=e.success,M=void 0===E?{light:y.Z[300],main:y.Z[500],dark:y.Z[700]}:E,P=e.type,A=void 0===P?"light":P,D=e.contrastThreshold,I=void 0===D?3:D,L=e.tonalOffset,O=void 0===L?.2:L,z=(0,i.Z)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function R(e){return(0,g.mi)(e,x.text.primary)>=I?x.text.primary:_.text.primary}var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,s.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error((0,u.Z)(4,t));if("string"!==typeof e.main)throw new Error((0,u.Z)(5,JSON.stringify(e.main)));return b(e,"light",n,O),b(e,"dark",i,O),e.contrastText||(e.contrastText=R(e.main)),e},F={dark:x,light:_};return(0,r.Z)((0,s.Z)({common:c,type:A,primary:B(n),secondary:B(o,"A400","A200","A700"),error:B(w),warning:B(S),info:B(C),success:B(M),grey:h,contrastThreshold:I,getContrastText:R,augmentColor:B,tonalOffset:O},F[A]),z)}function k(e){return Math.round(1e5*e)/1e5}function S(e){return k(e)}var T={textTransform:"uppercase"},C='"Roboto", "Helvetica", "Arial", sans-serif';function E(e,t){var n="function"===typeof t?t(e):t,a=n.fontFamily,o=void 0===a?C:a,l=n.fontSize,u=void 0===l?14:l,c=n.fontWeightLight,h=void 0===c?300:c,d=n.fontWeightRegular,p=void 0===d?400:d,f=n.fontWeightMedium,m=void 0===f?500:f,v=n.fontWeightBold,y=void 0===v?700:v,g=n.htmlFontSize,_=void 0===g?16:g,x=n.allVariants,b=n.pxToRem,w=(0,i.Z)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var E=u/14,M=b||function(e){return"".concat(e/_*E,"rem")},P=function(e,t,n,i,r){return(0,s.Z)({fontFamily:o,fontWeight:e,fontSize:M(t),lineHeight:n},o===C?{letterSpacing:"".concat(k(i/t),"em")}:{},r,x)},A={h1:P(h,96,1.167,-1.5),h2:P(h,60,1.2,-.5),h3:P(p,48,1.167,0),h4:P(p,34,1.235,.25),h5:P(p,24,1.334,0),h6:P(m,20,1.6,.15),subtitle1:P(p,16,1.75,.15),subtitle2:P(m,14,1.57,.1),body1:P(p,16,1.5,.15),body2:P(p,14,1.43,.15),button:P(m,14,1.75,.4,T),caption:P(p,12,1.66,.4),overline:P(p,12,2.66,1,T)};return(0,r.Z)((0,s.Z)({htmlFontSize:_,pxToRem:M,round:S,fontFamily:o,fontSize:u,fontWeightLight:h,fontWeightRegular:p,fontWeightMedium:m,fontWeightBold:y},A),w,{clone:!1})}function M(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var P=["none",M(0,2,1,-1,0,1,1,0,0,1,3,0),M(0,3,1,-2,0,2,2,0,0,1,5,0),M(0,3,3,-2,0,3,4,0,0,1,8,0),M(0,2,4,-1,0,4,5,0,0,1,10,0),M(0,3,5,-1,0,5,8,0,0,1,14,0),M(0,3,5,-1,0,6,10,0,0,1,18,0),M(0,4,5,-2,0,7,10,1,0,2,16,1),M(0,5,5,-3,0,8,10,1,0,3,14,2),M(0,5,6,-3,0,9,12,1,0,3,16,2),M(0,6,6,-3,0,10,14,1,0,4,18,3),M(0,6,7,-4,0,11,15,1,0,4,20,3),M(0,7,8,-4,0,12,17,2,0,5,22,4),M(0,7,8,-4,0,13,19,2,0,5,24,4),M(0,7,9,-4,0,14,21,2,0,5,26,4),M(0,8,9,-5,0,15,22,2,0,6,28,5),M(0,8,10,-5,0,16,24,2,0,6,30,5),M(0,8,11,-5,0,17,26,2,0,6,32,5),M(0,9,11,-5,0,18,28,2,0,7,34,6),M(0,9,12,-6,0,19,29,2,0,7,36,6),M(0,10,13,-6,0,20,31,3,0,8,38,7),M(0,10,13,-6,0,21,33,3,0,8,40,7),M(0,10,14,-6,0,22,35,3,0,8,42,7),M(0,11,14,-7,0,23,36,3,0,9,44,8),M(0,11,15,-7,0,24,38,3,0,9,46,8)],A={borderRadius:4},D=n(2308);function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,D.h)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var L=n(812),O=n(9535);function z(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.mixins,s=void 0===o?{}:o,u=e.palette,c=void 0===u?{}:u,h=e.spacing,d=e.typography,p=void 0===d?{}:d,f=(0,i.Z)(e,["breakpoints","mixins","palette","spacing","typography"]),m=w(c),v=(0,a.Z)(n),y=I(h),g=(0,r.Z)({breakpoints:v,direction:"ltr",mixins:l(v,y,s),overrides:{},palette:m,props:{},shadows:P,typography:E(m,p),spacing:y,shape:A,transitions:L.ZP,zIndex:O.Z},f),_=arguments.length,x=new Array(_>1?_-1:0),b=1;b<_;b++)x[b-1]=arguments[b];return g=x.reduce((function(e,t){return(0,r.Z)(e,t)}),g)}var R=z},663:function(e,t,n){"use strict";var i=(0,n(7576).Z)();t.Z=i},812:function(e,t,n){"use strict";n.d(t,{x9:function(){return a}});var i=n(5987),r={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o(e){return"".concat(Math.round(e),"ms")}t.ZP={easing:r,duration:a,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,s=void 0===n?a.standard:n,l=t.easing,u=void 0===l?r.easeInOut:l,c=t.delay,h=void 0===c?0:c;(0,i.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:o(s)," ").concat(u," ").concat("string"===typeof h?h:o(h))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},8317:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(7462),r=n(5987),a=n(2791),o=n(2110),s=n.n(o),l=n(4792),u=n(794),c=n(8444),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o=t.defaultTheme,h=t.withTheme,d=void 0!==h&&h,p=t.name,f=(0,r.Z)(t,["defaultTheme","withTheme","name"]);var m=p,v=(0,l.Z)(e,(0,i.Z)({defaultTheme:o,Component:n,name:p||n.displayName,classNamePrefix:m},f)),y=a.forwardRef((function(e,t){e.classes;var s,l=e.innerRef,h=(0,r.Z)(e,["classes","innerRef"]),f=v((0,i.Z)({},n.defaultProps,e)),m=h;return("string"===typeof p||d)&&(s=(0,c.Z)()||o,p&&(m=(0,u.Z)({theme:s,name:p,props:h})),d&&!m.theme&&(m.theme=s)),a.createElement(n,(0,i.Z)({ref:l||t,classes:f},m))}));return s()(y,n),y}},d=n(663);var p=function(e,t){return h(e,(0,i.Z)({defaultTheme:d.Z},t))}},9535:function(e,t){"use strict";t.Z={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},1122:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(2929);function r(e){if("string"!==typeof e)throw new Error((0,i.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7545:function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i),t.apply(this,i)}}),(function(){}))}n.d(t,{Z:function(){return i}})},4327:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(7462),r=n(2791),a=n(6608);function o(e,t){var n=function(t,n){return r.createElement(a.Z,(0,i.Z)({ref:n},t),e)};return n.muiName=a.Z.muiName,r.memo(r.forwardRef(n))}},503:function(e,t,n){"use strict";function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=this,s=function(){e.apply(o,r)};clearTimeout(t),t=setTimeout(s,n)}return i.clear=function(){clearTimeout(t)},i}n.d(t,{Z:function(){return i}})},2446:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return r.Z},createSvgIcon:function(){return a.Z},debounce:function(){return o.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return l.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return h},setRef:function(){return d.Z},unstable_useId:function(){return g},unsupportedProp:function(){return p},useControlled:function(){return f.Z},useEventCallback:function(){return m.Z},useForkRef:function(){return v.Z},useIsFocusVisible:function(){return _.Z}});var i=n(1122),r=n(7545),a=n(4327),o=n(503);function s(e,t){return function(){return null}}var l=n(3375),u=n(4667),c=n(7636);function h(e){return function(){return null}}var d=n(1565);function p(e,t,n,i,r){return null}var f=n(2497),m=n(2216),v=n(9806),y=n(2791);function g(e){var t=y.useState(e),n=t[0],i=t[1],r=e||n;return y.useEffect((function(){null==n&&i("mui-".concat(Math.round(1e5*Math.random())))}),[n]),r}var _=n(1175)},3375:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(2791);function r(e,t){return i.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},4667:function(e,t,n){"use strict";function i(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return i}})},7636:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(4667);function r(e){return(0,i.Z)(e).defaultView||window}},1565:function(e,t,n){"use strict";function i(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return i}})},2497:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(2791);function r(e){var t=e.controlled,n=e.default,r=(e.name,e.state,i.useRef(void 0!==t).current),a=i.useState(n),o=a[0],s=a[1];return[r?t:o,i.useCallback((function(e){r||s(e)}),[])]}},2216:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(2791),r="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;function a(e){var t=i.useRef(e);return r((function(){t.current=e})),i.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},9806:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(2791),r=n(1565);function a(e,t){return i.useMemo((function(){return null==e&&null==t?null:function(n){(0,r.Z)(e,n),(0,r.Z)(t,n)}}),[e,t])}},1175:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(2791),r=n(4164),a=!0,o=!1,s=null,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function c(){a=!1}function h(){"hidden"===this.visibilityState&&o&&(a=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function p(){o=!0,window.clearTimeout(s),s=window.setTimeout((function(){o=!1}),100)}function f(){return{isFocusVisible:d,onBlurVisible:p,ref:i.useCallback((function(e){var t,n=r.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",h,!0))}),[])}}},8901:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var i=n(1002),r={xs:0,sm:600,md:960,lg:1280,xl:1920},a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||a;return t.reduce((function(e,i,a){return e[r.up(r.keys[a])]=n(t[a]),e}),{})}if("object"===(0,i.Z)(t)){var o=e.theme.breakpoints||a;return Object.keys(t).reduce((function(e,i){return e[o.up(i)]=n(t[i]),e}),{})}return n(t)}},3060:function(e,t,n){"use strict";var i=n(687);t.Z=function(e,t){return t?(0,i.Z)(e,t,{clone:!1}):e}},2308:function(e,t,n){"use strict";n.d(t,{h:function(){return h},Z:function(){return f}});var i=n(885),r=n(8901),a=n(3060);var o={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!l[e])return[e];e=l[e]}var t=e.split(""),n=(0,i.Z)(t,2),r=n[0],a=n[1],u=o[r],c=s[a]||"";return Array.isArray(c)?c.map((function(e){return u+e})):[u+c]})),c=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function h(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function d(e,t){return function(n){return e.reduce((function(e,i){return e[i]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function p(e){var t=h(e.theme);return Object.keys(e).map((function(n){if(-1===c.indexOf(n))return null;var i=d(u(n),t),a=e[n];return(0,r.k)(e,a,i)})).reduce(a.Z,{})}p.propTypes={},p.filterProps=c;var f=p},687:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(7462),r=n(1002);function a(e){return e&&"object"===(0,r.Z)(e)&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,i.Z)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(a(t[i])&&i in e?r[i]=o(e[i],t[i],n):r[i]=t[i])})),r}},2929:function(e,t,n){"use strict";function i(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return i}})},7595:function(e,t,n){"use strict";var i=n(5318),r=n(862);t.Z=void 0;var a=r(n(2791)),o=(0,i(n(4894)).default)(a.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=o},9323:function(e,t,n){"use strict";var i=n(5318),r=n(862);t.Z=void 0;var a=r(n(2791)),o=(0,i(n(4894)).default)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");t.Z=o},4894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=n(2446)},9316:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for;t.Z=n?Symbol.for("mui.nested"):"__THEME_NESTED__"},794:function(e,t,n){"use strict";function i(e){var t=e.theme,n=e.name,i=e.props;if(!t||!t.props||!t.props[n])return i;var r,a=t.props[n];for(r in a)void 0===i[r]&&(i[r]=a[r]);return i}n.d(t,{Z:function(){return i}})},4792:function(e,t,n){"use strict";n.d(t,{Z:function(){return bn}});var i=n(5987),r=n(7462),a=n(2791),o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="object"===("undefined"===typeof window?"undefined":o(window))&&"object"===("undefined"===typeof document?"undefined":o(document))&&9===document.nodeType,l=n(3144),u=n(4578),c=n(7326),h=n(3366),d={}.constructor;function p(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(p);if(e.constructor!==d)return e;var t={};for(var n in e)t[n]=p(e[n]);return t}function f(e,t,n){void 0===e&&(e="unnamed");var i=n.jss,r=p(t),a=i.plugins.onCreateRule(e,r,n);return a||(e[0],null)}var m=function(e,t){for(var n="",i=0;i<e.length&&"!important"!==e[i];i++)n&&(n+=t),n+=e[i];return n},v=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var i=0;i<e.length&&"!important"!==e[i];i++)n&&(n+=", "),n+=m(e[i]," ");else n=m(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function y(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function g(e,t){for(var n="",i=0;i<t;i++)n+="  ";return n+e}function _(e,t,n){void 0===n&&(n={});var i="";if(!t)return i;var r=n.indent,a=void 0===r?0:r,o=t.fallbacks;!1===n.format&&(a=-1/0);var s=y(n),l=s.linebreak,u=s.space;if(e&&a++,o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var h=o[c];for(var d in h){var p=h[d];null!=p&&(i&&(i+=l),i+=g(d+":"+u+v(p)+";",a))}}else for(var f in o){var m=o[f];null!=m&&(i&&(i+=l),i+=g(f+":"+u+v(m)+";",a))}for(var _ in t){var x=t[_];null!=x&&"fallbacks"!==_&&(i&&(i+=l),i+=g(_+":"+u+v(x)+";",a))}return(i||n.allowEmpty)&&e?(i&&(i=""+l+i+l),g(""+e+u+"{"+i,--a)+g("}",a)):i}var x=/([[\].#*$><+~=|^:(),"'`\s])/g,b="undefined"!==typeof CSS&&CSS.escape,w=function(e){return b?b(e):e.replace(x,"\\$1")},k=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var i=n.sheet,r=n.Renderer;this.key=e,this.options=n,this.style=t,i?this.renderer=i.renderer:r&&(this.renderer=new r)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var i=!!n&&n.force;if(!i&&this.style[e]===t)return this;var r=t;n&&!1===n.process||(r=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==r||!1===r,o=e in this.style;if(a&&!o&&!i)return this;var s=a&&o;if(s?delete this.style[e]:this.style[e]=r,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,r),this;var l=this.options.sheet;return l&&l.attached,this},e}(),S=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=i.selector,o=i.scoped,s=i.sheet,l=i.generateId;return a?r.selectorText=a:!1!==o&&(r.id=l((0,c.Z)((0,c.Z)(r)),s),r.selectorText="."+w(r.id)),r}(0,u.Z)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var i in n)t.setProperty(e,i,n[i])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=v(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,r.Z)({},e,{allowEmpty:!0}):e;return _(this.selectorText,this.style,n)},(0,l.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(k),T={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new S(e,t,n)}},C={indent:1,children:!0},E=/@([\w-]+)/,M=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var i=e.match(E);for(var a in this.at=i?i[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new Q((0,r.Z)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),i):null},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.toString=function(e){void 0===e&&(e=C);var t=y(e).linebreak;if(null==e.indent&&(e.indent=C.indent),null==e.children&&(e.children=C.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),P=/@media|@supports\s+/,A={onCreateRule:function(e,t,n){return P.test(e)?new M(e,t,n):null}},D={indent:1,children:!0},I=/@keyframes\s+([\w-]+)/,L=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=e.match(I);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,o=n.sheet,s=n.generateId;for(var l in this.id=!1===a?this.name:w(s(this,o)),this.rules=new Q((0,r.Z)({},n,{parent:this})),t)this.rules.add(l,t[l],(0,r.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=D);var t=y(e).linebreak;if(null==e.indent&&(e.indent=D.indent),null==e.children&&(e.children=D.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),O=/@keyframes\s+/,z=/\$([\w-]+)/g,R=function(e,t){return"string"===typeof e?e.replace(z,(function(e,n){return n in t?t[n]:e})):e},B=function(e,t,n){var i=e[t],r=R(i,n);r!==i&&(e[t]=r)},F={onCreateRule:function(e,t,n){return"string"===typeof e&&O.test(e)?new L(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&B(e,"animation-name",n.keyframes),"animation"in e&&B(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var i=n.options.sheet;if(!i)return e;switch(t){case"animation":case"animation-name":return R(e,i.keyframes);default:return e}}},N=function(e){function t(){return e.apply(this,arguments)||this}return(0,u.Z)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,r.Z)({},e,{allowEmpty:!0}):e;return _(this.key,this.style,n)},t}(k),j={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new N(e,t,n):null}},U=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=y(e).linebreak;if(Array.isArray(this.style)){for(var n="",i=0;i<this.style.length;i++)n+=_(this.at,this.style[i]),this.style[i+1]&&(n+=t);return n}return _(this.at,this.style,e)},e}(),V=/@font-face/,Z={onCreateRule:function(e,t,n){return V.test(e)?new U(e,t,n):null}},W=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return _(this.key,this.style,e)},e}(),G={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new W(e,t,n):null}},Y=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),H={"@charset":!0,"@import":!0,"@namespace":!0},X={onCreateRule:function(e,t,n){return e in H?new Y(e,t,n):null}},q=[T,A,F,j,Z,G,X],K={process:!0},$={force:!0,process:!0},Q=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var i=this.options,a=i.parent,o=i.sheet,s=i.jss,l=i.Renderer,u=i.generateId,c=i.scoped,h=(0,r.Z)({classes:this.classes,parent:a,sheet:o,jss:s,Renderer:l,generateId:u,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(h.selector="."+w(this.classes[d]));var p=f(d,t,h);if(!p)return null;this.register(p);var m=void 0===h.index?this.index.length:h.index;return this.index.splice(m,0,p),p},t.replace=function(e,t,n){var i=this.get(e),a=this.index.indexOf(i);i&&this.remove(i);var o=n;return-1!==a&&(o=(0,r.Z)({},n,{index:a})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof S?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof L&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof S?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof L&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var i=0;i<this.index.length;i++)this.updateOne(this.index[i],t,n)},t.updateOne=function(t,n,i){void 0===i&&(i=K);var r=this.options,a=r.jss.plugins,o=r.sheet;if(t.rules instanceof e)t.rules.update(n,i);else{var s=t.style;if(a.onUpdate(n,t,o,i),i.process&&s&&s!==t.style){for(var l in a.onProcessStyle(t.style,t,o),t.style){var u=t.style[l];u!==s[l]&&t.prop(l,u,$)}for(var c in s){var h=t.style[c],d=s[c];null==h&&h!==d&&t.prop(c,null,$)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,i=!!n&&n.options.link,r=y(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||i)&&(t&&(t+=r),t+=o)}return t},e}(),J=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,r.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Q(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var i=this.queue;this.attached&&!i&&(this.queue=[]);var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(i?i.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},t.replaceRule=function(e,t,n){var i=this.rules.get(e);if(!i)return this.addRule(e,t,n);var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(this.renderer&&(r?i.renderable&&this.renderer.replaceRule(i.renderable,r):this.renderer.deleteRule(i)),r):r:(this.deployed=!1,r)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var i in e){var r=this.addRule(i,e[i],t);r&&n.push(r)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),ee=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var i=0;i<this.registry.onCreateRule.length;i++){var r=this.registry.onCreateRule[i](e,t,n);if(r)return r}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var i=0;i<this.registry.onProcessStyle.length;i++)t.style=this.registry.onProcessStyle[i](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,i){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](e,t,n,i)},t.onChangeValue=function(e,t,n){for(var i=e,r=0;r<this.registry.onChangeValue.length;r++)i=this.registry.onChangeValue[r](i,t,n);return i},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),te=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var i=0;i<t.length;i++)if(t[i].options.index>n)return void t.splice(i,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,i=(0,h.Z)(t,["attached"]),r=y(i).linebreak,a="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(a&&(a+=r),a+=s.toString(i))}return a},(0,l.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),ne=new te,ie="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),re="2f1acc6c3a606b082e5eef5e54414ffb";null==ie[re]&&(ie[re]=0);var ae=ie[re]++,oe=function(e){void 0===e&&(e={});var t=0;return function(n,i){t+=1;var r="",a="";return i&&(i.options.classNamePrefix&&(a=i.options.classNamePrefix),null!=i.options.jss.id&&(r=String(i.options.jss.id))),e.minify?""+(a||"c")+ae+r+t:a+n.key+"-"+ae+(r?"-"+r:"")+"-"+t}},se=function(e){var t;return function(){return t||(t=e()),t}},le=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},ue=function(e,t,n){try{var i=n;if(Array.isArray(n)&&(i=v(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,i,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,i):e.style.setProperty(t,i)}catch(r){return!1}return!0},ce=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},he=function(e,t){return e.selectorText=t,e.selectorText===t},de=se((function(){return document.querySelector("head")}));function pe(e){var t=ne.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.attached&&i.options.index>t.index&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.attached&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var i=e.insertionPoint;if(i&&"string"===typeof i){var r=function(e){for(var t=de(),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(8===i.nodeType&&i.nodeValue.trim()===e)return i}return null}(i);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var fe=se((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),me=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(i){return!1}return e.cssRules[n]},ve=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},ye=function(){function e(e){this.getPropertyValue=le,this.setProperty=ue,this.removeProperty=ce,this.setSelector=he,this.hasInsertedRules=!1,this.cssRules=[],e&&ne.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,i=t.meta,r=t.element;this.element=r||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),i&&this.element.setAttribute("data-meta",i);var a=fe();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,i=pe(t);if(!1!==i&&i.parent)i.parent.insertBefore(e,i.node);else if(n&&"number"===typeof n.nodeType){var r=n,a=r.parentNode;a&&a.insertBefore(e,r.nextSibling)}else de().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var i=e,r=n;if("conditional"===e.type||"keyframes"===e.type){var a=ve(n,t);if(!1===(r=me(n,i.toString({children:!1}),a)))return!1;this.refCssRule(e,a,r)}return this.insertRules(i.rules,r),r}var o=e.toString();if(!o)return!1;var s=ve(n,t),l=me(n,o,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,s,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof J&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),ge=0,_e=function(){function e(e){this.id=ge++,this.version="10.9.0",this.plugins=new ee,this.options={id:{minify:!1},createGenerateId:oe,Renderer:s?ye:null,plugins:[]},this.generateId=oe({minify:!1});for(var t=0;t<q.length;t++)this.plugins.use(q[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,r.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===ne.index?0:ne.index+1);var i=new J(e,(0,r.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(i),i},t.removeStyleSheet=function(e){return e.detach(),ne.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var i=(0,r.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});i.generateId||(i.generateId=this.generateId),i.classes||(i.classes={}),i.keyframes||(i.keyframes={});var a=f(e,t,i);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),xe=function(e){return new _e(e)},be="object"===typeof CSS&&null!=CSS&&"number"in CSS;function we(e){var t=null;for(var n in e){var i=e[n],r=typeof i;if("function"===r)t||(t={}),t[n]=i;else if("object"===r&&null!==i&&!Array.isArray(i)){var a=we(i);a&&(t||(t={}),t[n]=a)}}return t}xe();var ke=n(5352),Se={set:function(e,t,n,i){var r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(n,i)},get:function(e,t,n){var i=e.get(t);return i?i.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Te=Se,Ce=n(8444),Ee=n(9316),Me=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Pe=Date.now(),Ae="fnValues"+Pe,De="fnStyle"+ ++Pe,Ie=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var i=f(e,{},n);return i[De]=t,i},onProcessStyle:function(e,t){if(Ae in t||De in t)return e;var n={};for(var i in e){var r=e[i];"function"===typeof r&&(delete e[i],n[i]=r)}return t[Ae]=n,e},onUpdate:function(e,t,n,i){var r=t,a=r[De];a&&(r.style=a(e)||{});var o=r[Ae];if(o)for(var s in o)r.prop(s,o[s](e),i)}}},Le="@global",Oe="@global ",ze=function(){function e(e,t,n){for(var i in this.type="global",this.at=Le,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Q((0,r.Z)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Re=function(){function e(e,t,n){this.type="global",this.at=Le,this.isProcessed=!1,this.key=e,this.options=n;var i=e.substr(Oe.length);this.rule=n.jss.createRule(i,t,(0,r.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Be=/\s*,\s*/g;function Fe(e,t){for(var n=e.split(Be),i="",r=0;r<n.length;r++)i+=t+" "+n[r].trim(),n[r+1]&&(i+=", ");return i}var Ne=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Le)return new ze(e,t,n);if("@"===e[0]&&e.substr(0,Oe.length)===Oe)return new Re(e,t,n);var i=n.parent;return i&&("global"===i.type||i.options.parent&&"global"===i.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,i=e.style,a=i?i[Le]:null;if(a){for(var o in a)t.addRule(o,a[o],(0,r.Z)({},n,{selector:Fe(o,e.selector)}));delete i[Le]}}(e,t),function(e,t){var n=e.options,i=e.style;for(var a in i)if("@"===a[0]&&a.substr(0,Le.length)===Le){var o=Fe(a.substr(Le.length),e.selector);t.addRule(o,i[a],(0,r.Z)({},n,{selector:o})),delete i[a]}}(e,t))}}},je=/\s*,\s*/g,Ue=/&/g,Ve=/\$([\w-]+)/g;var Ze=function(){function e(e,t){return function(n,i){var r=e.getRule(i)||t&&t.getRule(i);return r?r.selector:i}}function t(e,t){for(var n=t.split(je),i=e.split(je),r="",a=0;a<n.length;a++)for(var o=n[a],s=0;s<i.length;s++){var l=i[s];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(Ue,o):o+" "+l}return r}function n(e,t,n){if(n)return(0,r.Z)({},n,{index:n.index+1});var i=e.options.nestingLevel;i=void 0===i?1:i+1;var a=(0,r.Z)({},e.options,{nestingLevel:i,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(i,a,o){if("style"!==a.type)return i;var s,l,u=a,c=u.options.parent;for(var h in i){var d=-1!==h.indexOf("&"),p="@"===h[0];if(d||p){if(s=n(u,c,s),d){var f=t(h,u.selector);l||(l=e(c,o)),f=f.replace(Ve,l);var m=u.key+"-"+h;"replaceRule"in c?c.replaceRule(m,i[h],(0,r.Z)({},s,{selector:f})):c.addRule(m,i[h],(0,r.Z)({},s,{selector:f}))}else p&&c.addRule(h,{},s).addRule(u.key,i[h],{selector:u.selector});delete i[h]}}return i}}},We=/[A-Z]/g,Ge=/^ms-/,Ye={};function He(e){return"-"+e.toLowerCase()}var Xe=function(e){if(Ye.hasOwnProperty(e))return Ye[e];var t=e.replace(We,He);return Ye[e]=Ge.test(t)?"-"+t:t};function qe(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Xe(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(qe):t.fallbacks=qe(e.fallbacks)),t}var Ke=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=qe(e[t]);return e}return qe(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var i=Xe(t);return t===i?e:(n.prop(i,e),null)}}},$e=be&&CSS?CSS.px:"px",Qe=be&&CSS?CSS.ms:"ms",Je=be&&CSS?CSS.percent:"%";function et(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},i={};for(var r in e)i[r]=e[r],i[r.replace(t,n)]=e[r];return i}var tt=et({"animation-delay":Qe,"animation-duration":Qe,"background-position":$e,"background-position-x":$e,"background-position-y":$e,"background-size":$e,border:$e,"border-bottom":$e,"border-bottom-left-radius":$e,"border-bottom-right-radius":$e,"border-bottom-width":$e,"border-left":$e,"border-left-width":$e,"border-radius":$e,"border-right":$e,"border-right-width":$e,"border-top":$e,"border-top-left-radius":$e,"border-top-right-radius":$e,"border-top-width":$e,"border-width":$e,"border-block":$e,"border-block-end":$e,"border-block-end-width":$e,"border-block-start":$e,"border-block-start-width":$e,"border-block-width":$e,"border-inline":$e,"border-inline-end":$e,"border-inline-end-width":$e,"border-inline-start":$e,"border-inline-start-width":$e,"border-inline-width":$e,"border-start-start-radius":$e,"border-start-end-radius":$e,"border-end-start-radius":$e,"border-end-end-radius":$e,margin:$e,"margin-bottom":$e,"margin-left":$e,"margin-right":$e,"margin-top":$e,"margin-block":$e,"margin-block-end":$e,"margin-block-start":$e,"margin-inline":$e,"margin-inline-end":$e,"margin-inline-start":$e,padding:$e,"padding-bottom":$e,"padding-left":$e,"padding-right":$e,"padding-top":$e,"padding-block":$e,"padding-block-end":$e,"padding-block-start":$e,"padding-inline":$e,"padding-inline-end":$e,"padding-inline-start":$e,"mask-position-x":$e,"mask-position-y":$e,"mask-size":$e,height:$e,width:$e,"min-height":$e,"max-height":$e,"min-width":$e,"max-width":$e,bottom:$e,left:$e,top:$e,right:$e,inset:$e,"inset-block":$e,"inset-block-end":$e,"inset-block-start":$e,"inset-inline":$e,"inset-inline-end":$e,"inset-inline-start":$e,"box-shadow":$e,"text-shadow":$e,"column-gap":$e,"column-rule":$e,"column-rule-width":$e,"column-width":$e,"font-size":$e,"font-size-delta":$e,"letter-spacing":$e,"text-decoration-thickness":$e,"text-indent":$e,"text-stroke":$e,"text-stroke-width":$e,"word-spacing":$e,motion:$e,"motion-offset":$e,outline:$e,"outline-offset":$e,"outline-width":$e,perspective:$e,"perspective-origin-x":Je,"perspective-origin-y":Je,"transform-origin":Je,"transform-origin-x":Je,"transform-origin-y":Je,"transform-origin-z":Je,"transition-delay":Qe,"transition-duration":Qe,"vertical-align":$e,"flex-basis":$e,"shape-margin":$e,size:$e,gap:$e,grid:$e,"grid-gap":$e,"row-gap":$e,"grid-row-gap":$e,"grid-column-gap":$e,"grid-template-rows":$e,"grid-template-columns":$e,"grid-auto-rows":$e,"grid-auto-columns":$e,"box-shadow-x":$e,"box-shadow-y":$e,"box-shadow-blur":$e,"box-shadow-spread":$e,"font-line-height":$e,"text-shadow-x":$e,"text-shadow-y":$e,"text-shadow-blur":$e});function nt(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=nt(e,t[i],n);else if("object"===typeof t)if("fallbacks"===e)for(var r in t)t[r]=nt(r,t[r],n);else for(var a in t)t[a]=nt(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||tt[e];return!o||0===t&&o===$e?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var it=function(e){void 0===e&&(e={});var t=et(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var i in e)e[i]=nt(i,e[i],t);return e},onChangeValue:function(e,n){return nt(n,e,t)}}},rt=n(2982),at="",ot="",st="",lt="",ut=s&&"ontouchstart"in document.documentElement;if(s){var ct={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ht=document.createElement("p").style;for(var dt in ct)if(dt+"Transform"in ht){at=dt,ot=ct[dt];break}"Webkit"===at&&"msHyphens"in ht&&(at="ms",ot=ct.ms,lt="edge"),"Webkit"===at&&"-apple-trailing-word"in ht&&(st="apple")}var pt=at,ft=ot,mt=st,vt=lt,yt=ut;var gt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===pt?"-webkit-"+e:ft+e)}},_t={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===pt?ft+"print-"+e:e)}},xt=/[-\s]+(.)?/g;function bt(e,t){return t?t.toUpperCase():""}function wt(e){return e.replace(xt,bt)}function kt(e){return wt("-"+e)}var St,Tt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===pt){var n="mask-image";if(wt(n)in t)return e;if(pt+kt(n)in t)return ft+e}return e}},Ct={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==mt||yt?e:ft+e)}},Et={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:ft+e)}},Mt={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:ft+e)}},Pt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===pt||"ms"===pt&&"edge"!==vt?ft+e:e)}},At={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===pt||"ms"===pt||"apple"===mt?ft+e:e)}},Dt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===pt?"WebkitColumn"+kt(e)in t&&ft+"column-"+e:"Moz"===pt&&("page"+kt(e)in t&&"page-"+e))}},It={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===pt)return e;var n=e.replace("-inline","");return pt+kt(n)in t&&ft+n}},Lt={supportedProperty:function(e,t){return wt(e)in t&&e}},Ot={supportedProperty:function(e,t){var n=kt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:pt+n in t?ft+e:"Webkit"!==pt&&"Webkit"+n in t&&"-webkit-"+e}},zt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===pt?""+ft+e:e)}},Rt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===pt?ft+"scroll-chaining":e)}},Bt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Ft={supportedProperty:function(e,t){var n=Bt[e];return!!n&&(pt+kt(n)in t&&ft+n)}},Nt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},jt=Object.keys(Nt),Ut=function(e){return ft+e},Vt={supportedProperty:function(e,t,n){var i=n.multiple;if(jt.indexOf(e)>-1){var r=Nt[e];if(!Array.isArray(r))return pt+kt(r)in t&&ft+r;if(!i)return!1;for(var a=0;a<r.length;a++)if(!(pt+kt(r[0])in t))return!1;return r.map(Ut)}return!1}},Zt=[gt,_t,Tt,Ct,Et,Mt,Pt,At,Dt,It,Lt,Ot,zt,Rt,Ft,Vt],Wt=Zt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Gt=Zt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,rt.Z)(t.noPrefill)),e}),[]),Yt={};if(s){St=document.createElement("p");var Ht=window.getComputedStyle(document.documentElement,"");for(var Xt in Ht)isNaN(Xt)||(Yt[Ht[Xt]]=Ht[Xt]);Gt.forEach((function(e){return delete Yt[e]}))}function qt(e,t){if(void 0===t&&(t={}),!St)return e;if(null!=Yt[e])return Yt[e];"transition"!==e&&"transform"!==e||(t[e]=e in St.style);for(var n=0;n<Wt.length&&(Yt[e]=Wt[n](e,St.style,t),!Yt[e]);n++);try{St.style[e]=""}catch(i){return!1}return Yt[e]}var Kt,$t={},Qt={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Jt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function en(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var i=t?qt(t):", "+qt(n);return i||(t||n)}function tn(e,t){var n=t;if(!Kt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var i=e+n;if(null!=$t[i])return $t[i];try{Kt.style[e]=n}catch(r){return $t[i]=!1,!1}if(Qt[e])n=n.replace(Jt,en);else if(""===Kt.style[e]&&("-ms-flex"===(n=ft+n)&&(Kt.style[e]="-ms-flexbox"),Kt.style[e]=n,""===Kt.style[e]))return $t[i]=!1,!1;return Kt.style[e]="",$t[i]=n,$t[i]}s&&(Kt=document.createElement("p"));var nn=function(){function e(t){for(var n in t){var i=t[n];if("fallbacks"===n&&Array.isArray(i))t[n]=i.map(e);else{var r=!1,a=qt(n);a&&a!==n&&(r=!0);var o=!1,s=tn(a,v(i));s&&s!==i&&(o=!0),(r||o)&&(r&&delete t[n],t[a||n]=s||i)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===pt?e:"@"+ft+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return tn(t,v(e))||e}}};var rn=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var i={},r=Object.keys(t).sort(e),a=0;a<r.length;a++)i[r[a]]=t[r[a]];return i}}};var an=xe({plugins:[Ie(),Ne(),Ze(),Ke(),it(),"undefined"===typeof window?null:nn(),rn()]}),on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,i=e.productionPrefix,r=void 0===i?"jss":i,a=e.seed,o=void 0===a?"":a,s=""===o?"":"".concat(o,"-"),l=0,u=function(){return l+=1};return function(e,t){var i=t.options.name;if(i&&0===i.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Me.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(s).concat(i,"-").concat(e.key);return t.options.theme[Ee.Z]&&""===o?"".concat(a,"-").concat(u()):a}return"".concat(s).concat(r).concat(u())}}(),sn={disableGeneration:!1,generateClassName:on,jss:an,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},ln=a.createContext(sn);var un=-1e9;function cn(){return un+=1}var hn=n(1002);function dn(e){return e&&"object"===(0,hn.Z)(e)&&e.constructor===Object}function pn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?(0,r.Z)({},e):e;return dn(e)&&dn(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(dn(t[r])&&r in e?i[r]=pn(e[r],t[r],n):i[r]=t[r])})),i}function fn(e){var t="function"===typeof e;return{create:function(n,i){var a;try{a=t?e(n):e}catch(l){throw l}if(!i||!n.overrides||!n.overrides[i])return a;var o=n.overrides[i],s=(0,r.Z)({},a);return Object.keys(o).forEach((function(e){s[e]=pn(s[e],o[e])})),s},options:{}}}var mn={};function vn(e,t,n){var i=e.state;if(e.stylesOptions.disableGeneration)return t||{};i.cacheClasses||(i.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return i.classes!==i.cacheClasses.lastJSS&&(i.cacheClasses.lastJSS=i.classes,r=!0),t!==i.cacheClasses.lastProp&&(i.cacheClasses.lastProp=t,r=!0),r&&(i.cacheClasses.value=(0,ke.Z)({baseClasses:i.cacheClasses.lastJSS,newClasses:t,Component:n})),i.cacheClasses.value}function yn(e,t){var n=e.state,i=e.theme,a=e.stylesOptions,o=e.stylesCreator,s=e.name;if(!a.disableGeneration){var l=Te.get(a.sheetsManager,o,i);l||(l={refs:0,staticSheet:null,dynamicStyles:null},Te.set(a.sheetsManager,o,i,l));var u=(0,r.Z)({},o.options,a,{theme:i,flip:"boolean"===typeof a.flip?a.flip:"rtl"===i.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var c=a.sheetsRegistry;if(0===l.refs){var h;a.sheetsCache&&(h=Te.get(a.sheetsCache,o,i));var d=o.create(i,s);h||((h=a.jss.createStyleSheet(d,(0,r.Z)({link:!1},u))).attach(),a.sheetsCache&&Te.set(a.sheetsCache,o,i,h)),c&&c.add(h),l.staticSheet=h,l.dynamicStyles=we(d)}if(l.dynamicStyles){var p=a.jss.createStyleSheet(l.dynamicStyles,(0,r.Z)({link:!0},u));p.update(t),p.attach(),n.dynamicSheet=p,n.classes=(0,ke.Z)({baseClasses:l.staticSheet.classes,newClasses:p.classes}),c&&c.add(p)}else n.classes=l.staticSheet.classes;l.refs+=1}}function gn(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function _n(e){var t=e.state,n=e.theme,i=e.stylesOptions,r=e.stylesCreator;if(!i.disableGeneration){var a=Te.get(i.sheetsManager,r,n);a.refs-=1;var o=i.sheetsRegistry;0===a.refs&&(Te.delete(i.sheetsManager,r,n),i.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(i.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function xn(e,t){var n,i=a.useRef([]),r=a.useMemo((function(){return{}}),t);i.current!==r&&(i.current=r,n=e()),a.useEffect((function(){return function(){n&&n()}}),[r])}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,o=t.classNamePrefix,s=t.Component,l=t.defaultTheme,u=void 0===l?mn:l,c=(0,i.Z)(t,["name","classNamePrefix","Component","defaultTheme"]),h=fn(e),d=n||o||"makeStyles";h.options={index:cn(),name:n,meta:d,classNamePrefix:d};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Ce.Z)()||u,i=(0,r.Z)({},a.useContext(ln),c),o=a.useRef(),l=a.useRef();xn((function(){var r={name:n,state:{},stylesCreator:h,stylesOptions:i,theme:t};return yn(r,e),l.current=!1,o.current=r,function(){_n(r)}}),[t,h]),a.useEffect((function(){l.current&&gn(o.current,e),l.current=!0}));var d=vn(o.current,e.classes,s);return d};return p}},5352:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(7462);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,i.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}},423:function(e,t,n){"use strict";var i=n(2791).createContext(null);t.Z=i},8444:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(2791),r=n(423);function a(){return i.useContext(r.Z)}},8182:function(e,t,n){"use strict";function i(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})},2003:function(e,t,n){var i;"undefined"!=typeof self&&self,e.exports=(i=n(2791),function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}function r(e){return l(e)||s(e)||o(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e){if(Array.isArray(e))return u(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var h=n(1),d=n.n(h),p="undefined"!=typeof window?h.useLayoutEffect:h.useEffect,f=Object(h.forwardRef)((function(e,t){var n=Object(h.useRef)(),a=Object(h.useRef)();return p((function(){function t(){var t=e.highcharts||"object"===("undefined"==typeof window?"undefined":c(window))&&window.Highcharts,i=e.constructorType||"chart";t?t[i]?e.options?a.current=t[i](n.current,e.options,e.callback?e.callback:void 0):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(a.current){if(!1!==e.allowChartUpdate)if(!e.immutable&&a.current){var i;(i=a.current).update.apply(i,[e.options].concat(r(e.updateArgs||[!0,!0])))}else t()}else t()})),p((function(){return function(){a.current&&(a.current.destroy(),a.current=null)}}),[]),Object(h.useImperativeHandle)(t,(function(){return{get chart(){return a.current},container:n}}),[]),d.a.createElement("div",i({},e.containerProps,{ref:n}))}));t.default=Object(h.memo)(f)},function(e,t){e.exports=i}]))},1192:function(e,t,n){var i,r,a;a=function(e){function t(e,t,n,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,n),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e=e?e._modules:{},"Extensions/Pane.js",[e["Core/Chart/Chart.js"],e["Series/CenteredUtilities.js"],e["Core/Globals.js"],e["Core/Pointer.js"],e["Core/Utilities.js"]],(function(e,t,n,i,r){function a(e,t,n){return Math.sqrt(Math.pow(e-n[0],2)+Math.pow(t-n[1],2))<=n[2]/2}var o=r.addEvent,s=r.extend,l=r.merge,u=r.pick,c=r.splat;return e.prototype.collectionsWithUpdate.push("pane"),r=function(){function e(e,t){this.options=this.chart=this.center=this.background=void 0,this.coll="pane",this.defaultOptions={center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0},this.defaultBackgroundOptions={shape:"circle",borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},this.init(e,t)}return e.prototype.init=function(e,t){this.chart=t,this.background=[],t.pane.push(this),this.setOptions(e)},e.prototype.setOptions=function(e){this.options=l(this.defaultOptions,this.chart.angular?{background:{}}:void 0,e)},e.prototype.render=function(){var e=this.options,t=this.options.background,n=this.chart.renderer;if(this.group||(this.group=n.g("pane-group").attr({zIndex:e.zIndex||0}).add()),this.updateCenter(),t)for(t=c(t),e=Math.max(t.length,this.background.length||0),n=0;n<e;n++)t[n]&&this.axis?this.renderBackground(l(this.defaultBackgroundOptions,t[n]),n):this.background[n]&&(this.background[n]=this.background[n].destroy(),this.background.splice(n,1))},e.prototype.renderBackground=function(e,t){var n="animate",i={class:"highcharts-pane "+(e.className||"")};this.chart.styledMode||s(i,{fill:e.backgroundColor,stroke:e.borderColor,"stroke-width":e.borderWidth}),this.background[t]||(this.background[t]=this.chart.renderer.path().add(this.group),n="attr"),this.background[t][n]({d:this.axis.getPlotBandPath(e.from,e.to,e)}).attr(i)},e.prototype.updateCenter=function(e){this.center=(e||this.axis||{}).center=t.getCenter.call(this)},e.prototype.update=function(e,t){l(!0,this.options,e),this.setOptions(this.options),this.render(),this.chart.axes.forEach((function(e){e.pane===this&&(e.pane=null,e.update({},t))}),this)},e}(),e.prototype.getHoverPane=function(e){var t,n=this;return e&&n.pane.forEach((function(i){var r=e.chartX-n.plotLeft,o=e.chartY-n.plotTop;a(n.inverted?o:r,n.inverted?r:o,i.center)&&(t=i)})),t},o(e,"afterIsInsidePlot",(function(e){this.polar&&(e.isInsidePlot=this.pane.some((function(t){return a(e.x,e.y,t.center)})))})),o(i,"beforeGetHoverData",(function(e){var t=this.chart;t.polar?(t.hoverPane=t.getHoverPane(e),e.filter=function(n){return n.visible&&!(!e.shared&&n.directTouch)&&u(n.options.enableMouseTracking,!0)&&(!t.hoverPane||n.xAxis.pane===t.hoverPane)}):t.hoverPane=void 0})),o(i,"afterGetHoverData",(function(e){var t=this.chart;e.hoverPoint&&e.hoverPoint.plotX&&e.hoverPoint.plotY&&t.hoverPane&&!a(e.hoverPoint.plotX,e.hoverPoint.plotY,t.hoverPane.center)&&(e.hoverPoint=void 0)})),n.Pane=r,n.Pane})),t(e,"Core/Axis/RadialAxis.js",[e["Core/Axis/AxisDefaults.js"],e["Core/DefaultOptions.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r,a=t.defaultOptions,o=n.noop,s=i.addEvent,l=i.correctFloat,u=i.defined,c=i.extend,h=i.fireEvent,d=i.merge,p=i.pick,f=i.relativeLength,m=i.wrap;return function(t){function n(){this.autoConnect=this.isCircular&&"undefined"===typeof p(this.userMax,this.options.max)&&l(this.endAngleRad-this.startAngleRad)===l(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=(this.categories?1:this.pointRange)||this.closestPointRange||0)}function i(){var e=this;return function(){if(e.isRadial&&e.tickPositions&&e.options.labels&&!0!==e.options.labels.allowOverlap)return e.tickPositions.map((function(t){return e.ticks[t]&&e.ticks[t].label})).filter((function(e){return!!e}))}}function r(){return o}function v(e,t,n){var i=this.pane.center,r=e.value;if(this.isCircular){if(u(r))e.point&&(a=e.point.shapeArgs||{}).start&&(r=this.chart.inverted?this.translate(e.point.rectPlotY,!0):e.point.x);else{var a=e.chartX||0,o=e.chartY||0;r=this.translate(Math.atan2(o-n,a-t)-this.startAngleRad,!0)}a=(e=this.getPosition(r)).x,o=e.y}else u(r)||(a=e.chartX,o=e.chartY),u(a)&&u(o)&&(n=i[1]+this.chart.plotTop,r=this.translate(Math.min(Math.sqrt(Math.pow(a-t,2)+Math.pow(o-n,2)),i[2]/2)-i[3]/2,!0));return[r,a||0,o||0]}function y(e,t,n){e=this.pane.center;var i=this.chart,r=this.left||0,a=this.top||0,o=p(t,e[2]/2-this.offset);return"undefined"===typeof n&&(n=this.horiz?0:this.center&&-this.center[3]/2),n&&(o+=n),this.isCircular||"undefined"!==typeof t?((t=this.chart.renderer.symbols.arc(r+e[0],a+e[1],o,o,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[r+e[0]],t.yBounds=[a+e[1]-o]):(t=this.postTranslate(this.angleRad,o),t=[["M",this.center[0]+i.plotLeft,this.center[1]+i.plotTop],["L",t.x,t.y]]),t}function g(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function _(e,t,n){var i=this.chart,r=function(e){if("string"===typeof e){var t=parseInt(e,10);return h.test(e)&&(t=t*s/100),t}return e},a=this.center,o=this.startAngleRad,s=a[2]/2,l=Math.min(this.offset,0),u=this.left||0,c=this.top||0,h=/%$/,d=this.isCircular,f=p(r(n.outerRadius),s),m=r(n.innerRadius);if(r=p(r(n.thickness),10),"polygon"===this.options.gridLineInterpolation)l=this.getPlotLinePath({value:e}).concat(this.getPlotLinePath({value:t,reverse:!0}));else{if(e=Math.max(e,this.min),t=Math.min(t,this.max),e=this.translate(e),t=this.translate(t),d||(f=e||0,m=t||0),"circle"!==n.shape&&d)n=o+(e||0),o+=t||0;else{n=-Math.PI/2,o=1.5*Math.PI;var v=!0}f-=l,l=i.renderer.symbols.arc(u+a[0],c+a[1],f,f,{start:Math.min(n,o),end:Math.max(n,o),innerR:p(m,f-(r-l)),open:v}),d&&(d=(o+n)/2,u=u+a[0]+a[2]/2*Math.cos(d),l.xBounds=d>-Math.PI/2&&d<Math.PI/2?[u,i.plotWidth]:[0,u],l.yBounds=[c+a[1]+a[2]/2*Math.sin(d)],l.yBounds[0]+=d>-Math.PI&&0>d||d>Math.PI?-10:10)}return l}function x(e){var t=this,n=this.pane.center,i=this.chart,r=i.inverted,a=e.reverse,o=this.pane.options.background?this.pane.options.background[0]||this.pane.options.background:{},s=o.innerRadius||"0%",l=o.outerRadius||"100%",u=n[0]+i.plotLeft,c=n[1]+i.plotTop,h=this.height,d=e.isCrosshair;o=n[3]/2;var p,m=e.value,v=this.getPosition(m),y=v.x;if(v=v.y,d&&(m=(v=this.getCrosshairPosition(e,u,c))[0],y=v[1],v=v[2]),this.isCircular)m=Math.sqrt(Math.pow(y-u,2)+Math.pow(v-c,2)),a="string"===typeof s?f(s,1):s/m,i="string"===typeof l?f(l,1):l/m,n&&o&&(a<(o/=m)&&(a=o),i<o&&(i=o)),n=[["M",u+a*(y-u),c-a*(c-v)],["L",y-(1-i)*(y-u),v+(1-i)*(c-v)]];else if((m=this.translate(m))&&(0>m||m>h)&&(m=0),"circle"===this.options.gridLineInterpolation)n=this.getLinePath(0,m,o);else if(n=[],i[r?"yAxis":"xAxis"].forEach((function(e){e.pane===t.pane&&(p=e)})),p)for(u=p.tickPositions,p.autoConnect&&(u=u.concat([u[0]])),a&&(u=u.slice().reverse()),m&&(m+=o),c=0;c<u.length;c++)o=p.getPosition(u[c],m),n.push(c?["L",o.x,o.y]:["M",o.x,o.y]);return n}function b(e,t){return e=this.translate(e),this.postTranslate(this.isCircular?e:this.angleRad,p(this.isCircular?t:0>e?0:e,this.center[2]/2)-this.offset)}function w(){var e=this.center,t=this.chart,n=this.options.title;return{x:t.plotLeft+e[0]+(n.x||0),y:t.plotTop+e[1]-{high:.5,middle:.25,low:0}[n.align]*e[2]+(n.y||0)}}function k(e){e.beforeSetTickPositions=n,e.createLabelCollector=i,e.getCrosshairPosition=v,e.getLinePath=y,e.getOffset=g,e.getPlotBandPath=_,e.getPlotLinePath=x,e.getPosition=b,e.getTitlePosition=w,e.postTranslate=D,e.setAxisSize=L,e.setAxisTranslation=O,e.setOptions=z}function S(){var e=this.chart,t=this.options,n=this.pane,i=n&&n.options;e.angular&&this.isXAxis||!n||!e.angular&&!e.polar||(this.angleRad=(t.angle||0)*Math.PI/180,this.startAngleRad=(i.startAngle-90)*Math.PI/180,this.endAngleRad=(p(i.endAngle,i.startAngle+360)-90)*Math.PI/180,this.offset=t.offset||0)}function T(e){this.isRadial&&(e.align=void 0,e.preventDefault())}function C(){if(this.chart&&this.chart.labelCollectors){var e=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;0<=e&&this.chart.labelCollectors.splice(e,1)}}function E(t){var n,i=this.chart,a=i.inverted,s=i.angular,l=i.polar,u=this.isXAxis,c=this.coll,h=s&&u,p=i.options;t=t.userOptions.pane||0,t=this.pane=i.pane&&i.pane[t],"colorAxis"===c?this.isRadial=!1:(s?(h?(this.isHidden=!0,this.createLabelCollector=r,this.getOffset=o,this.render=this.redraw=I,this.setTitle=this.setCategories=this.setScale=o):k(this),(n=!u)&&(this.defaultPolarOptions=N)):l&&(k(this),this.defaultPolarOptions=(n=this.horiz)?F:d("xAxis"===c?e.defaultXAxisOptions:e.defaultYAxisOptions,j),a&&"yAxis"===c&&(this.defaultPolarOptions.stackLabels=e.defaultYAxisOptions.stackLabels,this.defaultPolarOptions.reversedStacks=!0)),s||l?(this.isRadial=!0,p.chart.zoomType=null,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&i.labelCollectors.push(this.labelCollector)):this.isRadial=!1,t&&n&&(t.axis=this),this.isCircular=n)}function M(){this.isRadial&&this.beforeSetTickPositions()}function P(e){var t=this.label;if(t){var n=this.axis,i=t.getBBox(),r=n.options.labels,a=(n.translate(this.pos)+n.startAngleRad+Math.PI/2)/Math.PI*180%360,o=Math.round(a),s=u(r.y)?0:.3*-i.height,l=r.y,c=20,h=r.align,d="end",m=0>o?o+360:o,v=m,y=0,g=0;if(n.isRadial){var _=n.getPosition(this.pos,n.center[2]/2+f(p(r.distance,-25),n.center[2]/2,-n.center[2]/2));"auto"===r.rotation?t.attr({rotation:a}):u(l)||(l=n.chart.renderer.fontMetrics(t.styles&&t.styles.fontSize).b-i.height/2),u(h)||(n.isCircular?(i.width>n.len*n.tickInterval/(n.max-n.min)&&(c=0),h=a>c&&a<180-c?"left":a>180+c&&a<360-c?"right":"center"):h="center",t.attr({align:h})),"auto"===h&&2===n.tickPositions.length&&n.isCircular&&(90<m&&180>m?m=180-m:270<m&&360>=m&&(m=540-m),180<v&&360>=v&&(v=360-v),n.pane.options.startAngle!==o&&n.pane.options.startAngle!==o+360&&n.pane.options.startAngle!==o-360||(d="start"),h=-90<=o&&90>=o||-360<=o&&-270>=o||270<=o&&360>=o?"start"===d?"right":"left":"start"===d?"left":"right",70<v&&110>v&&(h="center"),15>m||180<=m&&195>m?y=.3*i.height:15<=m&&35>=m?y="start"===d?0:.75*i.height:195<=m&&215>=m?y="start"===d?.75*i.height:0:35<m&&90>=m?y="start"===d?.25*-i.height:i.height:215<m&&270>=m&&(y="start"===d?i.height:.25*-i.height),15>v?g="start"===d?.15*-i.height:.15*i.height:165<v&&180>=v&&(g="start"===d?.15*i.height:.15*-i.height),t.attr({align:h}),t.translate(g,y+s)),e.pos.x=_.x+(r.x||0),e.pos.y=_.y+(l||0)}}}function A(e){this.axis.getPosition&&c(e.pos,this.axis.getPosition(this.pos))}function D(e,t){var n=this.chart,i=this.center;return e=this.startAngleRad+e,{x:n.plotLeft+i[0]+Math.cos(e)*t,y:n.plotTop+i[1]+Math.sin(e)*t}}function I(){this.isDirty=!1}function L(){if(this.constructor.prototype.setAxisSize.call(this),this.isRadial){this.pane.updateCenter(this);var e=this.center=this.pane.center.slice();if(this.isCircular)this.sector=this.endAngleRad-this.startAngleRad;else{var t=this.postTranslate(this.angleRad,e[3]/2);e[0]=t.x-this.chart.plotLeft,e[1]=t.y-this.chart.plotTop}this.len=this.width=this.height=(e[2]-e[3])*p(this.sector,1)/2}}function O(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)}function z(e){(e=this.options=d(this.constructor.defaultOptions,this.defaultPolarOptions,a[this.coll],e)).plotBands||(e.plotBands=[]),h(this,"afterSetOptions")}function R(e,t,n,i,r,a,o){var s=this.axis;return t=s.isRadial?["M",t,n,"L",(e=s.getPosition(this.pos,s.center[2]/2+i)).x,e.y]:e.call(this,t,n,i,r,a,o)}var B=[],F={gridLineWidth:1,labels:{align:void 0,distance:15,x:0,y:void 0,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},N={labels:{align:"center",x:0,y:void 0},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},j={gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}};t.compose=function(e,t){return-1===B.indexOf(e)&&(B.push(e),s(e,"afterInit",S),s(e,"autoLabelAlign",T),s(e,"destroy",C),s(e,"init",E),s(e,"initialAxisTranslation",M)),-1===B.indexOf(t)&&(B.push(t),s(t,"afterGetLabelPosition",P),s(t,"afterGetPosition",A),m(t.prototype,"getMarkPath",R)),e}}(r||(r={})),r})),t(e,"Series/AreaRange/AreaRangePoint.js",[e["Series/Area/AreaSeries.js"],e["Core/Series/Point.js"],e["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=t.prototype,a=n.defined,o=n.isNumber;return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.high=void 0,t.low=void 0,t.options=void 0,t.plotHigh=void 0,t.plotLow=void 0,t.plotHighX=void 0,t.plotLowX=void 0,t.plotX=void 0,t.series=void 0,t}return i(t,e),t.prototype.setState=function(){var e=this.state,t=this.series,n=t.chart.polar;a(this.plotHigh)||(this.plotHigh=t.yAxis.toPixels(this.high,!0)),a(this.plotLow)||(this.plotLow=this.plotY=t.yAxis.toPixels(this.low,!0)),t.stateMarkerGraphic&&(t.lowerStateMarkerGraphic=t.stateMarkerGraphic,t.stateMarkerGraphic=t.upperStateMarkerGraphic),this.graphic=this.upperGraphic,this.plotY=this.plotHigh,n&&(this.plotX=this.plotHighX),r.setState.apply(this,arguments),this.state=e,this.plotY=this.plotLow,this.graphic=this.lowerGraphic,n&&(this.plotX=this.plotLowX),t.stateMarkerGraphic&&(t.upperStateMarkerGraphic=t.stateMarkerGraphic,t.stateMarkerGraphic=t.lowerStateMarkerGraphic,t.lowerStateMarkerGraphic=void 0),r.setState.apply(this,arguments)},t.prototype.haloPath=function(){var e=this.series.chart.polar,t=[];return this.plotY=this.plotLow,e&&(this.plotX=this.plotLowX),this.isInside&&(t=r.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,e&&(this.plotX=this.plotHighX),this.isTopInside&&(t=t.concat(r.haloPath.apply(this,arguments))),t},t.prototype.isValid=function(){return o(this.low)&&o(this.high)},t}(e.prototype.pointClass)})),t(e,"Series/AreaRange/AreaRangeSeries.js",[e["Series/AreaRange/AreaRangePoint.js"],e["Series/Area/AreaSeries.js"],e["Series/Column/ColumnSeries.js"],e["Core/Globals.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i,r,a,o){var s=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=t.prototype,u=n.prototype;n=i.noop;var c=r.prototype,h=o.defined,d=o.extend,p=o.isArray,f=o.pick,m=o.merge;return r=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.lowerStateMarkerGraphic=void 0,t.xAxis=void 0,t}return s(n,e),n.prototype.toYData=function(e){return[e.low,e.high]},n.prototype.highToXY=function(e){var t=this.chart,n=this.xAxis.postTranslate(e.rectPlotX||0,this.yAxis.len-e.plotHigh);e.plotHighX=n.x-t.plotLeft,e.plotHigh=n.y-t.plotTop,e.plotLowX=e.plotX},n.prototype.translate=function(){var e=this,t=e.yAxis;l.translate.apply(e),e.points.forEach((function(n){var i=n.high,r=n.plotY;n.isNull?n.plotY=null:(n.plotLow=r,n.plotHigh=t.translate(e.dataModify?e.dataModify.modifyValue(i):i,0,1,0,1),e.dataModify&&(n.yBottom=n.plotHigh))})),this.chart.polar&&this.points.forEach((function(t){e.highToXY(t),t.tooltipPos=[(t.plotHighX+t.plotLowX)/2,(t.plotHigh+t.plotLow)/2]}))},n.prototype.getGraphPath=function(e){var t,n=[],i=[],r=l.getGraphPath,a=this.options,o=this.chart.polar,s=o&&!1!==a.connectEnds,u=a.connectNulls,c=a.step;for(t=(e=e||this.points).length;t--;){var h=e[t],d=o?{plotX:h.rectPlotX,plotY:h.yBottom,doCurve:!1}:{plotX:h.plotX,plotY:h.plotY,doCurve:!1};h.isNull||s||u||e[t+1]&&!e[t+1].isNull||i.push(d);var p={polarPlotY:h.polarPlotY,rectPlotX:h.rectPlotX,yBottom:h.yBottom,plotX:f(h.plotHighX,h.plotX),plotY:h.plotHigh,isNull:h.isNull};i.push(p),n.push(p),h.isNull||s||u||e[t-1]&&!e[t-1].isNull||i.push(d)}return e=r.call(this,e),c&&(!0===c&&(c="left"),a.step={left:"right",center:"center",right:"left"}[c]),n=r.call(this,n),i=r.call(this,i),a.step=c,a=[].concat(e,n),!this.chart.polar&&i[0]&&"M"===i[0][0]&&(i[0]=["L",i[0][1],i[0][2]]),this.graphPath=a,this.areaPath=e.concat(i),a.isArea=!0,a.xMap=e.xMap,this.areaPath.xMap=e.xMap,a},n.prototype.drawDataLabels=function(){var e,t,n=this.points,i=n.length,r=[],a=this.options.dataLabels,o=this.chart.inverted;if(a){if(p(a))var s=a[0]||{enabled:!1},l=a[1]||{enabled:!1};else(s=d({},a)).x=a.xHigh,s.y=a.yHigh,(l=d({},a)).x=a.xLow,l.y=a.yLow;if(s.enabled||this._hasPointLabels){for(e=i;e--;)if(t=n[e]){var u=s.inside?t.plotHigh<t.plotLow:t.plotHigh>t.plotLow;t.y=t.high,t._plotY=t.plotY,t.plotY=t.plotHigh,r[e]=t.dataLabel,t.dataLabel=t.dataLabelUpper,t.below=u,o?s.align||(s.align=u?"right":"left"):s.verticalAlign||(s.verticalAlign=u?"top":"bottom")}for(this.options.dataLabels=s,c.drawDataLabels&&c.drawDataLabels.apply(this,arguments),e=i;e--;)(t=n[e])&&(t.dataLabelUpper=t.dataLabel,t.dataLabel=r[e],delete t.dataLabels,t.y=t.low,t.plotY=t._plotY)}if(l.enabled||this._hasPointLabels){for(e=i;e--;)(t=n[e])&&(u=l.inside?t.plotHigh<t.plotLow:t.plotHigh>t.plotLow,t.below=!u,o?l.align||(l.align=u?"left":"right"):l.verticalAlign||(l.verticalAlign=u?"bottom":"top"));this.options.dataLabels=l,c.drawDataLabels&&c.drawDataLabels.apply(this,arguments)}if(s.enabled)for(e=i;e--;)(t=n[e])&&(t.dataLabels=[t.dataLabelUpper,t.dataLabel].filter((function(e){return!!e})));this.options.dataLabels=a}},n.prototype.alignDataLabel=function(){u.alignDataLabel.apply(this,arguments)},n.prototype.drawPoints=function(){var e,t=this.points.length;for(c.drawPoints.apply(this,arguments),e=0;e<t;){var n=this.points[e];n.origProps={plotY:n.plotY,plotX:n.plotX,isInside:n.isInside,negative:n.negative,zone:n.zone,y:n.y},n.lowerGraphic=n.graphic,n.graphic=n.upperGraphic,n.plotY=n.plotHigh,h(n.plotHighX)&&(n.plotX=n.plotHighX),n.y=f(n.high,n.origProps.y),n.negative=n.y<(this.options.threshold||0),this.zones.length&&(n.zone=n.getZone()),this.chart.polar||(n.isInside=n.isTopInside="undefined"!==typeof n.plotY&&0<=n.plotY&&n.plotY<=this.yAxis.len&&0<=n.plotX&&n.plotX<=this.xAxis.len),e++}for(c.drawPoints.apply(this,arguments),e=0;e<t;)(n=this.points[e]).upperGraphic=n.graphic,n.graphic=n.lowerGraphic,n.origProps&&(d(n,n.origProps),delete n.origProps),e++},n.defaultOptions=m(t.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),n}(t),d(r.prototype,{pointArrayMap:["low","high"],pointValKey:"low",deferTranslatePolar:!0,pointClass:e,setStackedPoints:n}),a.registerSeriesType("arearange",r),r})),t(e,"Series/AreaSplineRange/AreaSplineRangeSeries.js",[e["Series/AreaRange/AreaRangeSeries.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=t.seriesTypes.spline,a=n.merge;n=n.extend;var o=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.options=void 0,e.data=void 0,e.points=void 0,e}return i(n,t),n.defaultOptions=a(e.defaultOptions),n}(e);return n(o.prototype,{getPointSpline:r.prototype.getPointSpline}),t.registerSeriesType("areasplinerange",o),o})),t(e,"Series/BoxPlot/BoxPlotSeries.js",[e["Series/Column/ColumnSeries.js"],e["Core/Globals.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();t=t.noop;var a=i.extend,o=i.merge,s=i.pick;return i=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return r(n,t),n.prototype.pointAttribs=function(){return{}},n.prototype.translate=function(){var e=this.yAxis,n=this.pointArrayMap;t.prototype.translate.apply(this),this.points.forEach((function(t){n.forEach((function(n){null!==t[n]&&(t[n+"Plot"]=e.translate(t[n],0,1,0,1))})),t.plotHigh=t.highPlot}))},n.prototype.drawPoints=function(){var e,t,n,i,r,a,o,l,u,c,h,d=this,p=d.options,f=d.chart,m=f.renderer,v=0,y=!1!==d.doQuartiles,g=d.options.whiskerLength;d.points.forEach((function(_){var x=_.graphic,b=x?"animate":"attr",w=_.shapeArgs,k={},S={},T={},C={},E=_.color||d.color;"undefined"!==typeof _.plotY&&(o=Math.round(w.width),l=Math.floor(w.x),u=l+o,c=Math.round(o/2),e=Math.floor(y?_.q1Plot:_.lowPlot),t=Math.floor(y?_.q3Plot:_.lowPlot),n=Math.floor(_.highPlot),i=Math.floor(_.lowPlot),x||(_.graphic=x=m.g("point").add(d.group),_.stem=m.path().addClass("highcharts-boxplot-stem").add(x),g&&(_.whiskers=m.path().addClass("highcharts-boxplot-whisker").add(x)),y&&(_.box=m.path(void 0).addClass("highcharts-boxplot-box").add(x)),_.medianShape=m.path(void 0).addClass("highcharts-boxplot-median").add(x)),f.styledMode||(S.stroke=_.stemColor||p.stemColor||E,S["stroke-width"]=s(_.stemWidth,p.stemWidth,p.lineWidth),S.dashstyle=_.stemDashStyle||p.stemDashStyle||p.dashStyle,_.stem.attr(S),g&&(T.stroke=_.whiskerColor||p.whiskerColor||E,T["stroke-width"]=s(_.whiskerWidth,p.whiskerWidth,p.lineWidth),T.dashstyle=_.whiskerDashStyle||p.whiskerDashStyle||p.dashStyle,_.whiskers.attr(T)),y&&(k.fill=_.fillColor||p.fillColor||E,k.stroke=p.lineColor||E,k["stroke-width"]=p.lineWidth||0,k.dashstyle=_.boxDashStyle||p.boxDashStyle||p.dashStyle,_.box.attr(k)),C.stroke=_.medianColor||p.medianColor||E,C["stroke-width"]=s(_.medianWidth,p.medianWidth,p.lineWidth),C.dashstyle=_.medianDashStyle||p.medianDashStyle||p.dashStyle,_.medianShape.attr(C)),a=_.stem.strokeWidth()%2/2,x=[["M",v=l+c+a,t],["L",v,n],["M",v,e],["L",v,i]],_.stem[b]({d:x}),y&&(a=_.box.strokeWidth()%2/2,e=Math.floor(e)+a,t=Math.floor(t)+a,x=[["M",l+=a,t],["L",l,e],["L",u+=a,e],["L",u,t],["L",l,t],["Z"]],_.box[b]({d:x})),g&&(a=_.whiskers.strokeWidth()%2/2,n+=a,i+=a,h=/%$/.test(g)?c*parseFloat(g)/100:g/2,x=[["M",v-h,n],["L",v+h,n],["M",v-h,i],["L",v+h,i]],_.whiskers[b]({d:x})),r=Math.round(_.medianPlot),a=_.medianShape.strokeWidth()%2/2,x=[["M",l,r+=a],["L",u,r]],_.medianShape[b]({d:x}))}))},n.prototype.toYData=function(e){return[e.low,e.q1,e.median,e.q3,e.high]},n.defaultOptions=o(e.defaultOptions,{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}),n}(e),a(i.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:t,setStackedPoints:t}),n.registerSeriesType("boxplot",i),i})),t(e,"Series/Bubble/BubbleLegendDefaults.js",[],(function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"10px",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}})),t(e,"Series/Bubble/BubbleLegendItem.js",[e["Core/Color/Color.js"],e["Core/FormatUtilities.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=e.parse,a=n.noop,o=i.arrayMax,s=i.arrayMin,l=i.isNumber,u=i.merge,c=i.pick,h=i.stableSort;return function(){function e(e,t){this.options=this.symbols=this.visible=this.selected=this.ranges=this.movementX=this.maxLabel=this.legendSymbol=this.legendItemWidth=this.legendItemHeight=this.legendItem=this.legendGroup=this.legend=this.fontMetrics=this.chart=void 0,this.setState=a,this.init(e,t)}return e.prototype.init=function(e,t){this.options=e,this.visible=!0,this.chart=t.chart,this.legend=t},e.prototype.addToLegend=function(e){e.splice(this.options.legendIndex,0,this)},e.prototype.drawLegendSymbol=function(e){var t=this.chart,n=this.options,i=c(e.options.itemDistance,20),r=n.ranges,a=n.connectorDistance;this.fontMetrics=t.renderer.fontMetrics(n.labels.style.fontSize),r&&r.length&&l(r[0].value)?(h(r,(function(e,t){return t.value-e.value})),this.ranges=r,this.setOptions(),this.render(),e=this.getMaxLabelSize(),t=2*(r=this.ranges[0].radius),a=0<(a=a-r+e.width)?a:0,this.maxLabel=e,this.movementX="left"===n.labels.align?a:0,this.legendItemWidth=t+a+i,this.legendItemHeight=t+this.fontMetrics.h/2):e.options.bubbleLegend.autoRanges=!0},e.prototype.setOptions=function(){var e=this.ranges,t=this.options,n=this.chart.series[t.seriesIndex],i=this.legend.baseline,a={zIndex:t.zIndex,"stroke-width":t.borderWidth},o={zIndex:t.zIndex,"stroke-width":t.connectorWidth},s={align:this.legend.options.rtl||"left"===t.labels.align?"right":"left",zIndex:t.zIndex},l=n.options.marker.fillOpacity,h=this.chart.styledMode;e.forEach((function(d,p){h||(a.stroke=c(d.borderColor,t.borderColor,n.color),a.fill=c(d.color,t.color,1!==l?r(n.color).setOpacity(l).get("rgba"):n.color),o.stroke=c(d.connectorColor,t.connectorColor,n.color)),e[p].radius=this.getRangeRadius(d.value),e[p]=u(e[p],{center:e[0].radius-e[p].radius+i}),h||u(!0,e[p],{bubbleAttribs:u(a),connectorAttribs:u(o),labelAttribs:s})}),this)},e.prototype.getRangeRadius=function(e){var t=this.options;return this.chart.series[this.options.seriesIndex].getRadius.call(this,t.ranges[t.ranges.length-1].value,t.ranges[0].value,t.minSize,t.maxSize,e)},e.prototype.render=function(){var e=this.chart.renderer,t=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),this.legendSymbol=e.g("bubble-legend"),this.legendItem=e.g("bubble-legend-item"),this.legendSymbol.translateX=0,this.legendSymbol.translateY=0,this.ranges.forEach((function(e){e.value>=t&&this.renderRange(e)}),this),this.legendSymbol.add(this.legendItem),this.legendItem.add(this.legendGroup),this.hideOverlappingLabels()},e.prototype.renderRange=function(e){var t=this.options,n=t.labels,i=this.chart,r=i.series[t.seriesIndex],a=i.renderer,o=this.symbols;i=o.labels;var s=e.center,l=Math.abs(e.radius),u=t.connectorDistance||0,c=n.align,h=t.connectorWidth,d=this.ranges[0].radius||0,p=s-l-t.borderWidth/2+h/2,f=this.fontMetrics;f=f.f/2-(f.h-f.f)/2;var m=a.styledMode;u=this.legend.options.rtl||"left"===c?-u:u,"center"===c&&(u=0,t.connectorDistance=0,e.labelAttribs.align="center"),c=p+t.labels.y;var v=d+u+t.labels.x;o.bubbleItems.push(a.circle(d,s+((p%1?1:.5)-(h%2?0:.5)),l).attr(m?{}:e.bubbleAttribs).addClass((m?"highcharts-color-"+r.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(t.className||"")).add(this.legendSymbol)),o.connectors.push(a.path(a.crispLine([["M",d,p],["L",d+u,p]],t.connectorWidth)).attr(m?{}:e.connectorAttribs).addClass((m?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(t.connectorClassName||"")).add(this.legendSymbol)),e=a.text(this.formatLabel(e),v,c+f).attr(m?{}:e.labelAttribs).css(m?{}:n.style).addClass("highcharts-bubble-legend-labels "+(t.labels.className||"")).add(this.legendSymbol),i.push(e),e.placed=!0,e.alignAttr={x:v,y:c+f}},e.prototype.getMaxLabelSize=function(){var e,t;return this.symbols.labels.forEach((function(n){t=n.getBBox(!0),e=e?t.width>e.width?t:e:t})),e||{}},e.prototype.formatLabel=function(e){var n=this.options,i=n.labels.formatter;n=n.labels.format;var r=this.chart.numberFormatter;return n?t.format(n,e):i?i.call(e):r(e.value,1)},e.prototype.hideOverlappingLabels=function(){var e=this.chart,t=this.symbols;!this.options.labels.allowOverlap&&t&&(e.hideOverlappingLabels(t.labels),t.labels.forEach((function(e,n){e.newOpacity?e.newOpacity!==e.oldOpacity&&t.connectors[n].show():t.connectors[n].hide()})))},e.prototype.getRanges=function(){var e,t=this.legend.bubbleLegend,n=t.options.ranges,i=Number.MAX_VALUE,r=-Number.MAX_VALUE;t.chart.series.forEach((function(t){t.isBubble&&!t.ignoreSeries&&(e=t.zData.filter(l)).length&&(i=c(t.options.zMin,Math.min(i,Math.max(s(e),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),r=c(t.options.zMax,Math.max(r,o(e))))}));var a=i===r?[{value:r}]:[{value:i},{value:(i+r)/2},{value:r,autoRanges:!0}];return n.length&&n[0].radius&&a.reverse(),a.forEach((function(e,t){n&&n[t]&&(a[t]=u(n[t],e))})),a},e.prototype.predictBubbleSizes=function(){var e=this.chart,t=this.fontMetrics,n=e.legend.options,i=n.floating,r=(n="horizontal"===n.layout)?e.legend.lastLineHeight:0,a=e.plotSizeX,o=e.plotSizeY,s=e.series[this.options.seriesIndex],l=s.getPxExtremes();e=Math.ceil(l.minPxSize),l=Math.ceil(l.maxPxSize);var u=Math.min(o,a);return s=s.options.maxSize,i||!/%$/.test(s)?t=l:(s=parseFloat(s),t=(u+r-t.h/2)*s/100/(s/100+1),(n&&o-t>=a||!n&&a-t>=o)&&(t=l)),[e,Math.ceil(t)]},e.prototype.updateRanges=function(e,t){var n=this.legend.options.bubbleLegend;n.minSize=e,n.maxSize=t,n.ranges=this.getRanges()},e.prototype.correctSizes=function(){var e=this.legend,t=this.chart.series[this.options.seriesIndex].getPxExtremes();1<Math.abs(Math.ceil(t.maxPxSize)-this.options.maxSize)&&(this.updateRanges(this.options.minSize,t.maxPxSize),e.render())},e}()})),t(e,"Series/Bubble/BubbleLegendComposition.js",[e["Series/Bubble/BubbleLegendDefaults.js"],e["Series/Bubble/BubbleLegendItem.js"],e["Core/DefaultOptions.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r,a=n.setOptions,o=i.addEvent,s=i.objectEach,l=i.wrap;return function(n){function i(e,t,n){var i=this.legend,a=0<=r(this);if(i&&i.options.enabled&&i.bubbleLegend&&i.options.bubbleLegend.autoRanges&&a){var o=i.bubbleLegend.options;a=i.bubbleLegend.predictBubbleSizes(),i.bubbleLegend.updateRanges(a[0],a[1]),o.placed||(i.group.placed=!1,i.allItems.forEach((function(e){e.legendGroup.translateY=null}))),i.render(),this.getMargins(),this.axes.forEach((function(e){e.visible&&e.render(),o.placed||(e.setScale(),e.updateNames(),s(e.ticks,(function(e){e.isNew=!0,e.isNewLabel=!0})))})),o.placed=!0,this.getMargins(),e.call(this,t,n),i.bubbleLegend.correctSizes(),d(i,u(i))}else e.call(this,t,n),i&&i.options.enabled&&i.bubbleLegend&&(i.render(),d(i,u(i)))}function r(e){e=e.series;for(var t=0;t<e.length;){if(e[t]&&e[t].isBubble&&e[t].visible&&e[t].zData.length)return t;t++}return-1}function u(e){var t,n=[],i=(e=e.allItems).length,r=0;for(t=0;t<i;t++)if(e[t].legendItemHeight&&(e[t].itemHeight=e[t].legendItemHeight),e[t]===e[i-1]||e[t+1]&&e[t]._legendItemPos[1]!==e[t+1]._legendItemPos[1]){n.push({height:0});for(var a=n[n.length-1];r<=t;r++)e[r].itemHeight>a.height&&(a.height=e[r].itemHeight);a.step=t}return n}function c(e){var n=this.bubbleLegend,i=this.options,a=i.bubbleLegend,o=r(this.chart);n&&n.ranges&&n.ranges.length&&(a.ranges.length&&(a.autoRanges=!!a.ranges[0].autoRanges),this.destroyItem(n)),0<=o&&i.enabled&&a.enabled&&(a.seriesIndex=o,this.bubbleLegend=new t(a,this),this.bubbleLegend.addToLegend(e.allItems))}function h(){var e=this.chart,t=this.visible,n=this.chart.legend;n&&n.bubbleLegend&&(this.visible=!t,this.ignoreSeries=t,e=0<=r(e),n.bubbleLegend.visible!==e&&(n.update({bubbleLegend:{enabled:e}}),n.bubbleLegend.visible=e),this.visible=t)}function d(e,t){var n,i,r,a=e.options.rtl,o=0;e.allItems.forEach((function(e,s){n=e.legendGroup.translateX,i=e._legendItemPos[1],((r=e.movementX)||a&&e.ranges)&&(r=a?n-e.options.maxSize/2:n+r,e.legendGroup.attr({translateX:r})),s>t[o].step&&o++,e.legendGroup.attr({translateY:Math.round(i+t[o].height/2)}),e._legendItemPos[1]=i+t[o].height/2}))}var p=[];n.compose=function(t,n,r){-1===p.indexOf(t)&&(p.push(t),a({legend:{bubbleLegend:e}}),l(t.prototype,"drawChartBox",i)),-1===p.indexOf(n)&&(p.push(n),o(n,"afterGetAllItems",c)),-1===p.indexOf(r)&&(p.push(r),o(r,"legendItemClick",h))}}(r||(r={})),r})),t(e,"Series/Bubble/BubblePoint.js",[e["Core/Series/Point.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();return n=n.extend,t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.options=void 0,e.series=void 0,e}return i(n,t),n.prototype.haloPath=function(t){return e.prototype.haloPath.call(this,0===t?0:(this.marker&&this.marker.radius||0)+t)},n}(t.seriesTypes.scatter.prototype.pointClass),n(t.prototype,{ttBelow:!1}),t})),t(e,"Series/Bubble/BubbleSeries.js",[e["Core/Axis/Axis.js"],e["Series/Bubble/BubbleLegendComposition.js"],e["Series/Bubble/BubblePoint.js"],e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i,r,a,o,s){var l=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=i.parse;i=r.noop;var c=o.seriesTypes;r=c.column;var h=c.scatter;c=s.addEvent;var d=s.arrayMax,p=s.arrayMin,f=s.clamp,m=s.extend,v=s.isNumber,y=s.merge,g=s.pick;return s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.maxPxSize=void 0,t.minPxSize=void 0,t.options=void 0,t.points=void 0,t.radii=void 0,t.yData=void 0,t.zData=void 0,t}return l(n,e),n.prototype.animate=function(e){!e&&this.points.length<this.options.animationLimit&&this.points.forEach((function(e){var t=e.graphic;t&&t.width&&(this.hasRendered||t.attr({x:e.plotX,y:e.plotY,width:1,height:1}),t.animate(this.markerAttribs(e),this.options.animation))}),this)},n.prototype.getRadii=function(){var e=this,t=this.zData,n=this.yData,i=[],r=this.chart.bubbleZExtremes,a=this.getPxExtremes(),o=a.minPxSize,s=a.maxPxSize;if(!r){var l,u=Number.MAX_VALUE,c=-Number.MAX_VALUE;this.chart.series.forEach((function(t){t.bubblePadding&&(t.visible||!e.chart.options.chart.ignoreHiddenSeries)&&(t=t.getZExtremes())&&(u=Math.min(u||t.zMin,t.zMin),c=Math.max(c||t.zMax,t.zMax),l=!0)})),l?(r={zMin:u,zMax:c},this.chart.bubbleZExtremes=r):r={zMin:0,zMax:0}}var h=0;for(a=t.length;h<a;h++){var d=t[h];i.push(this.getRadius(r.zMin,r.zMax,o,s,d,n[h]))}this.radii=i},n.prototype.getRadius=function(e,t,n,i,r,a){var o=this.options,s="width"!==o.sizeBy,l=o.zThreshold,u=t-e,c=.5;if(null===a||null===r)return null;if(v(r)){if(o.sizeByAbsoluteValue&&(r=Math.abs(r-l),u=Math.max(t-l,Math.abs(e-l)),e=0),r<e)return n/2-1;0<u&&(c=(r-e)/u)}return s&&0<=c&&(c=Math.sqrt(c)),Math.ceil(n+c*(i-n))/2},n.prototype.hasData=function(){return!!this.processedXData.length},n.prototype.pointAttribs=function(e,t){var n=this.options.marker.fillOpacity;return e=a.prototype.pointAttribs.call(this,e,t),1!==n&&(e.fill=u(e.fill).setOpacity(n).get("rgba")),e},n.prototype.translate=function(){e.prototype.translate.call(this),this.getRadii(),this.translateBubble()},n.prototype.translateBubble=function(){for(var e=this.data,t=this.radii,n=this.getPxExtremes().minPxSize,i=e.length;i--;){var r=e[i],a=t?t[i]:0;v(a)&&a>=n/2?(r.marker=m(r.marker,{radius:a,width:2*a,height:2*a}),r.dlBox={x:r.plotX-a,y:r.plotY-a,width:2*a,height:2*a}):r.shapeArgs=r.plotY=r.dlBox=void 0}},n.prototype.getPxExtremes=function(){var e=Math.min(this.chart.plotWidth,this.chart.plotHeight),t=function(t){if("string"===typeof t){var n=/%$/.test(t);t=parseInt(t,10)}return n?e*t/100:t},n=t(g(this.options.minSize,8));return{minPxSize:n,maxPxSize:t=Math.max(t(g(this.options.maxSize,"20%")),n)}},n.prototype.getZExtremes=function(){var e=this.options,t=(this.zData||[]).filter(v);if(t.length){var n=g(e.zMin,f(p(t),!1===e.displayNegative?e.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE));if(e=g(e.zMax,d(t)),v(n)&&v(e))return{zMin:n,zMax:e}}},n.compose=t.compose,n.defaultOptions=y(h.defaultOptions,{dataLabels:{formatter:function(){var e=this.series.chart.numberFormatter,t=this.point.z;return v(t)?e(t,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),n}(h),m(s.prototype,{alignDataLabel:r.prototype.alignDataLabel,applyZones:i,bubblePadding:!0,buildKDTree:i,directTouch:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:n,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),c(s,"updatedData",(function(e){delete e.target.chart.bubbleZExtremes})),e.prototype.beforePadding=function(){var e,t=this,n=this.len,i=this.chart,r=0,a=n,o=this.isXAxis,s=o?"xData":"yData",l=this.min,u=this.max-l,c=n/u;this.series.forEach((function(n){if(n.bubblePadding&&(n.visible||!i.options.chart.ignoreHiddenSeries)){e=t.allowZoomOutside=!0;var h=n[s];if(o&&n.getRadii(0,0,n),0<u)for(var d=h.length;d--;)if(v(h[d])&&t.dataMin<=h[d]&&h[d]<=t.max){var p=n.radii&&n.radii[d]||0;r=Math.min((h[d]-l)*c-p,r),a=Math.max((h[d]-l)*c+p,a)}}})),e&&0<u&&!this.logarithmic&&(a-=n,c*=(n+Math.max(0,r)-Math.min(a,n))/n,[["min","userMin",r],["max","userMax",a]].forEach((function(e){"undefined"===typeof g(t.options[e[0]],t[e[1]])&&(t[e[0]]+=e[2]/c)})))},o.registerSeriesType("bubble",s),s})),t(e,"Series/ColumnRange/ColumnRangePoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=e.seriesTypes;e=i.column.prototype.pointClass;var r=t.extend,a=t.isNumber;return t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.series=void 0,t.options=void 0,t.barX=void 0,t.pointWidth=void 0,t.shapeType=void 0,t}return n(t,e),t.prototype.isValid=function(){return a(this.low)},t}(i.arearange.prototype.pointClass),r(t.prototype,{setState:e.prototype.setState}),t})),t(e,"Series/ColumnRange/ColumnRangeSeries.js",[e["Series/ColumnRange/ColumnRangePoint.js"],e["Core/Globals.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();t=t.noop;var a=n.seriesTypes,o=a.arearange,s=a.column,l=s.prototype,u=o.prototype,c=i.clamp,h=i.merge,d=i.pick;i=i.extend;var p={pointRange:null,marker:null,states:{hover:{halo:!1}}};return a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.points=void 0,t.options=void 0,t}return r(t,e),t.prototype.setOptions=function(){return h(!0,arguments[0],{stacking:void 0}),u.setOptions.apply(this,arguments)},t.prototype.translate=function(){var e,t,n=this,i=n.yAxis,r=n.xAxis,a=r.startAngleRad,o=n.chart,s=n.xAxis.isRadial,u=Math.max(o.chartWidth,o.chartHeight)+999;l.translate.apply(n),n.points.forEach((function(l){var h=l.shapeArgs||{},p=n.options.minPointLength;l.plotHigh=t=c(i.translate(l.high,0,1,0,1),-u,u),l.plotLow=c(l.plotY,-u,u);var f=t,m=d(l.rectPlotY,l.plotY)-t;Math.abs(m)<p?(m+=p-=m,f-=p/2):0>m&&(f-=m*=-1),s?(e=l.barX+a,l.shapeType="arc",l.shapeArgs=n.polarArc(f+m,f,e,e+l.pointWidth)):(h.height=m,h.y=f,p=void 0===(p=h.x)?0:p,h=void 0===(h=h.width)?0:h,l.tooltipPos=o.inverted?[i.len+i.pos-o.plotLeft-f-m/2,r.len+r.pos-o.plotTop-p-h/2,m]:[r.left-o.plotLeft+p+h/2,i.pos-o.plotTop+f+m/2,m])}))},t.prototype.crispCol=function(){return l.crispCol.apply(this,arguments)},t.prototype.drawPoints=function(){return l.drawPoints.apply(this,arguments)},t.prototype.drawTracker=function(){return l.drawTracker.apply(this,arguments)},t.prototype.getColumnMetrics=function(){return l.getColumnMetrics.apply(this,arguments)},t.prototype.pointAttribs=function(){return l.pointAttribs.apply(this,arguments)},t.prototype.adjustForMissingColumns=function(){return l.adjustForMissingColumns.apply(this,arguments)},t.prototype.animate=function(){return l.animate.apply(this,arguments)},t.prototype.translate3dPoints=function(){return l.translate3dPoints.apply(this,arguments)},t.prototype.translate3dShapes=function(){return l.translate3dShapes.apply(this,arguments)},t.defaultOptions=h(s.defaultOptions,o.defaultOptions,p),t}(o),i(a.prototype,{directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:t,getSymbol:t,polarArc:function(){return l.polarArc.apply(this,arguments)},pointClass:e}),n.registerSeriesType("columnrange",a),a})),t(e,"Series/ColumnPyramid/ColumnPyramidSeries.js",[e["Series/Column/ColumnSeries.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=e.prototype,a=n.clamp,o=n.merge,s=n.pick;return n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return i(n,t),n.prototype.translate=function(){var e=this,t=e.chart,n=e.options,i=e.dense=2>e.closestPointRange*e.xAxis.transA;i=e.borderWidth=s(n.borderWidth,i?0:1);var o=e.yAxis,l=n.threshold,u=e.translatedThreshold=o.getThreshold(l),c=s(n.minPointLength,5),h=e.getColumnMetrics(),d=h.width,p=e.barW=Math.max(d,1+2*i),f=e.pointXOffset=h.offset;t.inverted&&(u-=.5),n.pointPadding&&(p=Math.ceil(p)),r.translate.apply(e),e.points.forEach((function(i){var r=s(i.yBottom,u),h=999+Math.abs(r),m=a(i.plotY,-h,o.len+h);h=i.plotX+f;var v,y=p/2,g=Math.min(m,r);r=Math.max(m,r)-g,i.barX=h,i.pointWidth=d,i.tooltipPos=t.inverted?[o.len+o.pos-t.plotLeft-m,e.xAxis.len-h-y,r]:[h+y,m+o.pos-t.plotTop,r],m=l+(i.total||i.y),"percent"===n.stacking&&(m=l+(0>i.y)?-100:100),m=o.toPixels(m,!0);var _=(v=t.plotHeight-m-(t.plotHeight-u))?y*(g-m)/v:0,x=v?y*(g+r-m)/v:0;v=h-_+y,_=h+_+y;var b=h+x+y;x=h-x+y;var w=g-c,k=g+r;0>i.y&&(w=g,k=g+r+c),t.inverted&&(x=y*(m-((b=o.width-g)-r))/(v=m-(o.width-u)),_=(v=h+y+(_=y*(m-b)/v))-2*_,b=h-x+y,x=h+x+y,w=g,k=g+r-c,0>i.y&&(k=g+r+c)),i.shapeType="path",i.shapeArgs={x:v,y:w,width:_-v,height:r,d:[["M",v,w],["L",_,w],["L",b,k],["L",x,k],["Z"]]}}))},n.defaultOptions=o(e.defaultOptions,{}),n}(e),t.registerSeriesType("columnpyramid",n),n})),t(e,"Series/ErrorBar/ErrorBarSeries.js",[e["Series/BoxPlot/BoxPlotSeries.js"],e["Series/Column/ColumnSeries.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=n.seriesTypes.arearange,o=i.merge;i=i.extend;var s=function(n){function i(){var e=null!==n&&n.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return r(i,n),i.prototype.getColumnMetrics=function(){return this.linkedParent&&this.linkedParent.columnMetrics||t.prototype.getColumnMetrics.call(this)},i.prototype.drawDataLabels=function(){var e=this.pointValKey;a&&(a.prototype.drawDataLabels.call(this),this.data.forEach((function(t){t.y=t[e]})))},i.prototype.toYData=function(e){return[e.low,e.high]},i.defaultOptions=o(e.defaultOptions,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),i}(e);return i(s.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),n.registerSeriesType("errorbar",s),s})),t(e,"Series/Gauge/GaugePoint.js",[e["Core/Series/SeriesRegistry.js"]],(function(e){var t=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();return function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t.shapeArgs=void 0,t}return t(n,e),n.prototype.setState=function(e){this.state=e},n}(e.series.prototype.pointClass)})),t(e,"Series/Gauge/GaugeSeries.js",[e["Series/Gauge/GaugePoint.js"],e["Core/Globals.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();t=t.noop;var a=n.series,o=n.seriesTypes.column,s=i.clamp,l=i.isNumber,u=i.extend,c=i.merge,h=i.pick,d=i.pInt;return i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.points=void 0,t.options=void 0,t.yAxis=void 0,t}return r(t,e),t.prototype.translate=function(){var e=this.yAxis,t=this.options,n=e.center;this.generatePoints(),this.points.forEach((function(i){var r=c(t.dial,i.dial),a=d(h(r.radius,"80%"))*n[2]/200,o=d(h(r.baseLength,"70%"))*a/100,u=d(h(r.rearLength,"10%"))*a/100,p=r.baseWidth||3,f=r.topWidth||1,m=t.overshoot,v=e.startAngleRad+e.translate(i.y,null,null,null,!0);(l(m)||!1===t.wrap)&&(m=l(m)?m/180*Math.PI:0,v=s(v,e.startAngleRad-m,e.endAngleRad+m)),v=180*v/Math.PI,i.shapeType="path",i.shapeArgs={d:r.path||[["M",-u,-p/2],["L",o,-p/2],["L",a,-f/2],["L",a,f/2],["L",o,p/2],["L",-u,p/2],["Z"]],translateX:n[0],translateY:n[1],rotation:v},i.plotX=n[0],i.plotY=n[1]}))},t.prototype.drawPoints=function(){var e=this,t=e.chart,n=e.yAxis.center,i=e.pivot,r=e.options,a=r.pivot,o=t.renderer;e.points.forEach((function(n){var i=n.graphic,a=n.shapeArgs,s=a.d,l=c(r.dial,n.dial);i?(i.animate(a),a.d=s):n.graphic=o[n.shapeType](a).attr({rotation:a.rotation,zIndex:1}).addClass("highcharts-dial").add(e.group),t.styledMode||n.graphic[i?"animate":"attr"]({stroke:l.borderColor||"none","stroke-width":l.borderWidth||0,fill:l.backgroundColor||"#000000"})})),i?i.animate({translateX:n[0],translateY:n[1]}):(e.pivot=o.circle(0,0,h(a.radius,5)).attr({zIndex:2}).addClass("highcharts-pivot").translate(n[0],n[1]).add(e.group),t.styledMode||e.pivot.attr({"stroke-width":a.borderWidth||0,stroke:a.borderColor||"#cccccc",fill:a.backgroundColor||"#000000"}))},t.prototype.animate=function(e){var t=this;e||t.points.forEach((function(e){var n=e.graphic;n&&(n.attr({rotation:180*t.yAxis.startAngleRad/Math.PI}),n.animate({rotation:e.shapeArgs.rotation},t.options.animation))}))},t.prototype.render=function(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),a.prototype.render.call(this),this.group.clip(this.chart.clipRect)},t.prototype.setData=function(e,t){a.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),h(t,!0)&&this.chart.redraw()},t.prototype.hasData=function(){return!!this.points.length},t.defaultOptions=c(a.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),t}(a),u(i.prototype,{angular:!0,directTouch:!0,drawGraph:t,drawTracker:o.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:e,trackerGroups:["group","dataLabelsGroup"]}),n.registerSeriesType("gauge",i),i})),t(e,"Series/PackedBubble/PackedBubblePoint.js",[e["Core/Chart/Chart.js"],e["Core/Series/Point.js"],e["Core/Series/SeriesRegistry.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();return function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this;return e.degree=NaN,e.mass=NaN,e.radius=NaN,e.options=void 0,e.series=void 0,e.value=null,e}return i(r,n),r.prototype.destroy=function(){return this.series.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),t.prototype.destroy.apply(this,arguments)},r.prototype.firePointEvent=function(){var e=this.series.options;if(this.isParentNode&&e.parentNode){var n=e.allowPointSelect;e.allowPointSelect=e.parentNode.allowPointSelect,t.prototype.firePointEvent.apply(this,arguments),e.allowPointSelect=n}else t.prototype.firePointEvent.apply(this,arguments)},r.prototype.select=function(){var n=this.series.chart;this.isParentNode?(n.getSelectedPoints=n.getSelectedParentNodes,t.prototype.select.apply(this,arguments),n.getSelectedPoints=e.prototype.getSelectedPoints):t.prototype.select.apply(this,arguments)},r}(n.seriesTypes.bubble.prototype.pointClass)})),t(e,"Series/Networkgraph/DraggableNodes.js",[e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(e,t,n){var i=n.addEvent;t.dragNodesMixin={onMouseDown:function(e,t){t=this.chart.pointer.normalize(t),e.fixedPosition={chartX:t.chartX,chartY:t.chartY,plotX:e.plotX,plotY:e.plotY},e.inDragMode=!0},onMouseMove:function(e,t){if(e.fixedPosition&&e.inDragMode){var n=this.chart,i=n.pointer.normalize(t);t=e.fixedPosition.chartX-i.chartX,i=e.fixedPosition.chartY-i.chartY;var r=void 0,a=void 0,o=n.graphLayoutsLookup;(5<Math.abs(t)||5<Math.abs(i))&&(r=e.fixedPosition.plotX-t,a=e.fixedPosition.plotY-i,n.isInsidePlot(r,a)&&(e.plotX=r,e.plotY=a,e.hasDragged=!0,this.redrawHalo(e),o.forEach((function(e){e.restartSimulation()}))))}},onMouseUp:function(e,t){e.fixedPosition&&(e.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),e.inDragMode=e.hasDragged=!1,this.options.fixedDraggable||delete e.fixedPosition)},redrawHalo:function(e){e&&this.halo&&this.halo.attr({d:e.haloPath(this.options.states.hover.halo.size)})}},i(e,"load",(function(){var e,t,n,r=this;r.container&&(e=i(r.container,"mousedown",(function(e){var a=r.hoverPoint;a&&a.series&&a.series.hasDraggableNodes&&a.series.options.draggable&&(a.series.onMouseDown(a,e),t=i(r.container,"mousemove",(function(e){return a&&a.series&&a.series.onMouseMove(a,e)})),n=i(r.container.ownerDocument,"mouseup",(function(e){return t(),n(),a&&a.series&&a.series.onMouseUp(a,e)})))}))),i(r,"destroy",(function(){e()}))}))})),t(e,"Series/Networkgraph/Integrations.js",[e["Core/Globals.js"]],(function(e){e.networkgraphIntegrations={verlet:{attractiveForceFunction:function(e,t){return(t-e)/e},repulsiveForceFunction:function(e,t){return(t-e)/e*(t>e?1:0)},barycenter:function(){var e=this.options.gravitationalConstant,t=this.barycenter.xFactor,n=this.barycenter.yFactor;t=(t-(this.box.left+this.box.width)/2)*e,n=(n-(this.box.top+this.box.height)/2)*e,this.nodes.forEach((function(e){e.fixedPosition||(e.plotX-=t/e.mass/e.degree,e.plotY-=n/e.mass/e.degree)}))},repulsive:function(e,t,n){t=t*this.diffTemperature/e.mass/e.degree,e.fixedPosition||(e.plotX+=n.x*t,e.plotY+=n.y*t)},attractive:function(e,t,n){var i=e.getMass(),r=-n.x*t*this.diffTemperature;t=-n.y*t*this.diffTemperature,e.fromNode.fixedPosition||(e.fromNode.plotX-=r*i.fromNode/e.fromNode.degree,e.fromNode.plotY-=t*i.fromNode/e.fromNode.degree),e.toNode.fixedPosition||(e.toNode.plotX+=r*i.toNode/e.toNode.degree,e.toNode.plotY+=t*i.toNode/e.toNode.degree)},integrate:function(e,t){var n=-e.options.friction,i=e.options.maxSpeed,r=(t.plotX+t.dispX-t.prevX)*n;n*=t.plotY+t.dispY-t.prevY;var a=Math.abs,o=a(r)/(r||1);a=a(n)/(n||1),r=o*Math.min(i,Math.abs(r)),n=a*Math.min(i,Math.abs(n)),t.prevX=t.plotX+t.dispX,t.prevY=t.plotY+t.dispY,t.plotX+=r,t.plotY+=n,t.temperature=e.vectorLength({x:r,y:n})},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.5)}},euler:{attractiveForceFunction:function(e,t){return e*e/t},repulsiveForceFunction:function(e,t){return t*t/e},barycenter:function(){var e=this.options.gravitationalConstant,t=this.barycenter.xFactor,n=this.barycenter.yFactor;this.nodes.forEach((function(i){if(!i.fixedPosition){var r=i.getDegree();r*=1+r/2,i.dispX+=(t-i.plotX)*e*r/i.degree,i.dispY+=(n-i.plotY)*e*r/i.degree}}))},repulsive:function(e,t,n,i){e.dispX+=n.x/i*t/e.degree,e.dispY+=n.y/i*t/e.degree},attractive:function(e,t,n,i){var r=e.getMass(),a=n.x/i*t;t*=n.y/i,e.fromNode.fixedPosition||(e.fromNode.dispX-=a*r.fromNode/e.fromNode.degree,e.fromNode.dispY-=t*r.fromNode/e.fromNode.degree),e.toNode.fixedPosition||(e.toNode.dispX+=a*r.toNode/e.toNode.degree,e.toNode.dispY+=t*r.toNode/e.toNode.degree)},integrate:function(e,t){t.dispX+=t.dispX*e.options.friction,t.dispY+=t.dispY*e.options.friction;var n=t.temperature=e.vectorLength({x:t.dispX,y:t.dispY});0!==n&&(t.plotX+=t.dispX/n*Math.min(Math.abs(t.dispX),e.temperature),t.plotY+=t.dispY/n*Math.min(Math.abs(t.dispY),e.temperature))},getK:function(e){return Math.pow(e.box.width*e.box.height/e.nodes.length,.3)}}}})),t(e,"Series/Networkgraph/QuadTree.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],(function(e,t){t=t.extend;var n=e.QuadTreeNode=function(e){this.box=e,this.boxSize=Math.min(e.width,e.height),this.nodes=[],this.body=this.isInternal=!1,this.isEmpty=!0};t(n.prototype,{insert:function(e,t){this.isInternal?this.nodes[this.getBoxPosition(e)].insert(e,t-1):(this.isEmpty=!1,this.body?t?(this.isInternal=!0,this.divideBox(),!0!==this.body&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,t-1),this.body=!0),this.nodes[this.getBoxPosition(e)].insert(e,t-1)):((t=new n({top:e.plotX,left:e.plotY,width:.1,height:.1})).body=e,t.isInternal=!1,this.nodes.push(t)):(this.isInternal=!1,this.body=e))},updateMassAndCenter:function(){var e=0,t=0,n=0;this.isInternal?(this.nodes.forEach((function(i){i.isEmpty||(e+=i.mass,t+=i.plotX*i.mass,n+=i.plotY*i.mass)})),t/=e,n/=e):this.body&&(e=this.body.mass,t=this.body.plotX,n=this.body.plotY),this.mass=e,this.plotX=t,this.plotY=n},divideBox:function(){var e=this.box.width/2,t=this.box.height/2;this.nodes[0]=new n({left:this.box.left,top:this.box.top,width:e,height:t}),this.nodes[1]=new n({left:this.box.left+e,top:this.box.top,width:e,height:t}),this.nodes[2]=new n({left:this.box.left+e,top:this.box.top+t,width:e,height:t}),this.nodes[3]=new n({left:this.box.left,top:this.box.top+t,width:e,height:t})},getBoxPosition:function(e){var t=e.plotY<this.box.top+this.box.height/2;return e.plotX<this.box.left+this.box.width/2?t?0:3:t?1:2}}),e=e.QuadTree=function(e,t,i,r){this.box={left:e,top:t,width:i,height:r},this.maxDepth=25,this.root=new n(this.box,"0"),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()},t(e.prototype,{insertNodes:function(e){e.forEach((function(e){this.root.insert(e,this.maxDepth)}),this)},visitNodeRecursive:function(e,t,n){var i;e||(e=this.root),e===this.root&&t&&(i=t(e)),!1!==i&&(e.nodes.forEach((function(e){if(e.isInternal){if(t&&(i=t(e)),!1===i)return;this.visitNodeRecursive(e,t,n)}else e.body&&t&&t(e.body);n&&n(e)}),this),e===this.root&&n&&n(e))},calculateMassAndCenter:function(){this.visitNodeRecursive(null,null,(function(e){e.updateMassAndCenter()}))}})})),t(e,"Series/Networkgraph/Layouts.js",[e["Core/Chart/Chart.js"],e["Core/Animation/AnimationUtilities.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=t.setAnimation;t=i.addEvent;var a=i.clamp,o=i.defined,s=i.extend,l=i.isFunction,u=i.pick;n.layouts={"reingold-fruchterman":function(){}},s(n.layouts["reingold-fruchterman"].prototype,{init:function(e){this.options=e,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=n.networkgraphIntegrations[e.integration],this.enableSimulation=e.enableSimulation,this.attractiveForce=u(e.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=u(e.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=e.approximation},updateSimulation:function(e){this.enableSimulation=u(e,this.options.enableSimulation)},start:function(){var e=this.series,t=this.options;this.currentStep=0,this.forces=e[0]&&e[0].forces||[],this.chart=e[0]&&e[0].chart,this.initialRendering&&(this.initPositions(),e.forEach((function(e){e.finishedAnimating=!0,e.render()}))),this.setK(),this.resetSimulation(t),this.enableSimulation&&this.step()},step:function(){var e=this,t=this.series;e.currentStep++,"barnes-hut"===e.approximation&&(e.createQuadTree(),e.quadTree.calculateMassAndCenter()),e.forces.forEach((function(t){e[t+"Forces"](e.temperature)})),e.applyLimits(e.temperature),e.temperature=e.coolDown(e.startTemperature,e.diffTemperature,e.currentStep),e.prevSystemTemperature=e.systemTemperature,e.systemTemperature=e.getSystemTemperature(),e.enableSimulation&&(t.forEach((function(e){e.chart&&e.render()})),e.maxIterations--&&isFinite(e.temperature)&&!e.isStable()?(e.simulation&&n.win.cancelAnimationFrame(e.simulation),e.simulation=n.win.requestAnimationFrame((function(){e.step()}))):e.simulation=!1)},stop:function(){this.simulation&&n.win.cancelAnimationFrame(this.simulation)},setArea:function(e,t,n,i){this.box={left:e,top:t,width:n,height:i}},setK:function(){this.k=this.options.linkLength||this.integration.getK(this)},addElementsToCollection:function(e,t){e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)}))},removeElementFromCollection:function(e,t){-1!==(e=t.indexOf(e))&&t.splice(e,1)},clear:function(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()},resetSimulation:function(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()},restartSimulation:function(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))},setMaxIterations:function(e){this.maxIterations=u(e,this.options.maxIterations)},setTemperature:function(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)},setDiffTemperature:function(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)},setInitialRendering:function(e){this.initialRendering=e},createQuadTree:function(){this.quadTree=new n.QuadTree(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)},initPositions:function(){var e=this.options.initialPositions;l(e)?(e.call(this),this.nodes.forEach((function(e){o(e.prevX)||(e.prevX=e.plotX),o(e.prevY)||(e.prevY=e.plotY),e.dispX=0,e.dispY=0}))):"circle"===e?this.setCircularPositions():this.setRandomPositions()},setCircularPositions:function(){function e(t){t.linksFrom.forEach((function(t){o[t.toNode.id]||(o[t.toNode.id]=!0,a.push(t.toNode),e(t.toNode))}))}var t=this.box,n=this.nodes,i=2*Math.PI/(n.length+1),r=n.filter((function(e){return 0===e.linksTo.length})),a=[],o={},s=this.options.initialPositionRadius;r.forEach((function(t){a.push(t),e(t)})),a.length?n.forEach((function(e){-1===a.indexOf(e)&&a.push(e)})):a=n,a.forEach((function(e,n){e.plotX=e.prevX=u(e.plotX,t.width/2+s*Math.cos(n*i)),e.plotY=e.prevY=u(e.plotY,t.height/2+s*Math.sin(n*i)),e.dispX=0,e.dispY=0}))},setRandomPositions:function(){function e(e){return(e=e*e/Math.PI)-Math.floor(e)}var t=this.box,n=this.nodes,i=n.length+1;n.forEach((function(n,r){n.plotX=n.prevX=u(n.plotX,t.width*e(r)),n.plotY=n.prevY=u(n.plotY,t.height*e(i+r)),n.dispX=0,n.dispY=0}))},force:function(e){this.integration[e].apply(this,Array.prototype.slice.call(arguments,1))},barycenterForces:function(){this.getBarycenter(),this.force("barycenter")},getBarycenter:function(){var e=0,t=0,n=0;return this.nodes.forEach((function(i){t+=i.plotX*i.mass,n+=i.plotY*i.mass,e+=i.mass})),this.barycenter={x:t,y:n,xFactor:t/e,yFactor:n/e}},barnesHutApproximation:function(e,t){var n=this.getDistXY(e,t),i=this.vectorLength(n);if(e!==t&&0!==i)if(t.isInternal)if(t.boxSize/i<this.options.theta&&0!==i){var r=this.repulsiveForce(i,this.k);this.force("repulsive",e,r*t.mass,n,i);var a=!1}else a=!0;else r=this.repulsiveForce(i,this.k),this.force("repulsive",e,r*t.mass,n,i);return a},repulsiveForces:function(){var e=this;"barnes-hut"===e.approximation?e.nodes.forEach((function(t){e.quadTree.visitNodeRecursive(null,(function(n){return e.barnesHutApproximation(t,n)}))})):e.nodes.forEach((function(t){e.nodes.forEach((function(n){if(t!==n&&!t.fixedPosition){var i=e.getDistXY(t,n),r=e.vectorLength(i);if(0!==r){var a=e.repulsiveForce(r,e.k);e.force("repulsive",t,a*n.mass,i,r)}}}))}))},attractiveForces:function(){var e,t,n,i=this;i.links.forEach((function(r){r.fromNode&&r.toNode&&(e=i.getDistXY(r.fromNode,r.toNode),0!==(t=i.vectorLength(e))&&(n=i.attractiveForce(t,i.k),i.force("attractive",r,n,e,t)))}))},applyLimits:function(){var e=this;e.nodes.forEach((function(t){t.fixedPosition||(e.integration.integrate(e,t),e.applyLimitBox(t,e.box),t.dispX=0,t.dispY=0)}))},applyLimitBox:function(e,t){var n=e.radius;e.plotX=a(e.plotX,t.left+n,t.width-n),e.plotY=a(e.plotY,t.top+n,t.height-n)},coolDown:function(e,t,n){return e-t*n},isStable:function(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||0>=this.temperature},getSystemTemperature:function(){return this.nodes.reduce((function(e,t){return e+t.temperature}),0)},vectorLength:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},getDistR:function(e,t){return e=this.getDistXY(e,t),this.vectorLength(e)},getDistXY:function(e,t){var n=e.plotX-t.plotX;return{x:n,y:e=e.plotY-t.plotY,absX:Math.abs(n),absY:Math.abs(e)}}}),t(e,"predraw",(function(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach((function(e){e.stop()}))})),t(e,"render",(function(){function e(e){e.maxIterations--&&isFinite(e.temperature)&&!e.isStable()&&!e.enableSimulation&&(e.beforeStep&&e.beforeStep(),e.step(),n=!1,t=!0)}var t=!1;if(this.graphLayoutsLookup){for(r(!1,this),this.graphLayoutsLookup.forEach((function(e){e.start()}));!n;){var n=!0;this.graphLayoutsLookup.forEach(e)}t&&this.series.forEach((function(e){e&&e.layout&&e.render()}))}})),t(e,"beforePrint",(function(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach((function(e){e.updateSimulation(!1)})),this.redraw())})),t(e,"afterPrint",(function(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach((function(e){e.updateSimulation()})),this.redraw()}))})),t(e,"Series/PackedBubble/PackedBubbleComposition.js",[e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],(function(e,t,n){var i=t.layouts["reingold-fruchterman"],r=n.addEvent,a=n.extendClass,o=n.pick;e.prototype.getSelectedParentNodes=function(){var e=[];return this.series.forEach((function(t){t.parentNode&&t.parentNode.selected&&e.push(t.parentNode)})),e},t.networkgraphIntegrations.packedbubble={repulsiveForceFunction:function(e,t,n,i){return Math.min(e,(n.marker.radius+i.marker.radius)/2)},barycenter:function(){var e,t,n=this,i=n.options.gravitationalConstant,r=n.box,a=n.nodes;a.forEach((function(o){n.options.splitSeries&&!o.isParentNode?(e=o.series.parentNode.plotX,t=o.series.parentNode.plotY):(e=r.width/2,t=r.height/2),o.fixedPosition||(o.plotX-=(o.plotX-e)*i/(o.mass*Math.sqrt(a.length)),o.plotY-=(o.plotY-t)*i/(o.mass*Math.sqrt(a.length)))}))},repulsive:function(e,t,n,i){var r=t*this.diffTemperature/e.mass/e.degree;t=n.x*r,n=n.y*r,e.fixedPosition||(e.plotX+=t,e.plotY+=n),i.fixedPosition||(i.plotX-=t,i.plotY-=n)},integrate:t.networkgraphIntegrations.verlet.integrate,getK:t.noop},t.layouts.packedbubble=a(i,{beforeStep:function(){this.options.marker&&this.series.forEach((function(e){e&&e.calculateParentRadius()}))},isStable:function(){var e=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&1e-5>e||0>=this.temperature},setCircularPositions:function(){var e,t,n=this,i=n.box,r=n.nodes,a=2*Math.PI/(r.length+1),s=n.options.initialPositionRadius;r.forEach((function(r,l){n.options.splitSeries&&!r.isParentNode?(e=r.series.parentNode.plotX,t=r.series.parentNode.plotY):(e=i.width/2,t=i.height/2),r.plotX=r.prevX=o(r.plotX,e+s*Math.cos(r.index||l*a)),r.plotY=r.prevY=o(r.plotY,t+s*Math.sin(r.index||l*a)),r.dispX=0,r.dispY=0}))},repulsiveForces:function(){var e,t,n,i=this,r=i.options.bubblePadding;i.nodes.forEach((function(a){a.degree=a.mass,a.neighbours=0,i.nodes.forEach((function(o){e=0,a===o||a.fixedPosition||!i.options.seriesInteraction&&a.series!==o.series||(n=i.getDistXY(a,o),0>(t=i.vectorLength(n)-(a.marker.radius+o.marker.radius+r))&&(a.degree+=.01,a.neighbours++,e=i.repulsiveForce(-t/Math.sqrt(a.neighbours),i.k,a,o)),i.force("repulsive",a,e*o.mass,n,o,t))}))}))},applyLimitBox:function(e){if(this.options.splitSeries&&!e.isParentNode&&this.options.parentNodeLimit){var t=this.getDistXY(e,e.series.parentNode),n=e.series.parentNodeRadius-e.marker.radius-this.vectorLength(t);0>n&&n>-2*e.marker.radius&&(e.plotX-=.01*t.x,e.plotY-=.01*t.y)}i.prototype.applyLimitBox.apply(this,arguments)}}),r(e,"beforeRedraw",(function(){this.allDataPoints&&delete this.allDataPoints}))})),t(e,"Series/PackedBubble/PackedBubbleSeries.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Series/PackedBubble/PackedBubblePoint.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i,r){var a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=e.parse,s=i.series,l=i.seriesTypes.bubble,u=r.addEvent,c=r.clamp,h=r.defined,d=r.extend,p=r.fireEvent,f=r.isArray,m=r.isNumber,v=r.merge,y=r.pick,g=t.dragNodesMixin;return e=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.chart=void 0,t.data=void 0,t.layout=void 0,t.options=void 0,t.points=void 0,t.xData=void 0,t}return a(n,e),n.prototype.accumulateAllPoints=function(e){var t,n,i=e.chart,r=[];for(t=0;t<i.series.length;t++)if((e=i.series[t]).is("packedbubble")&&e.visible||!i.options.chart.ignoreHiddenSeries)for(n=0;n<e.yData.length;n++)r.push([null,null,e.yData[n],e.index,n,{id:n,marker:{radius:0}}]);return r},n.prototype.addLayout=function(){var e=this.options.layoutAlgorithm,n=this.chart.graphLayoutsStorage,i=this.chart.graphLayoutsLookup,r=this.chart.options.chart;n||(this.chart.graphLayoutsStorage=n={},this.chart.graphLayoutsLookup=i=[]);var a=n[e.type];a||(e.enableSimulation=h(r.forExport)?!r.forExport:e.enableSimulation,n[e.type]=a=new t.layouts[e.type],a.init(e),i.splice(a.index,0,a)),this.layout=a,this.points.forEach((function(e){e.mass=2,e.degree=1,e.collisionNmb=1})),a.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),a.addElementsToCollection([this],a.series),a.addElementsToCollection(this.points,a.nodes)},n.prototype.addSeriesLayout=function(){var e=this.options.layoutAlgorithm,n=this.chart.graphLayoutsStorage,i=this.chart.graphLayoutsLookup,r=v(e,e.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),a=n[e.type+"-series"];a||(n[e.type+"-series"]=a=new t.layouts[e.type],a.init(r),i.splice(a.index,0,a)),this.parentNodeLayout=a,this.createParentNodes()},n.prototype.calculateParentRadius=function(){var e=this.seriesBox();this.parentNodeRadius=c(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,e?Math.max(Math.sqrt(Math.pow(e.width,2)+Math.pow(e.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)},n.prototype.calculateZExtremes=function(){var e=this.options.zMin,t=this.options.zMax,n=1/0,i=-1/0;return e&&t?[e,t]:(this.chart.series.forEach((function(e){e.yData.forEach((function(e){h(e)&&(e>i&&(i=e),e<n&&(n=e))}))})),[e=y(e,n),t=y(t,i)])},n.prototype.checkOverlap=function(e,t){var n=e[0]-t[0],i=e[1]-t[1];return-.001>Math.sqrt(n*n+i*i)-Math.abs(e[2]+t[2])},n.prototype.createParentNodes=function(){var e,t=this,n=t.chart,i=t.parentNodeLayout,r=t.parentNode,a=t.pointClass,s=t.layout.options,l={radius:t.parentNodeRadius,lineColor:t.color,fillColor:o(t.color).brighten(.4).get()};s.parentNodeOptions&&(l=v(s.parentNodeOptions.marker||{},l)),t.parentNodeMass=0,t.points.forEach((function(e){t.parentNodeMass+=Math.PI*Math.pow(e.marker.radius,2)})),t.calculateParentRadius(),i.nodes.forEach((function(n){n.seriesIndex===t.index&&(e=!0)})),i.setArea(0,0,n.plotWidth,n.plotHeight),e||(r||(r=(new a).init(this,{mass:t.parentNodeRadius/2,marker:l,dataLabels:{inside:!1},states:{normal:{marker:l},hover:{marker:l}},dataLabelOnNull:!0,degree:t.parentNodeRadius,isParentNode:!0,seriesIndex:t.index})),t.parentNode&&(r.plotX=t.parentNode.plotX,r.plotY=t.parentNode.plotY),t.parentNode=r,i.addElementsToCollection([t],i.series),i.addElementsToCollection([r],i.nodes))},n.prototype.deferLayout=function(){var e=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),e.splitSeries&&this.addSeriesLayout())},n.prototype.destroy=function(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach((function(e){e.removeElementFromCollection(this,e.series)}),this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),s.prototype.destroy.apply(this,arguments)},n.prototype.drawDataLabels=function(){var e=this.options.dataLabels.textPath,t=this.points;s.prototype.drawDataLabels.apply(this,arguments),this.parentNode&&(this.parentNode.formatPrefix="parentNode",this.points=[this.parentNode],this.options.dataLabels.textPath=this.options.dataLabels.parentNodeTextPath,s.prototype.drawDataLabels.apply(this,arguments),this.points=t,this.options.dataLabels.textPath=e)},n.prototype.drawGraph=function(){if(this.layout&&this.layout.options.splitSeries){var e=this.chart,t=this.layout.options.parentNodeOptions.marker,n={fill:t.fillColor||o(this.color).brighten(.4).get(),opacity:t.fillOpacity,stroke:t.lineColor||this.color,"stroke-width":y(t.lineWidth,this.options.lineWidth)};this.parentNodesGroup||(this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,e.seriesGroup),this.group.attr({zIndex:2})),this.calculateParentRadius(),t=v({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},n),this.parentNode.graphic||(this.graph=this.parentNode.graphic=e.renderer.symbol(n.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(t)}},n.prototype.drawTracker=function(){var t=this.parentNode;if(e.prototype.drawTracker.call(this),t){var n=f(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[];t.graphic&&(t.graphic.element.point=t),n.forEach((function(e){e.div?e.div.point=t:e.element.point=t}))}},n.prototype.getPointRadius=function(){var e,t,n,i,r=this,a=r.chart,o=r.options,s=o.useSimulation,l=Math.min(a.plotWidth,a.plotHeight),u={},h=[],d=a.allDataPoints;["minSize","maxSize"].forEach((function(e){var t=parseInt(o[e],10),n=/%$/.test(o[e]);u[e]=n?l*t/100:t*Math.sqrt(d.length)})),a.minRadius=e=u.minSize/Math.sqrt(d.length),a.maxRadius=t=u.maxSize/Math.sqrt(d.length);var p=s?r.calculateZExtremes():[e,t];(d||[]).forEach((function(a,o){n=s?c(a[2],p[0],p[1]):a[2],0===(i=r.getRadius(p[0],p[1],e,t,n))&&(i=null),d[o][2]=i,h.push(i)})),r.radii=h},n.prototype.init=function(){return s.prototype.init.apply(this,arguments),this.eventsToUnbind.push(u(this,"updatedData",(function(){this.chart.series.forEach((function(e){e.type===this.type&&(e.isDirty=!0)}),this)}))),this},n.prototype.onMouseUp=function(e){if(e.fixedPosition&&!e.removed){var t,n=this.layout,i=this.parentNodeLayout;i&&n.options.dragBetweenSeries&&i.nodes.forEach((function(i){e&&e.marker&&i!==e.series.parentNode&&(t=n.getDistXY(e,i),0>n.vectorLength(t)-i.marker.radius-e.marker.radius&&(i.series.addPoint(v(e.options,{plotX:e.plotX,plotY:e.plotY}),!1),n.removeElementFromCollection(e,n.nodes),e.remove()))})),g.onMouseUp.apply(this,arguments)}},n.prototype.placeBubbles=function(e){var t,n=this.checkOverlap,i=this.positionBubble,r=[],a=1,o=0,s=0,l=[];if(e=e.sort((function(e,t){return t[2]-e[2]})),e.length){if(r.push([[0,0,e[0][2],e[0][3],e[0][4]]]),1<e.length)for(r.push([[0,0-e[1][2]-e[0][2],e[1][2],e[1][3],e[1][4]]]),t=2;t<e.length;t++)e[t][2]=e[t][2]||1,n(l=i(r[a][o],r[a-1][s],e[t]),r[a][0])?(r.push([]),s=0,r[a+1].push(i(r[a][o],r[a][0],e[t])),a++,o=0):1<a&&r[a-1][s+1]&&n(l,r[a-1][s+1])?(s++,r[a].push(i(r[a][o],r[a-1][s],e[t])),o++):(o++,r[a].push(l));this.chart.stages=r,this.chart.rawPositions=[].concat.apply([],r),this.resizeRadius(),l=this.chart.rawPositions}return l},n.prototype.pointAttribs=function(e,t){var n=this.options,i=n.marker;return e&&e.isParentNode&&n.layoutAlgorithm&&n.layoutAlgorithm.parentNodeOptions&&(i=n.layoutAlgorithm.parentNodeOptions.marker),n=i.fillOpacity,e=s.prototype.pointAttribs.call(this,e,t),1!==n&&(e["fill-opacity"]=n),e},n.prototype.positionBubble=function(e,t,n){var i=Math.sqrt,r=Math.asin,a=Math.acos,o=Math.pow,s=Math.abs;return i=i(o(e[0]-t[0],2)+o(e[1]-t[1],2)),a=a((o(i,2)+o(n[2]+t[2],2)-o(n[2]+e[2],2))/(2*(n[2]+t[2])*i)),r=r(s(e[0]-t[0])/i),e=(0>e[1]-t[1]?0:Math.PI)+a+r*(0>(e[0]-t[0])*(e[1]-t[1])?1:-1),[t[0]+(t[2]+n[2])*Math.sin(e),t[1]-(t[2]+n[2])*Math.cos(e),n[2],n[3],n[4]]},n.prototype.render=function(){var e=[];s.prototype.render.apply(this,arguments),this.options.dataLabels.allowOverlap||(this.data.forEach((function(t){f(t.dataLabels)&&t.dataLabels.forEach((function(t){e.push(t)}))})),this.options.useSimulation&&this.chart.hideOverlappingLabels(e))},n.prototype.resizeRadius=function(){var e,t,n,i=this.chart,r=i.rawPositions,a=Math.min,o=Math.max,s=i.plotLeft,l=i.plotTop,u=i.plotHeight,c=i.plotWidth,h=e=Number.POSITIVE_INFINITY,d=t=Number.NEGATIVE_INFINITY;for(n=0;n<r.length;n++){var p=r[n][2];h=a(h,r[n][0]-p),d=o(d,r[n][0]+p),e=a(e,r[n][1]-p),t=o(t,r[n][1]+p)}if(n=[d-h,t-e],a=a.apply([],[(c-s)/n[0],(u-l)/n[1]]),1e-10<Math.abs(a-1)){for(n=0;n<r.length;n++)r[n][2]*=a;this.placeBubbles(r)}else i.diffY=u/2+l-e-(t-e)/2,i.diffX=c/2+s-h-(d-h)/2},n.prototype.seriesBox=function(){var e,t=this.chart,n=Math.max,i=Math.min,r=[t.plotLeft,t.plotLeft+t.plotWidth,t.plotTop,t.plotTop+t.plotHeight];return this.data.forEach((function(t){h(t.plotX)&&h(t.plotY)&&t.marker.radius&&(e=t.marker.radius,r[0]=i(r[0],t.plotX-e),r[1]=n(r[1],t.plotX+e),r[2]=i(r[2],t.plotY-e),r[3]=n(r[3],t.plotY+e))})),m(r.width/r.height)?r:null},n.prototype.setVisible=function(){var e=this;s.prototype.setVisible.apply(e,arguments),e.parentNodeLayout&&e.graph?e.visible?(e.graph.show(),e.parentNode.dataLabel&&e.parentNode.dataLabel.show()):(e.graph.hide(),e.parentNodeLayout.removeElementFromCollection(e.parentNode,e.parentNodeLayout.nodes),e.parentNode.dataLabel&&e.parentNode.dataLabel.hide()):e.layout&&(e.visible?e.layout.addElementsToCollection(e.points,e.layout.nodes):e.points.forEach((function(t){e.layout.removeElementFromCollection(t,e.layout.nodes)})))},n.prototype.translate=function(){var e,t=this.chart,n=this.data,i=this.index,r=this.options.useSimulation;if(this.processedXData=this.xData,this.generatePoints(),h(t.allDataPoints)||(t.allDataPoints=this.accumulateAllPoints(this),this.getPointRadius()),r)var a=t.allDataPoints;else a=this.placeBubbles(t.allDataPoints),this.options.draggable=!1;for(e=0;e<a.length;e++)if(a[e][3]===i){var o=n[a[e][4]],s=y(a[e][2],void 0);r||(o.plotX=a[e][0]-t.plotLeft+t.diffX,o.plotY=a[e][1]-t.plotTop+t.diffY),m(s)&&(o.marker=d(o.marker,{radius:s,width:2*s,height:2*s}),o.radius=s)}r&&this.deferLayout(),p(this,"afterTranslate")},n.defaultOptions=v(l.defaultOptions,{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){var e=this.series.chart.numberFormatter,t=this.point.value;return m(t)?e(t,-1):""},parentNodeFormatter:function(){return this.name},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981}}),n}(l),d(e.prototype,{alignDataLabel:s.prototype.alignDataLabel,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,isCartesian:!1,noSharedTooltip:!0,onMouseDown:g.onMouseDown,onMouseMove:g.onMouseMove,pointArrayMap:["value"],pointClass:n,pointValKey:"value",redrawHalo:g.redrawHalo,requireSorting:!1,searchPoint:t.noop,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"]}),i.registerSeriesType("packedbubble",e),e})),t(e,"Series/Polygon/PolygonSeries.js",[e["Core/Globals.js"],e["Core/Legend/LegendSymbol.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();e=e.noop;var a=n.series,o=n.seriesTypes,s=o.area,l=o.line,u=o.scatter;o=i.extend;var c=i.merge;return i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return r(t,e),t.prototype.getGraphPath=function(){for(var e=l.prototype.getGraphPath.call(this),t=e.length+1;t--;)(t===e.length||"M"===e[t][0])&&0<t&&e.splice(t,0,["Z"]);return this.areaPath=e},t.prototype.drawGraph=function(){this.options.fillColor=this.color,s.prototype.drawGraph.call(this)},t.defaultOptions=c(u.defaultOptions,{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0}),t}(u),o(i.prototype,{type:"polygon",drawLegendSymbol:t.drawRectangle,drawTracker:a.prototype.drawTracker,setStackedPoints:e}),n.registerSeriesType("polygon",i),i})),t(e,"Core/Axis/WaterfallAxis.js",[e["Extensions/Stacking.js"],e["Core/Utilities.js"]],(function(e,t){var n,i=t.addEvent,r=t.objectEach;return function(t){function n(){var e=this.waterfall.stacks;e&&(e.changed=!1,delete e.alreadyChanged)}function a(){var e=this.options.stackLabels;e&&e.enabled&&this.waterfall.stacks&&this.waterfall.renderStackTotals()}function o(){for(var e=this.axes,t=this.series,n=t.length;n--;)t[n].options.stacking&&(e.forEach((function(e){e.isXAxis||(e.waterfall.stacks.changed=!0)})),n=0)}function s(){this.waterfall||(this.waterfall=new l(this))}var l=function(){function t(e){this.axis=e,this.stacks={changed:!1}}return t.prototype.renderStackTotals=function(){var t=this.axis,n=t.waterfall.stacks,i=t.stacking&&t.stacking.stackTotalGroup,a=new e(t,t.options.stackLabels,!1,0,void 0);this.dummyStackItem=a,r(n,(function(t){r(t,(function(t){a.total=t.stackTotal,t.label&&(a.label=t.label),e.prototype.render.call(a,i),t.label=a.label,delete a.label}))})),a.total=null},t}();t.Composition=l,t.compose=function(e,t){i(e,"init",s),i(e,"afterBuildStacks",n),i(e,"afterRender",a),i(t,"beforeRedraw",o)}}(n||(n={})),n})),t(e,"Series/Waterfall/WaterfallPoint.js",[e["Series/Column/ColumnSeries.js"],e["Core/Series/Point.js"],e["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=n.isNumber;return function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}return i(n,e),n.prototype.getClassName=function(){var e=t.prototype.getClassName.call(this);return this.isSum?e+=" highcharts-sum":this.isIntermediateSum&&(e+=" highcharts-intermediate-sum"),e},n.prototype.isValid=function(){return r(this.y)||this.isSum||!!this.isIntermediateSum},n}(e.prototype.pointClass)})),t(e,"Series/Waterfall/WaterfallSeries.js",[e["Core/Axis/Axis.js"],e["Core/Chart/Chart.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"],e["Core/Axis/WaterfallAxis.js"],e["Series/Waterfall/WaterfallPoint.js"]],(function(e,t,n,i,r,a){var o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=n.seriesTypes,l=s.column,u=s.line,c=i.arrayMax,h=i.arrayMin,d=i.correctFloat;s=i.extend;var p=i.isNumber,f=i.merge,m=i.objectEach,v=i.pick;return i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chart=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t.stackedYNeg=void 0,t.stackedYPos=void 0,t.stackKey=void 0,t.xData=void 0,t.yAxis=void 0,t.yData=void 0,t}return o(t,e),t.prototype.generatePoints=function(){var e;l.prototype.generatePoints.apply(this);var t=0;for(e=this.points.length;t<e;t++){var n=this.points[t],i=this.processedYData[t];(n.isIntermediateSum||n.isSum)&&(n.y=d(i))}},t.prototype.translate=function(){var e=this.options,t=this.yAxis,n=v(e.minPointLength,5),i=n/2,r=e.threshold||0,a=r,o=r;e=e.stacking;var s=t.waterfall.stacks[this.stackKey];l.prototype.translate.apply(this);for(var u=this.points,c=0;c<u.length;c++){var h=u[c],d=this.processedYData[c],f=h.shapeArgs;if(f&&p(d)){var m=[0,d],y=h.y;if(e){if(s){if(m=s[c],"overlap"===e){var g=m.stackState[m.stateIndex--];g=0<=y?g:g-y,Object.hasOwnProperty.call(m,"absolutePos")&&delete m.absolutePos,Object.hasOwnProperty.call(m,"absoluteNeg")&&delete m.absoluteNeg}else 0<=y?(g=m.threshold+m.posTotal,m.posTotal-=y):(g=m.threshold+m.negTotal,m.negTotal-=y,g-=y),!m.posTotal&&Object.hasOwnProperty.call(m,"absolutePos")&&(m.posTotal=m.absolutePos,delete m.absolutePos),!m.negTotal&&Object.hasOwnProperty.call(m,"absoluteNeg")&&(m.negTotal=m.absoluteNeg,delete m.absoluteNeg);h.isSum||(m.connectorThreshold=m.threshold+m.stackTotal),t.reversed?(d=0<=y?g-y:g+y,y=g):(d=g,y=g-y),h.below=d<=r,f.y=t.translate(d,!1,!0,!1,!0)||0,f.height=Math.abs(f.y-(t.translate(y,!1,!0,!1,!0)||0)),(y=t.waterfall.dummyStackItem)&&(y.x=c,y.label=s[c].label,y.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[c],this.stackedYPos[c]))}}else g=Math.max(a,a+y)+m[0],f.y=t.translate(g,!1,!0,!1,!0)||0,h.isSum?(f.y=t.translate(m[1],!1,!0,!1,!0)||0,f.height=Math.min(t.translate(m[0],!1,!0,!1,!0)||0,t.len)-f.y,h.below=m[1]<=r):h.isIntermediateSum?(0<=y?(d=m[1]+o,y=o):(d=o,y=m[1]+o),t.reversed&&(d^=y,d^=y^=d),f.y=t.translate(d,!1,!0,!1,!0)||0,f.height=Math.abs(f.y-Math.min(t.translate(y,!1,!0,!1,!0)||0,t.len)),o+=m[1],h.below=d<=r):(f.height=0<d?(t.translate(a,!1,!0,!1,!0)||0)-f.y:(t.translate(a,!1,!0,!1,!0)||0)-(t.translate(a-d,!1,!0,!1,!0)||0),a+=d,h.below=a<r),0>f.height&&(f.y+=f.height,f.height*=-1);h.plotY=f.y=Math.round(f.y||0)-this.borderWidth%2/2,f.height=Math.max(Math.round(f.height||0),.001),h.yBottom=f.y+f.height,f.height<=n&&!h.isNull?(f.height=n,f.y-=i,h.plotY=f.y,h.minPointLengthOffset=0>h.y?-i:i):(h.isNull&&(f.width=0),h.minPointLengthOffset=0),y=h.plotY+(h.negative?f.height:0),h.below&&(h.plotY+=f.height),h.tooltipPos&&(this.chart.inverted?h.tooltipPos[0]=t.len-y:h.tooltipPos[1]=y),h.isInside=this.isPointInside(h)}}},t.prototype.processData=function(t){var n,i,r,a,o,s=this.options,l=this.yData,u=s.data,c=l.length,h=s.threshold||0;for(o=i=n=r=a=0;o<c;o++){var p=l[o],f=u&&u[o]?u[o]:{};"sum"===p||f.isSum?l[o]=d(i):"intermediateSum"===p||f.isIntermediateSum?(l[o]=d(n),n=0):(i+=p,n+=p),r=Math.min(i,r),a=Math.max(i,a)}e.prototype.processData.call(this,t),s.stacking||(this.dataMin=r+h,this.dataMax=a)},t.prototype.toYData=function(e){return e.isSum?"sum":e.isIntermediateSum?"intermediateSum":e.y},t.prototype.updateParallelArrays=function(t,n){e.prototype.updateParallelArrays.call(this,t,n),"sum"!==this.yData[0]&&"intermediateSum"!==this.yData[0]||(this.yData[0]=null)},t.prototype.pointAttribs=function(e,t){var n=this.options.upColor;return n&&!e.options.color&&(e.color=0<e.y?n:null),delete(e=l.prototype.pointAttribs.call(this,e,t)).dashstyle,e},t.prototype.getGraphPath=function(){return[["M",0,0]]},t.prototype.getCrispPath=function(){var e,t=this.data,n=this.yAxis,i=t.length,r=Math.round(this.graph.strokeWidth())%2/2,a=Math.round(this.borderWidth)%2/2,o=this.xAxis.reversed,s=this.yAxis.reversed,l=this.options.stacking,u=[];for(e=1;e<i;e++){var c=t[e].shapeArgs,h=t[e-1],d=t[e-1].shapeArgs,p=n.waterfall.stacks[this.stackKey],f=0<h.y?-d.height:0;p&&d&&c&&(p=p[e-1],l?(p=p.connectorThreshold,f=Math.round(n.translate(p,0,1,0,1)+(s?f:0))-r):f=d.y+h.minPointLengthOffset+a-r,u.push(["M",(d.x||0)+(o?0:d.width||0),f],["L",(c.x||0)+(o&&c.width||0),f])),d&&u.length&&(!l&&0>h.y&&!s||0<h.y&&s)&&((h=u[u.length-2])&&"number"===typeof h[2]&&(h[2]+=d.height||0),(h=u[u.length-1])&&"number"===typeof h[2]&&(h[2]+=d.height||0))}return u},t.prototype.drawGraph=function(){u.prototype.drawGraph.call(this),this.graph.attr({d:this.getCrispPath()})},t.prototype.setStackedPoints=function(){function e(e,t,n,i){if(x)for(;n<x;n++)v.stackState[n]+=i;else v.stackState[0]=e,x=v.stackState.length;v.stackState.push(v.stackState[x-1]+t)}var t,n,i,r=this.options,a=this.yAxis.waterfall.stacks,o=r.threshold,s=o||0,l=s,u=this.stackKey,c=this.xData,h=c.length;this.yAxis.stacking.usePercentage=!1;var d=n=i=s;if(this.visible||!this.chart.options.chart.ignoreHiddenSeries){var p=a.changed;(t=a.alreadyChanged)&&0>t.indexOf(u)&&(p=!0),a[u]||(a[u]={}),t=a[u];for(var f=0;f<h;f++){var m=c[f];t[m]&&!p||(t[m]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:p&&t[m]?t[m].label:void 0});var v=t[m],y=this.yData[f];0<=y?v.posTotal+=y:v.negTotal+=y;var g=r.data[f];m=v.absolutePos=v.posTotal;var _=v.absoluteNeg=v.negTotal;v.stackTotal=m+_;var x=v.stackState.length;g&&g.isIntermediateSum?(e(i,n,0,i),i=n,n=o,s^=l,s^=l^=s):g&&g.isSum?(e(o,d,x),s=o):(e(s,y,0,d),g&&(d+=y,n+=y)),v.stateIndex++,v.threshold=s,s+=v.stackTotal}a.changed=!1,a.alreadyChanged||(a.alreadyChanged=[]),a.alreadyChanged.push(u)}},t.prototype.getExtremes=function(){var e=this.options.stacking;if(e){var t=this.yAxis;t=t.waterfall.stacks;var n=this.stackedYNeg=[],i=this.stackedYPos=[];return m(t[this.stackKey],"overlap"===e?function(e){n.push(h(e.stackState)),i.push(c(e.stackState))}:function(e){n.push(e.negTotal+e.threshold),i.push(e.posTotal+e.threshold)}),{dataMin:h(n),dataMax:c(i)}}return{dataMin:this.dataMin,dataMax:this.dataMax}},t.defaultOptions=f(l.defaultOptions,{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}),t}(l),s(i.prototype,{getZonesGraphs:u.prototype.getZonesGraphs,pointValKey:"y",showLine:!0,pointClass:a}),n.registerSeriesType("waterfall",i),r.compose(e,t),i})),t(e,"Extensions/Polar.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Extensions/Pane.js"],e["Core/Pointer.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Utilities.js"]],(function(e,t,n,i,r,a,o,s,l){var u=e.animObject;o=o.seriesTypes;var c=l.addEvent,h=l.defined,d=l.find,p=l.isNumber,f=l.pick,m=l.splat,v=l.uniqueKey;e=l.wrap;var y=a.prototype;r=r.prototype,y.searchPointByAngle=function(e){var t=this.chart,n=this.xAxis.pane.center;return this.searchKDTree({clientX:180+-180/Math.PI*Math.atan2(e.chartX-n[0]-t.plotLeft,e.chartY-n[1]-t.plotTop)})},y.getConnectors=function(e,t,n,i){var r=i?1:0,a=0<=t&&t<=e.length-1?t:0>t?e.length-1+t:0;t=0>a-1?e.length-(1+r):a-1,r=a+1>e.length-1?r:a+1;var o=e[t];r=e[r];var s=o.plotX;o=o.plotY;var l=r.plotX,u=r.plotY;s=(1.5*(r=e[a].plotX)+s)/2.5,o=(1.5*(a=e[a].plotY)+o)/2.5,l=(1.5*r+l)/2.5;var c=(1.5*a+u)/2.5;u=Math.sqrt(Math.pow(s-r,2)+Math.pow(o-a,2));var h=Math.sqrt(Math.pow(l-r,2)+Math.pow(c-a,2));return s=Math.atan2(o-a,s-r),c=Math.PI/2+(s+Math.atan2(c-a,l-r))/2,Math.abs(s-c)>Math.PI/2&&(c-=Math.PI),s=r+Math.cos(c)*u,o=a+Math.sin(c)*u,r={rightContX:l=r+Math.cos(Math.PI+c)*h,rightContY:c=a+Math.sin(Math.PI+c)*h,leftContX:s,leftContY:o,plotX:r,plotY:a},n&&(r.prevPointCont=this.getConnectors(e,t,!1,i)),r},y.toXY=function(e){var t=this.chart,n=this.xAxis,i=this.yAxis,r=e.plotX,a=e.plotY,o=e.series,s=t.inverted,l=e.y,u=s?r:i.len-a;s&&o&&!o.isRadialBar&&(e.plotY=a="number"===typeof l&&i.translate(l)||0),e.rectPlotX=r,e.rectPlotY=a,i.center&&(u+=i.center[3]/2),p(a)&&(i=s?i.postTranslate(a,u):n.postTranslate(r,u),e.plotX=e.polarPlotX=i.x-t.plotLeft,e.plotY=e.polarPlotY=i.y-t.plotTop),this.kdByAngle?(0>(t=(r/Math.PI*180+n.pane.options.startAngle)%360)&&(t+=360),e.clientX=t):e.clientX=e.plotX},o.spline&&(e(o.spline.prototype,"getPointSpline",(function(e,t,n,i){return this.chart.polar?i?(t=(e=this.getConnectors(t,i,!0,this.connectEnds)).prevPointCont&&e.prevPointCont.rightContX,n=e.prevPointCont&&e.prevPointCont.rightContY,e=["C",p(t)?t:e.plotX,p(n)?n:e.plotY,p(e.leftContX)?e.leftContX:e.plotX,p(e.leftContY)?e.leftContY:e.plotY,e.plotX,e.plotY]):e=["M",n.plotX,n.plotY]:e=e.call(this,t,n,i),e})),o.areasplinerange&&(o.areasplinerange.prototype.getPointSpline=o.spline.prototype.getPointSpline)),c(a,"afterTranslate",(function(){var e=this.chart;if(e.polar&&this.xAxis){if((this.kdByAngle=e.tooltip&&e.tooltip.shared)?this.searchPoint=this.searchPointByAngle:this.options.findNearestPointBy="xy",!this.preventPostTranslate)for(var t=this.points,i=t.length;i--;)this.toXY(t[i]),!e.hasParallelCoordinates&&!this.yAxis.reversed&&t[i].y<this.yAxis.min&&(t[i].isNull=!0);this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(c(this,"afterRender",(function(){if(e.polar){var t=this.yAxis.pane.center;this.clipCircle?this.clipCircle.animate({x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2}):this.clipCircle=e.renderer.clipCircle(t[0],t[1],t[2]/2,t[3]/2),this.group.clip(this.clipCircle),this.setClip=n.noop}}))))}}),{order:2}),e(o.line.prototype,"getGraphPath",(function(e,t){var n,i=this;if(this.chart.polar){for(t=t||this.points,n=0;n<t.length;n++)if(!t[n].isNull){var r=n;break}if(!1!==this.options.connectEnds&&"undefined"!==typeof r){this.connectEnds=!0,t.splice(t.length,0,t[r]);var a=!0}t.forEach((function(e){"undefined"===typeof e.polarPlotY&&i.toXY(e)}))}return n=e.apply(this,[].slice.call(arguments,1)),a&&t.pop(),n}));var g=function(e,t){var i,r,a,o,s=this,l=this.chart,c=this.options.animation,h=this.group,d=this.markerGroup,p=this.xAxis&&this.xAxis.center,m=l.plotLeft,v=l.plotTop;if(l.polar){if(s.isRadialBar)t||(s.startAngleRad=f(s.translatedThreshold,s.xAxis.startAngleRad),n.seriesTypes.pie.prototype.animate.call(s,t));else if(l.renderer.isSVG)if(c=u(c),s.is("column")){if(!t){var y=p[3]/2;s.points.forEach((function(e){i=e.graphic,a=(r=e.shapeArgs)&&r.r,o=r&&r.innerR,i&&r&&(i.attr({r:y,innerR:y}),i.animate({r:a,innerR:o},s.options.animation))}))}}else t?(e={translateX:p[0]+m,translateY:p[1]+v,scaleX:.001,scaleY:.001},h.attr(e),d&&d.attr(e)):(e={translateX:m,translateY:v,scaleX:1,scaleY:1},h.animate(e,c),d&&d.animate(e,c))}else e.call(this,t)};if(e(y,"animate",g),o.column){var _=o.arearange.prototype;(o=o.column.prototype).polarArc=function(e,t,n,i){var r=this.xAxis.center,a=this.yAxis.len,o=r[3]/2;return t=a-t+o,e=a-f(e,a)+o,this.yAxis.reversed&&(0>t&&(t=o),0>e&&(e=o)),{x:r[0],y:r[1],r:t,innerR:e,start:n,end:i}},e(o,"animate",g),e(o,"translate",(function(e){var t=this.options,n=t.stacking,i=this.chart,r=this.xAxis,a=this.yAxis,o=a.reversed,s=a.center,u=r.startAngleRad,c=r.endAngleRad-u;if(this.preventPostTranslate=!0,e.call(this),r.isRadial){r=(e=this.points).length;var d=a.translate(a.min),f=a.translate(a.max);if(t=t.threshold||0,i.inverted&&p(t)){var m=a.translate(t);h(m)&&(0>m?m=0:m>c&&(m=c),this.translatedThreshold=m+u)}for(;r--;){var v=(t=e[r]).barX,y=t.x,g=t.y;if(t.shapeType="arc",i.inverted){if(t.plotY=a.translate(g),n&&a.stacking){if(g=a.stacking.stacks[(0>g?"-":"")+this.stackKey],this.visible&&g&&g[y]&&!t.isNull){var _=g[y].points[this.getStackIndicator(void 0,y,this.index).key],x=a.translate(_[0]);_=a.translate(_[1]),h(x)&&(x=l.clamp(x,0,c))}}else x=m,_=t.plotY;x>_&&(_=[x,x=_][0]),o?_>d?_=d:x<f?x=f:(x>d||_<f)&&(x=_=c):x<d?x=d:_>f?_=f:(_<d||x>f)&&(x=_=0),a.min>a.max&&(x=_=o?c:0),x+=u,_+=u,s&&(t.barX=v+=s[3]/2),y=Math.max(v,0),g=Math.max(v+t.pointWidth,0),t.shapeArgs={x:s&&s[0],y:s&&s[1],r:g,innerR:y,start:x,end:_},t.opacity=x===_?0:void 0,t.plotY=(h(this.translatedThreshold)&&(x<this.translatedThreshold?x:_))-u}else x=v+u,t.shapeArgs=this.polarArc(t.yBottom,t.plotY,x,x+t.pointWidth);this.toXY(t),i.inverted?(v=a.postTranslate(t.rectPlotY,v+t.pointWidth/2),t.tooltipPos=[v.x-i.plotLeft,v.y-i.plotTop]):t.tooltipPos=[t.plotX,t.plotY],s&&(t.ttBelow=t.plotY>s[1])}}})),o.findAlignments=function(e,t){return null===t.align&&(t.align=20<e&&160>e?"left":200<e&&340>e?"right":"center"),null===t.verticalAlign&&(t.verticalAlign=45>e||315<e?"bottom":135<e&&225>e?"top":"middle"),t},_&&(_.findAlignments=o.findAlignments),e(o,"alignDataLabel",(function(e,t,n,i,r,a){var o=this.chart,s=f(i.inside,!!this.options.stacking);o.polar?(e=t.rectPlotX/Math.PI*180,o.inverted?(this.forceDL=o.isInsidePlot(t.plotX,Math.round(t.plotY)),s&&t.shapeArgs?(r=t.shapeArgs,r={x:(r=this.yAxis.postTranslate(((r.start||0)+(r.end||0))/2-this.xAxis.startAngleRad,t.barX+t.pointWidth/2)).x-o.plotLeft,y:r.y-o.plotTop}):t.tooltipPos&&(r={x:t.tooltipPos[0],y:t.tooltipPos[1]}),i.align=f(i.align,"center"),i.verticalAlign=f(i.verticalAlign,"middle")):this.findAlignments&&(i=this.findAlignments(e,i)),y.alignDataLabel.call(this,t,n,i,r,a),this.isRadialBar&&t.shapeArgs&&t.shapeArgs.start===t.shapeArgs.end?n.hide():n.show()):e.call(this,t,n,i,r,a)}))}e(r,"getCoordinates",(function(e,t){var n=this.chart,i={xAxis:[],yAxis:[]};return n.polar?n.axes.forEach((function(e){var r=e.isXAxis,a=e.center;if("colorAxis"!==e.coll){var o=t.chartX-a[0]-n.plotLeft;a=t.chartY-a[1]-n.plotTop,i[r?"xAxis":"yAxis"].push({axis:e,value:e.translate(r?Math.PI-Math.atan2(o,a):Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),!0)})}})):i=e.call(this,t),i})),s.prototype.clipCircle=function(e,t,n,i){var r=v(),a=this.createElement("clipPath").attr({id:r}).add(this.defs);return(e=i?this.arc(e,t,n,i,0,2*Math.PI).add(a):this.circle(e,t,n).add(a)).id=r,e.clipPath=a,e},c(t,"getAxes",(function(){this.pane||(this.pane=[]),this.options.pane=m(this.options.pane),this.options.pane.forEach((function(e){new i(e,this)}),this)})),c(t,"afterDrawChartBox",(function(){this.pane.forEach((function(e){e.render()}))})),c(a,"afterInit",(function(){var e=this.chart;e.inverted&&e.polar&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0))})),e(t.prototype,"get",(function(e,t){return d(this.pane||[],(function(e){return e.options.id===t}))||e.call(this,t)}))})),t(e,"masters/highcharts-more.src.js",[e["Core/Globals.js"],e["Core/Axis/RadialAxis.js"],e["Series/Bubble/BubbleSeries.js"]],(function(e,t,n){t.compose(e.Axis,e.Tick),n.compose(e.Chart,e.Legend,e.Series)}))},e.exports?(a.default=a,e.exports=a):(i=[n(9718)],void 0===(r=function(e){return a(e),a.Highcharts=e,a}.apply(t,i))||(e.exports=r))},9718:function(e,t,n){var i,r,a;r="undefined"!==typeof window?window:this,a=function(e){function t(t,n,i,r){t.hasOwnProperty(n)||(t[n]=r.apply(null,i),"function"===typeof CustomEvent&&e.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:n,module:t[n]}})))}var n={};return t(n,"Core/Globals.js",[],(function(){var t;return function(t){t.SVG_NS="http://www.w3.org/2000/svg",t.product="Highcharts",t.version="10.1.0",t.win="undefined"!==typeof e?e:{},t.doc=t.win.document,t.svg=t.doc&&t.doc.createElementNS&&!!t.doc.createElementNS(t.SVG_NS,"svg").createSVGRect,t.userAgent=t.win.navigator&&t.win.navigator.userAgent||"",t.isChrome=-1!==t.userAgent.indexOf("Chrome"),t.isFirefox=-1!==t.userAgent.indexOf("Firefox"),t.isMS=/(edge|msie|trident)/i.test(t.userAgent)&&!t.win.opera,t.isSafari=!t.isChrome&&-1!==t.userAgent.indexOf("Safari"),t.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(t.userAgent),t.isWebKit=-1!==t.userAgent.indexOf("AppleWebKit"),t.deg2rad=2*Math.PI/360,t.hasBidiBug=t.isFirefox&&4>parseInt(t.userAgent.split("Firefox/")[1],10),t.hasTouch=!!t.win.TouchEvent,t.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],t.noop=function(){},t.supportsPassiveEvents=function(){var e=!1;if(!t.isMS){var n=Object.defineProperty({},"passive",{get:function(){e=!0}});t.win.addEventListener&&t.win.removeEventListener&&(t.win.addEventListener("testPassive",t.noop,n),t.win.removeEventListener("testPassive",t.noop,n))}return e}(),t.charts=[],t.dateFormats={},t.seriesTypes={},t.symbolSizes={},t.chartCount=0}(t||(t={})),t})),t(n,"Core/Utilities.js",[n["Core/Globals.js"]],(function(e){function t(n,i,r,a){var o=i?"Highcharts error":"Highcharts warning";32===n&&(n=o+": Deprecated member");var s=l(n),u=s?o+" #"+n+": www.highcharts.com/errors/"+n+"/":n.toString();if("undefined"!==typeof a){var c="";s&&(u+="?"),v(a,(function(e,t){c+="\n - "+t+": "+e,s&&(u+=encodeURI(t)+"="+encodeURI(e))})),u+=c}g(e,"displayError",{chart:r,code:n,message:u,params:a},(function(){if(i)throw Error(u);b.console&&-1===t.messages.indexOf(u)&&console.warn(u)})),t.messages.push(u)}function n(e,t){return parseInt(e,t||10)}function i(e){return"string"===typeof e}function r(e){return"[object Array]"===(e=Object.prototype.toString.call(e))||"[object Array Iterator]"===e}function a(e,t){return!!e&&"object"===typeof e&&(!t||!r(e))}function o(e){return a(e)&&"number"===typeof e.nodeType}function s(e){var t=e&&e.constructor;return!(!a(e,!0)||o(e)||!t||!t.name||"Object"===t.name)}function l(e){return"number"===typeof e&&!isNaN(e)&&1/0>e&&-1/0<e}function u(e){return"undefined"!==typeof e&&null!==e}function c(e,t,n){var r,a=i(t)&&!u(n),o=function(t,n){u(t)?e.setAttribute(n,t):a?(r=e.getAttribute(n))||"class"!==n||(r=e.getAttribute(n+"Name")):e.removeAttribute(n)};return i(t)?o(n,t):v(t,o),r}function h(e,t){var n;for(n in e||(e={}),t)e[n]=t[n];return e}function d(){for(var e=arguments,t=e.length,n=0;n<t;n++){var i=e[n];if("undefined"!==typeof i&&null!==i)return i}}function p(t,n){e.isMS&&!e.svg&&n&&u(n.opacity)&&(n.filter="alpha(opacity="+100*n.opacity+")"),h(t.style,n)}function f(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function m(e,t){return 1e14<e?e:parseFloat(e.toPrecision(t||14))}function v(e,t,n){for(var i in e)Object.hasOwnProperty.call(e,i)&&t.call(n||e[i],e[i],i,e)}function y(t,n,i){function r(n,i){var r=t.removeEventListener||e.removeEventListenerPolyfill;r&&r.call(t,n,i,!1)}function a(e){var i;if(t.nodeName){if(n){var a={};a[n]=!0}else a=e;v(a,(function(t,n){if(e[n])for(i=e[n].length;i--;)r(n,e[n][i].fn)}))}}var o="function"===typeof t&&t.prototype||t;if(Object.hasOwnProperty.call(o,"hcEvents")){var s=o.hcEvents;n?(o=s[n]||[],i?(s[n]=o.filter((function(e){return i!==e.fn})),r(n,i)):(a(s),s[n]=[])):(a(s),delete o.hcEvents)}}function g(t,n,i,r){if(i=i||{},x.createEvent&&(t.dispatchEvent||t.fireEvent&&t!==e)){var a=x.createEvent("Events");a.initEvent(n,!0,!0),i=h(a,i),t.dispatchEvent?t.dispatchEvent(i):t.fireEvent(n,i)}else if(t.hcEvents){i.target||h(i,{preventDefault:function(){i.defaultPrevented=!0},target:t,type:n}),a=[];for(var o=t,s=!1;o.hcEvents;)Object.hasOwnProperty.call(o,"hcEvents")&&o.hcEvents[n]&&(a.length&&(s=!0),a.unshift.apply(a,o.hcEvents[n])),o=Object.getPrototypeOf(o);s&&a.sort((function(e,t){return e.order-t.order})),a.forEach((function(e){!1===e.fn.call(t,i)&&i.preventDefault()}))}r&&!i.defaultPrevented&&r.call(t,i)}var _=e.charts,x=e.doc,b=e.win;(t||(t={})).messages=[],Math.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)};var w=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){var n,i=e.length;for(n=0;n<i;n++)if(t(e[n],n))return e[n]};v({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},(function(n,i){e[i]=function(e){var r;return t(32,!1,void 0,((r={})["Highcharts."+i]="use Array."+n,r)),Array.prototype[n].apply(e,[].slice.call(arguments,1))}}));var k,S=function(){var e=Math.random().toString(36).substring(2,9)+"-",t=0;return function(){return"highcharts-"+(k?"":e)+t++}}();return b.jQuery&&(b.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0])return t[0]?(new(e[i(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):_[c(this[0],"data-highcharts-chart")]}),w={addEvent:function(t,n,i,r){void 0===r&&(r={});var a="function"===typeof t&&t.prototype||t;Object.hasOwnProperty.call(a,"hcEvents")||(a.hcEvents={}),a=a.hcEvents,e.Point&&t instanceof e.Point&&t.series&&t.series.chart&&(t.series.chart.runTrackerClick=!0);var o=t.addEventListener||e.addEventListenerPolyfill;return o&&o.call(t,n,i,!!e.supportsPassiveEvents&&{passive:void 0===r.passive?-1!==n.indexOf("touch"):r.passive,capture:!1}),a[n]||(a[n]=[]),a[n].push({fn:i,order:"number"===typeof r.order?r.order:1/0}),a[n].sort((function(e,t){return e.order-t.order})),function(){y(t,n,i)}},arrayMax:function(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n},arrayMin:function(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n},attr:c,clamp:function(e,t,n){return e>t?e<n?e:n:t},cleanRecursively:function e(t,n){var i={};return v(t,(function(r,o){a(t[o],!0)&&!t.nodeType&&n[o]?(r=e(t[o],n[o]),Object.keys(r).length&&(i[o]=r)):(a(t[o])||t[o]!==n[o]||o in t&&!(o in n))&&(i[o]=t[o])})),i},clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){u(e)&&clearTimeout(e)})),correctFloat:m,createElement:function(e,t,n,i,r){return e=x.createElement(e),t&&h(e,t),r&&p(e,{padding:"0",border:"none",margin:"0"}),n&&p(e,n),i&&i.appendChild(e),e},css:p,defined:u,destroyObjectProperties:function(e,t){v(e,(function(n,i){n&&n!==t&&n.destroy&&n.destroy(),delete e[i]}))},discardElement:function(e){e&&e.parentElement&&e.parentElement.removeChild(e)},erase:function(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}},error:t,extend:h,extendClass:function(e,t){var n=function(){};return h(n.prototype=new e,t),n},find:w,fireEvent:g,getMagnitude:f,getNestedProperty:function(e,t){for(e=e.split(".");e.length&&u(t);){var n=e.shift();if("undefined"===typeof n||"__proto__"===n)return;if(!u(t=t[n])||"function"===typeof t||"number"===typeof t.nodeType||t===b)return}return t},getStyle:function i(r,a,o){var s=e.getStyle||i;if("width"===a)return a=Math.min(r.offsetWidth,r.scrollWidth),(o=r.getBoundingClientRect&&r.getBoundingClientRect().width)<a&&o>=a-1&&(a=Math.floor(o)),Math.max(0,a-(s(r,"padding-left",!0)||0)-(s(r,"padding-right",!0)||0));if("height"===a)return Math.max(0,Math.min(r.offsetHeight,r.scrollHeight)-(s(r,"padding-top",!0)||0)-(s(r,"padding-bottom",!0)||0));if(b.getComputedStyle||t(27,!0),r=b.getComputedStyle(r,void 0)){var l=r.getPropertyValue(a);d(o,"opacity"!==a)&&(l=n(l))}return l},inArray:function(e,n,i){return t(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),n.indexOf(e,i)},isArray:r,isClass:s,isDOMElement:o,isFunction:function(e){return"function"===typeof e},isNumber:l,isObject:a,isString:i,keys:function(e){return t(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(e)},merge:function(){var e,t=arguments,n={},i=function e(t,n){return"object"!==typeof t&&(t={}),v(n,(function(i,r){"__proto__"!==r&&"constructor"!==r&&(!a(i,!0)||s(i)||o(i)?t[r]=n[r]:t[r]=e(t[r]||{},i))})),t};!0===t[0]&&(n=t[1],t=Array.prototype.slice.call(t,2));var r=t.length;for(e=0;e<r;e++)n=i(n,t[e]);return n},normalizeTickInterval:function(e,t,n,i,r){var a=e,o=e/(n=d(n,f(e)));for(t||(t=r?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===i&&(1===n?t=t.filter((function(e){return 0===e%1})):.1>=n&&(t=[1/n]))),i=0;i<t.length&&(a=t[i],!(r&&a*n>=e||!r&&o<=(t[i]+(t[i+1]||t[i]))/2));i++);return m(a*n,-Math.round(Math.log(.001)/Math.LN10))},objectEach:v,offset:function(e){var t=x.documentElement;return{top:(e=e.parentElement||e.parentNode?e.getBoundingClientRect():{top:0,left:0,width:0,height:0}).top+(b.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(b.pageXOffset||t.scrollLeft)-(t.clientLeft||0),width:e.width,height:e.height}},pad:function(e,t,n){return Array((t||2)+1-String(e).replace("-","").length).join(n||"0")+e},pick:d,pInt:n,relativeLength:function(e,t,n){return/%$/.test(e)?t*parseFloat(e)/100+(n||0):parseFloat(e)},removeEvent:y,splat:function(e){return r(e)?e:[e]},stableSort:function(e,t){var n,i,r=e.length;for(i=0;i<r;i++)e[i].safeI=i;for(e.sort((function(e,i){return 0===(n=t(e,i))?e.safeI-i.safeI:n})),i=0;i<r;i++)delete e[i].safeI},syncTimeout:function(e,t,n){return 0<t?setTimeout(e,t,n):(e.call(0,n),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:S,useSerialIds:function(e){return k=d(e,k)},wrap:function(e,t,n){var i=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments),t=arguments,r=this;return r.proceed=function(){i.apply(r,arguments.length?arguments:t)},e.unshift(i),e=n.apply(this,e),r.proceed=null,e}}},w})),t(n,"Core/Chart/ChartDefaults.js",[],(function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},zoomBySingleTouch:!1,width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}})),t(n,"Core/Color/Color.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(e,t){var n=t.isNumber,i=t.merge,r=t.pInt;return t=function(){function t(n){this.rgba=[NaN,NaN,NaN,NaN],this.input=n;var i=e.Color;return i&&i!==t?new i(n):this instanceof t?void this.init(n):new t(n)}return t.parse=function(e){return e?new t(e):t.None},t.prototype.init=function(e){var n;if("object"===typeof e&&"undefined"!==typeof e.stops)this.stops=e.stops.map((function(e){return new t(e[1])}));else if("string"===typeof e){if(this.input=e=t.names[e.toLowerCase()]||e,"#"===e.charAt(0)){var i=e.length,r=parseInt(e.substr(1),16);7===i?n=[(16711680&r)>>16,(65280&r)>>8,255&r,1]:4===i&&(n=[(3840&r)>>4|(3840&r)>>8,(240&r)>>4|240&r,(15&r)<<4|15&r,1])}if(!n)for(r=t.parsers.length;r--&&!n;){var a=t.parsers[r];(i=a.regex.exec(e))&&(n=a.parse(i))}}n&&(this.rgba=n)},t.prototype.get=function(e){var t=this.input,r=this.rgba;if("object"===typeof t&&"undefined"!==typeof this.stops){var a=i(t);return a.stops=[].slice.call(a.stops),this.stops.forEach((function(t,n){a.stops[n]=[a.stops[n][0],t.get(e)]})),a}return r&&n(r[0])?"rgb"===e||!e&&1===r[3]?"rgb("+r[0]+","+r[1]+","+r[2]+")":"a"===e?""+r[3]:"rgba("+r.join(",")+")":t},t.prototype.brighten=function(e){var t=this.rgba;if(this.stops)this.stops.forEach((function(t){t.brighten(e)}));else if(n(e)&&0!==e)for(var i=0;3>i;i++)t[i]+=r(255*e),0>t[i]&&(t[i]=0),255<t[i]&&(t[i]=255);return this},t.prototype.setOpacity=function(e){return this.rgba[3]=e,this},t.prototype.tweenTo=function(e,t){var i=this.rgba,r=e.rgba;return n(i[0])&&n(r[0])?((e=1!==r[3]||1!==i[3])?"rgba(":"rgb(")+Math.round(r[0]+(i[0]-r[0])*(1-t))+","+Math.round(r[1]+(i[1]-r[1])*(1-t))+","+Math.round(r[2]+(i[2]-r[2])*(1-t))+(e?","+(r[3]+(i[3]-r[3])*(1-t)):"")+")":e.input||"none"},t.names={white:"#ffffff",black:"#000000"},t.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(e){return[r(e[1]),r(e[2]),r(e[3]),parseFloat(e[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(e){return[r(e[1]),r(e[2]),r(e[3]),1]}}],t.None=new t(""),t}(),t})),t(n,"Core/Color/Palettes.js",[],(function(){return{colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" ")}})),t(n,"Core/Time.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(e,t){var n=e.win,i=t.defined,r=t.error,a=t.extend,o=t.isObject,s=t.merge,l=t.objectEach,u=t.pad,c=t.pick,h=t.splat,d=t.timeUnits,p=e.isSafari&&n.Intl&&n.Intl.DateTimeFormat.prototype.formatRange,f=e.isSafari&&n.Intl&&!n.Intl.DateTimeFormat.prototype.formatRange;return t=function(){function t(e){this.options={},this.variableTimezone=this.useUTC=!1,this.Date=n.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(e)}return t.prototype.get=function(e,t){if(this.variableTimezone||this.timezoneOffset){var n=t.getTime(),i=n-this.getTimezoneOffset(t);return t.setTime(i),e=t["getUTC"+e](),t.setTime(n),e}return this.useUTC?t["getUTC"+e]():t["get"+e]()},t.prototype.set=function(e,t,n){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===e||"Seconds"===e||"Minutes"===e&&0===this.getTimezoneOffset(t)%36e5)return t["setUTC"+e](n);var i=this.getTimezoneOffset(t);return i=t.getTime()-i,t.setTime(i),t["setUTC"+e](n),e=this.getTimezoneOffset(t),i=t.getTime()+e,t.setTime(i)}return this.useUTC||p&&"FullYear"===e?t["setUTC"+e](n):t["set"+e](n)},t.prototype.update=function(e){var t=c(e&&e.useUTC,!0);this.options=e=s(!0,this.options||{},e),this.Date=e.Date||n.Date||Date,this.timezoneOffset=(this.useUTC=t)&&e.timezoneOffset,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=t&&!(!e.getTimezoneOffset&&!e.timezone)},t.prototype.makeTime=function(e,t,n,i,r,a){if(this.useUTC){var o=this.Date.UTC.apply(0,arguments),s=this.getTimezoneOffset(o);o+=s;var l=this.getTimezoneOffset(o);s!==l?o+=l-s:s-36e5!==this.getTimezoneOffset(o-36e5)||f||(o-=36e5)}else o=new this.Date(e,t,c(n,1),c(i,0),c(r,0),c(a,0)).getTime();return o},t.prototype.timezoneOffsetFunction=function(){var e=this,t=this.options,i=t.getTimezoneOffset,a=t.moment||n.moment;if(!this.useUTC)return function(e){return 6e4*new Date(e.toString()).getTimezoneOffset()};if(t.timezone){if(a)return function(e){return 6e4*-a.tz(e,t.timezone).utcOffset()};r(25)}return this.useUTC&&i?function(e){return 6e4*i(e.valueOf())}:function(){return 6e4*(e.timezoneOffset||0)}},t.prototype.dateFormat=function(t,n,r){if(!i(n)||isNaN(n))return e.defaultOptions.lang&&e.defaultOptions.lang.invalidDate||"";t=c(t,"%Y-%m-%d %H:%M:%S");var o=this,s=new this.Date(n),h=this.get("Hours",s),d=this.get("Day",s),p=this.get("Date",s),f=this.get("Month",s),m=this.get("FullYear",s),v=e.defaultOptions.lang,y=v&&v.weekdays,g=v&&v.shortWeekdays;return s=a({a:g?g[d]:y[d].substr(0,3),A:y[d],d:u(p),e:u(p,2," "),w:d,b:v.shortMonths[f],B:v.months[f],m:u(f+1),o:f+1,y:m.toString().substr(2,2),Y:m,H:u(h),k:h,I:u(h%12||12),l:h%12||12,M:u(this.get("Minutes",s)),p:12>h?"AM":"PM",P:12>h?"am":"pm",S:u(s.getSeconds()),L:u(Math.floor(n%1e3),3)},e.dateFormats),l(s,(function(e,i){for(;-1!==t.indexOf("%"+i);)t=t.replace("%"+i,"function"===typeof e?e.call(o,n):e)})),r?t.substr(0,1).toUpperCase()+t.substr(1):t},t.prototype.resolveDTLFormat=function(e){return o(e,!0)?e:{main:(e=h(e))[0],from:e[1],to:e[2]}},t.prototype.getTimeTicks=function(e,t,n,r){var o,s=this,l=[],u={},h=new s.Date(t),p=e.unitRange,f=e.count||1;if(r=c(r,1),i(t)){if(s.set("Milliseconds",h,p>=d.second?0:f*Math.floor(s.get("Milliseconds",h)/f)),p>=d.second&&s.set("Seconds",h,p>=d.minute?0:f*Math.floor(s.get("Seconds",h)/f)),p>=d.minute&&s.set("Minutes",h,p>=d.hour?0:f*Math.floor(s.get("Minutes",h)/f)),p>=d.hour&&s.set("Hours",h,p>=d.day?0:f*Math.floor(s.get("Hours",h)/f)),p>=d.day&&s.set("Date",h,p>=d.month?1:Math.max(1,f*Math.floor(s.get("Date",h)/f))),p>=d.month){s.set("Month",h,p>=d.year?0:f*Math.floor(s.get("Month",h)/f));var m=s.get("FullYear",h)}p>=d.year&&s.set("FullYear",h,m-m%f),p===d.week&&(m=s.get("Day",h),s.set("Date",h,s.get("Date",h)-m+r+(m<r?-7:0))),m=s.get("FullYear",h),r=s.get("Month",h);var v=s.get("Date",h),y=s.get("Hours",h);for(t=h.getTime(),!s.variableTimezone&&s.useUTC||!i(n)||(o=n-t>4*d.month||s.getTimezoneOffset(t)!==s.getTimezoneOffset(n)),t=h.getTime(),h=1;t<n;)l.push(t),t=p===d.year?s.makeTime(m+h*f,0):p===d.month?s.makeTime(m,r+h*f):!o||p!==d.day&&p!==d.week?o&&p===d.hour&&1<f?s.makeTime(m,r,v,y+h*f):t+p*f:s.makeTime(m,r,v+h*f*(p===d.day?1:7)),h++;l.push(t),p<=d.hour&&1e4>l.length&&l.forEach((function(e){0===e%18e5&&"000000000"===s.dateFormat("%H%M%S%L",e)&&(u[e]="day")}))}return l.info=a(e,{higherRanks:u,totalRange:p*f}),l},t.prototype.getDateFormat=function(e,t,n,i){var r=this.dateFormat("%m-%d %H:%M:%S.%L",t),a={millisecond:15,second:12,minute:9,hour:6,day:3},o="millisecond";for(s in d){if(e===d.week&&+this.dateFormat("%w",t)===n&&"00:00:00.000"===r.substr(6)){var s="week";break}if(d[s]>e){s=o;break}if(a[s]&&r.substr(a[s])!=="01-01 00:00:00.000".substr(a[s]))break;"week"!==s&&(o=s)}if(s)var l=this.resolveDTLFormat(i[s]).main;return l},t}(),t})),t(n,"Core/DefaultOptions.js",[n["Core/Chart/ChartDefaults.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Color/Palettes.js"],n["Core/Time.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a){t=t.parse;var o=a.merge,s={colors:i.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:e,title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:n.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:n.isTouchDevice?25:10,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:t("#f7f7f7").setOpacity(.85).get(),borderWidth:1,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"12px",whiteSpace:"nowrap"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}};s.chart.styledMode=!1;var l=new r(o(s.global,s.time));return e={defaultOptions:s,defaultTime:l,getOptions:function(){return s},setOptions:function(e){return o(!0,s,e),(e.time||e.global)&&(n.time?n.time.update(o(s.global,s.time,e.global,e.time)):n.time=l),s}}})),t(n,"Core/Animation/Fx.js",[n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(e,t,n){var i=e.parse,r=t.win,a=n.isNumber,o=n.objectEach;return function(){function e(e,t,n){this.pos=NaN,this.options=t,this.elem=e,this.prop=n}return e.prototype.dSetter=function(){var e=this.paths,t=e&&e[0];e=e&&e[1];var n=this.now||0,i=[];if(1!==n&&t&&e)if(t.length===e.length&&1>n)for(var r=0;r<e.length;r++){for(var o=t[r],s=e[r],l=[],u=0;u<s.length;u++){var c=o[u],h=s[u];a(c)&&a(h)&&("A"!==s[0]||4!==u&&5!==u)?l[u]=c+n*(h-c):l[u]=h}i.push(l)}else i=e;else i=this.toD||[];this.elem.attr("d",i,void 0,!0)},e.prototype.update=function(){var e=this.elem,t=this.prop,n=this.now,i=this.options.step;this[t+"Setter"]?this[t+"Setter"]():e.attr?e.element&&e.attr(t,n,null,!0):e.style[t]=n+this.unit,i&&i.call(e,n,this)},e.prototype.run=function(t,n,i){var a=this,o=a.options,s=function e(t){return!e.stopped&&a.step(t)},l=r.requestAnimationFrame||function(e){setTimeout(e,13)};t!==n||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=t,this.end=n,this.unit=i,this.now=this.start,this.pos=0,s.elem=this.elem,s.prop=this.prop,s()&&1===e.timers.push(s)&&l((function t(){for(var n=0;n<e.timers.length;n++)e.timers[n]()||e.timers.splice(n--,1);e.timers.length&&l(t)}))):(delete o.curAnim[this.prop],o.complete&&0===Object.keys(o.curAnim).length&&o.complete.call(this.elem))},e.prototype.step=function(e){var t=+new Date,n=this.options,i=this.elem,r=n.complete,a=n.duration,s=n.curAnim;if(i.attr&&!i.element)e=!1;else if(e||t>=a+this.startTime){this.now=this.end,this.pos=1,this.update();var l=s[this.prop]=!0;o(s,(function(e){!0!==e&&(l=!1)})),l&&r&&r.call(i),e=!1}else this.pos=n.easing((t-this.startTime)/a),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0;return e},e.prototype.initPath=function(e,t,n){function i(e,t){for(;e.length<d;){var n=e[0],i=t[d-e.length];i&&"M"===n[0]&&(e[0]="C"===i[0]?["C",n[1],n[2],n[1],n[2],n[1],n[2]]:["L",n[1],n[2]]),e.unshift(n),l&&(n=e.pop(),e.push(e[e.length-1],n))}}function r(e,t){for(;e.length<d;)if("C"===(t=e[Math.floor(e.length/u)-1].slice())[0]&&(t[1]=t[5],t[2]=t[6]),l){var n=e[Math.floor(e.length/u)].slice();e.splice(e.length/2,0,t,n)}else e.push(t)}var o=e.startX,s=e.endX;n=n.slice();var l=e.isArea,u=l?2:1;if(!(t=t&&t.slice()))return[n,n];if(o&&s&&s.length){for(e=0;e<o.length;e++){if(o[e]===s[0]){var c=e;break}if(o[0]===s[s.length-o.length+e]){c=e;var h=!0;break}if(o[o.length-1]===s[s.length-o.length+e]){c=o.length-e;break}}"undefined"===typeof c&&(t=[])}if(t.length&&a(c)){var d=n.length+c*u;h?(i(t,n),r(n,t)):(i(n,t),r(t,n))}return[t,n]},e.prototype.fillSetter=function(){e.prototype.strokeSetter.apply(this,arguments)},e.prototype.strokeSetter=function(){this.elem.attr(this.prop,i(this.start).tweenTo(i(this.end),this.pos),void 0,!0)},e.timers=[],e}()})),t(n,"Core/Animation/AnimationUtilities.js",[n["Core/Animation/Fx.js"],n["Core/Utilities.js"]],(function(e,t){function n(e){return l(e)?u({duration:500,defer:0},e):{duration:e?500:0,defer:0}}function i(t,n){for(var i=e.timers.length;i--;)e.timers[i].elem!==t||n&&n!==e.timers[i].prop||(e.timers[i].stopped=!0)}var r=t.defined,a=t.getStyle,o=t.isArray,s=t.isNumber,l=t.isObject,u=t.merge,c=t.objectEach,h=t.pick;return{animate:function(t,n,r){var h,d,p,f="";if(!l(r)){var m=arguments;r={duration:m[2],easing:m[3],complete:m[4]}}s(r.duration)||(r.duration=400),r.easing="function"===typeof r.easing?r.easing:Math[r.easing]||Math.easeInOutSine,r.curAnim=u(n),c(n,(function(s,l){i(t,l),p=new e(t,r,l),d=void 0,"d"===l&&o(n.d)?(p.paths=p.initPath(t,t.pathArray,n.d),p.toD=n.d,h=0,d=1):t.attr?h=t.attr(l):(h=parseFloat(a(t,l))||0,"opacity"!==l&&(f="px")),d||(d=s),"string"===typeof d&&d.match("px")&&(d=d.replace(/px/g,"")),p.run(h,d,f)}))},animObject:n,getDeferredAnimation:function(e,t,i){var a=n(t),o=0,s=0;return(i?[i]:e.series).forEach((function(e){e=n(e.options.animation),o=t&&r(t.defer)?a.defer:Math.max(o,e.duration+e.defer),s=Math.min(a.duration,e.duration)})),e.renderer.forExport&&(o=0),{defer:Math.max(0,o-s),duration:Math.min(o,s)}},setAnimation:function(e,t){t.renderer.globalAnimation=h(e,t.options.chart.animation,!0)},stop:i}})),t(n,"Core/Renderer/HTML/AST.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(e,t){var n=e.SVG_NS,i=t.attr,r=t.createElement,a=t.css,o=t.error,s=t.isFunction,l=t.isString,u=t.objectEach,c=t.splat,h=(t=e.win.trustedTypes)&&s(t.createPolicy)&&t.createPolicy("highcharts",{createHTML:function(e){return e}}),d=h?h.createHTML(""):"";try{var p=!!(new DOMParser).parseFromString(d,"text/html")}catch(f){p=!1}return s=function(){function t(e){this.nodes="string"===typeof e?this.parseMarkup(e):e}return t.filterUserAttributes=function(e){return u(e,(function(n,i){var r=!0;-1===t.allowedAttributes.indexOf(i)&&(r=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(i)&&(r=l(n)&&t.allowedReferences.some((function(e){return 0===n.indexOf(e)}))),r||(o(33,!1,void 0,{"Invalid attribute in config":""+i}),delete e[i])})),e},t.parseStyle=function(e){return e.split(";").reduce((function(e,t){t=t.split(":").map((function(e){return e.trim()}));var n=t.shift();return n&&t.length&&(e[n.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))]=t.join(":")),e}),{})},t.setElementHTML=function(e,n){e.innerHTML=t.emptyHTML,n&&new t(n).addToDOM(e)},t.prototype.addToDOM=function(r){return function r(s,l){var h;return c(s).forEach((function(s){var c=s.tagName,d=s.textContent?e.doc.createTextNode(s.textContent):void 0,p=t.bypassHTMLFiltering;if(c)if("#text"===c)var f=d;else if(-1!==t.allowedTags.indexOf(c)||p){c=e.doc.createElementNS("svg"===c?n:l.namespaceURI||n,c);var m=s.attributes||{};u(s,(function(e,t){"tagName"!==t&&"attributes"!==t&&"children"!==t&&"style"!==t&&"textContent"!==t&&(m[t]=e)})),i(c,p?m:t.filterUserAttributes(m)),s.style&&a(c,s.style),d&&c.appendChild(d),r(s.children||[],c),f=c}else o(33,!1,void 0,{"Invalid tagName in config":c});f&&l.appendChild(f),h=f})),h}(this.nodes,r)},t.prototype.parseMarkup=function(e){var n=[];if(e=e.trim().replace(/ style="/g,' data-style="'),p)e=(new DOMParser).parseFromString(h?h.createHTML(e):e,"text/html");else{var i=r("div");i.innerHTML=e,e={body:i}}var a=function e(n,i){var r=n.nodeName.toLowerCase(),a={tagName:r};if("#text"===r&&(a.textContent=n.textContent||""),r=n.attributes){var o={};[].forEach.call(r,(function(e){"data-style"===e.name?a.style=t.parseStyle(e.value):o[e.name]=e.value})),a.attributes=o}if(n.childNodes.length){var s=[];[].forEach.call(n.childNodes,(function(t){e(t,s)})),s.length&&(a.children=s)}i.push(a)};return[].forEach.call(e.body.childNodes,(function(e){return a(e,n)})),n},t.allowedAttributes="aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill height href id in markerHeight markerWidth offset opacity orient padding paddingLeft paddingRight patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style tableValues result rowspan summary target tabindex text-align textAnchor textLength title type valign width x x1 x2 y y1 y2 zIndex".split(" "),t.allowedReferences="https:// http:// mailto: / ../ ./ #".split(" "),t.allowedTags="a abbr b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text thead tbody tspan td th tr u ul #text".split(" "),t.emptyHTML=d,t.bypassHTMLFiltering=!1,t}(),s})),t(n,"Core/FormatUtilities.js",[n["Core/DefaultOptions.js"],n["Core/Utilities.js"]],(function(e,t){function n(e,t,n,r){e=+e||0,t=+t;var a=i.lang,u=(e.toString().split(".")[1]||"").split("e")[0].length,c=e.toString().split("e"),h=t;if(-1===t)t=Math.min(u,20);else if(o(t)){if(t&&c[1]&&0>c[1]){var d=t+ +c[1];0<=d?(c[0]=(+c[0]).toExponential(d).split("e")[0],t=d):(c[0]=c[0].split(".")[0]||0,e=20>t?(c[0]*Math.pow(10,c[1])).toFixed(t):0,c[1]=0)}}else t=2;d=(Math.abs(c[1]?c[0]:e)+Math.pow(10,-Math.max(t,u)-1)).toFixed(t);var p=3<(u=String(l(d))).length?u.length%3:0;return n=s(n,a.decimalPoint),r=s(r,a.thousandsSep),e=(0>e?"-":"")+(p?u.substr(0,p)+r:""),e=0>+c[1]&&!h?"0":e+u.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+r),t&&(e+=n+d.slice(-t)),c[1]&&0!==+e&&(e+="e"+c[1]),e}var i=e.defaultOptions,r=e.defaultTime,a=t.getNestedProperty,o=t.isNumber,s=t.pick,l=t.pInt;return{dateFormat:function(e,t,n){return r.dateFormat(e,t,n)},format:function(e,t,o){var s="{",l=!1,u=/f$/,c=/\.([0-9])/,h=i.lang,d=o&&o.time||r;o=o&&o.numberFormatter||n;for(var p=[];e;){var f=e.indexOf(s);if(-1===f)break;var m=e.slice(0,f);if(l){if(m=m.split(":"),s=a(m.shift()||"",t),m.length&&"number"===typeof s)if(m=m.join(":"),u.test(m)){var v=parseInt((m.match(c)||["","-1"])[1],10);null!==s&&(s=o(s,v,h.decimalPoint,-1<m.indexOf(",")?h.thousandsSep:""))}else s=d.dateFormat(m,s);p.push(s)}else p.push(m);e=e.slice(f+1),s=(l=!l)?"}":"{"}return p.push(e),p.join("")},numberFormat:n}})),t(n,"Core/Renderer/RendererUtilities.js",[n["Core/Utilities.js"]],(function(e){var t,n=e.clamp,i=e.pick,r=e.stableSort;return function(e){e.distribute=function e(t,a,o){var s,l=t,u=l.reducedLen||a,c=function(e,t){return(t.rank||0)-(e.rank||0)},h=function(e,t){return e.target-t.target},d=!0,p=[],f=0;for(s=t.length;s--;)f+=t[s].size;if(f>u){for(r(t,c),f=s=0;f<=u;)f+=t[s].size,s++;p=t.splice(s-1,t.length)}for(r(t,h),t=t.map((function(e){return{size:e.size,targets:[e.target],align:i(e.align,.5)}}));d;){for(s=t.length;s--;)u=t[s],c=(Math.min.apply(0,u.targets)+Math.max.apply(0,u.targets))/2,u.pos=n(c-u.size*u.align,0,a-u.size);for(s=t.length,d=!1;s--;)0<s&&t[s-1].pos+t[s-1].size>t[s].pos&&(t[s-1].size+=t[s].size,t[s-1].targets=t[s-1].targets.concat(t[s].targets),t[s-1].align=.5,t[s-1].pos+t[s-1].size>a&&(t[s-1].pos=a-t[s-1].size),t.splice(s,1),d=!0)}return l.push.apply(l,p),s=0,t.some((function(t){var n=0;return(t.targets||[]).some((function(){return l[s].pos=t.pos+n,"undefined"!==typeof o&&Math.abs(l[s].pos-l[s].target)>o?(l.slice(0,s+1).forEach((function(e){return delete e.pos})),l.reducedLen=(l.reducedLen||a)-.1*a,l.reducedLen>.1*a&&e(l,a,o),!0):(n+=l[s].size,s++,!1)}))})),r(l,h),l}}(t||(t={})),t})),t(n,"Core/Renderer/SVG/SVGElement.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Renderer/HTML/AST.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r){var a=e.animate,o=e.animObject,s=e.stop,l=i.deg2rad,u=i.doc,c=i.noop,h=i.svg,d=i.SVG_NS,p=i.win,f=r.addEvent,m=r.attr,v=r.createElement,y=r.css,g=r.defined,_=r.erase,x=r.extend,b=r.fireEvent,w=r.isArray,k=r.isFunction,S=r.isNumber,T=r.isString,C=r.merge,E=r.objectEach,M=r.pick,P=r.pInt,A=r.syncTimeout,D=r.uniqueKey;return e=function(){function e(){this.element=void 0,this.onEvents={},this.opacity=1,this.renderer=void 0,this.SVG_NS=d,this.symbolCustomAttribs="x y width height r start end innerR anchorX anchorY rounded".split(" ")}return e.prototype._defaultGetter=function(e){return e=M(this[e+"Value"],this[e],this.element?this.element.getAttribute(e):null,0),/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},e.prototype._defaultSetter=function(e,t,n){n.setAttribute(t,e)},e.prototype.add=function(e){var t=this.renderer,n=this.element;if(e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,"undefined"!==typeof this.textStr&&"text"===this.element.nodeName&&t.buildText(this),this.added=!0,!e||e.handleZ||this.zIndex)var i=this.zIndexSetter();return i||(e?e.element:t.box).appendChild(n),this.onAdd&&this.onAdd(),this},e.prototype.addClass=function(e,t){var n=t?"":this.attr("class")||"";return e=(e||"").split(/ /g).reduce((function(e,t){return-1===n.indexOf(t)&&e.push(t),e}),n?[n]:[]).join(" "),e!==n&&this.attr("class",e),this},e.prototype.afterSetters=function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},e.prototype.align=function(e,t,n){var i,r,a,o={},s=this.renderer,l=s.alignedObjects;e?(this.alignOptions=e,this.alignByTranslate=t,(!n||T(n))&&(this.alignTo=i=n||"renderer",_(l,this),l.push(this),n=void 0)):(e=this.alignOptions,t=this.alignByTranslate,i=this.alignTo),n=M(n,s[i],"scrollablePlotBox"===i?s.plotBox:void 0,s),i=e.align;var u=e.verticalAlign;return s=(n.x||0)+(e.x||0),l=(n.y||0)+(e.y||0),"right"===i?r=1:"center"===i&&(r=2),r&&(s+=(n.width-(e.width||0))/r),o[t?"translateX":"x"]=Math.round(s),"bottom"===u?a=1:"middle"===u&&(a=2),a&&(l+=(n.height-(e.height||0))/a),o[t?"translateY":"y"]=Math.round(l),this[this.placed?"animate":"attr"](o),this.placed=!0,this.alignAttr=o,this},e.prototype.alignSetter=function(e){var t={left:"start",center:"middle",right:"end"};t[e]&&(this.alignValue=e,this.element.setAttribute("text-anchor",t[e]))},e.prototype.animate=function(e,t,n){var i=this,r=o(M(t,this.renderer.globalAnimation,!0));return t=r.defer,M(u.hidden,u.msHidden,u.webkitHidden,!1)&&(r.duration=0),0!==r.duration?(n&&(r.complete=n),A((function(){i.element&&a(i,e,r)}),t)):(this.attr(e,void 0,n||r.complete),E(e,(function(e,t){r.step&&r.step.call(this,e,{prop:t,pos:1,elem:this})}),this)),this},e.prototype.applyTextOutline=function(e){var t=this.element;-1!==e.indexOf("contrast")&&(e=e.replace(/contrast/g,this.renderer.getContrast(t.style.fill)));var n=e.split(" ");if(e=n[n.length-1],(n=n[0])&&"none"!==n&&i.svg){this.fakeTS=!0,this.ySetter=this.xSetter,n=n.replace(/(^[\d\.]+)(.*?)$/g,(function(e,t,n){return 2*Number(t)+n})),this.removeTextOutline();var r=u.createElementNS(d,"tspan");m(r,{class:"highcharts-text-outline",fill:e,stroke:e,"stroke-width":n,"stroke-linejoin":"round"}),[].forEach.call(t.childNodes,(function(e){var t=e.cloneNode(!0);t.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((function(e){return t.removeAttribute(e)})),r.appendChild(t)}));var a=u.createElementNS(d,"tspan");a.textContent="\u200b",["x","y"].forEach((function(e){var n=t.getAttribute(e);n&&a.setAttribute(e,n)})),r.appendChild(a),t.insertBefore(r,t.firstChild)}},e.prototype.attr=function(e,t,n,i){var r,a,o,l=this.element,u=this.symbolCustomAttribs,c=this;if("string"===typeof e&&"undefined"!==typeof t){var h=e;(e={})[h]=t}return"string"===typeof e?c=(this[e+"Getter"]||this._defaultGetter).call(this,e,l):(E(e,(function(t,n){a=!1,i||s(this,n),this.symbolName&&-1!==u.indexOf(n)&&(r||(this.symbolAttr(e),r=!0),a=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),a||((o=this[n+"Setter"]||this._defaultSetter).call(this,t,n,l),!this.styledMode&&this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,t,o))}),this),this.afterSetters()),n&&n.call(this),c},e.prototype.clip=function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":"none")},e.prototype.crisp=function(e,t){t=t||e.strokeWidth||0;var n=Math.round(t)%2/2;return e.x=Math.floor(e.x||this.x||0)+n,e.y=Math.floor(e.y||this.y||0)+n,e.width=Math.floor((e.width||this.width||0)-2*n),e.height=Math.floor((e.height||this.height||0)-2*n),g(e.strokeWidth)&&(e.strokeWidth=t),e},e.prototype.complexColor=function(e,t,i){var r,a,o,s,l,u,c,h,d,p,f,m=this.renderer,v=[];b(this.renderer,"complexColor",{args:arguments},(function(){if(e.radialGradient?a="radialGradient":e.linearGradient&&(a="linearGradient"),a){if(o=e[a],l=m.gradients,u=e.stops,d=i.radialReference,w(o)&&(e[a]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===a&&d&&!g(o.gradientUnits)&&(s=o,o=C(o,m.getRadialAttr(d,s),{gradientUnits:"userSpaceOnUse"})),E(o,(function(e,t){"id"!==t&&v.push(t,e)})),E(u,(function(e){v.push(e)})),v=v.join(","),l[v])p=l[v].attr("id");else{o.id=p=D();var y=l[v]=m.createElement(a).attr(o).add(m.defs);y.radAttr=s,y.stops=[],u.forEach((function(e){0===e[1].indexOf("rgba")?(r=n.parse(e[1]),c=r.get("rgb"),h=r.get("a")):(c=e[1],h=1),e=m.createElement("stop").attr({offset:e[0],"stop-color":c,"stop-opacity":h}).add(y),y.stops.push(e)}))}f="url("+m.url+"#"+p+")",i.setAttribute(t,f),i.gradient=v,e.toString=function(){return f}}}))},e.prototype.css=function(e){var t=this.styles,n={},i=this.element,r=!t;if(e.color&&(e.fill=e.color),t&&E(e,(function(e,i){t&&t[i]!==e&&(n[i]=e,r=!0)})),r){if(t&&(e=x(t,n)),null===e.width||"auto"===e.width)delete this.textWidth;else if("text"===i.nodeName.toLowerCase()&&e.width)var a=this.textWidth=P(e.width);this.styles=e,a&&!h&&this.renderer.forExport&&delete e.width;var o=C(e);i.namespaceURI===this.SVG_NS&&["textOutline","textOverflow","width"].forEach((function(e){return o&&delete o[e]})),y(i,o),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),e.textOutline&&this.applyTextOutline(e.textOutline))}return this},e.prototype.dashstyleSetter=function(e){var t=this["stroke-width"];if("inherit"===t&&(t=1),e=e&&e.toLowerCase()){var n=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(e=n.length;e--;)n[e]=""+P(n[e])*M(t,NaN);e=n.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",e)}},e.prototype.destroy=function(){var e=this,t=e.element||{},n=e.renderer,i=t.ownerSVGElement,r=n.isSVG&&"SPAN"===t.nodeName&&e.parentGroup||void 0;if(t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,s(e),e.clipPath&&i){var a=e.clipPath;[].forEach.call(i.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(e){-1<e.getAttribute("clip-path").indexOf(a.element.id)&&e.removeAttribute("clip-path")})),e.clipPath=a.destroy()}if(e.stops){for(i=0;i<e.stops.length;i++)e.stops[i].destroy();e.stops.length=0,e.stops=void 0}for(e.safeRemoveChild(t),n.styledMode||e.destroyShadows();r&&r.div&&0===r.div.childNodes.length;)t=r.parentGroup,e.safeRemoveChild(r.div),delete r.div,r=t;e.alignTo&&_(n.alignedObjects,e),E(e,(function(t,n){e[n]&&e[n].parentGroup===e&&e[n].destroy&&e[n].destroy(),delete e[n]}))},e.prototype.destroyShadows=function(){(this.shadows||[]).forEach((function(e){this.safeRemoveChild(e)}),this),this.shadows=void 0},e.prototype.destroyTextPath=function(e,t){var n=e.getElementsByTagName("text")[0];if(n){if(n.removeAttribute("dx"),n.removeAttribute("dy"),t.element.setAttribute("id",""),this.textPathWrapper&&n.getElementsByTagName("textPath").length){for(e=this.textPathWrapper.element.childNodes;e.length;)n.appendChild(e[0]);n.removeChild(this.textPathWrapper.element)}}else(e.getAttribute("dx")||e.getAttribute("dy"))&&(e.removeAttribute("dx"),e.removeAttribute("dy"));this.textPathWrapper&&(this.textPathWrapper=this.textPathWrapper.destroy())},e.prototype.dSetter=function(e,t,n){w(e)&&("string"===typeof e[0]&&(e=this.renderer.pathToSegments(e)),this.pathArray=e,e=e.reduce((function(e,t,n){return t&&t.join?(n?e+" ":"")+t.join(" "):(t||"").toString()}),"")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),this[t]!==e&&(n.setAttribute(t,e),this[t]=e)},e.prototype.fadeOut=function(e){var t=this;t.animate({opacity:0},{duration:M(e,150),complete:function(){t.attr({y:-9999}).hide()}})},e.prototype.fillSetter=function(e,t,n){"string"===typeof e?n.setAttribute(t,e):e&&this.complexColor(e,t,n)},e.prototype.getBBox=function(t,n){var i=this.alignValue,r=this.element,a=this.renderer,o=this.styles,s=this.textStr,u=a.cache,c=a.cacheKeys,h=r.namespaceURI===this.SVG_NS;n=M(n,this.rotation,0);var d,p=a.styledMode?r&&e.prototype.getStyle.call(r,"font-size"):o&&o.fontSize;if(g(s)){var f=s.toString();-1===f.indexOf("<")&&(f=f.replace(/[0-9]/g,"0")),f+=["",n,p,this.textWidth,i,o&&o.textOverflow,o&&o.fontWeight].join()}if(f&&!t&&(d=u[f]),!d){if(h||a.forExport){try{var m=this.fakeTS&&function(e){var t=r.querySelector(".highcharts-text-outline");t&&y(t,{display:e})};k(m)&&m("none"),d=r.getBBox?x({},r.getBBox()):{width:r.offsetWidth,height:r.offsetHeight},k(m)&&m("")}catch(_){}(!d||0>d.width)&&(d={x:0,y:0,width:0,height:0})}else d=this.htmlGetBBox();if(a.isSVG&&(a=d.width,t=d.height,h&&(d.height=t={"11px,17":14,"13px,20":16}[(p||"")+","+Math.round(t)]||t),n)){h=Number(r.getAttribute("y")||0)-d.y,i={right:1,center:.5}[i||0]||0,o=n*l,p=(n-90)*l;var v=a*Math.cos(o);n=a*Math.sin(o),m=Math.cos(p),o=Math.sin(p),v=(m=(p=(a=d.x+i*(a-v)+h*m)+v)-t*m)-v,n=(t=(i=(h=d.y+h-i*n+h*o)+n)-t*o)-n,d.x=Math.min(a,p,m,v),d.y=Math.min(h,i,t,n),d.width=Math.max(a,p,m,v)-d.x,d.height=Math.max(h,i,t,n)-d.y}if(f&&(""===s||0<d.height)){for(;250<c.length;)delete u[c.shift()];u[f]||c.push(f),u[f]=d}}return d},e.prototype.getStyle=function(e){return p.getComputedStyle(this.element||this,"").getPropertyValue(e)},e.prototype.hasClass=function(e){return-1!==(""+this.attr("class")).split(" ").indexOf(e)},e.prototype.hide=function(){return this.attr({visibility:"hidden"})},e.prototype.htmlGetBBox=function(){return{height:0,width:0,x:0,y:0}},e.prototype.init=function(e,t){this.element="span"===t?v(t):u.createElementNS(this.SVG_NS,t),this.renderer=e,b(this,"afterInit")},e.prototype.invert=function(e){return this.inverted=e,this.updateTransform(),this},e.prototype.on=function(e,t){var n=this.onEvents;return n[e]&&n[e](),n[e]=f(this.element,e,t),this},e.prototype.opacitySetter=function(e,t,n){this.opacity=e=Number(Number(e).toFixed(3)),n.setAttribute(t,e)},e.prototype.removeClass=function(e){return this.attr("class",(""+this.attr("class")).replace(T(e)?new RegExp("(^| )"+e+"( |$)"):e," ").replace(/ +/g," ").trim())},e.prototype.removeTextOutline=function(){var e=this.element.querySelector("tspan.highcharts-text-outline");e&&this.safeRemoveChild(e)},e.prototype.safeRemoveChild=function(e){var t=e.parentNode;t&&t.removeChild(e)},e.prototype.setRadialReference=function(e){var t=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=e,t&&t.radAttr&&t.animate(this.renderer.getRadialAttr(e,t.radAttr)),this},e.prototype.setTextPath=function(e,n){var i=this.element,r=this.text?this.text.element:i,a={textAnchor:"text-anchor"},o=!1,s=this.textPathWrapper,l=!s;n=C(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},n);var u=t.filterUserAttributes(n.attributes);if(e&&n&&n.enabled){s&&null===s.element.parentNode?(l=!0,s=s.destroy()):s&&this.removeTextOutline.call(s.parentGroup),this.options&&this.options.padding&&(u.dx=-this.options.padding),s||(this.textPathWrapper=s=this.renderer.createElement("textPath"),o=!0);var h=s.element;if((n=e.element.getAttribute("id"))||e.element.setAttribute("id",n=D()),l)for(r.setAttribute("y",0),S(u.dx)&&r.setAttribute("x",-u.dx),e=[].slice.call(r.childNodes),l=0;l<e.length;l++){var d=e[l];d.nodeType!==p.Node.TEXT_NODE&&"tspan"!==d.nodeName||h.appendChild(d)}o&&s&&s.add({element:r}),h.setAttributeNS("http://www.w3.org/1999/xlink","href",this.renderer.url+"#"+n),g(u.dy)&&(h.parentNode.setAttribute("dy",u.dy),delete u.dy),g(u.dx)&&(h.parentNode.setAttribute("dx",u.dx),delete u.dx),E(u,(function(e,t){h.setAttribute(a[t]||t,e)})),i.removeAttribute("transform"),this.removeTextOutline.call(s),this.text&&!this.renderer.styledMode&&this.attr({fill:"none","stroke-width":0}),this.applyTextOutline=this.updateTransform=c}else s&&(delete this.updateTransform,delete this.applyTextOutline,this.destroyTextPath(i,e),this.updateTransform(),this.options&&this.options.rotation&&this.applyTextOutline(this.options.style.textOutline));return this},e.prototype.shadow=function(e,t,n){var i,r=[],a=this.element,o=this.oldShadowOptions,s={color:"#000000",offsetX:this.parentInverted?-1:1,offsetY:this.parentInverted?-1:1,opacity:.15,width:3},l=!1;if(!0===e?i=s:"object"===typeof e&&(i=x(s,e)),i&&(i&&o&&E(i,(function(e,t){e!==o[t]&&(l=!0)})),l&&this.destroyShadows(),this.oldShadowOptions=i),i){if(!this.shadows){var u=i.opacity/i.width,c=this.parentInverted?"translate("+i.offsetY+", "+i.offsetX+")":"translate("+i.offsetX+", "+i.offsetY+")";for(s=1;s<=i.width;s++){var h=a.cloneNode(!1),d=2*i.width+1-2*s;m(h,{stroke:e.color||"#000000","stroke-opacity":u*s,"stroke-width":d,transform:c,fill:"none"}),h.setAttribute("class",(h.getAttribute("class")||"")+" highcharts-shadow"),n&&(m(h,"height",Math.max(m(h,"height")-d,0)),h.cutHeight=d),t?t.element.appendChild(h):a.parentNode&&a.parentNode.insertBefore(h,a),r.push(h)}this.shadows=r}}else this.destroyShadows();return this},e.prototype.show=function(e){return void 0===e&&(e=!0),this.attr({visibility:e?"inherit":"visible"})},e.prototype.strokeSetter=function(t,n,i){this[n]=t,this.stroke&&this["stroke-width"]?(e.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===n&&0===t&&this.hasStroke?(i.removeAttribute("stroke"),this.hasStroke=!1):this.renderer.styledMode&&this["stroke-width"]&&(i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0)},e.prototype.strokeWidth=function(){if(!this.renderer.styledMode)return this["stroke-width"]||0;var e=this.getStyle("stroke-width"),t=0;if(e.indexOf("px")===e.length-2)t=P(e);else if(""!==e){var n=u.createElementNS(d,"rect");m(n,{width:e,"stroke-width":0}),this.element.parentNode.appendChild(n),t=n.getBBox().width,n.parentNode.removeChild(n)}return t},e.prototype.symbolAttr=function(e){var t=this;"x y r start end width height innerR anchorX anchorY clockwise".split(" ").forEach((function(n){t[n]=M(e[n],t[n])})),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},e.prototype.textSetter=function(e){e!==this.textStr&&(delete this.textPxLength,this.textStr=e,this.added&&this.renderer.buildText(this))},e.prototype.titleSetter=function(e){var t=this.element,n=t.getElementsByTagName("title")[0]||u.createElementNS(this.SVG_NS,"title");t.insertBefore?t.insertBefore(n,t.firstChild):t.appendChild(n),n.textContent=String(M(e,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},e.prototype.toFront=function(){var e=this.element;return e.parentNode.appendChild(e),this},e.prototype.translate=function(e,t){return this.attr({translateX:e,translateY:t})},e.prototype.updateShadows=function(e,t,n){var i=this.shadows;if(i)for(var r=i.length;r--;)n.call(i[r],"height"===e?Math.max(t-(i[r].cutHeight||0),0):"d"===e?this.d:t,e,i[r])},e.prototype.updateTransform=function(){var e=this.scaleX,t=this.scaleY,n=this.inverted,i=this.rotation,r=this.matrix,a=this.element,o=this.translateX||0,s=this.translateY||0;n&&(o+=this.width,s+=this.height),o=["translate("+o+","+s+")"],g(r)&&o.push("matrix("+r.join(",")+")"),n?o.push("rotate(90) scale(-1,1)"):i&&o.push("rotate("+i+" "+M(this.rotationOriginX,a.getAttribute("x"),0)+" "+M(this.rotationOriginY,a.getAttribute("y")||0)+")"),(g(e)||g(t))&&o.push("scale("+M(e,1)+" "+M(t,1)+")"),o.length&&a.setAttribute("transform",o.join(" "))},e.prototype.visibilitySetter=function(e,t,n){"inherit"===e?n.removeAttribute(t):this[t]!==e&&n.setAttribute(t,e),this[t]=e},e.prototype.xGetter=function(e){return"circle"===this.element.nodeName&&("x"===e?e="cx":"y"===e&&(e="cy")),this._defaultGetter(e)},e.prototype.zIndexSetter=function(e,t){var n=this.renderer,i=this.parentGroup,r=(i||n).element||n.box,a=this.element;n=r===n.box;var o,s=!1,l=this.added;if(g(e)?(a.setAttribute("data-z-index",e),e=+e,this[t]===e&&(l=!1)):g(this[t])&&a.removeAttribute("data-z-index"),this[t]=e,l){for((e=this.zIndex)&&i&&(i.handleZ=!0),o=(t=r.childNodes).length-1;0<=o&&!s;o--){l=(i=t[o]).getAttribute("data-z-index");var u=!g(l);i!==a&&(0>e&&u&&!n&&!o?(r.insertBefore(a,t[o]),s=!0):(P(l)<=e||u&&(!g(e)||0<=e))&&(r.insertBefore(a,t[o+1]||null),s=!0))}s||(r.insertBefore(a,t[n?3:0]||null),s=!0)}return s},e}(),e.prototype["stroke-widthSetter"]=e.prototype.strokeSetter,e.prototype.yGetter=e.prototype.xGetter,e.prototype.matrixSetter=e.prototype.rotationOriginXSetter=e.prototype.rotationOriginYSetter=e.prototype.rotationSetter=e.prototype.scaleXSetter=e.prototype.scaleYSetter=e.prototype.translateXSetter=e.prototype.translateYSetter=e.prototype.verticalAlignSetter=function(e,t){this[t]=e,this.doTransform=!0},e})),t(n,"Core/Renderer/RendererRegistry.js",[n["Core/Globals.js"]],(function(e){var t;return function(t){var n;t.rendererTypes={},t.getRendererType=function(e){return void 0===e&&(e=n),t.rendererTypes[e]||t.rendererTypes[n]},t.registerRendererType=function(i,r,a){t.rendererTypes[i]=r,n&&!a||(n=i,e.Renderer=r)}}(t||(t={})),t})),t(n,"Core/Renderer/SVG/SVGLabel.js",[n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=t.defined,r=t.extend,a=t.isNumber,o=t.merge,s=t.pick,l=t.removeEvent;return function(t){function u(e,n,i,r,a,o,s,l,c,h){var d,p=t.call(this)||this;return p.paddingLeftSetter=p.paddingSetter,p.paddingRightSetter=p.paddingSetter,p.init(e,"g"),p.textStr=n,p.x=i,p.y=r,p.anchorX=o,p.anchorY=s,p.baseline=c,p.className=h,p.addClass("button"===h?"highcharts-no-tooltip":"highcharts-label"),h&&p.addClass("highcharts-"+h),p.text=e.text(void 0,0,0,l).attr({zIndex:1}),"string"===typeof a&&((d=/^url\((.*?)\)$/.test(a))||p.renderer.symbols[a])&&(p.symbolKey=a),p.bBox=u.emptyBBox,p.padding=3,p.baselineOffset=0,p.needsBox=e.styledMode||d,p.deferredAttr={},p.alignFactor=0,p}return n(u,t),u.prototype.alignSetter=function(e){(e={left:0,center:.5,right:1}[e])!==this.alignFactor&&(this.alignFactor=e,this.bBox&&a(this.xSetting)&&this.attr({x:this.xSetting}))},u.prototype.anchorXSetter=function(e,t){this.anchorX=e,this.boxAttr(t,Math.round(e)-this.getCrispAdjust()-this.xSetting)},u.prototype.anchorYSetter=function(e,t){this.anchorY=e,this.boxAttr(t,e-this.ySetting)},u.prototype.boxAttr=function(e,t){this.box?this.box.attr(e,t):this.deferredAttr[e]=t},u.prototype.css=function(t){if(t){var n={};t=o(t),u.textProps.forEach((function(e){"undefined"!==typeof t[e]&&(n[e]=t[e],delete t[e])})),this.text.css(n);var i="width"in n;"fontSize"in n||"fontWeight"in n?this.updateTextPadding():i&&this.updateBoxSize()}return e.prototype.css.call(this,t)},u.prototype.destroy=function(){l(this.element,"mouseenter"),l(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),e.prototype.destroy.call(this)},u.prototype.fillSetter=function(e,t){e&&(this.needsBox=!0),this.fill=e,this.boxAttr(t,e)},u.prototype.getBBox=function(){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();var e=this.padding,t=s(this.paddingLeft,e);return{width:this.width,height:this.height,x:this.bBox.x-t,y:this.bBox.y-e}},u.prototype.getCrispAdjust=function(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2},u.prototype.heightSetter=function(e){this.heightSetting=e},u.prototype.onAdd=function(){var e=this.textStr;this.text.add(this),this.attr({text:i(e)?e:"",x:this.x,y:this.y}),this.box&&i(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})},u.prototype.paddingSetter=function(e,t){a(e)?e!==this[t]&&(this[t]=e,this.updateTextPadding()):this[t]=void 0},u.prototype.rSetter=function(e,t){this.boxAttr(t,e)},u.prototype.shadow=function(e){return e&&!this.renderer.styledMode&&(this.updateBoxSize(),this.box&&this.box.shadow(e)),this},u.prototype.strokeSetter=function(e,t){this.stroke=e,this.boxAttr(t,e)},u.prototype["stroke-widthSetter"]=function(e,t){e&&(this.needsBox=!0),this["stroke-width"]=e,this.boxAttr(t,e)},u.prototype["text-alignSetter"]=function(e){this.textAlign=e},u.prototype.textSetter=function(e){"undefined"!==typeof e&&this.text.attr({text:e}),this.updateTextPadding()},u.prototype.updateBoxSize=function(){var e=this.text.element.style,t={},n=this.padding,o=this.bBox=a(this.widthSetting)&&a(this.heightSetting)&&!this.textAlign||!i(this.text.textStr)?u.emptyBBox:this.text.getBBox();this.width=this.getPaddedWidth(),this.height=(this.heightSetting||o.height||0)+2*n,e=this.renderer.fontMetrics(e&&e.fontSize,this.text),this.baselineOffset=n+Math.min((this.text.firstLineMetrics||e).b,o.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-e.h)/2),this.needsBox&&(this.box||((n=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect()).addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),n.add(this)),n=this.getCrispAdjust(),t.x=n,t.y=(this.baseline?-this.baselineOffset:0)+n,t.width=Math.round(this.width),t.height=Math.round(this.height),this.box.attr(r(t,this.deferredAttr)),this.deferredAttr={})},u.prototype.updateTextPadding=function(){var e=this.text;this.updateBoxSize();var t=this.baseline?0:this.baselineOffset,n=s(this.paddingLeft,this.padding);i(this.widthSetting)&&this.bBox&&("center"===this.textAlign||"right"===this.textAlign)&&(n+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),n===e.x&&t===e.y||(e.attr("x",n),e.hasBoxWidthChanged&&(this.bBox=e.getBBox(!0)),"undefined"!==typeof t&&e.attr("y",t)),e.x=n,e.y=t},u.prototype.widthSetter=function(e){this.widthSetting=a(e)?e:void 0},u.prototype.getPaddedWidth=function(){var e=this.padding,t=s(this.paddingLeft,e);return e=s(this.paddingRight,e),(this.widthSetting||this.bBox.width||0)+t+e},u.prototype.xSetter=function(e){this.x=e,this.alignFactor&&(e-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(e),this.attr("translateX",this.xSetting)},u.prototype.ySetter=function(e){this.ySetting=this.y=Math.round(e),this.attr("translateY",this.ySetting)},u.emptyBBox={width:0,height:0,x:0,y:0},u.textProps="color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow width".split(" "),u}(e)})),t(n,"Core/Renderer/SVG/Symbols.js",[n["Core/Utilities.js"]],(function(e){function t(e,t,n,i,a){var s=[];if(a){var l=a.start||0,u=o(a.r,n);n=o(a.r,i||n);var c=(a.end||0)-.001;i=a.innerR;var h=o(a.open,.001>Math.abs((a.end||0)-l-2*Math.PI)),d=Math.cos(l),p=Math.sin(l),f=Math.cos(c),m=Math.sin(c);l=o(a.longArc,.001>c-l-Math.PI?0:1),s.push(["M",e+u*d,t+n*p],["A",u,n,0,l,o(a.clockwise,1),e+u*f,t+n*m]),r(i)&&s.push(h?["M",e+i*f,t+i*m]:["L",e+i*f,t+i*m],["A",i,i,0,l,r(a.clockwise)?1-a.clockwise:0,e+i*d,t+i*p]),h||s.push(["Z"])}return s}function n(e,t,n,r,a){return a&&a.r?i(e,t,n,r,a):[["M",e,t],["L",e+n,t],["L",e+n,t+r],["L",e,t+r],["Z"]]}function i(e,t,n,i,r){return[["M",e+(r=r&&r.r||0),t],["L",e+n-r,t],["C",e+n,t,e+n,t,e+n,t+r],["L",e+n,t+i-r],["C",e+n,t+i,e+n,t+i,e+n-r,t+i],["L",e+r,t+i],["C",e,t+i,e,t+i,e,t+i-r],["L",e,t+r],["C",e,t,e,t,e+r,t]]}var r=e.defined,a=e.isNumber,o=e.pick;return{arc:t,callout:function(e,t,n,r,o){var s=Math.min(o&&o.r||0,n,r),l=s+6,u=o&&o.anchorX;o=o&&o.anchorY||0;var c=i(e,t,n,r,{r:s});return a(u)?(e+u>=n?o>t+l&&o<t+r-l?c.splice(3,1,["L",e+n,o-6],["L",e+n+6,o],["L",e+n,o+6],["L",e+n,t+r-s]):c.splice(3,1,["L",e+n,r/2],["L",u,o],["L",e+n,r/2],["L",e+n,t+r-s]):0>=e+u?o>t+l&&o<t+r-l?c.splice(7,1,["L",e,o+6],["L",e-6,o],["L",e,o-6],["L",e,t+s]):c.splice(7,1,["L",e,r/2],["L",u,o],["L",e,r/2],["L",e,t+s]):o&&o>r&&u>e+l&&u<e+n-l?c.splice(5,1,["L",u+6,t+r],["L",u,t+r+6],["L",u-6,t+r],["L",e+s,t+r]):o&&0>o&&u>e+l&&u<e+n-l&&c.splice(1,1,["L",u-6,t],["L",u,t-6],["L",u+6,t],["L",n-s,t]),c):c},circle:function(e,n,i,r){return t(e+i/2,n+r/2,i/2,r/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(e,t,n,i){return[["M",e+n/2,t],["L",e+n,t+i/2],["L",e+n/2,t+i],["L",e,t+i/2],["Z"]]},rect:n,roundedRect:i,square:n,triangle:function(e,t,n,i){return[["M",e+n/2,t],["L",e+n,t+i],["L",e,t+i],["Z"]]},"triangle-down":function(e,t,n,i){return[["M",e,t],["L",e+n,t],["L",e+n/2,t+i],["Z"]]}}})),t(n,"Core/Renderer/SVG/TextBuilder.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(e,t,n){var i=t.doc,r=t.SVG_NS,a=t.win,o=n.attr,s=n.extend,l=n.isString,u=n.objectEach,c=n.pick;return function(){function t(e){var t=e.styles;this.renderer=e.renderer,this.svgElement=e,this.width=e.textWidth,this.textLineHeight=t&&t.lineHeight,this.textOutline=t&&t.textOutline,this.ellipsis=!(!t||"ellipsis"!==t.textOverflow),this.noWrap=!(!t||"nowrap"!==t.whiteSpace),this.fontSize=t&&t.fontSize}return t.prototype.buildSVG=function(){var t=this.svgElement,n=t.element,r=t.renderer,a=c(t.textStr,"").toString(),o=-1!==a.indexOf("<"),s=n.childNodes;r=this.width&&!t.added&&r.box;var u=[a,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,this.fontSize,this.width].join();if(u!==t.textCache){for(t.textCache=u,delete t.actualWidth,u=s.length;u--;)n.removeChild(s[u]);o||this.ellipsis||this.width||-1!==a.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(a))?""!==a&&(r&&r.appendChild(n),a=new e(a),this.modifyTree(a.nodes),a.addToDOM(t.element),this.modifyDOM(),this.ellipsis&&-1!==(n.textContent||"").indexOf("\u2026")&&t.attr("title",this.unescapeEntities(t.textStr||"",["&lt;","&gt;"])),r&&r.removeChild(n)):n.appendChild(i.createTextNode(this.unescapeEntities(a))),l(this.textOutline)&&t.applyTextOutline&&t.applyTextOutline(this.textOutline)}},t.prototype.modifyDOM=function(){var e,t=this,n=this.svgElement,s=o(n.element,"x");for(n.firstLineMetrics=void 0;(e=n.element.firstChild)&&/^[\s\u200B]*$/.test(e.textContent||" ");)n.element.removeChild(e);[].forEach.call(n.element.querySelectorAll("tspan.highcharts-br"),(function(e,i){e.nextSibling&&e.previousSibling&&(0===i&&1===e.previousSibling.nodeType&&(n.firstLineMetrics=n.renderer.fontMetrics(void 0,e.previousSibling)),o(e,{dy:t.getLineHeight(e.nextSibling),x:s}))}));var l=this.width||0;if(l){var u=function(e,a){var u=e.textContent||"",c=u.replace(/([^\^])-/g,"$1- ").split(" "),h=!t.noWrap&&(1<c.length||1<n.element.childNodes.length),d=t.getLineHeight(a),p=0,f=n.actualWidth;if(t.ellipsis)u&&t.truncate(e,u,void 0,0,Math.max(0,l-parseInt(t.fontSize||12,10)),(function(e,t){return e.substring(0,t)+"\u2026"}));else if(h){for(u=[],h=[];a.firstChild&&a.firstChild!==e;)h.push(a.firstChild),a.removeChild(a.firstChild);for(;c.length;)c.length&&!t.noWrap&&0<p&&(u.push(e.textContent||""),e.textContent=c.join(" ").replace(/- /g,"-")),t.truncate(e,void 0,c,0===p&&f||0,l,(function(e,t){return c.slice(0,t).join(" ").replace(/- /g,"-")})),f=n.actualWidth,p++;h.forEach((function(t){a.insertBefore(t,e)})),u.forEach((function(t){a.insertBefore(i.createTextNode(t),e),(t=i.createElementNS(r,"tspan")).textContent="\u200b",o(t,{dy:d,x:s}),a.insertBefore(t,e)}))}};!function e(t){[].slice.call(t.childNodes).forEach((function(i){i.nodeType===a.Node.TEXT_NODE?u(i,t):(-1!==i.className.baseVal.indexOf("highcharts-br")&&(n.actualWidth=0),e(i))}))}(n.element)}},t.prototype.getLineHeight=function(e){var t;return e=e.nodeType===a.Node.TEXT_NODE?e.parentElement:e,this.renderer.styledMode||(t=e&&/(px|em)$/.test(e.style.fontSize)?e.style.fontSize:this.fontSize||this.renderer.style.fontSize||12),this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(t,e||this.svgElement.element).h},t.prototype.modifyTree=function(e){var t=this;e.forEach((function n(i,r){var a=i.attributes;a=void 0===a?{}:a;var o=i.children,l=i.style;l=void 0===l?{}:l;var u=i.tagName,c=t.renderer.styledMode;"b"===u||"strong"===u?c?a.class="highcharts-strong":l.fontWeight="bold":"i"!==u&&"em"!==u||(c?a.class="highcharts-emphasized":l.fontStyle="italic"),l&&l.color&&(l.fill=l.color),"br"===u?(a.class="highcharts-br",i.textContent="\u200b",(r=e[r+1])&&r.textContent&&(r.textContent=r.textContent.replace(/^ +/gm,""))):"a"===u&&o&&o.some((function(e){return"#text"===e.tagName}))&&(i.children=[{children:o,tagName:"tspan"}]),"#text"!==u&&"a"!==u&&(i.tagName="tspan"),s(i,{attributes:a,style:l}),o&&o.filter((function(e){return"#text"!==e.tagName})).forEach(n)}))},t.prototype.truncate=function(e,t,n,i,r,a){var o,s=this.svgElement,l=s.renderer,u=s.rotation,c=[],h=n?1:0,d=(t||n||"").length,p=d,f=function(r,o){o=o||r;var u=e.parentNode;if(u&&"undefined"===typeof c[o])if(u.getSubStringLength)try{c[o]=i+u.getSubStringLength(0,n?o+1:o)}catch(h){}else l.getSpanWidth&&(e.textContent=a(t||n,r),c[o]=i+l.getSpanWidth(s,e));return c[o]};s.rotation=0;var m=f(e.textContent.length);if(i+m>r){for(;h<=d;)p=Math.ceil((h+d)/2),n&&(o=a(n,p)),m=f(p,o&&o.length-1),h===d?h=d+1:m>r?d=p-1:h=p;0===d?e.textContent="":t&&d===t.length-1||(e.textContent=o||a(t||n,p))}n&&n.splice(0,p),s.actualWidth=m,s.rotation=u},t.prototype.unescapeEntities=function(e,t){return u(this.renderer.escapes,(function(n,i){t&&-1!==t.indexOf(n)||(e=e.toString().replace(new RegExp(n,"g"),i))})),e},t}()})),t(n,"Core/Renderer/SVG/SVGRenderer.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGLabel.js"],n["Core/Renderer/SVG/Symbols.js"],n["Core/Renderer/SVG/TextBuilder.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a,o,s,l){var u,c=n.charts,h=n.deg2rad,d=n.doc,p=n.isFirefox,f=n.isMS,m=n.isWebKit,v=n.noop,y=n.SVG_NS,g=n.symbolSizes,_=n.win,x=l.addEvent,b=l.attr,w=l.createElement,k=l.css,S=l.defined,T=l.destroyObjectProperties,C=l.extend,E=l.isArray,M=l.isNumber,P=l.isObject,A=l.isString,D=l.merge,I=l.pick,L=l.pInt,O=l.uniqueKey;return n=function(){function n(e,t,n,i,r,a,o){this.width=this.url=this.style=this.isSVG=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0,this.init(e,t,n,i,r,a,o)}return n.prototype.init=function(e,t,n,i,r,a,o){var s,l=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),u=l.element;o||l.css(this.getStyle(i)),e.appendChild(u),b(e,"dir","ltr"),-1===e.innerHTML.indexOf("xmlns")&&b(u,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=u,this.boxWrapper=l,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(d.createTextNode("Created with Highcharts 10.1.0")),this.defs=this.createElement("defs").add(),this.allowHTML=a,this.forExport=r,this.styledMode=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(t,n,!1),p&&e.getBoundingClientRect&&((t=function(){k(e,{left:0,top:0}),s=e.getBoundingClientRect(),k(e,{left:Math.ceil(s.left)-s.left+"px",top:Math.ceil(s.top)-s.top+"px"})})(),this.unSubPixelFix=x(_,"resize",t))},n.prototype.definition=function(t){return new e([t]).addToDOM(this.defs.element)},n.prototype.getReferenceURL=function(){if((p||m)&&d.getElementsByTagName("base").length){if(!S(u)){var t=O();t=new e([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:t},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#"+t+")",fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(d.body),k(t,{position:"fixed",top:0,left:0,zIndex:9e5});var n=d.elementFromPoint(6,6);u="hitme"===(n&&n.id),d.body.removeChild(t)}if(u)return _.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20")}return""},n.prototype.getStyle=function(e){return this.style=C({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},n.prototype.setStyle=function(e){this.boxWrapper.css(this.getStyle(e))},n.prototype.isHidden=function(){return!this.boxWrapper.getBBox().width},n.prototype.destroy=function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),T(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},n.prototype.createElement=function(e){var t=new this.Element;return t.init(this,e),t},n.prototype.getRadialAttr=function(e,t){return{cx:e[0]-e[2]/2+(t.cx||0)*e[2],cy:e[1]-e[2]/2+(t.cy||0)*e[2],r:(t.r||0)*e[2]}},n.prototype.buildText=function(e){new s(e).buildSVG()},n.prototype.getContrast=function(e){return(e=t.parse(e).rgba)[0]*=1,e[1]*=1.2,e[2]*=.5,459<e[0]+e[1]+e[2]?"#000000":"#FFFFFF"},n.prototype.button=function(t,n,i,r,a,o,s,l,u,c){var h=this.label(t,n,i,u,void 0,void 0,c,void 0,"button"),d=this.styledMode;t=a&&a.states||{},a&&delete a.states;var p=0,m=a?D(a):{},v=D({color:"#333333",cursor:"pointer",fontWeight:"normal"},m.style);if(delete m.style,m=e.filterUserAttributes(m),h.attr(D({padding:8,r:2},m)),!d){m=D({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1},m);var y=(o=D(m,{fill:"#e6e6e6"},e.filterUserAttributes(o||t.hover||{}))).style;delete o.style;var g=(s=D(m,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},e.filterUserAttributes(s||t.select||{}))).style;delete s.style;var _=(l=D(m,{style:{color:"#cccccc"}},e.filterUserAttributes(l||t.disabled||{}))).style;delete l.style}return x(h.element,f?"mouseover":"mouseenter",(function(){3!==p&&h.setState(1)})),x(h.element,f?"mouseout":"mouseleave",(function(){3!==p&&h.setState(p)})),h.setState=function(e){1!==e&&(h.state=p=e),h.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][e||0]),d||(h.attr([m,o,s,l][e||0]),P(e=[v,y,g,_][e||0])&&h.css(e))},d||h.attr(m).css(C({cursor:"default"},v)),h.on("touchstart",(function(e){return e.stopPropagation()})).on("click",(function(e){3!==p&&r.call(h,e)}))},n.prototype.crispLine=function(e,t,n){void 0===n&&(n="round");var i=e[0],r=e[1];return S(i[1])&&i[1]===r[1]&&(i[1]=r[1]=Math[n](i[1])-t%2/2),S(i[2])&&i[2]===r[2]&&(i[2]=r[2]=Math[n](i[2])+t%2/2),e},n.prototype.path=function(e){var t=this.styledMode?{}:{fill:"none"};return E(e)?t.d=e:P(e)&&C(t,e),this.createElement("path").attr(t)},n.prototype.circle=function(e,t,n){return e=P(e)?e:"undefined"===typeof e?{}:{x:e,y:t,r:n},(t=this.createElement("circle")).xSetter=t.ySetter=function(e,t,n){n.setAttribute("c"+t,e)},t.attr(e)},n.prototype.arc=function(e,t,n,i,r,a){return P(e)?(t=(i=e).y,n=i.r,e=i.x):i={innerR:i,start:r,end:a},(e=this.symbol("arc",e,t,n,n,i)).r=n,e},n.prototype.rect=function(e,t,n,i,r,a){r=P(e)?e.r:r;var o=this.createElement("rect");return e=P(e)?e:"undefined"===typeof e?{}:{x:e,y:t,width:Math.max(n,0),height:Math.max(i,0)},this.styledMode||("undefined"!==typeof a&&(e["stroke-width"]=a,e=o.crisp(e)),e.fill="none"),r&&(e.r=r),o.rSetter=function(e,t,n){o.r=e,b(n,{rx:e,ry:e})},o.rGetter=function(){return o.r||0},o.attr(e)},n.prototype.setSize=function(e,t,n){this.width=e,this.height=t,this.boxWrapper.animate({width:e,height:t},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:I(n,!0)?void 0:0}),this.alignElements()},n.prototype.g=function(e){var t=this.createElement("g");return e?t.attr({class:"highcharts-"+e}):t},n.prototype.image=function(e,t,n,i,r,a){var o={preserveAspectRatio:"none"},s=function(e,t){e.setAttributeNS?e.setAttributeNS("http://www.w3.org/1999/xlink","href",t):e.setAttribute("hc-svg-href",t)};M(t)&&(o.x=t),M(n)&&(o.y=n),M(i)&&(o.width=i),M(r)&&(o.height=r);var l=this.createElement("image").attr(o);return t=function(t){s(l.element,e),a.call(l,t)},a?(s(l.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n=new _.Image,x(n,"load",t),n.src=e,n.complete&&t({})):s(l.element,e),l},n.prototype.symbol=function(e,t,n,i,r,a){var o,s=this,l=/^url\((.*?)\)$/,u=l.test(e),h=!u&&(this.symbols[e]?e:"circle"),p=h&&this.symbols[h];if(p){"number"===typeof t&&(o=p.call(this.symbols,Math.round(t||0),Math.round(n||0),i||0,r||0,a));var f=this.path(o);s.styledMode||f.attr("fill","none"),C(f,{symbolName:h||void 0,x:t,y:n,width:i,height:r}),a&&C(f,a)}else if(u){var m=e.match(l)[1],v=f=this.image(m);v.imgwidth=I(g[m]&&g[m].width,a&&a.width),v.imgheight=I(g[m]&&g[m].height,a&&a.height);var y=function(e){return e.attr({width:e.width,height:e.height})};["width","height"].forEach((function(e){v[e+"Setter"]=function(e,t){var n=this["img"+t];this[t]=e,S(n)&&(a&&"within"===a.backgroundSize&&this.width&&this.height&&(n=Math.round(n*Math.min(this.width/this.imgwidth,this.height/this.imgheight))),this.element&&this.element.setAttribute(t,n),this.alignByTranslate||(e=((this[t]||0)-n)/2,this.attr("width"===t?{translateX:e}:{translateY:e})))}})),S(t)&&v.attr({x:t,y:n}),v.isImg=!0,S(v.imgwidth)&&S(v.imgheight)?y(v):(v.attr({width:0,height:0}),w("img",{onload:function(){var e=c[s.chartIndex];0===this.width&&(k(this,{position:"absolute",top:"-999em"}),d.body.appendChild(this)),g[m]={width:this.width,height:this.height},v.imgwidth=this.width,v.imgheight=this.height,v.element&&y(v),this.parentNode&&this.parentNode.removeChild(this),s.imgCount--,s.imgCount||!e||e.hasLoaded||e.onload()},src:m}),this.imgCount++)}return f},n.prototype.clipRect=function(e,t,n,i){var r=O()+"-",a=this.createElement("clipPath").attr({id:r}).add(this.defs);return(e=this.rect(e,t,n,i,0).add(a)).id=r,e.clipPath=a,e.count=0,e},n.prototype.text=function(e,t,n,i){var r={};return!i||!this.allowHTML&&this.forExport?(r.x=Math.round(t||0),n&&(r.y=Math.round(n)),S(e)&&(r.text=e),e=this.createElement("text").attr(r),(!i||this.forExport&&!this.allowHTML)&&(e.xSetter=function(e,t,n){for(var i,r=n.getElementsByTagName("tspan"),a=n.getAttribute(t),o=0;o<r.length;o++)(i=r[o]).getAttribute(t)===a&&i.setAttribute(t,e);n.setAttribute(t,e)}),e):this.html(e,t,n)},n.prototype.fontMetrics=function(e,t){return e=!this.styledMode&&/px/.test(e)||!_.getComputedStyle?e||t&&t.style&&t.style.fontSize||this.style&&this.style.fontSize:t&&r.prototype.getStyle.call(t,"font-size"),{h:t=24>(e=/px/.test(e)?L(e):12)?e+3:Math.round(1.2*e),b:Math.round(.8*t),f:e}},n.prototype.rotCorr=function(e,t,n){var i=e;return t&&n&&(i=Math.max(i*Math.cos(t*h),4)),{x:-e/3*Math.sin(t*h),y:i}},n.prototype.pathToSegments=function(e){for(var t=[],n=[],i={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2},r=0;r<e.length;r++)A(n[0])&&M(e[r])&&n.length===i[n[0].toUpperCase()]&&e.splice(r,0,n[0].replace("M","L").replace("m","l")),"string"===typeof e[r]&&(n.length&&t.push(n.slice(0)),n.length=0),n.push(e[r]);return t.push(n.slice(0)),t},n.prototype.label=function(e,t,n,i,r,o,s,l,u){return new a(this,e,t,n,i,r,o,s,l,u)},n.prototype.alignElements=function(){this.alignedObjects.forEach((function(e){return e.align()}))},n}(),C(n.prototype,{Element:r,SVG_NS:y,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:o,draw:v}),i.registerRendererType("svg",n,!0),n})),t(n,"Core/Renderer/HTML/HTMLElement.js",[n["Core/Globals.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=e.isFirefox,a=e.isMS,o=e.isWebKit,s=e.win,l=n.css,u=n.defined,c=n.extend,h=n.pick,d=n.pInt;return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.compose=function(e){if(-1===t.composedClasses.indexOf(e)){t.composedClasses.push(e);var n=t.prototype,i=e.prototype;i.getSpanCorrection=n.getSpanCorrection,i.htmlCss=n.htmlCss,i.htmlGetBBox=n.htmlGetBBox,i.htmlUpdateTransform=n.htmlUpdateTransform,i.setSpanRotation=n.setSpanRotation}return e},t.prototype.getSpanCorrection=function(e,t,n){this.xCorr=-e*n,this.yCorr=-t},t.prototype.htmlCss=function(e){var t="SPAN"===this.element.tagName&&e&&"width"in e,n=h(t&&e.width,void 0);if(t){delete e.width,this.textWidth=n;var i=!0}return e&&"ellipsis"===e.textOverflow&&(e.whiteSpace="nowrap",e.overflow="hidden"),this.styles=c(this.styles,e),l(this.element,e),i&&this.htmlUpdateTransform(),this},t.prototype.htmlGetBBox=function(){var e=this.element;return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},t.prototype.htmlUpdateTransform=function(){if(this.added){var e=this.renderer,t=this.element,n=this.translateX||0,i=this.translateY||0,r=this.x||0,a=this.y||0,o=this.textAlign||"left",s={left:0,center:.5,right:1}[o],c=this.styles;if(c=c&&c.whiteSpace,l(t,{marginLeft:n,marginTop:i}),!e.styledMode&&this.shadows&&this.shadows.forEach((function(e){l(e,{marginLeft:n+1,marginTop:i+1})})),this.inverted&&[].forEach.call(t.childNodes,(function(n){e.invertChild(n,t)})),"SPAN"===t.tagName){var h=this.rotation,p=this.textWidth&&d(this.textWidth),f=[h,o,t.innerHTML,this.textWidth,this.textAlign].join(),m=void 0;if(m=!1,p!==this.oldTextWidth){if(this.textPxLength)var v=this.textPxLength;else l(t,{width:"",whiteSpace:c||"nowrap"}),v=t.offsetWidth;(p>this.oldTextWidth||v>p)&&(/[ \-]/.test(t.textContent||t.innerText)||"ellipsis"===t.style.textOverflow)&&(l(t,{width:v>p||h?p+"px":"auto",display:"block",whiteSpace:c||"normal"}),this.oldTextWidth=p,m=!0)}this.hasBoxWidthChanged=m,f!==this.cTT&&(m=e.fontMetrics(t.style.fontSize,t).b,!u(h)||h===(this.oldRotation||0)&&o===this.oldAlign||this.setSpanRotation(h,s,m),this.getSpanCorrection(!u(h)&&this.textPxLength||t.offsetWidth,m,s,h,o)),l(t,{left:r+(this.xCorr||0)+"px",top:a+(this.yCorr||0)+"px"}),this.cTT=f,this.oldRotation=h,this.oldAlign=o}}else this.alignOnAdd=!0},t.prototype.setSpanRotation=function(e,t,n){var i={},u=a&&!/Edge/.test(s.navigator.userAgent)?"-ms-transform":o?"-webkit-transform":r?"MozTransform":s.opera?"-o-transform":void 0;u&&(i[u]=i.transform="rotate("+e+"deg)",i[u+(r?"Origin":"-origin")]=i.transformOrigin=100*t+"% "+n+"px",l(this.element,i))},t.composedClasses=[],t}(t)})),t(n,"Core/Renderer/HTML/HTMLRenderer.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=i.attr,o=i.createElement,s=i.extend,l=i.pick;return function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return r(i,n),i.compose=function(e){return-1===i.composedClasses.indexOf(e)&&(i.composedClasses.push(e),e.prototype.html=i.prototype.html),e},i.prototype.html=function(n,i,r){var u=this.createElement("span"),c=u.element,h=u.renderer,d=h.isSVG,p=function(e,n){["opacity","visibility"].forEach((function(i){e[i+"Setter"]=function(r,a,o){var s=e.div?e.div.style:n;t.prototype[i+"Setter"].call(this,r,a,o),s&&(s[a]=r)}})),e.addedSetters=!0};return u.textSetter=function(t){t!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,e.setElementHTML(this.element,l(t,"")),this.textStr=t,u.doTransform=!0)},d&&p(u,u.element.style),u.xSetter=u.ySetter=u.alignSetter=u.rotationSetter=function(e,t){"align"===t?u.alignValue=u.textAlign=e:u[t]=e,u.doTransform=!0},u.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},u.attr({text:n,x:Math.round(i),y:Math.round(r)}).css({position:"absolute"}),h.styledMode||u.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),c.style.whiteSpace="nowrap",u.css=u.htmlCss,d&&(u.add=function(e){var t=h.box.parentNode,n=[];if(this.parentGroup=e){var i=e.div;if(!i){for(;e;)n.push(e),e=e.parentGroup;n.reverse().forEach((function(e){function r(t,n){e[n]=t,"translateX"===n?h.left=t+"px":h.top=t+"px",e.doTransform=!0}var l=a(e.element,"class"),c=e.styles||{},h=(i=e.div=e.div||o("div",l?{className:l}:void 0,{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px",display:e.display,opacity:e.opacity,cursor:c.cursor,pointerEvents:c.pointerEvents,visibility:e.visibility},i||t)).style;s(e,{classSetter:function(e){return function(t){this.element.setAttribute("class",t),e.className=t}}(i),on:function(){return n[0].div&&u.on.apply({element:n[0].div,onEvents:e.onEvents},arguments),e},translateXSetter:r,translateYSetter:r}),e.addedSetters||p(e)}))}}else i=t;return i.appendChild(c),u.added=!0,u.alignOnAdd&&u.htmlUpdateTransform(),u}),u},i.composedClasses=[],i}(n)})),t(n,"Core/Axis/AxisDefaults.js",[],(function(){var e;return function(e){e.defaultXAxisOptions={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e. %b"},week:{main:"%e. %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotation:void 0,autoRotationLimit:80,distance:void 0,enabled:!0,indentation:10,overflow:"justify",padding:5,reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,x:0,zIndex:7,style:{color:"#666666",cursor:"default",fontSize:"11px"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minPadding:.01,offset:void 0,opposite:!1,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",rotation:0,useHTML:!1,x:0,y:0,style:{color:"#666666"}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#ccd6eb"},e.defaultYAxisOptions={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){return(0,this.axis.chart.numberFormatter)(this.total,-1)},style:{color:"#000000",fontSize:"11px",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},e.defaultLeftAxisOptions={labels:{x:-15},title:{rotation:270}},e.defaultRightAxisOptions={labels:{x:15},title:{rotation:90}},e.defaultBottomAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},e.defaultTopAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}}}(e||(e={})),e})),t(n,"Core/Foundation.js",[n["Core/Utilities.js"]],(function(e){var t,n=e.addEvent,i=e.isFunction,r=e.objectEach,a=e.removeEvent;return function(e){e.registerEventOptions=function(e,t){e.eventOptions=e.eventOptions||{},r(t.events,(function(t,r){e.eventOptions[r]!==t&&(e.eventOptions[r]&&(a(e,r,e.eventOptions[r]),delete e.eventOptions[r]),i(t)&&(e.eventOptions[r]=t,n(e,r,t)))}))}}(t||(t={})),t})),t(n,"Core/Axis/Tick.js",[n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(e,t,n){var i=t.deg2rad,r=n.clamp,a=n.correctFloat,o=n.defined,s=n.destroyObjectProperties,l=n.extend,u=n.fireEvent,c=n.isNumber,h=n.merge,d=n.objectEach,p=n.pick;return t=function(){function t(e,t,n,i,r){this.isNewLabel=this.isNew=!0,this.axis=e,this.pos=t,this.type=n||"",this.parameters=r||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,u(this,"init"),n||i||this.addLabel()}return t.prototype.addLabel=function(){var t=this,n=t.axis,i=n.options,r=n.chart,s=n.categories,h=n.logarithmic,d=n.names,f=t.pos,m=p(t.options&&t.options.labels,i.labels),v=n.tickPositions,y=f===v[0],g=f===v[v.length-1],_=(!m.step||1===m.step)&&1===n.tickInterval;v=v.info;var x,b=t.label;if(s=this.parameters.category||(s?p(s[f],d[f],f):f),h&&c(s)&&(s=a(h.lin2log(s))),n.dateTime)if(v)var w=r.time.resolveDTLFormat(i.dateTimeLabelFormats[!i.grid&&v.higherRanks[f]||v.unitName]),k=w.main;else c(s)&&(k=n.dateTime.getXDateFormat(s,i.dateTimeLabelFormats||{}));t.isFirst=y,t.isLast=g;var S={axis:n,chart:r,dateTimeLabelFormat:k,isFirst:y,isLast:g,pos:f,tick:t,tickPositionInfo:v,value:s};u(this,"labelFormat",S);var T=function(t){return m.formatter?m.formatter.call(t,t):m.format?(t.text=n.defaultLabelFormatter.call(t),e.format(m.format,t,r)):n.defaultLabelFormatter.call(t,t)};i=T.call(S,S);var C=w&&w.list;t.shortenLabel=C?function(){for(x=0;x<C.length;x++)if(l(S,{dateTimeLabelFormat:C[x]}),b.attr({text:T.call(S,S)}),b.getBBox().width<n.getSlotWidth(t)-2*m.padding)return;b.attr({text:""})}:void 0,_&&n._addedPlotLB&&t.moveLabel(i,m),o(b)||t.movedLabel?b&&b.textStr!==i&&!_&&(!b.textWidth||m.style.width||b.styles.width||b.css({width:null}),b.attr({text:i}),b.textPxLength=b.getBBox().width):(t.label=b=t.createLabel({x:0,y:0},i,m),t.rotation=0)},t.prototype.createLabel=function(e,t,n){var i=this.axis,r=i.chart;return(e=o(t)&&n.enabled?r.renderer.text(t,e.x,e.y,n.useHTML).add(i.labelGroup):null)&&(r.styledMode||e.css(h(n.style)),e.textPxLength=e.getBBox().width),e},t.prototype.destroy=function(){s(this,this.axis)},t.prototype.getPosition=function(e,t,n,i){var o=this.axis,s=o.chart,l=i&&s.oldChartHeight||s.chartHeight;return(e={x:e?a(o.translate(t+n,null,null,i)+o.transB):o.left+o.offset+(o.opposite?(i&&s.oldChartWidth||s.chartWidth)-o.right-o.left:0),y:e?l-o.bottom+o.offset-(o.opposite?o.height:0):a(l-o.translate(t+n,null,null,i)-o.transB)}).y=r(e.y,-1e5,1e5),u(this,"afterGetPosition",{pos:e}),e},t.prototype.getLabelPosition=function(e,t,n,r,a,s,l,c){var h=this.axis,d=h.transA,p=h.isLinked&&h.linkedParent?h.linkedParent.reversed:h.reversed,f=h.staggerLines,m=h.tickRotCorr||{x:0,y:0},v=r||h.reserveSpaceDefault?0:-h.labelOffset*("center"===h.labelAlign?.5:1),y={},g=a.y;return o(g)||(g=0===h.side?n.rotation?-8:-n.getBBox().height:2===h.side?m.y+8:Math.cos(n.rotation*i)*(m.y-n.getBBox(!1,0).height/2)),e=e+a.x+v+m.x-(s&&r?s*d*(p?-1:1):0),t=t+g-(s&&!r?s*d*(p?1:-1):0),f&&(n=l/(c||1)%f,h.opposite&&(n=f-n-1),t+=h.labelOffset/f*n),y.x=e,y.y=Math.round(t),u(this,"afterGetLabelPosition",{pos:y,tickmarkOffset:s,index:l}),y},t.prototype.getLabelSize=function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},t.prototype.getMarkPath=function(e,t,n,i,r,a){return a.crispLine([["M",e,t],["L",e+(r?0:-n),t+(r?n:0)]],i)},t.prototype.handleOverflow=function(e){var t=this.axis,n=t.options.labels,r=e.x,a=t.chart.chartWidth,o=t.chart.spacing,s=p(t.labelLeft,Math.min(t.pos,o[3]));o=p(t.labelRight,Math.max(t.isRadial?0:t.pos+t.len,a-o[1]));var l,u=this.label,c=this.rotation,h={left:0,center:.5,right:1}[t.labelAlign||u.attr("align")],d=u.getBBox().width,f=t.getSlotWidth(this),m={},v=f,y=1;c||"justify"!==n.overflow?0>c&&r-h*d<s?l=Math.round(r/Math.cos(c*i)-s):0<c&&r+h*d>o&&(l=Math.round((a-r)/Math.cos(c*i))):(a=r+(1-h)*d,r-h*d<s?v=e.x+v*(1-h)-s:a>o&&(v=o-e.x+v*h,y=-1),(v=Math.min(f,v))<f&&"center"===t.labelAlign&&(e.x+=y*(f-v-h*(f-Math.min(d,v)))),(d>v||t.autoRotation&&(u.styles||{}).width)&&(l=v)),l&&(this.shortenLabel?this.shortenLabel():(m.width=Math.floor(l)+"px",(n.style||{}).textOverflow||(m.textOverflow="ellipsis"),u.css(m)))},t.prototype.moveLabel=function(e,t){var n=this,i=n.label,r=n.axis,a=r.reversed,o=!1;if(i&&i.textStr===e?(n.movedLabel=i,o=!0,delete n.label):d(r.ticks,(function(t){o||t.isNew||t===n||!t.label||t.label.textStr!==e||(n.movedLabel=t.label,o=!0,t.labelPos=n.movedLabel.xy,delete t.label)})),!o&&(n.labelPos||i)){var s=n.labelPos||i.xy;i=r.horiz?a?0:r.width+r.left:s.x,r=r.horiz?s.y:a?r.width+r.left:0,n.movedLabel=n.createLabel({x:i,y:r},e,t),n.movedLabel&&n.movedLabel.attr({opacity:0})}},t.prototype.render=function(e,t,n){var i=this.axis,r=i.horiz,a=this.pos,o=p(this.tickmarkOffset,i.tickmarkOffset);o=(a=this.getPosition(r,a,o,t)).x;var s=a.y;i=r&&o===i.pos+i.len||!r&&s===i.pos?-1:1,r=p(n,this.label&&this.label.newOpacity,1),n=p(n,1),this.isActive=!0,this.renderGridLine(t,n,i),this.renderMark(a,n,i),this.renderLabel(a,t,r,e),this.isNew=!1,u(this,"afterRender")},t.prototype.renderGridLine=function(e,t,n){var i=this.axis,r=i.options,a={},o=this.pos,s=this.type,l=p(this.tickmarkOffset,i.tickmarkOffset),u=i.chart.renderer,c=this.gridLine,h=r.gridLineWidth,d=r.gridLineColor,f=r.gridLineDashStyle;"minor"===this.type&&(h=r.minorGridLineWidth,d=r.minorGridLineColor,f=r.minorGridLineDashStyle),c||(i.chart.styledMode||(a.stroke=d,a["stroke-width"]=h||0,a.dashstyle=f),s||(a.zIndex=1),e&&(t=0),this.gridLine=c=u.path().attr(a).addClass("highcharts-"+(s?s+"-":"")+"grid-line").add(i.gridGroup)),c&&(n=i.getPlotLinePath({value:o+l,lineWidth:c.strokeWidth()*n,force:"pass",old:e}))&&c[e||this.isNew?"attr":"animate"]({d:n,opacity:t})},t.prototype.renderMark=function(e,t,n){var i=this.axis,r=i.options,a=i.chart.renderer,o=this.type,s=i.tickSize(o?o+"Tick":"tick"),l=e.x;e=e.y;var u=p(r["minor"!==o?"tickWidth":"minorTickWidth"],!o&&i.isXAxis?1:0);r=r["minor"!==o?"tickColor":"minorTickColor"];var c=this.mark,h=!c;s&&(i.opposite&&(s[0]=-s[0]),c||(this.mark=c=a.path().addClass("highcharts-"+(o?o+"-":"")+"tick").add(i.axisGroup),i.chart.styledMode||c.attr({stroke:r,"stroke-width":u})),c[h?"attr":"animate"]({d:this.getMarkPath(l,e,s[0],c.strokeWidth()*n,i.horiz,a),opacity:t}))},t.prototype.renderLabel=function(e,t,n,i){var r=this.axis,a=r.horiz,o=r.options,s=this.label,l=o.labels,u=l.step;r=p(this.tickmarkOffset,r.tickmarkOffset);var h=e.x;e=e.y;var d=!0;s&&c(h)&&(s.xy=e=this.getLabelPosition(h,e,s,a,l,r,i,u),this.isFirst&&!this.isLast&&!o.showFirstLabel||this.isLast&&!this.isFirst&&!o.showLastLabel?d=!1:!a||l.step||l.rotation||t||0===n||this.handleOverflow(e),u&&i%u&&(d=!1),d&&c(e.y)?(e.opacity=n,s[this.isNewLabel?"attr":"animate"](e).show(!0),this.isNewLabel=!1):(s.hide(),this.isNewLabel=!0))},t.prototype.replaceMovedLabel=function(){var e=this.label,t=this.axis,n=t.reversed;if(e&&!this.isNew){var i=t.horiz?n?t.left:t.width+t.left:e.xy.x;n=t.horiz?e.xy.y:n?t.width+t.top:t.top,e.animate({x:i,y:n,opacity:0},void 0,e.destroy),delete this.label}t.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel},t}(),t})),t(n,"Core/Axis/Axis.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/AxisDefaults.js"],n["Core/Color/Color.js"],n["Core/DefaultOptions.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Axis/Tick.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a,o,s){var l=e.animObject,u=i.defaultOptions,c=r.registerEventOptions,h=a.deg2rad,d=s.arrayMax,p=s.arrayMin,f=s.clamp,m=s.correctFloat,v=s.defined,y=s.destroyObjectProperties,g=s.erase,_=s.error,x=s.extend,b=s.fireEvent,w=s.isArray,k=s.isNumber,S=s.isString,T=s.merge,C=s.normalizeTickInterval,E=s.objectEach,M=s.pick,P=s.relativeLength,A=s.removeEvent,D=s.splat,I=s.syncTimeout,L=function(e,t){return C(t,void 0,void 0,M(e.options.allowDecimals,.5>t||void 0!==e.tickAmount),!!e.tickAmount)};return e=function(){function e(e,t){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.eventOptions=this.coll=this.closestPointRange=this.chart=this.bottom=this.alternateBands=void 0,this.init(e,t)}return e.prototype.init=function(e,t){var n=t.isX;this.chart=e,this.horiz=e.inverted&&!this.isZAxis?!n:n,this.isXAxis=n,this.coll=this.coll||(n?"xAxis":"yAxis"),b(this,"init",{userOptions:t}),this.opposite=M(t.opposite,this.opposite),this.side=M(t.side,this.side,this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(t);var i=this.options,r=i.labels,a=i.type;this.userOptions=t,this.minPixelPadding=0,this.reversed=M(i.reversed,this.reversed),this.visible=i.visible,this.zoomEnabled=i.zoomEnabled,this.hasNames="category"===a||!0===i.categories,this.categories=i.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=v(i.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=i.minRange||i.maxZoom,this.range=i.range,this.offset=i.offset||0,this.min=this.max=null,t=M(i.crosshair,D(e.options.tooltip.crosshairs)[n?0:1]),this.crosshair=!0===t?{}:t,-1===e.axes.indexOf(this)&&(n?e.axes.splice(e.xAxis.length,0,this):e.axes.push(this),e[this.coll].push(this)),this.series=this.series||[],e.inverted&&!this.isZAxis&&n&&"undefined"===typeof this.reversed&&(this.reversed=!0),this.labelRotation=k(r.rotation)?r.rotation:void 0,c(this,i),b(this,"afterInit")},e.prototype.setOptions=function(e){this.options=T(t.defaultXAxisOptions,"yAxis"===this.coll&&t.defaultYAxisOptions,[t.defaultTopAxisOptions,t.defaultRightAxisOptions,t.defaultBottomAxisOptions,t.defaultLeftAxisOptions][this.side],T(u[this.coll],e)),b(this,"afterSetOptions",{userOptions:e})},e.prototype.defaultLabelFormatter=function(e){var t=this.axis;e=this.chart.numberFormatter;var n=k(this.value)?this.value:NaN,i=t.chart.time,r=this.dateTimeLabelFormat,a=u.lang,o=a.numericSymbols;a=a.numericSymbolMagnitude||1e3;var s=t.logarithmic?Math.abs(n):t.tickInterval,l=o&&o.length;if(t.categories)var c=""+this.value;else if(r)c=i.dateFormat(r,n);else if(l&&1e3<=s)for(;l--&&"undefined"===typeof c;)s>=(t=Math.pow(a,l+1))&&0===10*n%t&&null!==o[l]&&0!==n&&(c=e(n/t,-1)+o[l]);return"undefined"===typeof c&&(c=1e4<=Math.abs(n)?e(n,-1):e(n,-1,void 0,"")),c},e.prototype.getSeriesExtremes=function(){var e,t=this,n=t.chart;b(this,"getSeriesExtremes",null,(function(){t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.stacking&&t.stacking.buildStacks(),t.series.forEach((function(i){if(i.visible||!n.options.chart.ignoreHiddenSeries){var r=i.options,a=r.threshold;if(t.hasVisibleSeries=!0,t.positiveValuesOnly&&0>=a&&(a=null),t.isXAxis){if((r=i.xData).length){r=t.logarithmic?r.filter(t.validatePositiveValue):r;var o=(e=i.getXExtremes(r)).min,s=e.max;k(o)||o instanceof Date||(r=r.filter(k),o=(e=i.getXExtremes(r)).min,s=e.max),r.length&&(t.dataMin=Math.min(M(t.dataMin,o),o),t.dataMax=Math.max(M(t.dataMax,s),s))}}else i=i.applyExtremes(),k(i.dataMin)&&(o=i.dataMin,t.dataMin=Math.min(M(t.dataMin,o),o)),k(i.dataMax)&&(s=i.dataMax,t.dataMax=Math.max(M(t.dataMax,s),s)),v(a)&&(t.threshold=a),(!r.softThreshold||t.positiveValuesOnly)&&(t.softThreshold=!1)}}))})),b(this,"afterGetSeriesExtremes")},e.prototype.translate=function(e,t,n,i,r,a){var o=this.linkedParent||this,s=i&&o.old?o.old.min:o.min,l=o.minPixelPadding;r=(o.isOrdinal||o.brokenAxis&&o.brokenAxis.hasBreaks||o.logarithmic&&r)&&o.lin2val;var u=1,c=0;return(i=i&&o.old?o.old.transA:o.transA)||(i=o.transA),n&&(u*=-1,c=o.len),o.reversed&&(c-=(u*=-1)*(o.sector||o.len)),t?(a=(e*u+c-l)/i+s,r&&(a=o.lin2val(a))):(r&&(e=o.val2lin(e)),e=u*(e-s)*i,a=k(s)?(o.isRadial?e:m(e))+c+u*l+(k(a)?i*a:0):void 0),a},e.prototype.toPixels=function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},e.prototype.toValue=function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},e.prototype.getPlotLinePath=function(e){function t(e,t,n){return("pass"!==_&&e<t||e>n)&&(_?e=f(e,t,n):o=!0),e}var n,i,r,a,o,s=this,l=s.chart,u=s.left,c=s.top,h=e.old,d=e.value,p=e.lineWidth,m=h&&l.oldChartHeight||l.chartHeight,v=h&&l.oldChartWidth||l.chartWidth,y=s.transB,g=e.translatedValue,_=e.force;return e={value:d,lineWidth:p,old:h,force:_,acrossPanes:e.acrossPanes,translatedValue:g},b(this,"getPlotLinePath",e,(function(e){g=M(g,s.translate(d,null,null,h)),g=f(g,-1e5,1e5),n=r=Math.round(g+y),i=a=Math.round(m-g-y),k(g)?s.horiz?(i=c,a=m-s.bottom,n=r=t(n,u,u+s.width)):(n=u,r=v-s.right,i=a=t(i,c,c+s.height)):(o=!0,_=!1),e.path=o&&!_?null:l.renderer.crispLine([["M",n,i],["L",r,a]],p||1)})),e.path},e.prototype.getLinearTickPositions=function(e,t,n){var i=m(Math.floor(t/e)*e);n=m(Math.ceil(n/e)*e);var r,a=[];if(m(i+e)===i&&(r=20),this.single)return[t];for(t=i;t<=n&&(a.push(t),(t=m(t+e,r))!==o);)var o=t;return a},e.prototype.getMinorTickInterval=function(){var e=this.options;return!0===e.minorTicks?M(e.minorTickInterval,"auto"):!1===e.minorTicks?null:e.minorTickInterval},e.prototype.getMinorTickPositions=function(){var e=this.options,t=this.tickPositions,n=this.minorTickInterval,i=this.pointRangePadding||0,r=this.min-i,a=(i=this.max+i)-r,o=[];if(a&&a/n<this.len/3){var s=this.logarithmic;if(s)this.paddedTicks.forEach((function(e,t,i){t&&o.push.apply(o,s.getLogTickPositions(n,i[t-1],i[t],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())o=o.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(n),r,i,e.startOfWeek));else for(e=r+(t[0]-r)%n;e<=i&&e!==o[0];e+=n)o.push(e)}return 0!==o.length&&this.trimTicks(o),o},e.prototype.adjustForMinRange=function(){var e,t,n,i,r=this.options,a=this.logarithmic,o=this.min,s=this.max,l=0;if(this.isXAxis&&"undefined"===typeof this.minRange&&!a&&(v(r.min)||v(r.max)||v(r.floor)||v(r.ceiling)?this.minRange=null:(this.series.forEach((function(r){if(n=r.xData,i=r.xIncrement?1:n.length-1,1<n.length)for(e=i;0<e;e--)t=n[e]-n[e-1],(!l||t<l)&&(l=t)})),this.minRange=Math.min(5*l,this.dataMax-this.dataMin))),s-o<this.minRange){var u=this.dataMax-this.dataMin>=this.minRange,c=this.minRange,h=(c-s+o)/2;h=[o-h,M(r.min,o-h)],u&&(h[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),s=[(o=d(h))+c,M(r.max,o+c)],u&&(s[2]=a?a.log2lin(this.dataMax):this.dataMax),(s=p(s))-o<c&&(h[0]=s-c,h[1]=M(r.min,s-c),o=d(h))}this.min=o,this.max=s},e.prototype.getClosest=function(){var e;return this.categories?e=1:this.series.forEach((function(t){var n=t.closestPointRange,i=t.visible||!t.chart.options.chart.ignoreHiddenSeries;!t.noSharedTooltip&&v(n)&&i&&(e=v(e)?Math.min(e,n):n)})),e},e.prototype.nameToX=function(e){var t=w(this.options.categories),n=t?this.categories:this.names,i=e.options.x;if(e.series.requireSorting=!1,v(i)||(i=this.options.uniqueNames&&n?t?n.indexOf(e.name):M(n.keys[e.name],-1):e.series.autoIncrement()),-1===i){if(!t&&n)var r=n.length}else r=i;return"undefined"!==typeof r&&(this.names[r]=e.name,this.names.keys[e.name]=r),r},e.prototype.updateNames=function(){var e=this,t=this.names;0<t.length&&(Object.keys(t.keys).forEach((function(e){delete t.keys[e]})),t.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((function(t){t.xIncrement=null,t.points&&!t.isDirtyData||(e.max=Math.max(e.max,t.xData.length-1),t.processData(),t.generatePoints()),t.data.forEach((function(n,i){if(n&&n.options&&"undefined"!==typeof n.name){var r=e.nameToX(n);"undefined"!==typeof r&&r!==n.x&&(n.x=r,t.xData[i]=r)}}))})))},e.prototype.setAxisTranslation=function(){var e=this,t=e.max-e.min,n=e.linkedParent,i=!!e.categories,r=e.isXAxis,a=e.axisPointRange||0,o=0,s=0,l=e.transA;if(r||i||a){var u=e.getClosest();n?(o=n.minPointOffset,s=n.pointRangePadding):e.series.forEach((function(t){var n=i?1:r?M(t.options.pointRange,u,0):e.axisPointRange||0,l=t.options.pointPlacement;a=Math.max(a,n),e.single&&!i||(t=t.is("xrange")?!r:r,o=Math.max(o,t&&S(l)?0:n/2),s=Math.max(s,t&&"on"===l?0:n))})),n=e.ordinal&&e.ordinal.slope&&u?e.ordinal.slope/u:1,e.minPointOffset=o*=n,e.pointRangePadding=s*=n,e.pointRange=Math.min(a,e.single&&i?1:t),r&&(e.closestPointRange=u)}e.translationSlope=e.transA=l=e.staticScale||e.len/(t+s||1),e.transB=e.horiz?e.left:e.bottom,e.minPixelPadding=l*o,b(this,"afterSetAxisTranslation")},e.prototype.minFromRange=function(){return this.max-this.range},e.prototype.setTickInterval=function(e){var t=this.chart,n=this.logarithmic,i=this.options,r=this.isXAxis,a=this.isLinked,o=i.tickPixelInterval,s=this.categories,l=this.softThreshold,u=i.maxPadding,c=i.minPadding,h=k(i.tickInterval)&&0<=i.tickInterval?i.tickInterval:void 0,d=k(this.threshold)?this.threshold:null;this.dateTime||s||a||this.getTickAmount();var p=M(this.userMin,i.min),f=M(this.userMax,i.max);if(a){this.linkedParent=t[this.coll][i.linkedTo];var y=this.linkedParent.getExtremes();this.min=M(y.min,y.dataMin),this.max=M(y.max,y.dataMax),i.type!==this.linkedParent.options.type&&_(11,1,t)}else{if(l&&v(d))if(this.dataMin>=d)y=d,c=0;else if(this.dataMax<=d){var g=d;u=0}this.min=M(p,y,this.dataMin),this.max=M(f,g,this.dataMax)}if(n&&(this.positiveValuesOnly&&!e&&0>=Math.min(this.min,M(this.dataMin,this.min))&&_(10,1,t),this.min=m(n.log2lin(this.min),16),this.max=m(n.log2lin(this.max),16)),this.range&&v(this.max)&&(this.userMin=this.min=p=Math.max(this.dataMin,this.minFromRange()),this.userMax=f=this.max,this.range=null),b(this,"foundExtremes"),this.beforePadding&&this.beforePadding(),this.adjustForMinRange(),!(s||this.axisPointRange||this.stacking&&this.stacking.usePercentage||a)&&v(this.min)&&v(this.max)&&(t=this.max-this.min)&&(!v(p)&&c&&(this.min-=t*c),!v(f)&&u&&(this.max+=t*u)),k(this.userMin)||(k(i.softMin)&&i.softMin<this.min&&(this.min=p=i.softMin),k(i.floor)&&(this.min=Math.max(this.min,i.floor))),k(this.userMax)||(k(i.softMax)&&i.softMax>this.max&&(this.max=f=i.softMax),k(i.ceiling)&&(this.max=Math.min(this.max,i.ceiling))),l&&v(this.dataMin)&&(d=d||0,!v(p)&&this.min<d&&this.dataMin>=d?this.min=this.options.minRange?Math.min(d,this.max-this.minRange):d:!v(f)&&this.max>d&&this.dataMax<=d&&(this.max=this.options.minRange?Math.max(d,this.min+this.minRange):d)),k(this.min)&&k(this.max)&&!this.chart.polar&&this.min>this.max&&(v(this.options.min)?this.max=this.min:v(this.options.max)&&(this.min=this.max)),this.tickInterval=this.min===this.max||"undefined"===typeof this.min||"undefined"===typeof this.max?1:a&&this.linkedParent&&!h&&o===this.linkedParent.options.tickPixelInterval?h=this.linkedParent.tickInterval:M(h,this.tickAmount?(this.max-this.min)/Math.max(this.tickAmount-1,1):void 0,s?1:(this.max-this.min)*o/Math.max(this.len,o)),r&&!e){var x=this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max);this.series.forEach((function(e){e.forceCrop=e.forceCropping&&e.forceCropping(),e.processData(x)})),b(this,"postProcessData",{hasExtemesChanged:x})}this.setAxisTranslation(),b(this,"initialAxisTranslation"),this.pointRange&&!h&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval)),e=M(i.minTickInterval,this.dateTime&&!this.series.some((function(e){return e.noSharedTooltip}))?this.closestPointRange:0),!h&&this.tickInterval<e&&(this.tickInterval=e),this.dateTime||this.logarithmic||h||(this.tickInterval=L(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()},e.prototype.setTickPositions=function(){var e=this.options,t=e.tickPositions,n=this.getMinorTickInterval(),i=this.hasVerticalPanning(),r="colorAxis"===this.coll,a=(r||!i)&&e.startOnTick;if(i=(r||!i)&&e.endOnTick,r=e.tickPositioner,this.tickmarkOffset=this.categories&&"between"===e.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===n&&this.tickInterval?this.tickInterval/5:n,this.single=this.min===this.max&&v(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==e.allowDecimals),this.tickPositions=n=t&&t.slice(),!n){if(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200)))if(this.dateTime)n=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0);else if(this.logarithmic)n=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else for(var o=e=this.tickInterval;o<=2*e&&(n=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&n.length>this.tickAmount);)this.tickInterval=L(this,o*=1.1);else n=[this.min,this.max],_(19,!1,this.chart);n.length>this.len&&(n=[n[0],n.pop()])[0]===n[1]&&(n.length=1),this.tickPositions=n,r&&(r=r.apply(this,[this.min,this.max]))&&(this.tickPositions=n=r)}this.paddedTicks=n.slice(0),this.trimTicks(n,a,i),this.isLinked||(this.single&&2>n.length&&!this.categories&&!this.series.some((function(e){return e.is("heatmap")&&"between"===e.options.pointPlacement}))&&(this.min-=.5,this.max+=.5),t||r||this.adjustTickAmount()),b(this,"afterSetTickPositions")},e.prototype.trimTicks=function(e,t,n){var i=e[0],r=e[e.length-1],a=!this.isOrdinal&&this.minPointOffset||0;if(b(this,"trimTicks"),!this.isLinked){if(t&&-1/0!==i)this.min=i;else for(;this.min-a>e[0];)e.shift();if(n)this.max=r;else for(;this.max+a<e[e.length-1];)e.pop();0===e.length&&v(i)&&!this.options.tickPositions&&e.push((r+i)/2)}},e.prototype.alignToOthers=function(){var e,t=this,n=[this],i=t.options,r="yAxis"===this.coll&&this.chart.options.chart.alignThresholds,a=[];if(t.thresholdAlignment=void 0,(!1!==this.chart.options.chart.alignTicks&&i.alignTicks||r)&&!1!==i.startOnTick&&!1!==i.endOnTick&&!t.logarithmic){var o=function(e){var t=e.options;return[e.horiz?t.left:t.top,t.width,t.height,t.pane].join()},s=o(this);this.chart[this.coll].forEach((function(i){var r=i.series;r.length&&r.some((function(e){return e.visible}))&&i!==t&&o(i)===s&&(e=!0,n.push(i))}))}if(e&&r){n.forEach((function(e){e=e.getThresholdAlignment(t),k(e)&&a.push(e)}));var l=1<a.length?a.reduce((function(e,t){return e+t}),0)/a.length:void 0;n.forEach((function(e){e.thresholdAlignment=l}))}return e},e.prototype.getThresholdAlignment=function(e){if((!k(this.dataMin)||this!==e&&this.series.some((function(e){return e.isDirty||e.isDirtyData})))&&this.getSeriesExtremes(),k(this.threshold))return e=f((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1),this.options.reversed&&(e=1-e),e},e.prototype.getTickAmount=function(){var e=this.options,t=e.tickPixelInterval,n=e.tickAmount;!v(e.tickInterval)&&!n&&this.len<t&&!this.isRadial&&!this.logarithmic&&e.startOnTick&&e.endOnTick&&(n=2),!n&&this.alignToOthers()&&(n=Math.ceil(this.len/t)+1),4>n&&(this.finalTickAmt=n,n=5),this.tickAmount=n},e.prototype.adjustTickAmount=function(){var e=this,t=e.finalTickAmt,n=e.max,i=e.min,r=e.options,a=e.tickPositions,o=e.tickAmount,s=e.thresholdAlignment,l=a&&a.length,u=M(e.threshold,e.softThreshold?0:null),c=e.tickInterval;if(k(s)){var h=.5>s?Math.ceil(s*(o-1)):Math.floor(s*(o-1));r.reversed&&(h=o-1-h)}if(e.hasData()&&k(i)&&k(n)){if(s=function(){e.transA*=(l-1)/(o-1),e.min=r.startOnTick?a[0]:Math.min(i,a[0]),e.max=r.endOnTick?a[a.length-1]:Math.max(n,a[a.length-1])},k(h)&&k(e.threshold)){for(;a[h]!==u||a.length!==o||a[0]>i||a[a.length-1]<n;){for(a.length=0,a.push(e.threshold);a.length<o;)void 0===a[h]||a[h]>e.threshold?a.unshift(m(a[0]-c)):a.push(m(a[a.length-1]+c));if(c>8*e.tickInterval)break;c*=2}s()}else if(l<o){for(;a.length<o;)a.length%2||i===u?a.push(m(a[a.length-1]+c)):a.unshift(m(a[0]-c));s()}if(v(t)){for(c=u=a.length;c--;)(3===t&&1===c%2||2>=t&&0<c&&c<u-1)&&a.splice(c,1);e.finalTickAmt=void 0}}},e.prototype.setScale=function(){var e=!1,t=!1;this.series.forEach((function(n){e=e||n.isDirtyData||n.isDirty,t=t||n.xAxis&&n.xAxis.isDirty||!1})),this.setAxisSize();var n=this.len!==(this.old&&this.old.len);n||e||t||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(this.stacking&&this.stacking.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=n||this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max))):this.stacking&&this.stacking.cleanStacks(),e&&this.panningState&&(this.panningState.isDirty=!0),b(this,"afterSetScale")},e.prototype.setExtremes=function(e,t,n,i,r){var a=this,o=a.chart;n=M(n,!0),a.series.forEach((function(e){delete e.kdTree})),r=x(r,{min:e,max:t}),b(a,"setExtremes",r,(function(){a.userMin=e,a.userMax=t,a.eventArgs=r,n&&o.redraw(i)}))},e.prototype.zoom=function(e,t){var n=this,i=this.dataMin,r=this.dataMax,a=this.options,o=Math.min(i,M(a.min,i)),s=Math.max(r,M(a.max,r));return b(this,"zoom",e={newMin:e,newMax:t},(function(e){var t=e.newMin,a=e.newMax;t===n.min&&a===n.max||(n.allowZoomOutside||(v(i)&&(t<o&&(t=o),t>s&&(t=s)),v(r)&&(a<o&&(a=o),a>s&&(a=s))),n.displayBtn="undefined"!==typeof t||"undefined"!==typeof a,n.setExtremes(t,a,!1,void 0,{trigger:"zoom"})),e.zoomed=!0})),e.zoomed},e.prototype.setAxisSize=function(){var e=this.chart,t=this.options,n=t.offsets||[0,0,0,0],i=this.horiz,r=this.width=Math.round(P(M(t.width,e.plotWidth-n[3]+n[1]),e.plotWidth)),a=this.height=Math.round(P(M(t.height,e.plotHeight-n[0]+n[2]),e.plotHeight)),o=this.top=Math.round(P(M(t.top,e.plotTop+n[0]),e.plotHeight,e.plotTop));t=this.left=Math.round(P(M(t.left,e.plotLeft+n[3]),e.plotWidth,e.plotLeft)),this.bottom=e.chartHeight-a-o,this.right=e.chartWidth-r-t,this.len=Math.max(i?r:a,0),this.pos=i?t:o},e.prototype.getExtremes=function(){var e=this.logarithmic;return{min:e?m(e.lin2log(this.min)):this.min,max:e?m(e.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},e.prototype.getThreshold=function(e){var t=this.logarithmic,n=t?t.lin2log(this.min):this.min;return t=t?t.lin2log(this.max):this.max,null===e||-1/0===e?e=n:1/0===e?e=t:n>e?e=n:t<e&&(e=t),this.translate(e,0,1,0,1)},e.prototype.autoLabelAlign=function(e){var t=(M(e,0)-90*this.side+720)%360;return b(this,"autoLabelAlign",e={align:"center"},(function(e){15<t&&165>t?e.align="right":195<t&&345>t&&(e.align="left")})),e.align},e.prototype.tickSize=function(e){var t=this.options,n=M(t["tick"===e?"tickWidth":"minorTickWidth"],"tick"===e&&this.isXAxis&&!this.categories?1:0),i=t["tick"===e?"tickLength":"minorTickLength"];if(n&&i){"inside"===t[e+"Position"]&&(i=-i);var r=[i,n]}return b(this,"afterTickSize",e={tickSize:r}),e.tickSize},e.prototype.labelMetrics=function(){var e=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style.fontSize,this.ticks[e]&&this.ticks[e].label)},e.prototype.unsquish=function(){var e,t,n=this.options.labels,i=this.horiz,r=this.tickInterval,a=this.len/(((this.categories?1:0)+this.max-this.min)/r),o=n.rotation,s=this.labelMetrics(),l=Math.max(this.max-this.min,0),u=function(e){var t=e/(a||1);return(t=1<t?Math.ceil(t):1)*r>l&&1/0!==e&&1/0!==a&&l&&(t=Math.ceil(l/r)),m(t*r)},c=r,d=Number.MAX_VALUE;if(i){if(!n.staggerLines&&!n.step)if(k(o))var p=[o];else a<n.autoRotationLimit&&(p=n.autoRotation);p&&p.forEach((function(n){if(n===o||n&&-90<=n&&90>=n){var i=(t=u(Math.abs(s.h/Math.sin(h*n))))+Math.abs(n/360);i<d&&(d=i,e=n,c=t)}}))}else n.step||(c=u(s.h));return this.autoRotation=p,this.labelRotation=M(e,k(o)?o:0),c},e.prototype.getSlotWidth=function(e){var t=this.chart,n=this.horiz,i=this.options.labels,r=Math.max(this.tickPositions.length-(this.categories?0:1),1),a=t.margin[3];if(e&&k(e.slotWidth))return e.slotWidth;if(n&&2>i.step)return i.rotation?0:(this.staggerLines||1)*this.len/r;if(!n){if(void 0!==(e=i.style.width))return parseInt(String(e),10);if(a)return a-t.spacing[3]}return.33*t.chartWidth},e.prototype.renderUnsquish=function(){var e=this.chart,t=e.renderer,n=this.tickPositions,i=this.ticks,r=this.options.labels,a=r.style,o=this.horiz,s=this.getSlotWidth(),l=Math.max(1,Math.round(s-2*r.padding)),u={},c=this.labelMetrics(),h=a.textOverflow,d=0;if(S(r.rotation)||(u.rotation=r.rotation||0),n.forEach((function(e){(e=i[e]).movedLabel&&e.replaceMovedLabel(),e&&e.label&&e.label.textPxLength>d&&(d=e.label.textPxLength)})),this.maxLabelLength=d,this.autoRotation)d>l&&d>c.h?u.rotation=this.labelRotation:this.labelRotation=0;else if(s){var p=l;if(!h){var f="clip";for(l=n.length;!o&&l--;){var m=n[l];(m=i[m].label)&&(m.styles&&"ellipsis"===m.styles.textOverflow?m.css({textOverflow:"clip"}):m.textPxLength>s&&m.css({width:s+"px"}),m.getBBox().height>this.len/n.length-(c.h-c.f)&&(m.specificTextOverflow="ellipsis"))}}}u.rotation&&(p=d>.5*e.chartHeight?.33*e.chartHeight:d,h||(f="ellipsis")),(this.labelAlign=r.align||this.autoLabelAlign(this.labelRotation))&&(u.align=this.labelAlign),n.forEach((function(e){var t=(e=i[e])&&e.label,n=a.width,r={};t&&(t.attr(u),e.shortenLabel?e.shortenLabel():p&&!n&&"nowrap"!==a.whiteSpace&&(p<t.textPxLength||"SPAN"===t.element.tagName)?(r.width=p+"px",h||(r.textOverflow=t.specificTextOverflow||f),t.css(r)):t.styles&&t.styles.width&&!r.width&&!n&&t.css({width:null}),delete t.specificTextOverflow,e.rotation=u.rotation)}),this),this.tickRotCorr=t.rotCorr(c.b,this.labelRotation||0,0!==this.side)},e.prototype.hasData=function(){return this.series.some((function(e){return e.hasData()}))||this.options.showEmpty&&v(this.min)&&v(this.max)},e.prototype.addTitle=function(e){var t,n=this.chart.renderer,i=this.horiz,r=this.opposite,a=this.options.title,o=this.chart.styledMode;this.axisTitle||((t=a.textAlign)||(t=(i?{low:"left",middle:"center",high:"right"}:{low:r?"right":"left",middle:"center",high:r?"left":"right"})[a.align]),this.axisTitle=n.text(a.text||"",0,0,a.useHTML).attr({zIndex:7,rotation:a.rotation,align:t}).addClass("highcharts-axis-title"),o||this.axisTitle.css(T(a.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),o||a.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[e?"show":"hide"](e)},e.prototype.generateTick=function(e){var t=this.ticks;t[e]?t[e].addLabel():t[e]=new o(this,e)},e.prototype.getOffset=function(){var e=this,t=this,n=t.chart,i=t.horiz,r=t.options,a=t.side,o=t.ticks,s=t.tickPositions,l=t.coll,u=t.axisParent,c=n.renderer,h=n.inverted&&!t.isZAxis?[1,0,3,2][a]:a,d=t.hasData(),p=r.title,f=r.labels,m=n.axisOffset;n=n.clipOffset;var y,g=[-1,1,1,-1][a],_=r.className,x=0,w=0,k=0;if(t.showAxis=y=d||r.showEmpty,t.staggerLines=t.horiz&&f.staggerLines||void 0,!t.axisGroup){var S=function(t,n,i){return c.g(t).attr({zIndex:i}).addClass("highcharts-"+l.toLowerCase()+n+" "+(e.isRadial?"highcharts-radial-axis"+n+" ":"")+(_||"")).add(u)};t.gridGroup=S("grid","-grid",r.gridZIndex),t.axisGroup=S("axis","",r.zIndex),t.labelGroup=S("axis-labels","-labels",f.zIndex)}if(d||t.isLinked?(s.forEach((function(e){t.generateTick(e)})),t.renderUnsquish(),t.reserveSpaceDefault=0===a||2===a||{1:"left",3:"right"}[a]===t.labelAlign,M(f.reserveSpace,"center"===t.labelAlign||null,t.reserveSpaceDefault)&&s.forEach((function(e){k=Math.max(o[e].getLabelSize(),k)})),t.staggerLines&&(k*=t.staggerLines),t.labelOffset=k*(t.opposite?-1:1)):E(o,(function(e,t){e.destroy(),delete o[t]})),p&&p.text&&!1!==p.enabled&&(t.addTitle(y),y&&!1!==p.reserveSpace)){t.titleOffset=x=t.axisTitle.getBBox()[i?"height":"width"];var T=p.offset;w=v(T)?0:M(p.margin,i?5:10)}t.renderLine(),t.offset=g*M(r.offset,m[a]?m[a]+(r.margin||0):0),t.tickRotCorr=t.tickRotCorr||{x:0,y:0},p=0===a?-t.labelMetrics().h:2===a?t.tickRotCorr.y:0,d=Math.abs(k)+w,k&&(d=d-p+g*(i?M(f.y,t.tickRotCorr.y+8*g):f.x)),t.axisTitleMargin=M(T,d),t.getMaxLabelDimensions&&(t.maxLabelDimensions=t.getMaxLabelDimensions(o,s)),"colorAxis"!==l&&(i=this.tickSize("tick"),m[a]=Math.max(m[a],(t.axisTitleMargin||0)+x+g*t.offset,d,s&&s.length&&i?i[0]+g*t.offset:0),r=!t.axisLine||r.offset?0:2*Math.floor(t.axisLine.strokeWidth()/2),n[h]=Math.max(n[h],r)),b(this,"afterGetOffset")},e.prototype.getLinePath=function(e){var t=this.chart,n=this.opposite,i=this.offset,r=this.horiz,a=this.left+(n?this.width:0)+i;return i=t.chartHeight-this.bottom-(n?this.height:0)+i,n&&(e*=-1),t.renderer.crispLine([["M",r?this.left:a,r?i:this.top],["L",r?t.chartWidth-this.right:a,r?i:t.chartHeight-this.bottom]],e)},e.prototype.renderLine=function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},e.prototype.getTitlePosition=function(){var e=this.horiz,t=this.left,n=this.top,i=this.len,r=this.options.title,a=e?t:n,o=this.opposite,s=this.offset,l=r.x,u=r.y,c=this.axisTitle,h=this.chart.renderer.fontMetrics(r.style.fontSize,c);return c=c?Math.max(c.getBBox(!1,0).height-h.h-1,0):0,i={low:a+(e?0:i),middle:a+i/2,high:a+(e?i:0)}[r.align],t=(e?n+this.height:t)+(e?1:-1)*(o?-1:1)*(this.axisTitleMargin||0)+[-c,c,h.f,-c][this.side],e={x:e?i+l:t+(o?this.width:0)+s+l,y:e?t+u-(o?this.height:0)+s:i+u},b(this,"afterGetTitlePosition",{titlePosition:e}),e},e.prototype.renderMinorTick=function(e,t){var n=this.minorTicks;n[e]||(n[e]=new o(this,e,"minor")),t&&n[e].isNew&&n[e].render(null,!0),n[e].render(null,!1,1)},e.prototype.renderTick=function(e,t,n){var i=this.ticks;(!this.isLinked||e>=this.min&&e<=this.max||this.grid&&this.grid.isColumn)&&(i[e]||(i[e]=new o(this,e)),n&&i[e].isNew&&i[e].render(t,!0,-1),i[e].render(t))},e.prototype.render=function(){var e,t,n=this,i=n.chart,r=n.logarithmic,s=n.options,u=n.isLinked,c=n.tickPositions,h=n.axisTitle,d=n.ticks,p=n.minorTicks,f=n.alternateBands,m=s.stackLabels,v=s.alternateGridColor,y=n.tickmarkOffset,g=n.axisLine,_=n.showAxis,x=l(i.renderer.globalAnimation);if(n.labelEdge.length=0,n.overlap=!1,[d,p,f].forEach((function(e){E(e,(function(e){e.isActive=!1}))})),n.hasData()||u){var w=n.chart.hasRendered&&n.old&&k(n.old.min);n.minorTickInterval&&!n.categories&&n.getMinorTickPositions().forEach((function(e){n.renderMinorTick(e,w)})),c.length&&(c.forEach((function(e,t){n.renderTick(e,t,w)})),y&&(0===n.min||n.single)&&(d[-1]||(d[-1]=new o(n,-1,null,!0)),d[-1].render(-1))),v&&c.forEach((function(o,s){t="undefined"!==typeof c[s+1]?c[s+1]+y:n.max-y,0===s%2&&o<n.max&&t<=n.max+(i.polar?-y:y)&&(f[o]||(f[o]=new a.PlotLineOrBand(n)),e=o+y,f[o].options={from:r?r.lin2log(e):e,to:r?r.lin2log(t):t,color:v,className:"highcharts-alternate-grid"},f[o].render(),f[o].isActive=!0)})),n._addedPlotLB||(n._addedPlotLB=!0,(s.plotLines||[]).concat(s.plotBands||[]).forEach((function(e){n.addPlotBandOrLine(e)})))}[d,p,f].forEach((function(e){var t=[],n=x.duration;E(e,(function(e,n){e.isActive||(e.render(n,!1,0),e.isActive=!1,t.push(n))})),I((function(){for(var n=t.length;n--;)e[t[n]]&&!e[t[n]].isActive&&(e[t[n]].destroy(),delete e[t[n]])}),e!==f&&i.hasRendered&&n?n:0)})),g&&(g[g.isPlaced?"animate":"attr"]({d:this.getLinePath(g.strokeWidth())}),g.isPlaced=!0,g[_?"show":"hide"](_)),h&&_&&(s=n.getTitlePosition(),h[h.isNew?"attr":"animate"](s),h.isNew=!1),m&&m.enabled&&n.stacking&&n.stacking.renderStackTotals(),n.old={len:n.len,max:n.max,min:n.min,transA:n.transA,userMax:n.userMax,userMin:n.userMin},n.isDirty=!1,b(this,"afterRender")},e.prototype.redraw=function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(e){e.render()}))),this.series.forEach((function(e){e.isDirty=!0}))},e.prototype.getKeepProps=function(){return this.keepProps||e.keepProps},e.prototype.destroy=function(e){var t=this,n=t.plotLinesAndBands,i=this.eventOptions;if(b(this,"destroy",{keepEvents:e}),e||A(t),[t.ticks,t.minorTicks,t.alternateBands].forEach((function(e){y(e)})),n)for(e=n.length;e--;)n[e].destroy();for(var r in"axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach((function(e){t[e]&&(t[e]=t[e].destroy())})),t.plotLinesAndBandsGroups)t.plotLinesAndBandsGroups[r]=t.plotLinesAndBandsGroups[r].destroy();E(t,(function(e,n){-1===t.getKeepProps().indexOf(n)&&delete t[n]})),this.eventOptions=i},e.prototype.drawCrosshair=function(e,t){var i,r=this.crosshair,a=M(r&&r.snap,!0),o=this.chart,s=this.cross;if(b(this,"drawCrosshair",{e:e,point:t}),e||(e=this.cross&&this.cross.e),r&&!1!==(v(t)||!a)){if(a?v(t)&&(i=M("colorAxis"!==this.coll?t.crosshairPos:null,this.isXAxis?t.plotX:this.len-t.plotY)):i=e&&(this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos),v(i)){var l={value:t&&(this.isXAxis?t.x:M(t.stackY,t.y)),translatedValue:i};o.polar&&x(l,{isCrosshair:!0,chartX:e&&e.chartX,chartY:e&&e.chartY,point:t}),l=this.getPlotLinePath(l)||null}if(!v(l))return void this.hideCrosshair();a=this.categories&&!this.isRadial,s||(this.cross=s=o.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(a?"category ":"thin ")+(r.className||"")).attr({zIndex:M(r.zIndex,2)}).add(),o.styledMode||(s.attr({stroke:r.color||(a?n.parse("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":M(r.width,1)}).css({"pointer-events":"none"}),r.dashStyle&&s.attr({dashstyle:r.dashStyle}))),s.show().attr({d:l}),a&&!r.width&&s.attr({"stroke-width":this.transA}),this.cross.e=e}else this.hideCrosshair();b(this,"afterDrawCrosshair",{e:e,point:t})},e.prototype.hideCrosshair=function(){this.cross&&this.cross.hide(),b(this,"afterHideCrosshair")},e.prototype.hasVerticalPanning=function(){var e=this.chart.options.chart.panning;return!!(e&&e.enabled&&/y/.test(e.type))},e.prototype.validatePositiveValue=function(e){return k(e)&&0<e},e.prototype.update=function(e,t){var n=this.chart;e=T(this.userOptions,e),this.destroy(!0),this.init(n,e),n.isDirtyBox=!0,M(t,!0)&&n.redraw()},e.prototype.remove=function(e){for(var t=this.chart,n=this.coll,i=this.series,r=i.length;r--;)i[r]&&i[r].remove(!1);g(t.axes,this),g(t[n],this),t[n].forEach((function(e,t){e.options.index=e.userOptions.index=t})),this.destroy(),t.isDirtyBox=!0,M(e,!0)&&t.redraw()},e.prototype.setTitle=function(e,t){this.update({title:e},t)},e.prototype.setCategories=function(e,t){this.update({categories:e},t)},e.defaultOptions=t.defaultXAxisOptions,e.keepProps="extKey hcEvents names series userMax userMin".split(" "),e}(),e})),t(n,"Core/Axis/DateTimeAxis.js",[n["Core/Utilities.js"]],(function(e){var t,n=e.addEvent,i=e.getMagnitude,r=e.normalizeTickInterval,a=e.timeUnits;return function(e){function t(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function o(e){"datetime"!==e.userOptions.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new l(this))}var s=[];e.compose=function(e){return-1===s.indexOf(e)&&(s.push(e),e.keepProps.push("dateTime"),e.prototype.getTimeTicks=t,n(e,"init",o)),e};var l=function(){function e(e){this.axis=e}return e.prototype.normalizeTimeTickInterval=function(e,t){var n=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];t=n[n.length-1];var o,s=a[t[0]],l=t[1];for(o=0;o<n.length&&(t=n[o],s=a[t[0]],l=t[1],!(n[o+1]&&e<=(s*l[l.length-1]+a[n[o+1][0]])/2));o++);return s===a.year&&e<5*s&&(l=[1,2,5]),{unitRange:s,count:e=r(e/s,l,"year"===t[0]?Math.max(i(e/s),1):1),unitName:t[0]}},e.prototype.getXDateFormat=function(e,t){var n=this.axis;return n.closestPointRange?n.chart.time.getDateFormat(n.closestPointRange,e,n.options.startOfWeek,t)||t.year:t.day},e}();e.Additions=l}(t||(t={})),t})),t(n,"Core/Axis/LogarithmicAxis.js",[n["Core/Utilities.js"]],(function(e){var t,n=e.addEvent,i=e.normalizeTickInterval,r=e.pick;return function(e){function t(e){var t=this.logarithmic;"logarithmic"!==e.userOptions.type?this.logarithmic=void 0:t||(this.logarithmic=new s(this))}function a(){var e=this.logarithmic;e&&(this.lin2val=function(t){return e.lin2log(t)},this.val2lin=function(t){return e.log2lin(t)})}var o=[];e.compose=function(e){return-1===o.indexOf(e)&&(o.push(e),e.keepProps.push("logarithmic"),n(e,"init",t),n(e,"afterInit",a)),e};var s=function(){function e(e){this.axis=e}return e.prototype.getLogTickPositions=function(e,t,n,a){var o=this.axis,s=o.len,l=o.options,u=[];if(a||(this.minorAutoInterval=void 0),.5<=e)e=Math.round(e),u=o.getLinearTickPositions(e,t,n);else if(.08<=e){var c,h=Math.floor(t),d=l=void 0;for(s=.3<e?[1,2,4]:.15<e?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];h<n+1&&!d;h++){var p=s.length;for(c=0;c<p&&!d;c++){var f=this.log2lin(this.lin2log(h)*s[c]);f>t&&(!a||l<=n)&&"undefined"!==typeof l&&u.push(l),l>n&&(d=!0),l=f}}}else t=this.lin2log(t),n=this.lin2log(n),e=a?o.getMinorTickInterval():l.tickInterval,e=r("auto"===e?null:e,this.minorAutoInterval,l.tickPixelInterval/(a?5:1)*(n-t)/((a?s/o.tickPositions.length:s)||1)),e=i(e),u=o.getLinearTickPositions(e,t,n).map(this.log2lin),a||(this.minorAutoInterval=e/5);return a||(o.tickInterval=e),u},e.prototype.lin2log=function(e){return Math.pow(10,e)},e.prototype.log2lin=function(e){return Math.log(e)/Math.LN10},e}();e.Additions=s}(t||(t={})),t})),t(n,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[n["Core/Utilities.js"]],(function(e){var t,n=e.erase,i=e.extend,r=e.isNumber;return function(e){var t,a=[];e.compose=function(e,n){return t||(t=e),-1===a.indexOf(n)&&(a.push(n),i(n.prototype,o.prototype)),n};var o=function(){function e(){}return e.prototype.getPlotBandPath=function(e,t,n){void 0===n&&(n=this.options);var i=this.getPlotLinePath({value:t,force:!0,acrossPanes:n.acrossPanes}),a=[],o=this.horiz;if(t=!r(this.min)||!r(this.max)||e<this.min&&t<this.min||e>this.max&&t>this.max,e=this.getPlotLinePath({value:e,force:!0,acrossPanes:n.acrossPanes}),n=1,e&&i){if(t){var s=e.toString()===i.toString();n=0}for(t=0;t<e.length;t+=2){var l=e[t],u=e[t+1],c=i[t],h=i[t+1];"M"!==l[0]&&"L"!==l[0]||"M"!==u[0]&&"L"!==u[0]||"M"!==c[0]&&"L"!==c[0]||"M"!==h[0]&&"L"!==h[0]||(o&&c[1]===l[1]?(c[1]+=n,h[1]+=n):o||c[2]!==l[2]||(c[2]+=n,h[2]+=n),a.push(["M",l[1],l[2]],["L",u[1],u[2]],["L",h[1],h[2]],["L",c[1],c[2]],["Z"])),a.isFlat=s}}return a},e.prototype.addPlotBand=function(e){return this.addPlotBandOrLine(e,"plotBands")},e.prototype.addPlotLine=function(e){return this.addPlotBandOrLine(e,"plotLines")},e.prototype.addPlotBandOrLine=function(e,n){var i=this,r=this.userOptions,a=new t(this,e);if(this.visible&&(a=a.render()),a){if(this._addedPlotLB||(this._addedPlotLB=!0,(r.plotLines||[]).concat(r.plotBands||[]).forEach((function(e){i.addPlotBandOrLine(e)}))),n){var o=r[n]||[];o.push(e),r[n]=o}this.plotLinesAndBands.push(a)}return a},e.prototype.removePlotBandOrLine=function(e){var t=this.plotLinesAndBands,i=this.options,r=this.userOptions;if(t){for(var a=t.length;a--;)t[a].id===e&&t[a].destroy();[i.plotLines||[],r.plotLines||[],i.plotBands||[],r.plotBands||[]].forEach((function(t){for(a=t.length;a--;)(t[a]||{}).id===e&&n(t,t[a])}))}},e.prototype.removePlotBand=function(e){this.removePlotBandOrLine(e)},e.prototype.removePlotLine=function(e){this.removePlotBandOrLine(e)},e}()}(t||(t={})),t})),t(n,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[n["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],n["Core/Utilities.js"]],(function(e,t){var n=t.arrayMax,i=t.arrayMin,r=t.defined,a=t.destroyObjectProperties,o=t.erase,s=t.fireEvent,l=t.merge,u=t.objectEach,c=t.pick;return t=function(){function t(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)}return t.compose=function(n){return e.compose(t,n)},t.prototype.render=function(){s(this,"render");var e=this,t=e.axis,n=t.horiz,i=t.logarithmic,a=e.options,o=a.color,h=c(a.zIndex,0),d=a.events,p={},f=t.chart.renderer,m=a.label,v=e.label,y=a.to,g=a.from,_=a.value,x=e.svgElem,b=[],w=r(g)&&r(y);b=r(_);var k=!x,S={class:"highcharts-plot-"+(w?"band ":"line ")+(a.className||"")},T=w?"bands":"lines";if(i&&(g=i.log2lin(g),y=i.log2lin(y),_=i.log2lin(_)),t.chart.styledMode||(b?(S.stroke=o||"#999999",S["stroke-width"]=c(a.width,1),a.dashStyle&&(S.dashstyle=a.dashStyle)):w&&(S.fill=o||"#e6ebf5",a.borderWidth&&(S.stroke=a.borderColor,S["stroke-width"]=a.borderWidth))),p.zIndex=h,T+="-"+h,(i=t.plotLinesAndBandsGroups[T])||(t.plotLinesAndBandsGroups[T]=i=f.g("plot-"+T).attr(p).add()),k&&(e.svgElem=x=f.path().attr(S).add(i)),b)b=t.getPlotLinePath({value:_,lineWidth:x.strokeWidth(),acrossPanes:a.acrossPanes});else{if(!w)return;b=t.getPlotBandPath(g,y,a)}return!e.eventsAdded&&d&&(u(d,(function(t,n){x.on(n,(function(t){d[n].apply(e,[t])}))})),e.eventsAdded=!0),(k||!x.d)&&b&&b.length?x.attr({d:b}):x&&(b?(x.show(),x.animate({d:b})):x.d&&(x.hide(),v&&(e.label=v=v.destroy()))),m&&(r(m.text)||r(m.formatter))&&b&&b.length&&0<t.width&&0<t.height&&!b.isFlat?(m=l({align:n&&w&&"center",x:n?!w&&4:10,verticalAlign:!n&&w&&"middle",y:n?w?16:10:w?6:-4,rotation:n&&!w&&90},m),this.renderLabel(m,b,w,h)):v&&v.hide(),e},t.prototype.renderLabel=function(e,t,r,a){var o=this.axis,s=o.chart.renderer,u=this.label;u||(this.label=u=s.text(this.getLabelText(e),0,0,e.useHTML).attr({align:e.textAlign||e.align,rotation:e.rotation,class:"highcharts-plot-"+(r?"band":"line")+"-label "+(e.className||""),zIndex:a}).add(),o.chart.styledMode||u.css(l({textOverflow:"ellipsis"},e.style))),a=t.xBounds||[t[0][1],t[1][1],r?t[2][1]:t[0][1]],t=t.yBounds||[t[0][2],t[1][2],r?t[2][2]:t[0][2]],r=i(a),s=i(t),u.align(e,!1,{x:r,y:s,width:n(a)-r,height:n(t)-s}),u.alignValue&&"left"!==u.alignValue||u.css({width:(90===u.rotation?o.height-(u.alignAttr.y-o.top):o.width-(u.alignAttr.x-o.left))+"px"}),u.show(!0)},t.prototype.getLabelText=function(e){return r(e.formatter)?e.formatter.call(this):e.text},t.prototype.destroy=function(){o(this.axis.plotLinesAndBands,this),delete this.axis,a(this)},t}()})),t(n,"Core/Tooltip.js",[n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r){var a=e.format,o=t.doc,s=n.distribute,l=r.addEvent,u=r.clamp,c=r.css,h=r.defined,d=r.discardElement,p=r.extend,f=r.fireEvent,m=r.isArray,v=r.isNumber,y=r.isString,g=r.merge,_=r.pick,x=r.splat,b=r.syncTimeout;return e=function(){function e(e,t){this.allowShared=!0,this.container=void 0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.now={},this.options={},this.outside=!1,this.chart=e,this.init(e,t)}return e.prototype.applyFilter=function(){var e=this.chart;e.renderer.definition({tagName:"filter",attributes:{id:"drop-shadow-"+e.index,opacity:.5},children:[{tagName:"feGaussianBlur",attributes:{in:"SourceAlpha",stdDeviation:1}},{tagName:"feOffset",attributes:{dx:1,dy:1}},{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"linear",slope:.3}}]},{tagName:"feMerge",children:[{tagName:"feMergeNode"},{tagName:"feMergeNode",attributes:{in:"SourceGraphic"}}]}]})},e.prototype.bodyFormatter=function(e){return e.map((function(e){var t=e.series.tooltipOptions;return(t[(e.point.formatPrefix||"point")+"Formatter"]||e.point.tooltipFormatter).call(e.point,t[(e.point.formatPrefix||"point")+"Format"]||"")}))},e.prototype.cleanSplit=function(e){this.chart.series.forEach((function(t){var n=t&&t.tt;n&&(!n.isActive||e?t.tt=n.destroy():n.isActive=!1)}))},e.prototype.defaultFormatter=function(e){var t=this.points||x(this),n=[e.tooltipFooterHeaderFormatter(t[0])];return(n=n.concat(e.bodyFormatter(t))).push(e.tooltipFooterHeaderFormatter(t[0],!0)),n},e.prototype.destroy=function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(!0),this.tt=this.tt.destroy()),this.renderer&&(this.renderer=this.renderer.destroy(),d(this.container)),r.clearTimeout(this.hideTimer),r.clearTimeout(this.tooltipTimeout)},e.prototype.getAnchor=function(e,t){var n,i,r=this.chart,a=r.pointer,o=r.inverted,s=r.plotTop,l=r.plotLeft,u=0,c=0;return e=x(e),this.followPointer&&t?("undefined"===typeof t.chartX&&(t=a.normalize(t)),a=[t.chartX-l,t.chartY-s]):e[0].tooltipPos?a=e[0].tooltipPos:(e.forEach((function(e){n=e.series.yAxis,i=e.series.xAxis,u+=e.plotX||0,c+=e.plotLow?(e.plotLow+(e.plotHigh||0))/2:e.plotY||0,i&&n&&(o?(u+=s+r.plotHeight-i.len-i.pos,c+=l+r.plotWidth-n.len-n.pos):(u+=i.pos-l,c+=n.pos-s))})),u/=e.length,c/=e.length,a=[o?r.plotWidth-c:u,o?r.plotHeight-u:c],this.shared&&1<e.length&&t&&(o?a[0]=t.chartX-l:a[1]=t.chartY-s)),a.map(Math.round)},e.prototype.getLabel=function(){var e,n=this,r=this.chart.styledMode,a=this.options,o=this.split&&this.allowShared,s="tooltip"+(h(a.className)?" "+a.className:""),u=a.style.pointerEvents||(!this.followPointer&&a.stickOnContact?"auto":"none"),d=function(){n.inContact=!0},p=function(e){var t=n.chart.hoverSeries;n.inContact=n.shouldStickOnContact()&&n.chart.pointer.inClass(e.relatedTarget,"highcharts-tooltip"),!n.inContact&&t&&t.onMouseOut&&t.onMouseOut()},f=this.chart.renderer;if(n.label){var m=!n.label.hasClass("highcharts-label");(o&&!m||!o&&m)&&n.destroy()}if(!this.label){if(this.outside){m=this.chart.options.chart.style;var v=i.getRendererType();this.container=e=t.doc.createElement("div"),e.className="highcharts-tooltip-container",c(e,{position:"absolute",top:"1px",pointerEvents:u,zIndex:Math.max(this.options.style.zIndex||0,(m&&m.zIndex||0)+3)}),l(e,"mouseenter",d),l(e,"mouseleave",p),t.doc.body.appendChild(e),this.renderer=f=new v(e,0,0,m,void 0,void 0,f.styledMode)}if(o?this.label=f.g(s):(this.label=f.label("",0,0,a.shape,void 0,void 0,a.useHTML,void 0,s).attr({padding:a.padding,r:a.borderRadius}),r||this.label.attr({fill:a.backgroundColor,"stroke-width":a.borderWidth}).css(a.style).css({pointerEvents:u}).shadow(a.shadow)),r&&a.shadow&&(this.applyFilter(),this.label.attr({filter:"url(#drop-shadow-"+this.chart.index+")"})),n.outside&&!n.split){var y=this.label,g=y.xSetter,_=y.ySetter;y.xSetter=function(t){g.call(y,n.distance),e.style.left=t+"px"},y.ySetter=function(t){_.call(y,n.distance),e.style.top=t+"px"}}this.label.on("mouseenter",d).on("mouseleave",p).attr({zIndex:8}).add()}return this.label},e.prototype.getPosition=function(e,t,n){var i,r=this.chart,a=this.distance,s={},l=r.inverted&&n.h||0,u=this.outside,c=u?o.documentElement.clientWidth-2*a:r.chartWidth,h=u?Math.max(o.body.scrollHeight,o.documentElement.scrollHeight,o.body.offsetHeight,o.documentElement.offsetHeight,o.documentElement.clientHeight):r.chartHeight,d=r.pointer.getChartPosition(),p=function(i){var o="x"===i;return[i,o?c:h,o?e:t].concat(u?[o?e*d.scaleX:t*d.scaleY,o?d.left-a+(n.plotX+r.plotLeft)*d.scaleX:d.top-a+(n.plotY+r.plotTop)*d.scaleY,0,o?c:h]:[o?e:t,o?n.plotX+r.plotLeft:n.plotY+r.plotTop,o?r.plotLeft:r.plotTop,o?r.plotLeft+r.plotWidth:r.plotTop+r.plotHeight])},f=p("y"),m=p("x");p=!!n.negative,!r.polar&&r.hoverSeries&&r.hoverSeries.yAxis&&r.hoverSeries.yAxis.reversed&&(p=!p);var v=!this.followPointer&&_(n.ttBelow,!r.inverted===p),y=function(e,t,n,i,r,o,c){var h=u?"y"===e?a*d.scaleY:a*d.scaleX:a,p=(n-i)/2,f=i<r-a,m=r+a+i<t,y=r-h-n+p;if(r=r+h-p,v&&m)s[e]=r;else if(!v&&f)s[e]=y;else if(f)s[e]=Math.min(c-i,0>y-l?y:y-l);else{if(!m)return!1;s[e]=Math.max(o,r+l+n>t?r:r+l)}},g=function(e,t,n,i,r){var o;return r<a||r>t-a?o=!1:s[e]=r<n/2?1:r>t-i/2?t-i-2:r-n/2,o},x=function(e){var t=f;f=m,m=t,i=e};return(r.inverted||1<this.len)&&x(),function e(){!1!==y.apply(0,f)?!1!==g.apply(0,m)||i||(x(!0),e()):i?s.x=s.y=0:(x(!0),e())}(),s},e.prototype.hide=function(e){var t=this;r.clearTimeout(this.hideTimer),e=_(e,this.options.hideDelay),this.isHidden||(this.hideTimer=b((function(){t.getLabel().fadeOut(e?void 0:e),t.isHidden=!0}),e))},e.prototype.init=function(e,t){this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=t.split&&!e.inverted&&!e.polar,this.shared=t.shared||this.split,this.outside=_(t.outside,!(!e.scrollablePixelsX&&!e.scrollablePixelsY))},e.prototype.shouldStickOnContact=function(){return!(this.followPointer||!this.options.stickOnContact)},e.prototype.isStickyOnContact=function(){return!(!this.shouldStickOnContact()||!this.inContact)},e.prototype.move=function(e,t,n,i){var a=this,o=a.now,s=!1!==a.options.animation&&!a.isHidden&&(1<Math.abs(e-o.x)||1<Math.abs(t-o.y)),l=a.followPointer||1<a.len;p(o,{x:s?(2*o.x+e)/3:e,y:s?(o.y+t)/2:t,anchorX:l?void 0:s?(2*o.anchorX+n)/3:n,anchorY:l?void 0:s?(o.anchorY+i)/2:i}),a.getLabel().attr(o),a.drawTracker(),s&&(r.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((function(){a&&a.move(e,t,n,i)}),32))},e.prototype.refresh=function(e,t){var n=this.chart,i=this.options,a=x(e),o=a[0],s=[],l=i.formatter||this.defaultFormatter,u=this.shared,c=n.styledMode,h={};if(i.enabled&&o.series){r.clearTimeout(this.hideTimer),this.allowShared=!(!m(e)&&e.series&&e.series.noSharedTooltip),this.followPointer=!this.split&&o.series.tooltipOptions.followPointer;var d=(e=this.getAnchor(e,t))[0],p=e[1];if(u&&this.allowShared?(n.pointer.applyInactiveState(a),a.forEach((function(e){e.setState("hover"),s.push(e.getLabelConfig())})),(h={x:o.category,y:o.y}).points=s):h=o.getLabelConfig(),this.len=s.length,l=l.call(h,this),u=o.series,this.distance=_(u.tooltipOptions.distance,16),!1===l)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(l,a);else{var v=d,y=p;if(t&&n.pointer.isDirectTouch&&(v=t.chartX-n.plotLeft,y=t.chartY-n.plotTop),!n.polar&&!1!==u.options.clip&&!a.some((function(e){return e.series.shouldShowTooltip(v,y)})))return void this.hide();t=this.getLabel(),i.style.width&&!c||t.css({width:this.chart.spacingBox.width+"px"}),t.attr({text:l&&l.join?l.join(""):l}),t.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+_(o.colorIndex,u.colorIndex)),c||t.attr({stroke:i.borderColor||o.color||u.color||"#666666"}),this.updatePosition({plotX:d,plotY:p,negative:o.negative,ttBelow:o.ttBelow,h:e[2]||0})}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}f(this,"refresh")}},e.prototype.renderSplit=function(e,t){function n(e,t,n,r,a){return void 0===a&&(a=!0),n?(t=P?0:L,e=u(e-r/2,C.left,C.right-r-(i.outside?A:0))):(t-=D,e=u(e=a?e-r-k:e+k,a?e:C.left,C.right)),{x:e,y:t}}var i=this,r=i.chart,a=i.chart,l=a.chartWidth,c=a.chartHeight,h=a.plotHeight,d=a.plotLeft,f=a.plotTop,m=a.pointer,v=a.scrollablePixelsY;v=void 0===v?0:v;var g=a.scrollablePixelsX,x=a.scrollingContainer,b=(x=void 0===x?{scrollLeft:0,scrollTop:0}:x).scrollLeft;x=x.scrollTop;var w=a.styledMode,k=i.distance,S=i.options,T=i.options.positioner,C=i.outside&&"number"!==typeof g?o.documentElement.getBoundingClientRect():{left:b,right:b+l,top:x,bottom:x+c},E=i.getLabel(),M=this.renderer||r.renderer,P=!(!r.xAxis[0]||!r.xAxis[0].opposite),A=(r=m.getChartPosition()).left;r=r.top;var D=f+x,I=0,L=h-v;y(e)&&(e=[!1,e]),e=e.slice(0,t.length+1).reduce((function(e,r,a){if(!1!==r&&""!==r){var o=(a=t[a-1]||{isHeader:!0,plotX:t[0].plotX,plotY:h,series:{}}).isHeader,s=o?i:a.series;r=r.toString();var l=s.tt,c=a.isHeader,p=a.series,m="highcharts-color-"+_(a.colorIndex,p.colorIndex,"none");if(l||(l={padding:S.padding,r:S.borderRadius},w||(l.fill=S.backgroundColor,l["stroke-width"]=S.borderWidth),l=M.label("",0,0,S[c?"headerShape":"shape"],void 0,void 0,S.useHTML).addClass((c?"highcharts-tooltip-header ":"")+"highcharts-tooltip-box "+m).attr(l).add(E)),l.isActive=!0,l.attr({text:r}),w||l.css(S.style).shadow(S.shadow).attr({stroke:S.borderColor||a.color||p.color||"#333333"}),r=(c=(s=s.tt=l).getBBox()).width+s.strokeWidth(),o&&(I=c.height,L+=I,P&&(D-=I)),p=void 0===(p=a.plotX)?0:p,m=void 0===(m=a.plotY)?0:m,l=a.series,a.isHeader){p=d+p;var v=f+h/2}else{var y=l.xAxis,g=l.yAxis;p=y.pos+u(p,-k,y.len+k),l.shouldShowTooltip(0,g.pos-f+m,{ignoreX:!0})&&(v=g.pos+m)}p=u(p,C.left-k,C.right+k),"number"===typeof v?(c=c.height+1,m=T?T.call(i,r,c,a):n(p,v,o,r),e.push({align:T?0:void 0,anchorX:p,anchorY:v,boxWidth:r,point:a,rank:_(m.rank,o?1:0),size:c,target:m.y,tt:s,x:m.x})):s.isActive=!1}return e}),[]),!T&&e.some((function(e){var t=(i.outside?A:0)+e.anchorX;return t<C.left&&t+e.boxWidth<C.right||t<A-C.left+e.boxWidth&&C.right-t>t}))&&(e=e.map((function(e){var t=n(e.anchorX,e.anchorY,e.point.isHeader,e.boxWidth,!1);return p(e,{target:t.y,x:t.x})}))),i.cleanSplit(),s(e,L);var O=A,z=A;e.forEach((function(e){var t=e.x,n=e.boxWidth;(e=e.isHeader)||(i.outside&&A+t<O&&(O=A+t),!e&&i.outside&&O+n>z&&(z=A+t))})),e.forEach((function(e){var t=e.x,n=e.anchorX,r=e.pos,a=e.point.isHeader;if(r={visibility:"undefined"===typeof r?"hidden":"inherit",x:t,y:r+D,anchorX:n,anchorY:e.anchorY},i.outside&&t<n){var o=A-O;0<o&&(a||(r.x=t+o,r.anchorX=n+o),a&&(r.x=(z-O)/2,r.anchorX=n+o))}e.tt.attr(r)})),e=i.container,v=i.renderer,i.outside&&e&&v&&(a=E.getBBox(),v.setSize(a.width+a.x,a.height+a.y,!1),e.style.left=O+"px",e.style.top=r+"px")},e.prototype.drawTracker=function(){if(this.followPointer||!this.options.stickOnContact)this.tracker&&this.tracker.destroy();else{var e=this.chart,t=this.label,n=this.shared?e.hoverPoints:e.hoverPoint;if(t&&n){var i={x:0,y:0,width:0,height:0};n=this.getAnchor(n);var r=t.getBBox();n[0]+=e.plotLeft-t.translateX,n[1]+=e.plotTop-t.translateY,i.x=Math.min(0,n[0]),i.y=Math.min(0,n[1]),i.width=0>n[0]?Math.max(Math.abs(n[0]),r.width-n[0]):Math.max(Math.abs(n[0]),r.width),i.height=0>n[1]?Math.max(Math.abs(n[1]),r.height-Math.abs(n[1])):Math.max(Math.abs(n[1]),r.height),this.tracker?this.tracker.attr(i):(this.tracker=t.renderer.rect(i).addClass("highcharts-tracker").add(t),e.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}}},e.prototype.styledModeFormat=function(e){return e.replace('style="font-size: 10px"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex}"')},e.prototype.tooltipFooterHeaderFormatter=function(e,t){var n=e.series,i=n.tooltipOptions,r=n.xAxis,o=r&&r.dateTime;r={isFooter:t,labelConfig:e};var s=i.xDateFormat,l=i[t?"footerFormat":"headerFormat"];return f(this,"headerFormatter",r,(function(t){o&&!s&&v(e.key)&&(s=o.getXDateFormat(e.key,i.dateTimeLabelFormats)),o&&s&&(e.point&&e.point.tooltipDateKeys||["key"]).forEach((function(e){l=l.replace("{point."+e+"}","{point."+e+":"+s+"}")})),n.chart.styledMode&&(l=this.styledModeFormat(l)),t.text=a(l,{point:e,series:n},this.chart)})),r.text},e.prototype.update=function(e){this.destroy(),g(!0,this.chart.options.tooltip.userOptions,e),this.init(this.chart,g(!0,this.options,e))},e.prototype.updatePosition=function(e){var t=this.chart,n=this.options,i=t.pointer,r=this.getLabel();i=i.getChartPosition();var a=(n.positioner||this.getPosition).call(this,r.width,r.height,e),o=e.plotX+t.plotLeft;e=e.plotY+t.plotTop,this.outside&&(n=n.borderWidth+2*this.distance,this.renderer.setSize(r.width+n,r.height+n,!1),1===i.scaleX&&1===i.scaleY||(c(this.container,{transform:"scale("+i.scaleX+", "+i.scaleY+")"}),o*=i.scaleX,e*=i.scaleY),o+=i.left-a.x,e+=i.top-a.y),this.move(Math.round(a.x),Math.round(a.y||0),o,e)},e}(),e})),t(n,"Core/Series/Point.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Animation/AnimationUtilities.js"],n["Core/DefaultOptions.js"],n["Core/FormatUtilities.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r){var a=t.animObject,o=n.defaultOptions,s=i.format,l=r.addEvent,u=r.defined,c=r.erase,h=r.extend,d=r.fireEvent,p=r.getNestedProperty,f=r.isArray,m=r.isFunction,v=r.isNumber,y=r.isObject,g=r.merge,_=r.objectEach,x=r.pick,b=r.syncTimeout,w=r.removeEvent,k=r.uniqueKey;return t=function(){function t(){this.colorIndex=this.category=void 0,this.formatPrefix="point",this.id=void 0,this.isNull=!1,this.percentage=this.options=this.name=void 0,this.selected=!1,this.total=this.series=void 0,this.visible=!0,this.x=void 0}return t.prototype.animateBeforeDestroy=function(){var e=this,t={x:e.startXPos,opacity:0},n=e.getGraphicalProps();n.singular.forEach((function(n){e[n]=e[n].animate("dataLabel"===n?{x:e[n].startXPos,y:e[n].startYPos,opacity:0}:t)})),n.plural.forEach((function(t){e[t].forEach((function(t){t.element&&t.animate(h({x:e.startXPos},t.startYPos?{x:t.startXPos,y:t.startYPos}:{}))}))}))},t.prototype.applyOptions=function(e,n){var i=this.series,r=i.options.pointValKey||i.pointValKey;return e=t.prototype.optionsToObject.call(this,e),h(this,e),this.options=this.options?h(this.options,e):e,e.group&&delete this.group,e.dataLabels&&delete this.dataLabels,r&&(this.y=t.prototype.getNestedProperty.call(this,r)),this.formatPrefix=(this.isNull=x(this.isValid&&!this.isValid(),null===this.x||!v(this.y)))?"null":"point",this.selected&&(this.state="select"),"name"in this&&"undefined"===typeof n&&i.xAxis&&i.xAxis.hasNames&&(this.x=i.xAxis.nameToX(this)),"undefined"===typeof this.x&&i?this.x="undefined"===typeof n?i.autoIncrement():n:v(e.x)&&i.options.relativeXValue&&(this.x=i.autoIncrement(e.x)),this},t.prototype.destroy=function(){function e(){for(r in(t.graphic||t.dataLabel||t.dataLabels)&&(w(t),t.destroyElements()),t)t[r]=null}var t=this,n=t.series,i=n.chart;n=n.options.dataSorting;var r,o=i.hoverPoints,s=a(t.series.chart.renderer.globalAnimation);t.legendItem&&i.legend.destroyItem(t),o&&(t.setState(),c(o,t),o.length||(i.hoverPoints=null)),t===i.hoverPoint&&t.onMouseOut(),n&&n.enabled?(this.animateBeforeDestroy(),b(e,s.duration)):e(),i.pointCount--},t.prototype.destroyElements=function(e){var t=this;(e=t.getGraphicalProps(e)).singular.forEach((function(e){t[e]=t[e].destroy()})),e.plural.forEach((function(e){t[e].forEach((function(e){e.element&&e.destroy()})),delete t[e]}))},t.prototype.firePointEvent=function(e,t,n){var i=this,r=this.series.options;(r.point.events[e]||i.options&&i.options.events&&i.options.events[e])&&i.importEvents(),"click"===e&&r.allowPointSelect&&(n=function(e){i.select&&i.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),d(i,e,t,n)},t.prototype.getClassName=function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+("undefined"!==typeof this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},t.prototype.getGraphicalProps=function(e){var t,n=this,i=[],r={singular:[],plural:[]};for((e=e||{graphic:1,dataLabel:1}).graphic&&i.push("graphic","upperGraphic","shadowGroup"),e.dataLabel&&i.push("dataLabel","dataLabelUpper","connector"),t=i.length;t--;){var a=i[t];n[a]&&r.singular.push(a)}return["dataLabel","connector"].forEach((function(t){var i=t+"s";e[t]&&n[i]&&r.plural.push(i)})),r},t.prototype.getLabelConfig=function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},t.prototype.getNestedProperty=function(e){if(e)return 0===e.indexOf("custom.")?p(e,this.options):this[e]},t.prototype.getZone=function(){var e=this.series,t=e.zones;e=e.zoneAxis||"y";var n,i=0;for(n=t[i];this[e]>=n.value;)n=t[++i];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=n&&n.color&&!this.options.color?n.color:this.nonZonedColor,n},t.prototype.hasNewShapeType=function(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType},t.prototype.init=function(e,t,n){return this.series=e,this.applyOptions(t,n),this.id=u(this.id)?this.id:k(),this.resolveColor(),e.chart.pointCount++,d(this,"afterInit"),this},t.prototype.optionsToObject=function(e){var n=this.series,i=n.options.keys,r=i||n.pointArrayMap||["y"],a=r.length,o={},s=0,l=0;if(v(e)||null===e)o[r[0]]=e;else if(f(e))for(!i&&e.length>a&&("string"===(n=typeof e[0])?o.name=e[0]:"number"===n&&(o.x=e[0]),s++);l<a;)i&&"undefined"===typeof e[s]||(0<r[l].indexOf(".")?t.prototype.setNestedProperty(o,e[s],r[l]):o[r[l]]=e[s]),s++,l++;else"object"===typeof e&&(o=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return o},t.prototype.resolveColor=function(){var e=this.series,t=e.chart.styledMode,n=e.chart.options.chart.colorCount;if(delete this.nonZonedColor,e.options.colorByPoint){if(!t){var i=(n=e.options.colors||e.chart.options.colors)[e.colorCounter];n=n.length}t=e.colorCounter,e.colorCounter++,e.colorCounter===n&&(e.colorCounter=0)}else t||(i=e.color),t=e.colorIndex;this.colorIndex=x(this.options.colorIndex,t),this.color=x(this.options.color,i)},t.prototype.setNestedProperty=function(e,t,n){return n.split(".").reduce((function(e,n,i,r){return e[n]=r.length-1===i?t:y(e[n],!0)?e[n]:{},e[n]}),e),e},t.prototype.tooltipFormatter=function(e){var t=this.series,n=t.tooltipOptions,i=x(n.valueDecimals,""),r=n.valuePrefix||"",a=n.valueSuffix||"";return t.chart.styledMode&&(e=t.chart.tooltip.styledModeFormat(e)),(t.pointArrayMap||["y"]).forEach((function(t){t="{point."+t,(r||a)&&(e=e.replace(RegExp(t+"}","g"),r+t+"}"+a)),e=e.replace(RegExp(t+"}","g"),t+":,."+i+"f}")})),s(e,{point:this,series:this.series},t.chart)},t.prototype.update=function(e,t,n,i){function r(){o.applyOptions(e);var i=l&&o.hasDummyGraphic;i=null===o.y?!i:i,l&&i&&(o.graphic=l.destroy(),delete o.hasDummyGraphic),y(e,!0)&&(l&&l.element&&e&&e.marker&&"undefined"!==typeof e.marker.symbol&&(o.graphic=l.destroy()),e&&e.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy()),o.connector&&(o.connector=o.connector.destroy())),a=o.index,s.updateParallelArrays(o,a),c.data[a]=y(c.data[a],!0)||y(e,!0)?o.options:x(e,c.data[a]),s.isDirty=s.isDirtyData=!0,!s.fixedBox&&s.hasCartesianSeries&&(u.isDirtyBox=!0),"point"===c.legendType&&(u.isDirtyLegend=!0),t&&u.redraw(n)}var a,o=this,s=o.series,l=o.graphic,u=s.chart,c=s.options;t=x(t,!0),!1===i?r():o.firePointEvent("update",{options:e},r)},t.prototype.remove=function(e,t){this.series.removePoint(this.series.data.indexOf(this),e,t)},t.prototype.select=function(e,t){var n=this,i=n.series,r=i.chart;this.selectedStaging=e=x(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},(function(){n.selected=n.options.selected=e,i.options.data[i.data.indexOf(n)]=n.options,n.setState(e&&"select"),t||r.getSelectedPoints().forEach((function(e){var t=e.series;e.selected&&e!==n&&(e.selected=e.options.selected=!1,t.options.data[t.data.indexOf(e)]=e.options,e.setState(r.hoverPoints&&t.options.inactiveOtherPoints?"inactive":""),e.firePointEvent("unselect"))}))})),delete this.selectedStaging},t.prototype.onMouseOver=function(e){var t=this.series.chart,n=t.pointer;e=e?n.normalize(e):n.getChartCoordinatesFromPoint(this,t.inverted),n.runPointActions(e,this)},t.prototype.onMouseOut=function(){var e=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(e.hoverPoints||[]).forEach((function(e){e.setState()})),e.hoverPoints=e.hoverPoint=null},t.prototype.importEvents=function(){if(!this.hasImportedEvents){var e=this,t=g(e.series.options.point,e.options).events;e.events=t,_(t,(function(t,n){m(t)&&l(e,n,t)})),this.hasImportedEvents=!0}},t.prototype.setState=function(t,n){var i,r=this.series,a=this.state,s=r.options.states[t||"normal"]||{},l=o.plotOptions[r.type].marker&&r.options.marker,u=l&&!1===l.enabled,c=l&&l.states&&l.states[t||"normal"]||{},p=!1===c.enabled,f=this.marker||{},m=r.chart,y=l&&r.markerAttribs,g=r.halo,_=r.stateMarkerGraphic;if(!((t=t||"")===this.state&&!n||this.selected&&"select"!==t||!1===s.enabled||t&&(p||u&&!1===c.enabled)||t&&f.states&&f.states[t]&&!1===f.states[t].enabled)){if(this.state=t,y&&(i=r.markerAttribs(this,t)),this.graphic&&!this.hasDummyGraphic){if(a&&this.graphic.removeClass("highcharts-point-"+a),t&&this.graphic.addClass("highcharts-point-"+t),!m.styledMode){var b=r.pointAttribs(this,t),w=x(m.options.chart.animation,s.animation);r.options.inactiveOtherPoints&&v(b.opacity)&&((this.dataLabels||[]).forEach((function(e){e&&e.animate({opacity:b.opacity},w)})),this.connector&&this.connector.animate({opacity:b.opacity},w)),this.graphic.animate(b,w)}i&&this.graphic.animate(i,x(m.options.chart.animation,c.animation,l.animation)),_&&_.hide()}else t&&c&&(a=f.symbol||r.symbol,_&&_.currentSymbol!==a&&(_=_.destroy()),i&&(_?_[n?"animate":"attr"]({x:i.x,y:i.y}):a&&(r.stateMarkerGraphic=_=m.renderer.symbol(a,i.x,i.y,i.width,i.height).add(r.markerGroup),_.currentSymbol=a)),!m.styledMode&&_&&"inactive"!==this.state&&_.attr(r.pointAttribs(this,t))),_&&(_[t&&this.isInside?"show":"hide"](),_.element.point=this,_.addClass(this.getClassName(),!0));s=s.halo,i=(_=this.graphic||_)&&_.visibility||"inherit",s&&s.size&&_&&"hidden"!==i&&!this.isCluster?(g||(r.halo=g=m.renderer.path().add(_.parentGroup)),g.show()[n?"animate":"attr"]({d:this.haloPath(s.size)}),g.attr({class:"highcharts-halo highcharts-color-"+x(this.colorIndex,r.colorIndex)+(this.className?" "+this.className:""),visibility:i,zIndex:-1}),g.point=this,m.styledMode||g.attr(h({fill:this.color||r.color,"fill-opacity":s.opacity},e.filterUserAttributes(s.attributes||{})))):g&&g.point&&g.point.haloPath&&g.animate({d:g.point.haloPath(0)},null,g.hide),d(this,"afterSetState",{state:t})}},t.prototype.haloPath=function(e){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-e,this.plotY-e,2*e,2*e)},t}(),t})),t(n,"Core/Pointer.js",[n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Tooltip.js"],n["Core/Utilities.js"]],(function(e,t,n,i){var r=e.parse,a=t.charts,o=t.noop,s=i.addEvent,l=i.attr,u=i.css,c=i.defined,h=i.extend,d=i.find,p=i.fireEvent,f=i.isNumber,m=i.isObject,v=i.objectEach,y=i.offset,g=i.pick,_=i.splat;return e=function(){function e(e,t){this.lastValidTouch={},this.pinchDown=[],this.runChartClick=!1,this.eventsToUnbind=[],this.chart=e,this.hasDragged=!1,this.options=t,this.init(e,t)}return e.prototype.applyInactiveState=function(e){var t,n=[];(e||[]).forEach((function(e){t=e.series,n.push(t),t.linkedParent&&n.push(t.linkedParent),t.linkedSeries&&(n=n.concat(t.linkedSeries)),t.navigatorSeries&&n.push(t.navigatorSeries)})),this.chart.series.forEach((function(e){-1===n.indexOf(e)?e.setState("inactive",!0):e.options.inactiveOtherPoints&&e.setAllPointsToState("inactive")}))},e.prototype.destroy=function(){var n=this;this.eventsToUnbind.forEach((function(e){return e()})),this.eventsToUnbind=[],t.chartCount||(e.unbindDocumentMouseUp&&(e.unbindDocumentMouseUp=e.unbindDocumentMouseUp()),e.unbindDocumentTouchEnd&&(e.unbindDocumentTouchEnd=e.unbindDocumentTouchEnd())),clearInterval(n.tooltipTimeout),v(n,(function(e,t){n[t]=void 0}))},e.prototype.drag=function(e){var t=this.chart,n=t.options.chart,i=this.zoomHor,a=this.zoomVert,o=t.plotLeft,s=t.plotTop,l=t.plotWidth,u=t.plotHeight,c=this.mouseDownX||0,h=this.mouseDownY||0,d=m(n.panning)?n.panning&&n.panning.enabled:n.panning,p=n.panKey&&e[n.panKey+"Key"],f=e.chartX,v=e.chartY,y=this.selectionMarker;if((!y||!y.touch)&&(f<o?f=o:f>o+l&&(f=o+l),v<s?v=s:v>s+u&&(v=s+u),this.hasDragged=Math.sqrt(Math.pow(c-f,2)+Math.pow(h-v,2)),10<this.hasDragged)){var g=t.isInsidePlot(c-o,h-s,{visiblePlotOnly:!0});!t.hasCartesianSeries&&!t.mapView||!this.zoomX&&!this.zoomY||!g||p||y||(this.selectionMarker=y=t.renderer.rect(o,s,i?1:l,a?1:u,0).attr({class:"highcharts-selection-marker",zIndex:7}).add(),t.styledMode||y.attr({fill:n.selectionMarkerFill||r("#335cad").setOpacity(.25).get()})),y&&i&&(i=f-c,y.attr({width:Math.abs(i),x:(0<i?0:i)+c})),y&&a&&(i=v-h,y.attr({height:Math.abs(i),y:(0<i?0:i)+h})),g&&!y&&d&&t.pan(e,n.panning)}},e.prototype.dragStart=function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},e.prototype.drop=function(e){var t=this,n=this.chart,i=this.hasPinched;if(this.selectionMarker){var r=this.selectionMarker,a=r.attr?r.attr("x"):r.x,o=r.attr?r.attr("y"):r.y,s=r.attr?r.attr("width"):r.width,l=r.attr?r.attr("height"):r.height,d={originalEvent:e,xAxis:[],yAxis:[],x:a,y:o,width:s,height:l},m=!!n.mapView;(this.hasDragged||i)&&(n.axes.forEach((function(n){if(n.zoomEnabled&&c(n.min)&&(i||t[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])&&f(a)&&f(o)){var r=n.horiz,u="touchend"===e.type?n.minPixelPadding:0,h=n.toValue((r?a:o)+u);r=n.toValue((r?a+s:o+l)-u),d[n.coll].push({axis:n,min:Math.min(h,r),max:Math.max(h,r)}),m=!0}})),m&&p(n,"selection",d,(function(e){n.zoom(h(e,i?{animation:!1}:null))}))),f(n.index)&&(this.selectionMarker=this.selectionMarker.destroy()),i&&this.scaleGroups()}n&&f(n.index)&&(u(n.container,{cursor:n._cursor}),n.cancelClick=10<this.hasDragged,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},e.prototype.findNearestKDPoint=function(e,t,n){var i,r=this.chart,a=r.hoverPoint;return r=r.tooltip,a&&r&&r.isStickyOnContact()?a:(e.forEach((function(e){var r=!(e.noSharedTooltip&&t)&&0>e.options.findNearestPointBy.indexOf("y");if(e=e.searchPoint(n,r),(r=m(e,!0)&&e.series)&&!(r=!m(i,!0))){r=i.distX-e.distX;var a=i.dist-e.dist,o=(e.series.group&&e.series.group.zIndex)-(i.series.group&&i.series.group.zIndex);r=0<(0!==r&&t?r:0!==a?a:0!==o?o:i.series.index>e.series.index?-1:1)}r&&(i=e)})),i)},e.prototype.getChartCoordinatesFromPoint=function(e,t){var n=e.series,i=n.xAxis;n=n.yAxis;var r=e.shapeArgs;if(i&&n){var a=g(e.clientX,e.plotX),o=e.plotY||0;return e.isNode&&r&&f(r.x)&&f(r.y)&&(a=r.x,o=r.y),t?{chartX:n.len+n.pos-o,chartY:i.len+i.pos-a}:{chartX:a+i.pos,chartY:o+n.pos}}if(r&&r.x&&r.y)return{chartX:r.x,chartY:r.y}},e.prototype.getChartPosition=function(){if(this.chartPosition)return this.chartPosition;var e=this.chart.container,t=y(e);this.chartPosition={left:t.left,top:t.top,scaleX:1,scaleY:1};var n=e.offsetWidth;return e=e.offsetHeight,2<n&&2<e&&(this.chartPosition.scaleX=t.width/n,this.chartPosition.scaleY=t.height/e),this.chartPosition},e.prototype.getCoordinates=function(e){var t={xAxis:[],yAxis:[]};return this.chart.axes.forEach((function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})})),t},e.prototype.getHoverData=function(e,t,n,i,r,a){var o=[];i=!(!i||!e);var s={chartX:a?a.chartX:void 0,chartY:a?a.chartY:void 0,shared:r};p(this,"beforeGetHoverData",s);var l=t&&!t.stickyTracking?[t]:n.filter((function(e){return s.filter?s.filter(e):e.visible&&!(!r&&e.directTouch)&&g(e.options.enableMouseTracking,!0)&&e.stickyTracking})),u=i||!a?e:this.findNearestKDPoint(l,r,a);return t=u&&u.series,u&&(r&&!t.noSharedTooltip?(l=n.filter((function(e){return s.filter?s.filter(e):e.visible&&!(!r&&e.directTouch)&&g(e.options.enableMouseTracking,!0)&&!e.noSharedTooltip}))).forEach((function(e){var t=d(e.points,(function(e){return e.x===u.x&&!e.isNull}));m(t)&&(e.chart.isBoosting&&(t=e.getPoint(t)),o.push(t))})):o.push(u)),p(this,"afterGetHoverData",s={hoverPoint:u}),{hoverPoint:s.hoverPoint,hoverSeries:t,hoverPoints:o}},e.prototype.getPointFromEvent=function(e){e=e.target;for(var t;e&&!t;)t=e.point,e=e.parentNode;return t},e.prototype.onTrackerMouseOut=function(e){e=e.relatedTarget||e.toElement;var t=this.chart.hoverSeries;this.isDirectTouch=!1,!t||!e||t.stickyTracking||this.inClass(e,"highcharts-tooltip")||this.inClass(e,"highcharts-series-"+t.index)&&this.inClass(e,"highcharts-tracker")||t.onMouseOut()},e.prototype.inClass=function(e,t){for(var n;e;){if(n=l(e,"class")){if(-1!==n.indexOf(t))return!0;if(-1!==n.indexOf("highcharts-container"))return!1}e=e.parentElement}},e.prototype.init=function(e,t){this.options=t,this.chart=e,this.runChartClick=!(!t.chart.events||!t.chart.events.click),this.pinchDown=[],this.lastValidTouch={},n&&(e.tooltip=new n(e,t.tooltip),this.followTouchMove=g(t.tooltip.followTouchMove,!0)),this.setDOMEvents()},e.prototype.normalize=function(e,t){var n=e.touches,i=n?n.length?n.item(0):g(n.changedTouches,e.changedTouches)[0]:e;return t||(t=this.getChartPosition()),n=i.pageX-t.left,i=i.pageY-t.top,n/=t.scaleX,i/=t.scaleY,h(e,{chartX:Math.round(n),chartY:Math.round(i)})},e.prototype.onContainerClick=function(e){var t=this.chart,n=t.hoverPoint;e=this.normalize(e);var i=t.plotLeft,r=t.plotTop;t.cancelClick||(n&&this.inClass(e.target,"highcharts-tracker")?(p(n.series,"click",h(e,{point:n})),t.hoverPoint&&n.firePointEvent("click",e)):(h(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-i,e.chartY-r,{visiblePlotOnly:!0})&&p(t,"click",e)))},e.prototype.onContainerMouseDown=function(e){var n=1===(1&(e.buttons||e.button));e=this.normalize(e),t.isFirefox&&0!==e.button&&this.onContainerMouseMove(e),("undefined"===typeof e.button||n)&&(this.zoomOption(e),n&&e.preventDefault&&e.preventDefault(),this.dragStart(e))},e.prototype.onContainerMouseLeave=function(t){var n=a[g(e.hoverChartIndex,-1)],i=this.chart.tooltip;i&&i.shouldStickOnContact()&&this.inClass(t.relatedTarget,"highcharts-tooltip-container")||(t=this.normalize(t),n&&(t.relatedTarget||t.toElement)&&(n.pointer.reset(),n.pointer.chartPosition=void 0),i&&!i.isHidden&&this.reset())},e.prototype.onContainerMouseEnter=function(e){delete this.chartPosition},e.prototype.onContainerMouseMove=function(e){var t=this.chart;e=this.normalize(e),this.setHoverChartIndex(),e.preventDefault||(e.returnValue=!1),("mousedown"===t.mouseIsDown||this.touchSelect(e))&&this.drag(e),t.openMenu||!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop,{visiblePlotOnly:!0})||(this.inClass(e.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(e))},e.prototype.onDocumentTouchEnd=function(t){var n=a[g(e.hoverChartIndex,-1)];n&&n.pointer.drop(t)},e.prototype.onContainerTouchMove=function(e){this.touchSelect(e)?this.onContainerMouseMove(e):this.touch(e)},e.prototype.onContainerTouchStart=function(e){this.touchSelect(e)?this.onContainerMouseDown(e):(this.zoomOption(e),this.touch(e,!0))},e.prototype.onDocumentMouseMove=function(e){var t=this.chart,n=this.chartPosition;e=this.normalize(e,n);var i=t.tooltip;!n||i&&i.isStickyOnContact()||t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop,{visiblePlotOnly:!0})||this.inClass(e.target,"highcharts-tracker")||this.reset()},e.prototype.onDocumentMouseUp=function(t){var n=a[g(e.hoverChartIndex,-1)];n&&n.pointer.drop(t)},e.prototype.pinch=function(e){var t=this,n=t.chart,i=t.pinchDown,r=e.touches||[],a=r.length,s=t.lastValidTouch,l=t.hasZoom,u={},c=1===a&&(t.inClass(e.target,"highcharts-tracker")&&n.runTrackerClick||t.runChartClick),d={},f=t.selectionMarker;1<a?t.initiated=!0:1===a&&this.followTouchMove&&(t.initiated=!1),l&&t.initiated&&!c&&!1!==e.cancelable&&e.preventDefault(),[].map.call(r,(function(e){return t.normalize(e)})),"touchstart"===e.type?([].forEach.call(r,(function(e,t){i[t]={chartX:e.chartX,chartY:e.chartY}})),s.x=[i[0].chartX,i[1]&&i[1].chartX],s.y=[i[0].chartY,i[1]&&i[1].chartY],n.axes.forEach((function(e){if(e.zoomEnabled){var t=n.bounds[e.horiz?"h":"v"],i=e.minPixelPadding,r=e.toPixels(Math.min(g(e.options.min,e.dataMin),e.dataMin)),a=e.toPixels(Math.max(g(e.options.max,e.dataMax),e.dataMax)),o=Math.max(r,a);t.min=Math.min(e.pos,Math.min(r,a)-i),t.max=Math.max(e.pos+e.len,o+i)}})),t.res=!0):t.followTouchMove&&1===a?this.runPointActions(t.normalize(e)):i.length&&(p(n,"touchpan",{originalEvent:e},(function(){f||(t.selectionMarker=f=h({destroy:o,touch:!0},n.plotBox)),t.pinchTranslate(i,r,u,f,d,s),t.hasPinched=l,t.scaleGroups(u,d)})),t.res&&(t.res=!1,this.reset(!1,0)))},e.prototype.pinchTranslate=function(e,t,n,i,r,a){this.zoomHor&&this.pinchTranslateDirection(!0,e,t,n,i,r,a),this.zoomVert&&this.pinchTranslateDirection(!1,e,t,n,i,r,a)},e.prototype.pinchTranslateDirection=function(e,t,n,i,r,a,o,s){var l=this.chart,u=e?"x":"y",c=e?"X":"Y",h="chart"+c,d=e?"width":"height",p=l["plot"+(e?"Left":"Top")],f=l.inverted,m=l.bounds[e?"h":"v"],v=1===t.length,y=t[0][h],g=!v&&t[1][h];t=function(){"number"===typeof k&&20<Math.abs(y-g)&&(b=s||Math.abs(w-k)/Math.abs(y-g)),x=(p-w)/b+y,_=l["plot"+(e?"Width":"Height")]/b};var _,x,b=s||1,w=n[0][h],k=!v&&n[1][h];if(t(),(n=x)<m.min){n=m.min;var S=!0}else n+_>m.max&&(n=m.max-_,S=!0);S?(w-=.8*(w-o[u][0]),"number"===typeof k&&(k-=.8*(k-o[u][1])),t()):o[u]=[w,k],f||(a[u]=x-p,a[d]=_),a=f?1/b:b,r[d]=_,r[u]=n,i[f?e?"scaleY":"scaleX":"scale"+c]=b,i["translate"+c]=a*p+(w-a*y)},e.prototype.reset=function(e,t){var n=this.chart,i=n.hoverSeries,r=n.hoverPoint,a=n.hoverPoints,o=n.tooltip,s=o&&o.shared?a:r;e&&s&&_(s).forEach((function(t){t.series.isCartesian&&"undefined"===typeof t.plotX&&(e=!1)})),e?o&&s&&_(s).length&&(o.refresh(s),o.shared&&a?a.forEach((function(e){e.setState(e.state,!0),e.series.isCartesian&&(e.series.xAxis.crosshair&&e.series.xAxis.drawCrosshair(null,e),e.series.yAxis.crosshair&&e.series.yAxis.drawCrosshair(null,e))})):r&&(r.setState(r.state,!0),n.axes.forEach((function(e){e.crosshair&&r.series[e.coll]===e&&e.drawCrosshair(null,r)})))):(r&&r.onMouseOut(),a&&a.forEach((function(e){e.setState()})),i&&i.onMouseOut(),o&&o.hide(t),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),n.axes.forEach((function(e){e.hideCrosshair()})),this.hoverX=n.hoverPoints=n.hoverPoint=null)},e.prototype.runPointActions=function(t,n){var i=this.chart,r=i.tooltip&&i.tooltip.options.enabled?i.tooltip:void 0,o=!!r&&r.shared,l=n||i.hoverPoint,u=l&&l.series||i.hoverSeries;n=this.getHoverData(l,u,i.series,(!t||"touchmove"!==t.type)&&(!!n||u&&u.directTouch&&this.isDirectTouch),o,t),l=n.hoverPoint,u=n.hoverSeries;var c=n.hoverPoints;n=u&&u.tooltipOptions.followPointer&&!u.tooltipOptions.split;var h=o&&u&&!u.noSharedTooltip;if(l&&(l!==i.hoverPoint||r&&r.isHidden)){if((i.hoverPoints||[]).forEach((function(e){-1===c.indexOf(e)&&e.setState()})),i.hoverSeries!==u&&u.onMouseOver(),this.applyInactiveState(c),(c||[]).forEach((function(e){e.setState("hover")})),i.hoverPoint&&i.hoverPoint.firePointEvent("mouseOut"),!l.series)return;i.hoverPoints=c,i.hoverPoint=l,l.firePointEvent("mouseOver",void 0,(function(){r&&l&&r.refresh(h?c:l,t)}))}else n&&r&&!r.isHidden&&(o=r.getAnchor([{}],t),i.isInsidePlot(o[0],o[1],{visiblePlotOnly:!0})&&r.updatePosition({plotX:o[0],plotY:o[1]}));this.unDocMouseMove||(this.unDocMouseMove=s(i.container.ownerDocument,"mousemove",(function(t){var n=a[e.hoverChartIndex];n&&n.pointer.onDocumentMouseMove(t)})),this.eventsToUnbind.push(this.unDocMouseMove)),i.axes.forEach((function(e){var n,r=g((e.crosshair||{}).snap,!0);r&&((n=i.hoverPoint)&&n.series[e.coll]===e||(n=d(c,(function(t){return t.series&&t.series[e.coll]===e})))),n||!r?e.drawCrosshair(t,n):e.hideCrosshair()}))},e.prototype.scaleGroups=function(e,t){var n=this.chart;n.series.forEach((function(i){var r=e||i.getPlotBox();i.group&&(i.xAxis&&i.xAxis.zoomEnabled||n.mapView)&&(i.group.attr(r),i.markerGroup&&(i.markerGroup.attr(r),i.markerGroup.clip(t?n.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(r))})),n.clipRect.attr(t||n.clipBox)},e.prototype.setDOMEvents=function(){var n=this,i=this.chart.container,r=i.ownerDocument;i.onmousedown=this.onContainerMouseDown.bind(this),i.onmousemove=this.onContainerMouseMove.bind(this),i.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(s(i,"mouseenter",this.onContainerMouseEnter.bind(this))),this.eventsToUnbind.push(s(i,"mouseleave",this.onContainerMouseLeave.bind(this))),e.unbindDocumentMouseUp||(e.unbindDocumentMouseUp=s(r,"mouseup",this.onDocumentMouseUp.bind(this)));for(var a=this.chart.renderTo.parentElement;a&&"BODY"!==a.tagName;)this.eventsToUnbind.push(s(a,"scroll",(function(){delete n.chartPosition}))),a=a.parentElement;t.hasTouch&&(this.eventsToUnbind.push(s(i,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1})),this.eventsToUnbind.push(s(i,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),e.unbindDocumentTouchEnd||(e.unbindDocumentTouchEnd=s(r,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})))},e.prototype.setHoverChartIndex=function(){var n=this.chart,i=t.charts[g(e.hoverChartIndex,-1)];i&&i!==n&&i.pointer.onContainerMouseLeave({relatedTarget:n.container}),i&&i.mouseIsDown||(e.hoverChartIndex=n.index)},e.prototype.touch=function(e,t){var n=this.chart;if(this.setHoverChartIndex(),1===e.touches.length)if(e=this.normalize(e),n.isInsidePlot(e.chartX-n.plotLeft,e.chartY-n.plotTop,{visiblePlotOnly:!0})&&!n.openMenu){if(t&&this.runPointActions(e),"touchmove"===e.type)var i=!!(t=this.pinchDown)[0]&&4<=Math.sqrt(Math.pow(t[0].chartX-e.chartX,2)+Math.pow(t[0].chartY-e.chartY,2));g(i,!0)&&this.pinch(e)}else t&&this.reset();else 2===e.touches.length&&this.pinch(e)},e.prototype.touchSelect=function(e){return!(!this.chart.options.chart.zoomBySingleTouch||!e.touches||1!==e.touches.length)},e.prototype.zoomOption=function(e){var t=this.chart,n=t.options.chart;t=t.inverted;var i=n.zoomType||"";/touch/.test(e.type)&&(i=g(n.pinchType,i)),this.zoomX=e=/x/.test(i),this.zoomY=n=/y/.test(i),this.zoomHor=e&&!t||n&&t,this.zoomVert=n&&!t||e&&t,this.hasZoom=e||n},e}(),e})),t(n,"Core/MSPointer.js",[n["Core/Globals.js"],n["Core/Pointer.js"],n["Core/Utilities.js"]],(function(e,t,n){function i(){var e=[];return e.item=function(e){return this[e]},d(f,(function(t){e.push({pageX:t.pageX,pageY:t.pageY,target:t.target})})),e}function r(e,n,r,a){var s=o[t.hoverChartIndex||NaN];"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!s||(s=s.pointer,a(e),s[n]({type:r,target:e.currentTarget,preventDefault:l,touches:i()}))}var a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=e.charts,s=e.doc,l=e.noop,u=e.win,c=n.addEvent,h=n.css,d=n.objectEach,p=n.removeEvent,f={},m=!!u.PointerEvent;return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.isRequired=function(){return!(e.hasTouch||!u.PointerEvent&&!u.MSPointerEvent)},n.prototype.batchMSEvents=function(e){e(this.chart.container,m?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,m?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(s,m?"pointerup":"MSPointerUp",this.onDocumentPointerUp)},n.prototype.destroy=function(){this.batchMSEvents(p),t.prototype.destroy.call(this)},n.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this.hasZoom&&h(e.container,{"-ms-touch-action":"none","touch-action":"none"})},n.prototype.onContainerPointerDown=function(e){r(e,"onContainerTouchStart","touchstart",(function(e){f[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}}))},n.prototype.onContainerPointerMove=function(e){r(e,"onContainerTouchMove","touchmove",(function(e){f[e.pointerId]={pageX:e.pageX,pageY:e.pageY},f[e.pointerId].target||(f[e.pointerId].target=e.currentTarget)}))},n.prototype.onDocumentPointerUp=function(e){r(e,"onDocumentTouchEnd","touchend",(function(e){delete f[e.pointerId]}))},n.prototype.setDOMEvents=function(){t.prototype.setDOMEvents.call(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(c)},n}(t)})),t(n,"Core/Legend/Legend.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Series/Point.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a){var o=e.animObject,s=e.setAnimation,l=t.format;e=n.isFirefox;var u=n.marginNames;n=n.win;var c=r.distribute,h=a.addEvent,d=a.createElement,p=a.css,f=a.defined,m=a.discardElement,v=a.find,y=a.fireEvent,g=a.isNumber,_=a.merge,x=a.pick,b=a.relativeLength,w=a.stableSort,k=a.syncTimeout;return r=a.wrap,a=function(){function e(e,t){this.allItems=[],this.contentGroup=this.box=void 0,this.display=!1,this.group=void 0,this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0,this.options=void 0,this.padding=0,this.pages=[],this.proximate=!1,this.scrollGroup=void 0,this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0,this.chart=e,this.init(e,t)}return e.prototype.init=function(e,t){this.chart=e,this.setOptions(t),t.enabled&&(this.render(),h(this.chart,"endResize",(function(){this.legend.positionCheckboxes()})),this.proximate?this.unchartrender=h(this.chart,"render",(function(){this.legend.proximatePositions(),this.legend.positionItems()})):this.unchartrender&&this.unchartrender())},e.prototype.setOptions=function(e){var t=x(e.padding,8);this.options=e,this.chart.styledMode||(this.itemStyle=e.itemStyle,this.itemHiddenStyle=_(this.itemStyle,e.itemHiddenStyle)),this.itemMarginTop=e.itemMarginTop||0,this.itemMarginBottom=e.itemMarginBottom||0,this.padding=t,this.initialItemY=t-5,this.symbolWidth=x(e.symbolWidth,16),this.pages=[],this.proximate="proximate"===e.layout&&!this.chart.inverted,this.baseline=void 0},e.prototype.update=function(e,t){var n=this.chart;this.setOptions(_(!0,this.options,e)),this.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,x(t,!0)&&n.redraw(),y(this,"afterUpdate")},e.prototype.colorizeItem=function(e,t){if(e.legendGroup[t?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var n=this.options,i=e.legendItem,r=e.legendLine,a=e.legendSymbol,o=this.itemHiddenStyle.color;n=t?n.itemStyle.color:o;var s=t&&e.color||o,l=e.options&&e.options.marker,u={fill:s};i&&i.css({fill:n,color:n}),r&&r.attr({stroke:s}),a&&(l&&a.isMarker&&(u=e.pointAttribs(),t||(u.stroke=u.fill=o)),a.attr(u))}y(this,"afterColorizeItem",{item:e,visible:t})},e.prototype.positionItems=function(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()},e.prototype.positionItem=function(e){var t=this,n=this.options,i=n.symbolPadding,r=!n.rtl,a=e._legendItemPos;n=a[0],a=a[1];var o=e.checkbox,s=e.legendGroup;s&&s.element&&(i={translateX:r?n:this.legendWidth-n-2*i-4,translateY:a},r=function(){y(t,"afterPositionItem",{item:e})},f(s.translateY)?s.animate(i,void 0,r):(s.attr(i),r())),o&&(o.x=n,o.y=a)},e.prototype.destroyItem=function(e){var t=e.checkbox;["legendItem","legendLine","legendSymbol","legendGroup"].forEach((function(t){e[t]&&(e[t]=e[t].destroy())})),t&&m(e.checkbox)},e.prototype.destroy=function(){function e(e){this[e]&&(this[e]=this[e].destroy())}this.getAllItems().forEach((function(t){["legendItem","legendGroup"].forEach(e,t)})),"clipRect up down pager nav box title group".split(" ").forEach(e,this),this.display=null},e.prototype.positionCheckboxes=function(){var e=this.group&&this.group.alignAttr,t=this.clipHeight||this.legendHeight,n=this.titleHeight;if(e){var i=e.translateY;this.allItems.forEach((function(r){var a=r.checkbox;if(a){var o=i+n+a.y+(this.scrollOffset||0)+3;p(a,{left:e.translateX+r.checkboxOffset+a.x-20+"px",top:o+"px",display:this.proximate||o>i-6&&o<i+t-6?"":"none"})}}),this)}},e.prototype.renderTitle=function(){var e=this.options,t=this.padding,n=e.title,i=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,t-3,t-4,void 0,void 0,void 0,e.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(n.style),this.title.add(this.group)),n.width||this.title.css({width:this.maxLegendWidth+"px"}),i=(e=this.title.getBBox()).height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},e.prototype.setText=function(e){var t=this.options;e.legendItem.attr({text:t.labelFormat?l(t.labelFormat,e,this.chart):t.labelFormatter.call(e)})},e.prototype.renderItem=function(e){var t=this.chart,n=t.renderer,i=this.options,r=this.symbolWidth,a=i.symbolPadding||0,o=this.itemStyle,s=this.itemHiddenStyle,l="horizontal"===i.layout?x(i.itemDistance,20):0,u=!i.rtl,c=!e.series,h=!c&&e.series.drawLegendSymbol?e.series:e,d=h.options,p=this.createCheckboxForItem&&d&&d.showCheckbox,f=i.useHTML,m=e.options.className,v=e.legendItem;d=r+a+l+(p?20:0),v||(e.legendGroup=n.g("legend-item").addClass("highcharts-"+h.type+"-series highcharts-color-"+e.colorIndex+(m?" "+m:"")+(c?" highcharts-series-"+e.index:"")).attr({zIndex:1}).add(this.scrollGroup),e.legendItem=v=n.text("",u?r+a:-a,this.baseline||0,f),t.styledMode||v.css(_(e.visible?o:s)),v.attr({align:u?"left":"right",zIndex:2}).add(e.legendGroup),this.baseline||(this.fontMetrics=n.fontMetrics(t.styledMode?12:o.fontSize,v),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,v.attr("y",this.baseline),this.symbolHeight=i.symbolHeight||this.fontMetrics.f,i.squareSymbol&&(this.symbolWidth=x(i.symbolWidth,Math.max(this.symbolHeight,16)),d=this.symbolWidth+a+l+(p?20:0),u&&v.attr("x",this.symbolWidth+a))),h.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,v,f)),p&&!e.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(e),this.colorizeItem(e,e.visible),!t.styledMode&&o.width||v.css({width:(i.itemWidth||this.widthOption||t.spacingBox.width)-d+"px"}),this.setText(e),t=v.getBBox(),n=this.fontMetrics&&this.fontMetrics.h||0,e.itemWidth=e.checkboxOffset=i.itemWidth||e.legendItemWidth||t.width+d,this.maxItemWidth=Math.max(this.maxItemWidth,e.itemWidth),this.totalItemWidth+=e.itemWidth,this.itemHeight=e.itemHeight=Math.round(e.legendItemHeight||(t.height>1.5*n?t.height:n))},e.prototype.layoutItem=function(e){var t=this.options,n=this.padding,i="horizontal"===t.layout,r=e.itemHeight,a=this.itemMarginBottom,o=this.itemMarginTop,s=i?x(t.itemDistance,20):0,l=this.maxLegendWidth;t=t.alignColumns&&this.totalItemWidth>l?this.maxItemWidth:e.itemWidth,i&&this.itemX-n+t>l&&(this.itemX=n,this.lastLineHeight&&(this.itemY+=o+this.lastLineHeight+a),this.lastLineHeight=0),this.lastItemY=o+this.itemY+a,this.lastLineHeight=Math.max(r,this.lastLineHeight),e._legendItemPos=[this.itemX,this.itemY],i?this.itemX+=t:(this.itemY+=o+r+a,this.lastLineHeight=r),this.offsetWidth=this.widthOption||Math.max((i?this.itemX-n-(e.checkbox?0:s):t)+n,this.offsetWidth)},e.prototype.getAllItems=function(){var e=[];return this.chart.series.forEach((function(t){var n=t&&t.options;t&&x(n.showInLegend,!f(n.linkedTo)&&void 0,!0)&&(e=e.concat(t.legendItems||("point"===n.legendType?t.data:t)))})),y(this,"afterGetAllItems",{allItems:e}),e},e.prototype.getAlignment=function(){var e=this.options;return this.proximate?e.align.charAt(0)+"tv":e.floating?"":e.align.charAt(0)+e.verticalAlign.charAt(0)+e.layout.charAt(0)},e.prototype.adjustMargins=function(e,t){var n=this.chart,i=this.options,r=this.getAlignment();r&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach((function(a,o){a.test(r)&&!f(e[o])&&(n[u[o]]=Math.max(n[u[o]],n.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*i[o%2?"x":"y"]+x(i.margin,12)+t[o]+(n.titleOffset[o]||0)))}))},e.prototype.proximatePositions=function(){var e=this.chart,t=[],n="left"===this.options.align;this.allItems.forEach((function(i){var r,a=n;if(i.yAxis){i.xAxis.options.reversed&&(a=!a),i.points&&(r=v(a?i.points:i.points.slice(0).reverse(),(function(e){return g(e.plotY)}))),a=this.itemMarginTop+i.legendItem.getBBox().height+this.itemMarginBottom;var o=i.yAxis.top-e.plotTop;i.visible?(r=r?r.plotY:i.yAxis.height,r+=o-.3*a):r=o+i.yAxis.height,t.push({target:r,size:a,item:i})}}),this),c(t,e.plotHeight).forEach((function(t){t.item._legendItemPos&&(t.item._legendItemPos[1]=e.plotTop-e.spacing[0]+t.pos)}))},e.prototype.render=function(){var e=this.chart,t=e.renderer,n=this.options,i=this.padding,r=this.getAllItems(),a=this.group,o=this.box;this.itemX=i,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=b(n.width,e.spacingBox.width-i);var s=e.spacingBox.width-2*i-n.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(s/=2),this.maxLegendWidth=this.widthOption||s,a||(this.group=a=t.g("legend").addClass(n.className||"").attr({zIndex:7}).add(),this.contentGroup=t.g().attr({zIndex:1}).add(a),this.scrollGroup=t.g().add(this.contentGroup)),this.renderTitle(),w(r,(function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)})),n.reversed&&r.reverse(),this.allItems=r,this.display=s=!!r.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,r.forEach(this.renderItem,this),r.forEach(this.layoutItem,this),r=(this.widthOption||this.offsetWidth)+i;var l=this.lastItemY+this.lastLineHeight+this.titleHeight;l=this.handleOverflow(l),l+=i,o||(this.box=o=t.rect().addClass("highcharts-legend-box").attr({r:n.borderRadius}).add(a)),e.styledMode||o.attr({stroke:n.borderColor,"stroke-width":n.borderWidth||0,fill:n.backgroundColor||"none"}).shadow(n.shadow),0<r&&0<l&&o[o.placed?"animate":"attr"](o.crisp.call({},{x:0,y:0,width:r,height:l},o.strokeWidth())),o[s?"show":"hide"](),e.styledMode&&"none"===a.getStyle("display")&&(r=l=0),this.legendWidth=r,this.legendHeight=l,s&&this.align(),this.proximate||this.positionItems(),y(this,"afterRender")},e.prototype.align=function(e){void 0===e&&(e=this.chart.spacingBox);var t=this.chart,n=this.options,i=e.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<t.titleOffset[0]?i+=t.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<t.titleOffset[2]&&(i-=t.titleOffset[2]),i!==e.y&&(e=_(e,{y:i})),t.hasRendered||(this.group.placed=!1),this.group.align(_(n,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":n.verticalAlign}),!0,e)},e.prototype.handleOverflow=function(e){var t,n,i=this,r=this.chart,a=r.renderer,o=this.options,s=o.y,l="top"===o.verticalAlign,u=this.padding,c=o.maxHeight,h=o.navigation,d=x(h.animation,!0),p=h.arrowSize||12,f=this.pages,m=this.allItems,v=function(e){"number"===typeof e?_.attr({height:e}):_&&(i.clipRect=_.destroy(),i.contentGroup.clip()),i.contentGroup.div&&(i.contentGroup.div.style.clip=e?"rect("+u+"px,9999px,"+(u+e)+"px,0)":"auto")},y=function(e){return i[e]=a.circle(0,0,1.3*p).translate(p/2,p/2).add(g),r.styledMode||i[e].attr("fill","rgba(0,0,0,0.0001)"),i[e]};s=r.spacingBox.height+(l?-s:s)-u;var g=this.nav,_=this.clipRect;return"horizontal"!==o.layout||"middle"===o.verticalAlign||o.floating||(s/=2),c&&(s=Math.min(s,c)),f.length=0,e&&0<s&&e>s&&!1!==h.enabled?(this.clipHeight=t=Math.max(s-20-this.titleHeight-u,0),this.currentPage=x(this.currentPage,1),this.fullHeight=e,m.forEach((function(e,i){var r=e._legendItemPos[1],a=Math.round(e.legendItem.getBBox().height),o=f.length;(!o||r-f[o-1]>t&&(n||r)!==f[o-1])&&(f.push(n||r),o++),e.pageIx=o-1,n&&(m[i-1].pageIx=o-1),i===m.length-1&&r+a-f[o-1]>t&&a<=t&&(f.push(r),e.pageIx=o),r!==n&&(n=r)})),_||(_=i.clipRect=a.clipRect(0,u,9999,0),i.contentGroup.clip(_)),v(t),g||(this.nav=g=a.g().attr({zIndex:1}).add(this.group),this.up=a.symbol("triangle",0,0,p,p).add(g),y("upTracker").on("click",(function(){i.scroll(-1,d)})),this.pager=a.text("",15,10).addClass("highcharts-legend-navigation"),!r.styledMode&&h.style&&this.pager.css(h.style),this.pager.add(g),this.down=a.symbol("triangle-down",0,0,p,p).add(g),y("downTracker").on("click",(function(){i.scroll(1,d)}))),i.scroll(0),e=s):g&&(v(),this.nav=g.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},e.prototype.scroll=function(e,t){var n=this,i=this.chart,r=this.pages,a=r.length,l=this.clipHeight,u=this.options.navigation,c=this.pager,h=this.padding,d=this.currentPage+e;d>a&&(d=a),0<d&&("undefined"!==typeof t&&s(t,i),this.nav.attr({translateX:h,translateY:l+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach((function(e){e.attr({class:1===d?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),c.attr({text:d+"/"+a}),[this.down,this.downTracker].forEach((function(e){e.attr({x:18+this.pager.getBBox().width,class:d===a?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),i.styledMode||(this.up.attr({fill:1===d?u.inactiveColor:u.activeColor}),this.upTracker.css({cursor:1===d?"default":"pointer"}),this.down.attr({fill:d===a?u.inactiveColor:u.activeColor}),this.downTracker.css({cursor:d===a?"default":"pointer"})),this.scrollOffset=-r[d-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=d,this.positionCheckboxes(),e=o(x(t,i.renderer.globalAnimation,!0)),k((function(){y(n,"afterScroll",{currentPage:d})}),e.duration))},e.prototype.setItemEvents=function(e,t,n){var r=this,a=r.chart.renderer.boxWrapper,o=e instanceof i,s="highcharts-legend-"+(o?"point":"series")+"-active",l=r.chart.styledMode,u=function(t){r.allItems.forEach((function(n){e!==n&&[n].concat(n.linkedSeries||[]).forEach((function(e){e.setState(t,!o)}))}))};(n?[t,e.legendSymbol]:[e.legendGroup]).forEach((function(n){n&&n.on("mouseover",(function(){e.visible&&u("inactive"),e.setState("hover"),e.visible&&a.addClass(s),l||t.css(r.options.itemHoverStyle)})).on("mouseout",(function(){r.chart.styledMode||t.css(_(e.visible?r.itemStyle:r.itemHiddenStyle)),u(""),a.removeClass(s),e.setState()})).on("click",(function(t){var n=function(){e.setVisible&&e.setVisible(),u(e.visible?"inactive":"")};a.removeClass(s),t={browserEvent:t},e.firePointEvent?e.firePointEvent("legendItemClick",t,n):y(e,"legendItemClick",t,n)}))}))},e.prototype.createCheckboxForItem=function(e){e.checkbox=d("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),h(e.checkbox,"click",(function(t){y(e.series||e,"checkboxClick",{checked:t.target.checked,item:e},(function(){e.select()}))}))},e}(),(/Trident\/7\.0/.test(n.navigator&&n.navigator.userAgent)||e)&&r(a.prototype,"positionItem",(function(e,t){var n=this,i=function(){t._legendItemPos&&e.call(n,t)};i(),n.bubbleLegend||setTimeout(i)})),a})),t(n,"Core/Series/SeriesRegistry.js",[n["Core/Globals.js"],n["Core/DefaultOptions.js"],n["Core/Series/Point.js"],n["Core/Utilities.js"]],(function(e,t,n,i){var r,a=t.defaultOptions,o=i.error,s=i.extendClass,l=i.merge;return function(t){function i(e,i){var r=a.plotOptions||{},o=i.defaultOptions;i.prototype.pointClass||(i.prototype.pointClass=n),i.prototype.type=e,o&&(r[e]=o),t.seriesTypes[e]=i}t.seriesTypes=e.seriesTypes,t.getSeries=function(e,n){void 0===n&&(n={});var i=e.options.chart;i=n.type||i.type||i.defaultSeriesType||"";var r=t.seriesTypes[i];return t||o(17,!0,e,{missingModuleFor:i}),"function"===typeof(i=new r).init&&i.init(e,n),i},t.registerSeriesType=i,t.seriesType=function(e,r,o,u,c){var h=a.plotOptions||{};return r=r||"",h[e]=l(h[r],o),i(e,s(t.seriesTypes[r]||function(){},u)),t.seriesTypes[e].prototype.type=e,c&&(t.seriesTypes[e].prototype.pointClass=s(n,c)),t.seriesTypes[e]}}(r||(r={})),r})),t(n,"Core/Chart/Chart.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/FormatUtilities.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Legend/Legend.js"],n["Core/MSPointer.js"],n["Core/DefaultOptions.js"],n["Core/Pointer.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Time.js"],n["Core/Utilities.js"],n["Core/Renderer/HTML/AST.js"]],(function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f){var m=e.animate,v=e.animObject,y=e.setAnimation,g=n.numberFormat,_=i.registerEventOptions,x=r.charts,b=r.doc,w=r.marginNames,k=r.svg,S=r.win,T=s.defaultOptions,C=s.defaultTime,E=c.seriesTypes,M=p.addEvent,P=p.attr,A=p.cleanRecursively,D=p.createElement,I=p.css,L=p.defined,O=p.discardElement,z=p.erase,R=p.error,B=p.extend,F=p.find,N=p.fireEvent,j=p.getStyle,U=p.isArray,V=p.isNumber,Z=p.isObject,W=p.isString,G=p.merge,Y=p.objectEach,H=p.pick,X=p.pInt,q=p.relativeLength,K=p.removeEvent,$=p.splat,Q=p.syncTimeout,J=p.uniqueKey;return e=function(){function e(e,t,n){this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.legend=this.labelCollectors=this.isResizing=this.index=this.eventOptions=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0,this.sharedClips={},this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=void 0,this.getArgs(e,t,n)}return e.chart=function(t,n,i){return new e(t,n,i)},e.prototype.getArgs=function(e,t,n){W(e)||e.nodeName?(this.renderTo=e,this.init(t,n)):this.init(e,t)},e.prototype.init=function(e,t){var n=e.plotOptions||{};N(this,"init",{args:arguments},(function(){var i=G(T,e),a=i.chart;Y(i.plotOptions,(function(e,t){Z(e)&&(e.tooltip=n[t]&&G(n[t].tooltip)||void 0)})),i.tooltip.userOptions=e.chart&&e.chart.forExport&&e.tooltip.userOptions||e.tooltip,this.userOptions=e,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=t,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.time=e.time&&Object.keys(e.time).length?new d(e.time):r.time,this.numberFormatter=a.numberFormatter||g,this.styledMode=a.styledMode,this.hasCartesianSeries=a.showAxes,this.index=x.length,x.push(this),r.chartCount++,_(this,a),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,N(this,"afterInit"),this.firstRender()}))},e.prototype.initSeries=function(e){var t=this.options.chart;t=e.type||t.type||t.defaultSeriesType;var n=E[t];return n||R(17,!0,this,{missingModuleFor:t}),"function"===typeof(t=new n).init&&t.init(this,e),t},e.prototype.setSeriesData=function(){this.getSeriesOrderByLinks().forEach((function(e){e.points||e.data||!e.enabledDataSorting||e.setData(e.options.data,!1)}))},e.prototype.getSeriesOrderByLinks=function(){return this.series.concat().sort((function(e,t){return e.linkedSeries.length||t.linkedSeries.length?t.linkedSeries.length-e.linkedSeries.length:0}))},e.prototype.orderSeries=function(e){var t=this.series;e=e||0;for(var n=t.length;e<n;++e)t[e]&&(t[e].index=e,t[e].name=t[e].getName())},e.prototype.isInsidePlot=function(e,t,n){void 0===n&&(n={});var i=this.inverted,r=this.plotBox,a=this.plotLeft,o=this.plotTop,s=this.scrollablePlotBox,l=0,u=0;n.visiblePlotOnly&&this.scrollingContainer&&(l=(u=this.scrollingContainer).scrollLeft,u=u.scrollTop);var c=n.series;if(r=n.visiblePlotOnly&&s||r,e={x:s=n.inverted?t:e,y:t=n.inverted?e:t,isInsidePlot:!0},!n.ignoreX){var h=c&&(i?c.yAxis:c.xAxis)||{pos:a,len:1/0};(s=n.paneCoordinates?h.pos+s:a+s)>=Math.max(l+a,h.pos)&&s<=Math.min(l+a+r.width,h.pos+h.len)||(e.isInsidePlot=!1)}return!n.ignoreY&&e.isInsidePlot&&(i=c&&(i?c.xAxis:c.yAxis)||{pos:o,len:1/0},(n=n.paneCoordinates?i.pos+t:o+t)>=Math.max(u+o,i.pos)&&n<=Math.min(u+o+r.height,i.pos+i.len)||(e.isInsidePlot=!1)),N(this,"afterIsInsidePlot",e),e.isInsidePlot},e.prototype.redraw=function(e){N(this,"beforeRedraw");var t=this.hasCartesianSeries?this.axes:this.colorAxis||[],n=this.series,i=this.pointer,r=this.legend,a=this.userOptions.legend,o=this.renderer,s=o.isHidden(),l=[],u=this.isDirtyBox,c=this.isDirtyLegend;for(this.setResponsive&&this.setResponsive(!1),y(!!this.hasRendered&&e,this),s&&this.temporaryDisplay(),this.layOutTitles(),e=n.length;e--;){var h=n[e];if(h.options.stacking||h.options.centerInCategory){var d=!0;if(h.isDirty){var p=!0;break}}}if(p)for(e=n.length;e--;)(h=n[e]).options.stacking&&(h.isDirty=!0);n.forEach((function(e){e.isDirty&&("point"===e.options.legendType?("function"===typeof e.updateTotals&&e.updateTotals(),c=!0):a&&(a.labelFormatter||a.labelFormat)&&(c=!0)),e.isDirtyData&&N(e,"updatedData")})),c&&r&&r.options.enabled&&(r.render(),this.isDirtyLegend=!1),d&&this.getStacks(),t.forEach((function(e){e.updateNames(),e.setScale()})),this.getMargins(),t.forEach((function(e){e.isDirty&&(u=!0)})),t.forEach((function(e){var t=e.min+","+e.max;e.extKey!==t&&(e.extKey=t,l.push((function(){N(e,"afterSetExtremes",B(e.eventArgs,e.getExtremes())),delete e.eventArgs}))),(u||d)&&e.redraw()})),u&&this.drawChartBox(),N(this,"predraw"),n.forEach((function(e){(u||e.isDirty)&&e.visible&&e.redraw(),e.isDirtyData=!1})),i&&i.reset(!0),o.draw(),N(this,"redraw"),N(this,"render"),s&&this.temporaryDisplay(!0),l.forEach((function(e){e.call()}))},e.prototype.get=function(e){function t(t){return t.id===e||t.options&&t.options.id===e}for(var n=this.series,i=F(this.axes,t)||F(this.series,t),r=0;!i&&r<n.length;r++)i=F(n[r].points||[],t);return i},e.prototype.getAxes=function(){var e=this,n=this.options,i=n.xAxis=$(n.xAxis||{});n=n.yAxis=$(n.yAxis||{}),N(this,"getAxes"),i.forEach((function(e,t){e.index=t,e.isX=!0})),n.forEach((function(e,t){e.index=t})),i.concat(n).forEach((function(n){new t(e,n)})),N(this,"afterGetAxes")},e.prototype.getSelectedPoints=function(){return this.series.reduce((function(e,t){return t.getPointsCollection().forEach((function(t){H(t.selectedStaging,t.selected)&&e.push(t)})),e}),[])},e.prototype.getSelectedSeries=function(){return this.series.filter((function(e){return e.selected}))},e.prototype.setTitle=function(e,t,n){this.applyDescription("title",e),this.applyDescription("subtitle",t),this.applyDescription("caption",void 0),this.layOutTitles(n)},e.prototype.applyDescription=function(e,t){var n=this,i="title"===e?{color:"#333333",fontSize:this.options.isStock?"16px":"18px"}:{color:"#666666"};i=this.options[e]=G(!this.styledMode&&{style:i},this.options[e],t);var r=this[e];r&&t&&(this[e]=r=r.destroy()),i&&!r&&((r=this.renderer.text(i.text,0,0,i.useHTML).attr({align:i.align,class:"highcharts-"+e,zIndex:i.zIndex||4}).add()).update=function(t){n[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[e]](t)},this.styledMode||r.css(i.style),this[e]=r)},e.prototype.layOutTitles=function(e){var t=[0,0,0],n=this.renderer,i=this.spacingBox;["title","subtitle","caption"].forEach((function(e){var r,a=this[e],o=this.options[e],s=o.verticalAlign||"top";if(e="title"===e?"top"===s?-3:0:"top"===s?t[0]+2:0,a){this.styledMode||(r=o.style&&o.style.fontSize),r=n.fontMetrics(r,a).b,a.css({width:(o.width||i.width+(o.widthAdjust||0))+"px"});var l=Math.round(a.getBBox(o.useHTML).height);a.align(B({y:"bottom"===s?r:e+r,height:l},o),!1,"spacingBox"),o.floating||("top"===s?t[0]=Math.ceil(t[0]+l):"bottom"===s&&(t[2]=Math.ceil(t[2]+l)))}}),this),t[0]&&"top"===(this.options.title.verticalAlign||"top")&&(t[0]+=this.options.title.margin),t[2]&&"bottom"===this.options.caption.verticalAlign&&(t[2]+=this.options.caption.margin);var r=!this.titleOffset||this.titleOffset.join(",")!==t.join(",");this.titleOffset=t,N(this,"afterLayOutTitles"),!this.isDirtyBox&&r&&(this.isDirtyBox=this.isDirtyLegend=r,this.hasRendered&&H(e,!0)&&this.isDirtyBox&&this.redraw())},e.prototype.getChartSize=function(){var e=this.options.chart,t=e.width;e=e.height;var n=this.renderTo;L(t)||(this.containerWidth=j(n,"width")),L(e)||(this.containerHeight=j(n,"height")),this.chartWidth=Math.max(0,t||this.containerWidth||600),this.chartHeight=Math.max(0,q(e,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},e.prototype.temporaryDisplay=function(e){var t=this.renderTo;if(e)for(;t&&t.style;)t.hcOrigStyle&&(I(t,t.hcOrigStyle),delete t.hcOrigStyle),t.hcOrigDetached&&(b.body.removeChild(t),t.hcOrigDetached=!1),t=t.parentNode;else for(;t&&t.style&&(b.body.contains(t)||t.parentNode||(t.hcOrigDetached=!0,b.body.appendChild(t)),("none"===j(t,"display",!1)||t.hcOricDetached)&&(t.hcOrigStyle={display:t.style.display,height:t.style.height,overflow:t.style.overflow},e={display:"block",overflow:"hidden"},t!==this.renderTo&&(e.height=0),I(t,e),t.offsetWidth||t.style.setProperty("display","block","important")),(t=t.parentNode)!==b.body););},e.prototype.setClassName=function(e){this.container.className="highcharts-container "+(e||"")},e.prototype.getContainer=function(){var e,t=this.options,n=t.chart,i=J(),r=this.renderTo;r||(this.renderTo=r=n.renderTo),W(r)&&(this.renderTo=r=b.getElementById(r)),r||R(13,!0,this);var a=X(P(r,"data-highcharts-chart"));V(a)&&x[a]&&x[a].hasRendered&&x[a].destroy(),P(r,"data-highcharts-chart",this.index),r.innerHTML=f.emptyHTML,n.skipClone||r.offsetWidth||this.temporaryDisplay(),this.getChartSize(),a=this.chartWidth;var o=this.chartHeight;if(I(r,{overflow:"hidden"}),this.styledMode||(e=B({position:"relative",overflow:"hidden",width:a+"px",height:o+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},n.style||{})),this.container=i=D("div",{id:i},e,r),this._cursor=i.style.cursor,this.renderer=new(n.renderer||!k?u.getRendererType(n.renderer):h)(i,a,o,void 0,n.forExport,t.exporting&&t.exporting.allowHTML,this.styledMode),y(void 0,this),this.setClassName(n.className),this.styledMode)for(var s in t.defs)this.renderer.definition(t.defs[s]);else this.renderer.setStyle(n.style);this.renderer.chartIndex=this.index,N(this,"afterGetContainer")},e.prototype.getMargins=function(e){var t=this.spacing,n=this.margin,i=this.titleOffset;this.resetMargins(),i[0]&&!L(n[0])&&(this.plotTop=Math.max(this.plotTop,i[0]+t[0])),i[2]&&!L(n[2])&&(this.marginBottom=Math.max(this.marginBottom,i[2]+t[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(n,t),N(this,"getMargins"),e||this.getAxisMargins()},e.prototype.getAxisMargins=function(){var e=this,t=e.axisOffset=[0,0,0,0],n=e.colorAxis,i=e.margin,r=function(e){e.forEach((function(e){e.visible&&e.getOffset()}))};e.hasCartesianSeries?r(e.axes):n&&n.length&&r(n),w.forEach((function(n,r){L(i[r])||(e[n]+=t[r])})),e.setChartSize()},e.prototype.reflow=function(e){var t=this,n=t.options.chart,i=t.renderTo,r=L(n.width)&&L(n.height),a=n.width||j(i,"width");n=n.height||j(i,"height"),i=e?e.target:S,delete t.pointer.chartPosition,r||t.isPrinting||!a||!n||i!==S&&i!==b||(a===t.containerWidth&&n===t.containerHeight||(p.clearTimeout(t.reflowTimeout),t.reflowTimeout=Q((function(){t.container&&t.setSize(void 0,void 0,!1)}),e?100:0)),t.containerWidth=a,t.containerHeight=n)},e.prototype.setReflow=function(e){var t=this;!1===e||this.unbindReflow?!1===e&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=M(S,"resize",(function(e){t.options&&t.reflow(e)})),M(this,"destroy",this.unbindReflow))},e.prototype.setSize=function(e,t,n){var i=this,r=i.renderer;i.isResizing+=1,y(n,i),n=r.globalAnimation,i.oldChartHeight=i.chartHeight,i.oldChartWidth=i.chartWidth,"undefined"!==typeof e&&(i.options.chart.width=e),"undefined"!==typeof t&&(i.options.chart.height=t),i.getChartSize(),i.styledMode||(n?m:I)(i.container,{width:i.chartWidth+"px",height:i.chartHeight+"px"},n),i.setChartSize(!0),r.setSize(i.chartWidth,i.chartHeight,n),i.axes.forEach((function(e){e.isDirty=!0,e.setScale()})),i.isDirtyLegend=!0,i.isDirtyBox=!0,i.layOutTitles(),i.getMargins(),i.redraw(n),i.oldChartHeight=null,N(i,"resize"),Q((function(){i&&N(i,"endResize",null,(function(){--i.isResizing}))}),v(n).duration)},e.prototype.setChartSize=function(e){var t,n,i,r,a=this.inverted,o=this.renderer,s=this.chartWidth,l=this.chartHeight,u=this.options.chart,c=this.spacing,h=this.clipOffset;this.plotLeft=t=Math.round(this.plotLeft),this.plotTop=n=Math.round(this.plotTop),this.plotWidth=i=Math.max(0,Math.round(s-t-this.marginRight)),this.plotHeight=r=Math.max(0,Math.round(l-n-this.marginBottom)),this.plotSizeX=a?r:i,this.plotSizeY=a?i:r,this.plotBorderWidth=u.plotBorderWidth||0,this.spacingBox=o.spacingBox={x:c[3],y:c[0],width:s-c[3]-c[1],height:l-c[0]-c[2]},this.plotBox=o.plotBox={x:t,y:n,width:i,height:r},a=2*Math.floor(this.plotBorderWidth/2),s=Math.ceil(Math.max(a,h[3])/2),l=Math.ceil(Math.max(a,h[0])/2),this.clipBox={x:s,y:l,width:Math.floor(this.plotSizeX-Math.max(a,h[1])/2-s),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(a,h[2])/2-l))},e||(this.axes.forEach((function(e){e.setAxisSize(),e.setAxisTranslation()})),o.alignElements()),N(this,"afterSetChartSize",{skipAxes:e})},e.prototype.resetMargins=function(){N(this,"resetMargins");var e=this,t=e.options.chart;["margin","spacing"].forEach((function(n){var i=t[n],r=Z(i)?i:[i,i,i,i];["Top","Right","Bottom","Left"].forEach((function(i,a){e[n][a]=H(t[n+i],r[a])}))})),w.forEach((function(t,n){e[t]=H(e.margin[n],e.spacing[n])})),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},e.prototype.drawChartBox=function(){var e,t=this.options.chart,n=this.renderer,i=this.chartWidth,r=this.chartHeight,a=this.styledMode,o=this.plotBGImage,s=t.backgroundColor,l=t.plotBackgroundColor,u=t.plotBackgroundImage,c=this.plotLeft,h=this.plotTop,d=this.plotWidth,p=this.plotHeight,f=this.plotBox,m=this.clipRect,v=this.clipBox,y=this.chartBackground,g=this.plotBackground,_=this.plotBorder,x="animate";if(y||(this.chartBackground=y=n.rect().addClass("highcharts-background").add(),x="attr"),a)var b=e=y.strokeWidth();else e=(b=t.borderWidth||0)+(t.shadow?8:0),s={fill:s||"none"},(b||y["stroke-width"])&&(s.stroke=t.borderColor,s["stroke-width"]=b),y.attr(s).shadow(t.shadow);y[x]({x:e/2,y:e/2,width:i-e-b%2,height:r-e-b%2,r:t.borderRadius}),x="animate",g||(x="attr",this.plotBackground=g=n.rect().addClass("highcharts-plot-background").add()),g[x](f),a||(g.attr({fill:l||"none"}).shadow(t.plotShadow),u&&(o?(u!==o.attr("href")&&o.attr("href",u),o.animate(f)):this.plotBGImage=n.image(u,c,h,d,p).add())),m?m.animate({width:v.width,height:v.height}):this.clipRect=n.clipRect(v),x="animate",_||(x="attr",this.plotBorder=_=n.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),a||_.attr({stroke:t.plotBorderColor,"stroke-width":t.plotBorderWidth||0,fill:"none"}),_[x](_.crisp({x:c,y:h,width:d,height:p},-_.strokeWidth())),this.isDirtyBox=!1,N(this,"afterDrawChartBox")},e.prototype.propFromSeries=function(){var e,t,n,i=this,r=i.options.chart,a=i.options.series;["inverted","angular","polar"].forEach((function(o){for(t=E[r.type||r.defaultSeriesType],n=r[o]||t&&t.prototype[o],e=a&&a.length;!n&&e--;)(t=E[a[e].type])&&t.prototype[o]&&(n=!0);i[o]=n}))},e.prototype.linkSeries=function(){var e=this,t=e.series;t.forEach((function(e){e.linkedSeries.length=0})),t.forEach((function(t){var n=t.options.linkedTo;W(n)&&(n=":previous"===n?e.series[t.index-1]:e.get(n))&&n.linkedParent!==t&&(n.linkedSeries.push(t),t.linkedParent=n,n.enabledDataSorting&&t.setDataSortingOptions(),t.visible=H(t.options.visible,n.options.visible,t.visible))})),N(this,"afterLinkSeries")},e.prototype.renderSeries=function(){this.series.forEach((function(e){e.translate(),e.render()}))},e.prototype.renderLabels=function(){var e=this,t=e.options.labels;t.items&&t.items.forEach((function(n){var i=B(t.style,n.style),r=X(i.left)+e.plotLeft,a=X(i.top)+e.plotTop+12;delete i.left,delete i.top,e.renderer.text(n.html,r,a).attr({zIndex:2}).css(i).add()}))},e.prototype.render=function(){var e=this.axes,t=this.colorAxis,n=this.renderer,i=this.options,r=function(e){e.forEach((function(e){e.visible&&e.render()}))},o=0;this.setTitle(),this.legend=new a(this,i.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),i=this.plotWidth,e.some((function(e){if(e.horiz&&e.visible&&e.options.labels.enabled&&e.series.length)return o=21,!0}));var s=this.plotHeight=Math.max(this.plotHeight-o,0);e.forEach((function(e){e.setScale()})),this.getAxisMargins();var l=1.1<i/this.plotWidth,u=1.05<s/this.plotHeight;(l||u)&&(e.forEach((function(e){(e.horiz&&l||!e.horiz&&u)&&e.setTickInterval(!0)})),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?r(e):t&&t.length&&r(t),this.seriesGroup||(this.seriesGroup=n.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},e.prototype.addCredits=function(e){var t=this,n=G(!0,this.options.credits,e);n.enabled&&!this.credits&&(this.credits=this.renderer.text(n.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){n.href&&(S.location.href=n.href)})).attr({align:n.position.align,zIndex:8}),t.styledMode||this.credits.css(n.style),this.credits.add().align(n.position),this.credits.update=function(e){t.credits=t.credits.destroy(),t.addCredits(e)})},e.prototype.destroy=function(){var e,t=this,n=t.axes,i=t.series,a=t.container,o=a&&a.parentNode;for(N(t,"destroy"),t.renderer.forExport?z(x,t):x[t.index]=void 0,r.chartCount--,t.renderTo.removeAttribute("data-highcharts-chart"),K(t),e=n.length;e--;)n[e]=n[e].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),e=i.length;e--;)i[e]=i[e].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach((function(e){var n=t[e];n&&n.destroy&&(t[e]=n.destroy())})),a&&(a.innerHTML=f.emptyHTML,K(a),o&&O(a)),Y(t,(function(e,n){delete t[n]}))},e.prototype.firstRender=function(){var e=this,t=e.options;e.isReadyToRender&&!e.isReadyToRender()||(e.getContainer(),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),(U(t.series)?t.series:[]).forEach((function(t){e.initSeries(t)})),e.linkSeries(),e.setSeriesData(),N(e,"beforeRender"),l&&(o.isRequired()?e.pointer=new o(e,t):e.pointer=new l(e,t)),e.render(),e.pointer.getChartPosition(),e.renderer.imgCount||e.hasLoaded||e.onload(),e.temporaryDisplay(!0))},e.prototype.onload=function(){this.callbacks.concat([this.callback]).forEach((function(e){e&&"undefined"!==typeof this.index&&e.apply(this,[this])}),this),N(this,"load"),N(this,"render"),L(this.index)&&this.setReflow(this.options.chart.reflow),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0},e.prototype.warnIfA11yModuleNotLoaded=function(){var e=this;setTimeout((function(){var t=e&&e.options;!t||e.accessibility||t.accessibility&&!1===t.accessibility.enabled||R('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,e)}),100)},e.prototype.addSeries=function(e,t,n){var i,r=this;return e&&(t=H(t,!0),N(r,"addSeries",{options:e},(function(){i=r.initSeries(e),r.isDirtyLegend=!0,r.linkSeries(),i.enabledDataSorting&&i.setData(e.data,!1),N(r,"afterAddSeries",{series:i}),t&&r.redraw(n)}))),i},e.prototype.addAxis=function(e,t,n,i){return this.createAxis(t?"xAxis":"yAxis",{axis:e,redraw:n,animation:i})},e.prototype.addColorAxis=function(e,t,n){return this.createAxis("colorAxis",{axis:e,redraw:t,animation:n})},e.prototype.createAxis=function(e,n){return e=new t(this,G(n.axis,{index:this[e].length,isX:"xAxis"===e})),H(n.redraw,!0)&&this.redraw(n.animation),e},e.prototype.showLoading=function(e){var t=this,n=t.options,i=n.loading,r=function(){a&&I(a,{left:t.plotLeft+"px",top:t.plotTop+"px",width:t.plotWidth+"px",height:t.plotHeight+"px"})},a=t.loadingDiv,o=t.loadingSpan;a||(t.loadingDiv=a=D("div",{className:"highcharts-loading highcharts-loading-hidden"},null,t.container)),o||(t.loadingSpan=o=D("span",{className:"highcharts-loading-inner"},null,a),M(t,"redraw",r)),a.className="highcharts-loading",f.setElementHTML(o,H(e,n.lang.loading,"")),t.styledMode||(I(a,B(i.style,{zIndex:10})),I(o,i.labelStyle),t.loadingShown||(I(a,{opacity:0,display:""}),m(a,{opacity:i.style.opacity||.5},{duration:i.showDuration||0}))),t.loadingShown=!0,r()},e.prototype.hideLoading=function(){var e=this.options,t=this.loadingDiv;t&&(t.className="highcharts-loading highcharts-loading-hidden",this.styledMode||m(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){I(t,{display:"none"})}})),this.loadingShown=!1},e.prototype.update=function(e,t,n,i){var r,a,o=this,s={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},l=e.isResponsiveOptions,u=[];N(o,"update",{options:e}),l||o.setResponsive(!1,!0),e=A(e,o.options),o.userOptions=G(o.userOptions,e);var c=e.chart;if(c){if(G(!0,o.options.chart,c),"className"in c&&o.setClassName(c.className),"reflow"in c&&o.setReflow(c.reflow),"inverted"in c||"polar"in c||"type"in c){o.propFromSeries();var h=!0}"alignTicks"in c&&(h=!0),"events"in c&&_(this,c),Y(c,(function(e,t){-1!==o.propsRequireUpdateSeries.indexOf("chart."+t)&&(r=!0),-1!==o.propsRequireDirtyBox.indexOf(t)&&(o.isDirtyBox=!0),-1!==o.propsRequireReflow.indexOf(t)&&(l?o.isDirtyBox=!0:a=!0)})),!o.styledMode&&c.style&&o.renderer.setStyle(o.options.chart.style||{})}!o.styledMode&&e.colors&&(this.options.colors=e.colors),e.time&&(this.time===C&&(this.time=new d(e.time)),G(!0,o.options.time,e.time)),Y(e,(function(t,n){o[n]&&"function"===typeof o[n].update?o[n].update(t,!1):"function"===typeof o[s[n]]?o[s[n]](t):"colors"!==n&&-1===o.collectionsWithUpdate.indexOf(n)&&G(!0,o.options[n],e[n]),"chart"!==n&&-1!==o.propsRequireUpdateSeries.indexOf(n)&&(r=!0)})),this.collectionsWithUpdate.forEach((function(t){if(e[t]){var i=[];o[t].forEach((function(e,t){e.options.isInternal||i.push(H(e.options.index,t))})),$(e[t]).forEach((function(e,r){var a,s=L(e.id);s&&(a=o.get(e.id)),!a&&o[t]&&(a=o[t][i?i[r]:r])&&s&&L(a.options.id)&&(a=void 0),a&&a.coll===t&&(a.update(e,!1),n&&(a.touched=!0)),!a&&n&&o.collectionsWithInit[t]&&(o.collectionsWithInit[t][0].apply(o,[e].concat(o.collectionsWithInit[t][1]||[]).concat([!1])).touched=!0)})),n&&o[t].forEach((function(e){e.touched||e.options.isInternal?delete e.touched:u.push(e)}))}})),u.forEach((function(e){e.chart&&e.remove&&e.remove(!1)})),h&&o.axes.forEach((function(e){e.update({},!1)})),r&&o.getSeriesOrderByLinks().forEach((function(e){e.chart&&e.update({},!1)}),this),h=c&&c.width,c=c&&(W(c.height)?q(c.height,h||o.chartWidth):c.height),a||V(h)&&h!==o.chartWidth||V(c)&&c!==o.chartHeight?o.setSize(h,c,i):H(t,!0)&&o.redraw(i),N(o,"afterUpdate",{options:e,redraw:t,animation:i})},e.prototype.setSubtitle=function(e,t){this.applyDescription("subtitle",e),this.layOutTitles(t)},e.prototype.setCaption=function(e,t){this.applyDescription("caption",e),this.layOutTitles(t)},e.prototype.showResetZoom=function(){function e(){t.zoomOut()}var t=this,n=T.lang,i=t.options.chart.resetZoomButton,r=i.theme,a="chart"===i.relativeTo||"spacingBox"===i.relativeTo?null:"scrollablePlotBox";N(this,"beforeShowResetZoom",null,(function(){t.resetZoomButton=t.renderer.button(n.resetZoom,null,null,e,r).attr({align:i.position.align,title:n.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,a)})),N(this,"afterShowResetZoom")},e.prototype.zoomOut=function(){N(this,"selection",{resetSelection:!0},this.zoom)},e.prototype.zoom=function(e){var t,n=this,i=n.pointer,r=n.inverted?i.mouseDownX:i.mouseDownY,a=!1;!e||e.resetSelection?(n.axes.forEach((function(e){t=e.zoom()})),i.initiated=!1):e.xAxis.concat(e.yAxis).forEach((function(e){var o=e.axis,s=n.inverted?o.left:o.top,l=n.inverted?s+o.width:s+o.height,u=o.isXAxis,c=!1;(!u&&r>=s&&r<=l||u||!L(r))&&(c=!0),i[u?"zoomX":"zoomY"]&&c&&(t=o.zoom(e.min,e.max),o.displayBtn&&(a=!0))}));var o=n.resetZoomButton;a&&!o?n.showResetZoom():!a&&Z(o)&&(n.resetZoomButton=o.destroy()),t&&n.redraw(H(n.options.chart.animation,e&&e.animation,100>n.pointCount))},e.prototype.pan=function(e,t){var n=this,i=n.hoverPoints;t="object"===typeof t?t:{enabled:t,type:"x"};var r=n.options.chart,a=n.options.mapNavigation&&n.options.mapNavigation.enabled;r&&r.panning&&(r.panning=t);var o,s=t.type;N(this,"pan",{originalEvent:e},(function(){i&&i.forEach((function(e){e.setState()}));var t=n.xAxis;"xy"===s?t=t.concat(n.yAxis):"y"===s&&(t=n.yAxis);var r={};t.forEach((function(t){if(t.options.panningEnabled&&!t.options.isInternal){var i=t.horiz,l=e[i?"chartX":"chartY"],u=n[i=i?"mouseDownX":"mouseDownY"],c=t.minPointOffset||0,h=t.reversed&&!n.inverted||!t.reversed&&n.inverted?-1:1,d=t.getExtremes(),p=t.toValue(u-l,!0)+c*h,f=t.toValue(u+t.len-l,!0)-(c*h||t.isXAxis&&t.pointRangePadding||0),m=f<p;h=t.hasVerticalPanning(),u=m?f:p,p=m?p:f;var v=t.panningState;!h||t.isXAxis||v&&!v.isDirty||t.series.forEach((function(e){var t=e.getProcessedData(!0);t=e.getExtremes(t.yData,!0),v||(v={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE}),V(t.dataMin)&&V(t.dataMax)&&(v.startMin=Math.min(H(e.options.threshold,1/0),t.dataMin,v.startMin),v.startMax=Math.max(H(e.options.threshold,-1/0),t.dataMax,v.startMax))})),h=Math.min(H(v&&v.startMin,d.dataMin),c?d.min:t.toValue(t.toPixels(d.min)-t.minPixelPadding)),f=Math.max(H(v&&v.startMax,d.dataMax),c?d.max:t.toValue(t.toPixels(d.max)+t.minPixelPadding)),t.panningState=v,t.isOrdinal||(0<(c=h-u)&&(p+=c,u=h),0<(c=p-f)&&(p=f,u-=c),t.series.length&&u!==d.min&&p!==d.max&&u>=h&&p<=f&&(t.setExtremes(u,p,!1,!1,{trigger:"pan"}),n.resetZoomButton||a||u===h||p===f||!s.match("y")||(n.showResetZoom(),t.displayBtn=!1),o=!0),r[i]=l)}})),Y(r,(function(e,t){n[t]=e})),o&&n.redraw(!1),I(n.container,{cursor:"move"})}))},e}(),B(e.prototype,{callbacks:[],collectionsWithInit:{xAxis:[e.prototype.addAxis,[!0]],yAxis:[e.prototype.addAxis,[!1]],series:[e.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" ")}),e})),t(n,"Core/Legend/LegendSymbol.js",[n["Core/Utilities.js"]],(function(e){var t,n=e.merge,i=e.pick;return function(e){e.drawLineMarker=function(e){var t=this.options,r=e.symbolWidth,a=e.symbolHeight,o=a/2,s=this.chart.renderer,l=this.legendGroup;e=e.baseline-Math.round(.3*e.fontMetrics.b);var u={},c=t.marker;this.chart.styledMode||(u={"stroke-width":t.lineWidth||0},t.dashStyle&&(u.dashstyle=t.dashStyle)),this.legendLine=s.path([["M",0,e],["L",r,e]]).addClass("highcharts-graph").attr(u).add(l),c&&!1!==c.enabled&&r&&(t=Math.min(i(c.radius,o),o),0===this.symbol.indexOf("url")&&(c=n(c,{width:a,height:a}),t=0),this.legendSymbol=r=s.symbol(this.symbol,r/2-t,e-t,2*t,2*t,c).addClass("highcharts-point").add(l),r.isMarker=!0)},e.drawRectangle=function(e,t){var n=e.symbolHeight,r=e.options.squareSymbol;t.legendSymbol=this.chart.renderer.rect(r?(e.symbolWidth-n)/2:0,e.baseline-n+1,r?n:e.symbolWidth,n,i(e.options.symbolRadius,n/2)).addClass("highcharts-point").attr({zIndex:3}).add(t.legendGroup)}}(t||(t={})),t})),t(n,"Core/Series/SeriesDefaults.js",[],(function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",defer:!0,formatter:function(){var e=this.series.chart.numberFormatter;return"number"!==typeof this.y?"":e(this.y,-1)},padding:5,style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:50},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}})),t(n,"Core/Series/Series.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/DefaultOptions.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Series/Point.js"],n["Core/Series/SeriesDefaults.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a,o,s,l,u){var c=e.animObject,h=e.setAnimation,d=t.defaultOptions,p=n.registerEventOptions,f=i.hasTouch,m=i.svg,v=i.win,y=s.seriesTypes,g=u.addEvent,_=u.arrayMax,x=u.arrayMin,b=u.clamp,w=u.cleanRecursively,k=u.correctFloat,S=u.defined,T=u.erase,C=u.error,E=u.extend,M=u.find,P=u.fireEvent,A=u.getNestedProperty,D=u.isArray,I=u.isNumber,L=u.isString,O=u.merge,z=u.objectEach,R=u.pick,B=u.removeEvent,F=u.splat,N=u.syncTimeout;return e=function(){function e(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0}return e.prototype.init=function(e,t){P(this,"init",{options:t});var n=this,i=e.series;this.eventsToUnbind=[],n.chart=e,n.options=n.setOptions(t),t=n.options,n.linkedSeries=[],n.bindAxes(),E(n,{name:t.name,state:"",visible:!1!==t.visible,selected:!0===t.selected}),p(this,t);var r,a=t.events;(a&&a.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)&&(e.runTrackerClick=!0),n.getColor(),n.getSymbol(),n.parallelArrays.forEach((function(e){n[e+"Data"]||(n[e+"Data"]=[])})),n.isCartesian&&(e.hasCartesianSeries=!0),i.length&&(r=i[i.length-1]),n._i=R(r&&r._i,-1)+1,n.opacity=n.options.opacity,e.orderSeries(this.insert(i)),t.dataSorting&&t.dataSorting.enabled?n.setDataSortingOptions():n.points||n.data||n.setData(t.data,!1),P(this,"afterInit")},e.prototype.is=function(e){return y[e]&&this instanceof y[e]},e.prototype.insert=function(e){var t,n=this.options.index;if(I(n)){for(t=e.length;t--;)if(n>=R(e[t].options.index,e[t]._i)){e.splice(t+1,0,this);break}-1===t&&e.unshift(this),t+=1}else e.push(this);return R(t,e.length-1)},e.prototype.bindAxes=function(){var e,t=this,n=t.options,i=t.chart;P(this,"bindAxes",null,(function(){(t.axisTypes||[]).forEach((function(r){var a=0;i[r].forEach((function(i){e=i.options,(n[r]===a&&!e.isInternal||"undefined"!==typeof n[r]&&n[r]===e.id||"undefined"===typeof n[r]&&0===e.index)&&(t.insert(i.series),t[r]=i,i.isDirty=!0),e.isInternal||a++})),t[r]||t.optionalAxis===r||C(18,!0,i)}))})),P(this,"afterBindAxes")},e.prototype.updateParallelArrays=function(e,t){var n=e.series,i=arguments,r=I(t)?function(i){var r="y"===i&&n.toYData?n.toYData(e):e[i];n[i+"Data"][t]=r}:function(e){Array.prototype[t].apply(n[e+"Data"],Array.prototype.slice.call(i,2))};n.parallelArrays.forEach(r)},e.prototype.hasData=function(){return this.visible&&"undefined"!==typeof this.dataMax&&"undefined"!==typeof this.dataMin||this.visible&&this.yData&&0<this.yData.length},e.prototype.autoIncrement=function(e){var t,n=this.options,i=n.pointIntervalUnit,r=n.relativeXValue,a=this.chart.time,o=this.xIncrement;return o=R(o,n.pointStart,0),this.pointInterval=t=R(this.pointInterval,n.pointInterval,1),r&&I(e)&&(t*=e),i&&(n=new a.Date(o),"day"===i?a.set("Date",n,a.get("Date",n)+t):"month"===i?a.set("Month",n,a.get("Month",n)+t):"year"===i&&a.set("FullYear",n,a.get("FullYear",n)+t),t=n.getTime()-o),r&&I(e)?o+t:(this.xIncrement=o+t,o)},e.prototype.setDataSortingOptions=function(){var e=this.options;E(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),S(e.pointRange)||(e.pointRange=1)},e.prototype.setOptions=function(e){var t=this.chart,n=t.options,i=n.plotOptions,r=t.userOptions||{};e=O(e),t=t.styledMode;var a={plotOptions:i,userOptions:e};P(this,"setOptions",a);var o=a.plotOptions[this.type],s=r.plotOptions||{};return this.userOptions=a.userOptions,r=O(o,i.series,r.plotOptions&&r.plotOptions[this.type],e),this.tooltipOptions=O(d.tooltip,d.plotOptions.series&&d.plotOptions.series.tooltip,d.plotOptions[this.type].tooltip,n.tooltip.userOptions,i.series&&i.series.tooltip,i[this.type].tooltip,e.tooltip),this.stickyTracking=R(e.stickyTracking,s[this.type]&&s[this.type].stickyTracking,s.series&&s.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||r.stickyTracking),null===o.marker&&delete r.marker,this.zoneAxis=r.zoneAxis,i=this.zones=(r.zones||[]).slice(),!r.negativeColor&&!r.negativeFillColor||r.zones||(n={value:r[this.zoneAxis+"Threshold"]||r.threshold||0,className:"highcharts-negative"},t||(n.color=r.negativeColor,n.fillColor=r.negativeFillColor),i.push(n)),i.length&&S(i[i.length-1].value)&&i.push(t?{}:{color:this.color,fillColor:this.fillColor}),P(this,"afterSetOptions",{options:r}),r},e.prototype.getName=function(){return R(this.options.name,"Series "+(this.index+1))},e.prototype.getCyclic=function(e,t,n){var i=this.chart,r=this.userOptions,a=e+"Index",o=e+"Counter",s=n?n.length:R(i.options.chart[e+"Count"],i[e+"Count"]);if(!t){var l=R(r[a],r["_"+a]);S(l)||(i.series.length||(i[o]=0),r["_"+a]=l=i[o]%s,i[o]+=1),n&&(t=n[l])}"undefined"!==typeof l&&(this[a]=l),this[e]=t},e.prototype.getColor=function(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||d.plotOptions[this.type].color,this.chart.options.colors)},e.prototype.getPointsCollection=function(){return(this.hasGroupedData?this.points:this.data)||[]},e.prototype.getSymbol=function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},e.prototype.findPointIndex=function(e,t){var n,i,r=e.id,o=e.x,s=this.points,l=this.options.dataSorting;if(r)(l=this.chart.get(r))instanceof a&&(n=l);else if((this.linkedParent||this.enabledDataSorting||this.options.relativeXValue)&&(n=function(t){return!t.touched&&t.index===e.index},l&&l.matchByName?n=function(t){return!t.touched&&t.name===e.name}:this.options.relativeXValue&&(n=function(t){return!t.touched&&t.options.x===e.x}),!(n=M(s,n))))return;if(n){var u=n&&n.index;"undefined"!==typeof u&&(i=!0)}return"undefined"===typeof u&&I(o)&&(u=this.xData.indexOf(o,t)),-1!==u&&"undefined"!==typeof u&&this.cropped&&(u=u>=this.cropStart?u-this.cropStart:u),!i&&I(u)&&s[u]&&s[u].touched&&(u=void 0),u},e.prototype.updateData=function(e,t){var n,i,r,a=this.options,o=a.dataSorting,s=this.points,l=[],u=this.requireSorting,c=e.length===s.length,h=!0;if(this.xIncrement=null,e.forEach((function(e,t){var i=S(e)&&this.pointClass.prototype.optionsToObject.call({series:this},e)||{},h=i.x;i.id||I(h)?(-1===(i=this.findPointIndex(i,r))||"undefined"===typeof i?l.push(e):s[i]&&e!==a.data[i]?(s[i].update(e,!1,null,!1),s[i].touched=!0,u&&(r=i+1)):s[i]&&(s[i].touched=!0),(!c||t!==i||o&&o.enabled||this.hasDerivedData)&&(n=!0)):l.push(e)}),this),n)for(e=s.length;e--;)(i=s[e])&&!i.touched&&i.remove&&i.remove(!1,t);else!c||o&&o.enabled?h=!1:(e.forEach((function(e,t){e!==s[t].y&&s[t].update&&s[t].update(e,!1,null,!1)})),l.length=0);return s.forEach((function(e){e&&(e.touched=!1)})),!!h&&(l.forEach((function(e){this.addPoint(e,!1,null,null,!1)}),this),null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=_(this.xData),this.autoIncrement()),!0)},e.prototype.setData=function(e,t,n,i){var r=this,a=r.points,o=a&&a.length||0,s=r.options,l=r.chart,u=s.dataSorting,c=r.xAxis,h=s.turboThreshold,d=this.xData,p=this.yData,f=r.pointArrayMap;f=f&&f.length;var m,v=s.keys,y=0,g=1,_=null;if(!l.options.chart.allowMutatingData){s.data&&delete r.options.data,r.userOptions.data&&delete r.userOptions.data;var x=O(!0,e)}if(x=(e=x||e||[]).length,t=R(t,!0),u&&u.enabled&&(e=this.sortData(e)),l.options.chart.allowMutatingData&&!1!==i&&x&&o&&!r.cropped&&!r.hasGroupedData&&r.visible&&!r.isSeriesBoosting&&(m=this.updateData(e,n)),!m){if(r.xIncrement=null,r.colorCounter=0,this.parallelArrays.forEach((function(e){r[e+"Data"].length=0})),h&&x>h)if(_=r.getFirstValidPoint(e),I(_))for(n=0;n<x;n++)d[n]=this.autoIncrement(),p[n]=e[n];else if(D(_))if(f)if(_.length===f)for(n=0;n<x;n++)d[n]=this.autoIncrement(),p[n]=e[n];else for(n=0;n<x;n++)i=e[n],d[n]=i[0],p[n]=i.slice(1,f+1);else if(v&&(y=0<=(y=v.indexOf("x"))?y:0,g=0<=(g=v.indexOf("y"))?g:1),1===_.length&&(g=0),y===g)for(n=0;n<x;n++)d[n]=this.autoIncrement(),p[n]=e[n][g];else for(n=0;n<x;n++)i=e[n],d[n]=i[y],p[n]=i[g];else C(12,!1,l);else for(n=0;n<x;n++)"undefined"!==typeof e[n]&&(i={series:r},r.pointClass.prototype.applyOptions.apply(i,[e[n]]),r.updateParallelArrays(i,n));for(p&&L(p[0])&&C(14,!0,l),r.data=[],r.options.data=r.userOptions.data=e,n=o;n--;)a[n]&&a[n].destroy&&a[n].destroy();c&&(c.minRange=c.userMinRange),r.isDirty=l.isDirtyBox=!0,r.isDirtyData=!!a,n=!1}"point"===s.legendType&&(this.processData(),this.generatePoints()),t&&l.redraw(n)},e.prototype.sortData=function(e){var t=this,n=t.options.dataSorting.sortKey||"y",i=function(e,t){return S(t)&&e.pointClass.prototype.optionsToObject.call({series:e},t)||{}};return e.forEach((function(n,r){e[r]=i(t,n),e[r].index=r}),this),e.concat().sort((function(e,t){return e=A(n,e),(t=A(n,t))<e?-1:t>e?1:0})).forEach((function(e,t){e.x=t}),this),t.linkedSeries&&t.linkedSeries.forEach((function(t){var n=t.options,r=n.data;n.dataSorting&&n.dataSorting.enabled||!r||(r.forEach((function(n,a){r[a]=i(t,n),e[a]&&(r[a].x=e[a].x,r[a].index=a)})),t.setData(r,!1))})),e},e.prototype.getProcessedData=function(e){var t=this.xAxis,n=this.options,i=n.cropThreshold,r=e||this.getExtremesFromAll||n.getExtremesFromAll,a=this.isCartesian;e=t&&t.val2lin,n=!(!t||!t.logarithmic);var o=0,s=this.xData,l=this.yData,u=this.requireSorting,c=!1,h=s.length;if(t){var d=(c=t.getExtremes()).min,p=c.max;c=!(!t.categories||t.names.length)}if(a&&this.sorted&&!r&&(!i||h>i||this.forceCrop))if(s[h-1]<d||s[0]>p)s=[],l=[];else if(this.yData&&(s[0]<d||s[h-1]>p)){var f=this.cropData(this.xData,this.yData,d,p);s=f.xData,l=f.yData,o=f.start,f=!0}for(i=s.length||1;--i;)if(0<(t=n?e(s[i])-e(s[i-1]):s[i]-s[i-1])&&("undefined"===typeof m||t<m))var m=t;else 0>t&&u&&!c&&(C(15,!1,this.chart),u=!1);return{xData:s,yData:l,cropped:f,cropStart:o,closestPointRange:m}},e.prototype.processData=function(e){var t=this.xAxis;if(this.isCartesian&&!this.isDirty&&!t.isDirty&&!this.yAxis.isDirty&&!e)return!1;e=this.getProcessedData(),this.cropped=e.cropped,this.cropStart=e.cropStart,this.processedXData=e.xData,this.processedYData=e.yData,this.closestPointRange=this.basePointRange=e.closestPointRange,P(this,"afterProcessData")},e.prototype.cropData=function(e,t,n,i,r){var a,o=e.length,s=0,l=o;for(r=R(r,this.cropShoulder),a=0;a<o;a++)if(e[a]>=n){s=Math.max(0,a-r);break}for(n=a;n<o;n++)if(e[n]>i){l=n+r;break}return{xData:e.slice(s,l),yData:t.slice(s,l),start:s,end:l}},e.prototype.generatePoints=function(){var e=this.options,t=this.processedData||e.data,n=this.processedXData,i=this.processedYData,r=this.pointClass,a=n.length,o=this.cropStart||0,s=this.hasGroupedData,l=e.keys,u=[];e=e.dataGrouping&&e.dataGrouping.groupAll?o:0;var c,h,d=this.data;if(!d&&!s){var p=[];p.length=t.length,d=this.data=p}for(l&&s&&(this.options.keys=!1),h=0;h<a;h++){if(p=o+h,s){var f=(new r).init(this,[n[h]].concat(F(i[h])));f.dataGroup=this.groupMap[e+h],f.dataGroup.options&&(f.options=f.dataGroup.options,E(f,f.dataGroup.options),delete f.dataLabels)}else(f=d[p])||"undefined"===typeof t[p]||(d[p]=f=(new r).init(this,t[p],n[h]));f&&(f.index=s?e+h:p,u[h]=f)}if(this.options.keys=l,d&&(a!==(c=d.length)||s))for(h=0;h<c;h++)h!==o||s||(h+=a),d[h]&&(d[h].destroyElements(),d[h].plotX=void 0);this.data=d,this.points=u,P(this,"afterGeneratePoints")},e.prototype.getXExtremes=function(e){return{min:x(e),max:_(e)}},e.prototype.getExtremes=function(e,t){var n=this.xAxis,i=this.yAxis,r=this.processedXData||this.xData,a=[],o=this.requireSorting?this.cropShoulder:0;i=!!i&&i.positiveValuesOnly;var s,l=0,u=0,c=0,h=(e=e||this.stackedYData||this.processedYData||[]).length;if(n){var d=n.getExtremes();l=d.min,u=d.max}for(s=0;s<h;s++){var p=r[s];d=e[s];var f=(I(d)||D(d))&&(d.length||0<d||!i);if(p=t||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!n||(r[s+o]||p)>=l&&(r[s-o]||p)<=u,f&&p)if(f=d.length)for(;f--;)I(d[f])&&(a[c++]=d[f]);else a[c++]=d}return e={activeYData:a,dataMin:x(a),dataMax:_(a)},P(this,"afterGetExtremes",{dataExtremes:e}),e},e.prototype.applyExtremes=function(){var e=this.getExtremes();return this.dataMin=e.dataMin,this.dataMax=e.dataMax,e},e.prototype.getFirstValidPoint=function(e){for(var t=e.length,n=0,i=null;null===i&&n<t;)i=e[n],n++;return i},e.prototype.translate=function(){this.processedXData||this.processData(),this.generatePoints();var e,t,n=this.options,i=n.stacking,r=this.xAxis,a=r.categories,o=this.enabledDataSorting,s=this.yAxis,l=this.points,u=l.length,c=this.pointPlacementToXValue(),h=!!c,d=n.threshold,p=n.startFromThreshold?d:0,f=this.zoneAxis||"y",m=Number.MAX_VALUE;for(e=0;e<u;e++){var v=l[e],y=v.x,g=void 0,_=void 0,x=v.y,w=v.low,T=i&&s.stacking&&s.stacking.stacks[(this.negStacks&&x<(p?0:d)?"-":"")+this.stackKey];if((s.positiveValuesOnly&&!s.validatePositiveValue(x)||r.positiveValuesOnly&&!r.validatePositiveValue(y))&&(v.isNull=!0),v.plotX=t=k(b(r.translate(y,0,0,0,1,c,"flags"===this.type),-1e5,1e5)),i&&this.visible&&T&&T[y]){var C=this.getStackIndicator(C,y,this.index);v.isNull||(_=(g=T[y]).points[C.key])}if(D(_)&&(w=_[0],x=_[1],w===p&&C.key===T[y].base&&(w=R(I(d)&&d,s.min)),s.positiveValuesOnly&&0>=w&&(w=null),v.total=v.stackTotal=g.total,v.percentage=g.total&&v.y/g.total*100,v.stackY=x,this.irregularWidths||g.setOffset(this.pointXOffset||0,this.barW||0)),v.yBottom=S(w)?b(s.translate(w,0,1,0,1),-1e5,1e5):null,this.dataModify&&(x=this.dataModify.modifyValue(x,e)),v.plotY=void 0,I(x)&&"undefined"!==typeof(g=s.translate(x,!1,!0,!1,!0))&&(v.plotY=b(g,-1e5,1e5)),v.isInside=this.isPointInside(v),v.clientX=h?k(r.translate(y,0,0,0,1,c)):t,v.negative=v[f]<(n[f+"Threshold"]||d||0),v.category=R(a&&a[v.x],v.x),!v.isNull&&!1!==v.visible){"undefined"!==typeof E&&(m=Math.min(m,Math.abs(t-E)));var E=t}v.zone=this.zones.length?v.getZone():void 0,!v.graphic&&this.group&&o&&(v.isNew=!0)}this.closestPointRangePx=m,P(this,"afterTranslate")},e.prototype.getValidPoints=function(e,t,n){var i=this.chart;return(e||this.points||[]).filter((function(e){return!(t&&!i.isInsidePlot(e.plotX,e.plotY,{inverted:i.inverted}))&&!1!==e.visible&&(n||!e.isNull)}))},e.prototype.getClipBox=function(){var e=this.chart,t=this.xAxis,n=this.yAxis,i=O(e.clipBox);return t&&t.len!==e.plotSizeX&&(i.width=t.len),n&&n.len!==e.plotSizeY&&(i.height=n.len),i},e.prototype.getSharedClipKey=function(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0)},e.prototype.setClip=function(){var e=this.chart,t=this.group,n=this.markerGroup,i=e.sharedClips;e=e.renderer;var r=this.getClipBox(),a=this.getSharedClipKey(),o=i[a];o?o.animate(r):i[a]=o=e.clipRect(r),t&&t.clip(!1===this.options.clip?void 0:o),n&&n.clip()},e.prototype.animate=function(e){var t=this.chart,n=this.group,i=this.markerGroup,r=t.inverted,a=c(this.options.animation),o=[this.getSharedClipKey(),a.duration,a.easing,a.defer].join(),s=t.sharedClips[o],l=t.sharedClips[o+"m"];if(e&&n)a=this.getClipBox(),s?s.attr("height",a.height):(a.width=0,r&&(a.x=t.plotHeight),s=t.renderer.clipRect(a),t.sharedClips[o]=s,l=t.renderer.clipRect({x:r?(t.plotSizeX||0)+99:-99,y:r?-t.plotLeft:-t.plotTop,width:99,height:r?t.chartWidth:t.chartHeight}),t.sharedClips[o+"m"]=l),n.clip(s),i&&i.clip(l);else if(s&&!s.hasClass("highcharts-animating")){t=this.getClipBox();var u=a.step;i&&i.element.childNodes.length&&(a.step=function(e,t){u&&u.apply(t,arguments),l&&l.element&&l.attr(t.prop,"width"===t.prop?e+99:e)}),s.addClass("highcharts-animating").animate(t,a)}},e.prototype.afterAnimate=function(){var e=this;this.setClip(),z(this.chart.sharedClips,(function(t,n,i){t&&!e.chart.container.querySelector('[clip-path="url(#'+t.id+')"]')&&(t.destroy(),delete i[n])})),this.finishedAnimating=!0,P(this,"afterAnimate")},e.prototype.drawPoints=function(){var e,t,n=this.points,i=this.chart,r=this.options.marker,a=this[this.specialGroup]||this.markerGroup,o=this.xAxis,s=R(r.enabled,!(o&&!o.isRadial)||null,this.closestPointRangePx>=r.enabledThreshold*r.radius);if(!1!==r.enabled||this._hasPointMarkers)for(e=0;e<n.length;e++){var l=n[e],u=(t=l.graphic)?"animate":"attr",c=l.marker||{},h=!!l.marker;if((s&&"undefined"===typeof c.enabled||c.enabled)&&!l.isNull&&!1!==l.visible){var d=R(c.symbol,this.symbol,"rect"),p=this.markerAttribs(l,l.selected&&"select");this.enabledDataSorting&&(l.startXPos=o.reversed?-(p.width||0):o.width);var f=!1!==l.isInside;t?t[f?"show":"hide"](f).animate(p):f&&(0<(p.width||0)||l.hasImage)&&(l.graphic=t=i.renderer.symbol(d,p.x,p.y,p.width,p.height,h?c:r).add(a),this.enabledDataSorting&&i.hasRendered&&(t.attr({x:l.startXPos}),u="animate")),t&&"animate"===u&&t[f?"show":"hide"](f).animate(p),t&&!i.styledMode&&t[u](this.pointAttribs(l,l.selected&&"select")),t&&t.addClass(l.getClassName(),!0)}else t&&(l.graphic=t.destroy())}},e.prototype.markerAttribs=function(e,t){var n=this.options,i=n.marker,r=e.marker||{},a=r.symbol||i.symbol,o=R(r.radius,i&&i.radius);return t&&(i=i.states[t],t=r.states&&r.states[t],o=R(t&&t.radius,i&&i.radius,o&&o+(i&&i.radiusPlus||0))),e.hasImage=a&&0===a.indexOf("url"),e.hasImage&&(o=0),e=I(o)?{x:n.crisp?Math.floor(e.plotX-o):e.plotX-o,y:e.plotY-o}:{},o&&(e.width=e.height=2*o),e},e.prototype.pointAttribs=function(e,t){var n=this.options.marker,i=e&&e.options,r=i&&i.marker||{},a=i&&i.color,o=e&&e.color,s=e&&e.zone&&e.zone.color,l=this.color;return e=R(r.lineWidth,n.lineWidth),i=1,l=a||s||o||l,a=r.fillColor||n.fillColor||l,o=r.lineColor||n.lineColor||l,t=t||"normal",n=n.states[t]||{},t=r.states&&r.states[t]||{},e=R(t.lineWidth,n.lineWidth,e+R(t.lineWidthPlus,n.lineWidthPlus,0)),a=t.fillColor||n.fillColor||a,{stroke:o=t.lineColor||n.lineColor||o,"stroke-width":e,fill:a,opacity:i=R(t.opacity,n.opacity,i)}},e.prototype.destroy=function(e){var t,n,i,r=this,a=r.chart,o=/AppleWebKit\/533/.test(v.navigator.userAgent),s=r.data||[];for(P(r,"destroy",{keepEventsForUpdate:e}),this.removeEvents(e),(r.axisTypes||[]).forEach((function(e){(i=r[e])&&i.series&&(T(i.series,r),i.isDirty=i.forceRedraw=!0)})),r.legendItem&&r.chart.legend.destroyItem(r),t=s.length;t--;)(n=s[t])&&n.destroy&&n.destroy();r.clips&&r.clips.forEach((function(e){return e.destroy()})),u.clearTimeout(r.animationTimeout),z(r,(function(e,t){e instanceof l&&!e.survive&&e[o&&"group"===t?"hide":"destroy"]()})),a.hoverSeries===r&&(a.hoverSeries=void 0),T(a.series,r),a.orderSeries(),z(r,(function(t,n){e&&"hcEvents"===n||delete r[n]}))},e.prototype.applyZones=function(){var e,t,n,i,r,a,o,s,l=this,u=this.chart,c=u.renderer,h=this.zones,d=this.clips||[],p=this.graph,f=this.area,m=Math.max(u.chartWidth,u.chartHeight),v=this[(this.zoneAxis||"y")+"Axis"],y=u.inverted,g=!1;if(h.length&&(p||f)&&v&&"undefined"!==typeof v.min){var _=v.reversed,x=v.horiz;p&&!this.showLine&&p.hide(),f&&f.hide();var w=v.getExtremes();h.forEach((function(h,k){e=_?x?u.plotWidth:0:x?0:v.toPixels(w.min)||0,e=b(R(t,e),0,m),t=b(Math.round(v.toPixels(R(h.value,w.max),!0)||0),0,m),g&&(e=t=v.toPixels(w.max)),i=Math.abs(e-t),r=Math.min(e,t),a=Math.max(e,t),v.isXAxis?(n={x:y?a:r,y:0,width:i,height:m},x||(n.x=u.plotHeight-n.x)):(n={x:0,y:y?a:r,width:m,height:i},x&&(n.y=u.plotWidth-n.y)),y&&c.isVML&&(n=v.isXAxis?{x:0,y:_?r:a,height:n.width,width:u.chartWidth}:{x:n.y-u.plotLeft-u.spacingBox.x,y:0,width:n.height,height:u.chartHeight}),d[k]?d[k].animate(n):d[k]=c.clipRect(n),o=l["zone-area-"+k],s=l["zone-graph-"+k],p&&s&&s.clip(d[k]),f&&o&&o.clip(d[k]),g=h.value>w.max,l.resetZones&&0===t&&(t=void 0)})),this.clips=d}else l.visible&&(p&&p.show(),f&&f.show())},e.prototype.invertGroups=function(e){function t(){["group","markerGroup"].forEach((function(t){n[t]&&(i.renderer.isVML&&n[t].attr({width:n.yAxis.len,height:n.xAxis.len}),n[t].width=n.yAxis.len,n[t].height=n.xAxis.len,n[t].invert(!n.isRadialSeries&&e))}))}var n=this,i=n.chart;n.xAxis&&(n.eventsToUnbind.push(g(i,"resize",t)),t(),n.invertGroups=t)},e.prototype.plotGroup=function(e,t,n,i,r){var a=this[e],o=!a;return n={visibility:n,zIndex:i||.1},"undefined"===typeof this.opacity||this.chart.styledMode||"inactive"===this.state||(n.opacity=this.opacity),o&&(this[e]=a=this.chart.renderer.g().add(r)),a.addClass("highcharts-"+t+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(S(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(a.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),a.attr(n)[o?"attr":"animate"](this.getPlotBox()),a},e.prototype.getPlotBox=function(){var e=this.chart,t=this.xAxis,n=this.yAxis;return e.inverted&&(t=n,n=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:n?n.top:e.plotTop,scaleX:1,scaleY:1}},e.prototype.removeEvents=function(e){e||B(this),this.eventsToUnbind.length&&(this.eventsToUnbind.forEach((function(e){e()})),this.eventsToUnbind.length=0)},e.prototype.render=function(){var e=this,t=e.chart,n=e.options,i=c(n.animation),r=e.visible?"inherit":"hidden",a=n.zIndex,o=e.hasRendered,s=t.seriesGroup,l=t.inverted;t=!e.finishedAnimating&&t.renderer.isSVG?i.duration:0,P(this,"render");var u=e.plotGroup("group","series",r,a,s);e.markerGroup=e.plotGroup("markerGroup","markers",r,a,s),!1!==n.clip&&e.setClip(),e.animate&&t&&e.animate(!0),u.inverted=!!R(e.invertible,e.isCartesian)&&l,e.drawGraph&&(e.drawGraph(),e.applyZones()),e.visible&&e.drawPoints(),e.drawDataLabels&&e.drawDataLabels(),e.redrawPoints&&e.redrawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),e.invertGroups(l),e.animate&&t&&e.animate(),o||(t&&i.defer&&(t+=i.defer),e.animationTimeout=N((function(){e.afterAnimate()}),t||0)),e.isDirty=!1,e.hasRendered=!0,P(e,"afterRender")},e.prototype.redraw=function(){var e=this.chart,t=this.isDirty||this.isDirtyData,n=this.group,i=this.xAxis,r=this.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:R(i&&i.left,e.plotLeft),translateY:R(r&&r.top,e.plotTop)})),this.translate(),this.render(),t&&delete this.kdTree},e.prototype.searchPoint=function(e,t){var n=this.xAxis,i=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?n.len-e.chartY+n.pos:e.chartX-n.pos,plotY:r?i.len-e.chartX+i.pos:e.chartY-i.pos},t,e)},e.prototype.buildKDTree=function(e){function t(e,i,r){var a=e&&e.length;if(a){var o=n.kdAxisArray[i%r];return e.sort((function(e,t){return e[o]-t[o]})),{point:e[a=Math.floor(a/2)],left:t(e.slice(0,a),i+1,r),right:t(e.slice(a+1),i+1,r)}}}this.buildingKdTree=!0;var n=this,i=-1<n.options.findNearestPointBy.indexOf("y")?2:1;delete n.kdTree,N((function(){n.kdTree=t(n.getValidPoints(null,!n.directTouch),i,i),n.buildingKdTree=!1}),n.options.kdNow||e&&"touchstart"===e.type?0:1)},e.prototype.searchKDTree=function(e,t,n){var i=this,r=this.kdAxisArray[0],a=this.kdAxisArray[1],o=t?"distX":"dist";if(t=-1<i.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(n),this.kdTree)return function e(t,n,s,l){var u=n.point,c=i.kdAxisArray[s%l],h=u,d=S(t[r])&&S(u[r])?Math.pow(t[r]-u[r],2):null,p=S(t[a])&&S(u[a])?Math.pow(t[a]-u[a],2):null;return p=(d||0)+(p||0),u.dist=S(p)?Math.sqrt(p):Number.MAX_VALUE,u.distX=S(d)?Math.sqrt(d):Number.MAX_VALUE,d=0>(c=t[c]-u[c])?"right":"left",n[p=0>c?"left":"right"]&&(h=(p=e(t,n[p],s+1,l))[o]<h[o]?p:u),n[d]&&Math.sqrt(c*c)<h[o]&&(h=(t=e(t,n[d],s+1,l))[o]<h[o]?t:h),h}(e,this.kdTree,t,t)},e.prototype.pointPlacementToXValue=function(){var e=this.options,t=e.pointRange,n=this.xAxis;return"between"===(e=e.pointPlacement)&&(e=n.reversed?-.5:.5),I(e)?e*(t||n.pointRange):0},e.prototype.isPointInside=function(e){var t=this.chart,n=this.xAxis,i=this.yAxis;return"undefined"!==typeof e.plotY&&"undefined"!==typeof e.plotX&&0<=e.plotY&&e.plotY<=(i?i.len:t.plotHeight)&&0<=e.plotX&&e.plotX<=(n?n.len:t.plotWidth)},e.prototype.drawTracker=function(){var e=this,t=e.options,n=t.trackByArea,i=[].concat(n?e.areaPath:e.graphPath),r=e.chart,a=r.pointer,o=r.renderer,s=r.options.tooltip.snap,l=e.tracker,u=function(t){r.hoverSeries!==e&&e.onMouseOver()},c="rgba(192,192,192,"+(m?1e-4:.002)+")";l?l.attr({d:i}):e.graph&&(e.tracker=o.path(i).attr({visibility:e.visible?"inherit":"hidden",zIndex:2}).addClass(n?"highcharts-tracker-area":"highcharts-tracker-line").add(e.group),r.styledMode||e.tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:c,fill:n?c:"none","stroke-width":e.graph.strokeWidth()+(n?0:2*s)}),[e.tracker,e.markerGroup,e.dataLabelsGroup].forEach((function(e){e&&(e.addClass("highcharts-tracker").on("mouseover",u).on("mouseout",(function(e){a.onTrackerMouseOut(e)})),t.cursor&&!r.styledMode&&e.css({cursor:t.cursor}),f)&&e.on("touchstart",u)}))),P(this,"afterDrawTracker")},e.prototype.addPoint=function(e,t,n,i,r){var a=this.options,o=this.data,s=this.chart,l=this.xAxis;l=l&&l.hasNames&&l.names;var u,c=a.data,h=this.xData;t=R(t,!0);var d={series:this};this.pointClass.prototype.applyOptions.apply(d,[e]);var p=d.x,f=h.length;if(this.requireSorting&&p<h[f-1])for(u=!0;f&&h[f-1]>p;)f--;this.updateParallelArrays(d,"splice",f,0,0),this.updateParallelArrays(d,f),l&&d.name&&(l[p]=d.name),c.splice(f,0,e),(u||this.processedData)&&(this.data.splice(f,0,null),this.processData()),"point"===a.legendType&&this.generatePoints(),n&&(o[0]&&o[0].remove?o[0].remove(!1):(o.shift(),this.updateParallelArrays(d,"shift"),c.shift())),!1!==r&&P(this,"addPoint",{point:d}),this.isDirtyData=this.isDirty=!0,t&&s.redraw(i)},e.prototype.removePoint=function(e,t,n){var i=this,r=i.data,a=r[e],o=i.points,s=i.chart,l=function(){o&&o.length===r.length&&o.splice(e,1),r.splice(e,1),i.options.data.splice(e,1),i.updateParallelArrays(a||{series:i},"splice",e,1),a&&a.destroy(),i.isDirty=!0,i.isDirtyData=!0,t&&s.redraw()};h(n,s),t=R(t,!0),a?a.firePointEvent("remove",null,l):l()},e.prototype.remove=function(e,t,n,i){function r(){a.destroy(i),o.isDirtyLegend=o.isDirtyBox=!0,o.linkSeries(),R(e,!0)&&o.redraw(t)}var a=this,o=a.chart;!1!==n?P(a,"remove",null,r):r()},e.prototype.update=function(e,t){e=w(e,this.userOptions),P(this,"update",{options:e});var n,i=this,r=i.chart,a=i.userOptions,o=i.initialType||i.type,s=r.options.plotOptions,l=y[o].prototype,u=i.finishedAnimating&&{animation:!1},c={},h=["eventOptions","navigatorSeries","baseSeries"],d=e.type||a.type||r.options.chart.type,p=!(this.hasDerivedData||d&&d!==this.type||"undefined"!==typeof e.pointStart||"undefined"!==typeof e.pointInterval||"undefined"!==typeof e.relativeXValue||e.joinBy||e.mapData||i.hasOptionChanged("dataGrouping")||i.hasOptionChanged("pointStart")||i.hasOptionChanged("pointInterval")||i.hasOptionChanged("pointIntervalUnit")||i.hasOptionChanged("keys"));if(d=d||o,p&&(h.push("data","isDirtyData","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","_hasPointLabels","clips","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX"),!1!==e.visible&&h.push("area","graph"),i.parallelArrays.forEach((function(e){h.push(e+"Data")})),e.data&&(e.dataSorting&&E(i.options.dataSorting,e.dataSorting),this.setData(e.data,!1))),e=O(a,u,{index:"undefined"===typeof a.index?i.index:a.index,pointStart:R(s&&s.series&&s.series.pointStart,a.pointStart,i.xData[0])},!p&&{data:i.options.data},e),p&&e.data&&(e.data=i.options.data),(h=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(h)).forEach((function(e){h[e]=i[e],delete i[e]})),s=!1,y[d]){if(s=d!==i.type,i.remove(!1,!1,!1,!0),s)if(Object.setPrototypeOf)Object.setPrototypeOf(i,y[d].prototype);else{for(n in u=Object.hasOwnProperty.call(i,"hcEvents")&&i.hcEvents,l)i[n]=void 0;E(i,y[d].prototype),u?i.hcEvents=u:delete i.hcEvents}}else C(17,!0,r,{missingModuleFor:d});if(h.forEach((function(e){i[e]=h[e]})),i.init(r,e),p&&this.points){var f=i.options;!1===f.visible?(c.graphic=1,c.dataLabel=1):i._hasPointLabels||(e=f.marker,l=f.dataLabels,!e||!1!==e.enabled&&(a.marker&&a.marker.symbol)===e.symbol||(c.graphic=1),l&&!1===l.enabled&&(c.dataLabel=1)),this.points.forEach((function(e){e&&e.series&&(e.resolveColor(),Object.keys(c).length&&e.destroyElements(c),!1===f.showInLegend&&e.legendItem&&r.legend.destroyItem(e))}),this)}i.initialType=o,r.linkSeries(),s&&i.linkedSeries.length&&(i.isDirtyData=!0),P(this,"afterUpdate"),R(t,!0)&&r.redraw(!!p&&void 0)},e.prototype.setName=function(e){this.name=this.options.name=this.userOptions.name=e,this.chart.isDirtyLegend=!0},e.prototype.hasOptionChanged=function(e){var t=this.options[e],n=this.chart.options.plotOptions,i=this.userOptions[e];return i?t!==i:t!==R(n&&n[this.type]&&n[this.type][e],n&&n.series&&n.series[e],t)},e.prototype.onMouseOver=function(){var e=this.chart,t=e.hoverSeries;e.pointer.setHoverChartIndex(),t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&P(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},e.prototype.onMouseOut=function(){var e=this.options,t=this.chart,n=t.tooltip,i=t.hoverPoint;t.hoverSeries=null,i&&i.onMouseOut(),this&&e.events.mouseOut&&P(this,"mouseOut"),!n||this.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),t.series.forEach((function(e){e.setState("",!0)}))},e.prototype.setState=function(e,t){var n=this,i=n.options,r=n.graph,a=i.inactiveOtherPoints,o=i.states,s=R(o[e||"normal"]&&o[e||"normal"].animation,n.chart.options.chart.animation),l=i.lineWidth,u=0,c=i.opacity;if(e=e||"",n.state!==e&&([n.group,n.markerGroup,n.dataLabelsGroup].forEach((function(t){t&&(n.state&&t.removeClass("highcharts-series-"+n.state),e&&t.addClass("highcharts-series-"+e))})),n.state=e,!n.chart.styledMode)){if(o[e]&&!1===o[e].enabled)return;if(e&&(l=o[e].lineWidth||l+(o[e].lineWidthPlus||0),c=R(o[e].opacity,c)),r&&!r.dashstyle)for(i={"stroke-width":l},r.animate(i,s);n["zone-graph-"+u];)n["zone-graph-"+u].animate(i,s),u+=1;a||[n.group,n.markerGroup,n.dataLabelsGroup,n.labelBySeries].forEach((function(e){e&&e.animate({opacity:c},s)}))}t&&a&&n.points&&n.setAllPointsToState(e||void 0)},e.prototype.setAllPointsToState=function(e){this.points.forEach((function(t){t.setState&&t.setState(e)}))},e.prototype.setVisible=function(e,t){var n=this,i=n.chart,r=n.legendItem,a=i.options.chart.ignoreHiddenSeries,o=n.visible,s=(n.visible=e=n.options.visible=n.userOptions.visible="undefined"===typeof e?!o:e)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((function(e){n[e]&&n[e][s]()})),i.hoverSeries!==n&&(i.hoverPoint&&i.hoverPoint.series)!==n||n.onMouseOut(),r&&i.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&i.series.forEach((function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)})),n.linkedSeries.forEach((function(t){t.setVisible(e,!1)})),a&&(i.isDirtyBox=!0),P(n,s),!1!==t&&i.redraw()},e.prototype.show=function(){this.setVisible(!0)},e.prototype.hide=function(){this.setVisible(!1)},e.prototype.select=function(e){this.selected=e=this.options.selected="undefined"===typeof e?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),P(this,e?"select":"unselect")},e.prototype.shouldShowTooltip=function(e,t,n){return void 0===n&&(n={}),n.series=this,n.visiblePlotOnly=!0,this.chart.isInsidePlot(e,t,n)},e.defaultOptions=o,e}(),E(e.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,drawLegendSymbol:r.drawLineMarker,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:a,requireSorting:!0,sorted:!0}),s.series=e,e})),t(n,"Extensions/ScrollablePlotArea.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/Chart/Chart.js"],n["Core/Series/Series.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a){var o=e.stop,s=a.addEvent,l=a.createElement,u=a.merge,c=a.pick;s(n,"afterSetChartSize",(function(e){var n=this.options.chart.scrollablePlotArea,i=n&&n.minWidth;if(n=n&&n.minHeight,!this.renderer.forExport){if(i){if(this.scrollablePixelsX=i=Math.max(0,i-this.chartWidth)){this.scrollablePlotBox=this.renderer.scrollablePlotBox=u(this.plotBox),this.plotBox.width=this.plotWidth+=i,this.inverted?this.clipBox.height+=i:this.clipBox.width+=i;var r={1:{name:"right",value:i}}}}else n&&(this.scrollablePixelsY=i=Math.max(0,n-this.chartHeight))&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=u(this.plotBox),this.plotBox.height=this.plotHeight+=i,this.inverted?this.clipBox.width+=i:this.clipBox.height+=i,r={2:{name:"bottom",value:i}});r&&!e.skipAxes&&this.axes.forEach((function(e){r[e.side]?e.getPlotLinePath=function(){var n=r[e.side].name,i=this[n];this[n]=i-r[e.side].value;var a=t.prototype.getPlotLinePath.apply(this,arguments);return this[n]=i,a}:(e.setAxisSize(),e.setAxisTranslation())}))}})),s(n,"render",(function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()})),n.prototype.setUpScrolling=function(){var e=this,t={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};this.scrollablePixelsX&&(t.overflowX="auto"),this.scrollablePixelsY&&(t.overflowY="auto"),this.scrollingParent=l("div",{className:"highcharts-scrolling-parent"},{position:"relative"},this.renderTo),this.scrollingContainer=l("div",{className:"highcharts-scrolling"},t,this.scrollingParent),s(this.scrollingContainer,"scroll",(function(){e.pointer&&delete e.pointer.chartPosition})),this.innerContainer=l("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},n.prototype.moveFixedElements=function(){var e,t=this.container,n=this.fixedRenderer,i=".highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-drillup-button .highcharts-scrollbar .highcharts-subtitle .highcharts-title".split(" ");this.scrollablePixelsX&&!this.inverted?e=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?e=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(e=".highcharts-yaxis"),e&&i.push(e+":not(.highcharts-radial-axis)",e+"-labels:not(.highcharts-radial-axis-labels)"),i.forEach((function(e){[].forEach.call(t.querySelectorAll(e),(function(e){(e.namespaceURI===n.SVG_NS?n.box:n.box.parentNode).appendChild(e),e.style.pointerEvents="auto"}))}))},n.prototype.applyFixed=function(){var e=!this.fixedDiv,t=this.options.chart,n=t.scrollablePlotArea,i=r.getRendererType();e?(this.fixedDiv=l("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(t.style&&t.style.zIndex||0)+2,top:0},null,!0),this.scrollingContainer&&this.scrollingContainer.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow="visible",this.fixedRenderer=t=new i(this.fixedDiv,this.chartWidth,this.chartHeight,this.options.chart.style),this.scrollableMask=t.path().attr({fill:this.options.chart.backgroundColor||"#fff","fill-opacity":c(n.opacity,.85),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),s(this,"afterShowResetZoom",this.moveFixedElements),s(this,"afterApplyDrilldown",this.moveFixedElements),s(this,"afterLayOutTitles",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),(this.scrollableDirty||e)&&(this.scrollableDirty=!1,this.moveFixedElements()),t=this.chartWidth+(this.scrollablePixelsX||0),i=this.chartHeight+(this.scrollablePixelsY||0),o(this.container),this.container.style.width=t+"px",this.container.style.height=i+"px",this.renderer.boxWrapper.attr({width:t,height:i,viewBox:[0,0,t,i].join(" ")}),this.chartBackground.attr({width:t,height:i}),this.scrollingContainer.style.height=this.chartHeight+"px",e&&(n.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*n.scrollPositionX),n.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*n.scrollPositionY)),i=this.axisOffset,e=this.plotTop-i[0]-1,n=this.plotLeft-i[3]-1,t=this.plotTop+this.plotHeight+i[2]+1,i=this.plotLeft+this.plotWidth+i[1]+1;var a=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),u=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);e=this.scrollablePixelsX?[["M",0,e],["L",this.plotLeft-1,e],["L",this.plotLeft-1,t],["L",0,t],["Z"],["M",a,e],["L",this.chartWidth,e],["L",this.chartWidth,t],["L",a,t],["Z"]]:this.scrollablePixelsY?[["M",n,0],["L",n,this.plotTop-1],["L",i,this.plotTop-1],["L",i,0],["Z"],["M",n,u],["L",n,this.chartHeight],["L",i,this.chartHeight],["L",i,u],["Z"]]:[["M",0,0]],"adjustHeight"!==this.redrawTrigger&&this.scrollableMask.attr({d:e})},s(t,"afterInit",(function(){this.chart.scrollableDirty=!0})),s(i,"show",(function(){this.chart.scrollableDirty=!0}))})),t(n,"Core/Axis/StackingAxis.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/Utilities.js"]],(function(e,t,n){var i,r=e.getDeferredAnimation,a=n.addEvent,o=n.destroyObjectProperties,s=n.fireEvent,l=n.isNumber,u=n.objectEach;return function(e){function t(){var e=this.stacking;if(e){var t=e.stacks;u(t,(function(e,n){o(e),t[n]=null})),e&&e.stackTotalGroup&&e.stackTotalGroup.destroy()}}function n(){this.stacking||(this.stacking=new c(this))}var i=[];e.compose=function(e){return-1===i.indexOf(e)&&(i.push(e),a(e,"init",n),a(e,"destroy",t)),e};var c=function(){function e(e){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=e}return e.prototype.buildStacks=function(){var e,t=this.axis,n=t.series,i=t.options.reversedStacks,r=n.length;if(!t.isXAxis){for(this.usePercentage=!1,e=r;e--;){var a=n[i?e:r-e-1];a.setStackedPoints(),a.setGroupedPoints()}for(e=0;e<r;e++)n[e].modifyStacks();s(t,"afterBuildStacks")}},e.prototype.cleanStacks=function(){if(!this.axis.isXAxis){if(this.oldStacks)var e=this.stacks=this.oldStacks;u(e,(function(e){u(e,(function(e){e.cumulative=e.total}))}))}},e.prototype.resetStacks=function(){var e=this,t=e.stacks;e.axis.isXAxis||u(t,(function(t){u(t,(function(n,i){l(n.touched)&&n.touched<e.stacksTouched?(n.destroy(),delete t[i]):(n.total=null,n.cumulative=null)}))}))},e.prototype.renderStackTotals=function(){var e=this.axis,t=e.chart,n=t.renderer,i=this.stacks;e=r(t,e.options.stackLabels&&e.options.stackLabels.animation||!1);var a=this.stackTotalGroup=this.stackTotalGroup||n.g("stack-labels").attr({zIndex:6,opacity:0}).add();a.translate(t.plotLeft,t.plotTop),u(i,(function(e){u(e,(function(e){e.render(a)}))})),a.animate({opacity:1},e)},e}();e.Additions=c}(i||(i={})),i})),t(n,"Extensions/Stacking.js",[n["Core/Axis/Axis.js"],n["Core/Chart/Chart.js"],n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Series/Series.js"],n["Core/Axis/StackingAxis.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a,o){var s=n.format,l=o.correctFloat,u=o.defined,c=o.destroyObjectProperties,h=o.isArray,d=o.isNumber,p=o.objectEach,f=o.pick,m=function(){function e(e,t,n,i,r){var a=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t=t||{},this.x=i,this.total=null,this.points={},this.hasValidPoints=!1,this.stack=r,this.rightCliff=this.leftCliff=0,this.alignOptions={align:t.align||(a?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(a?"middle":n?"bottom":"top"),y:t.y,x:t.x},this.textAlign=t.textAlign||(a?n?"right":"left":"center")}return e.prototype.destroy=function(){c(this,this.axis)},e.prototype.render=function(e){var t=this.axis.chart,n=this.options,i=n.format;i=i?s(i,this,t):n.formatter.call(this),this.label?this.label.attr({text:i,visibility:"hidden"}):(this.label=t.renderer.label(i,null,null,n.shape,null,null,n.useHTML,!1,"stack-labels"),i={r:n.borderRadius||0,text:i,rotation:n.rotation,padding:f(n.padding,5),visibility:"hidden"},t.styledMode||(i.fill=n.backgroundColor,i.stroke=n.borderColor,i["stroke-width"]=n.borderWidth,this.label.css(n.style)),this.label.attr(i),this.label.added||this.label.add(e)),this.label.labelrank=t.plotSizeY},e.prototype.setOffset=function(e,t,n,i,a){var o=this.axis,s=o.chart;i=o.translate(o.stacking.usePercentage?100:i||this.total,0,0,0,1),n=o.translate(n||0),n=u(i)&&Math.abs(i-n),e=f(a,s.xAxis[0].translate(this.x))+e,o=u(i)&&this.getStackBox(s,this,e,i,t,n,o),t=this.label,n=this.isNegative,e="justify"===f(this.options.overflow,"justify");var l=this.textAlign;t&&o&&(a=t.getBBox(),i=t.padding,l="left"===l?s.inverted?-i:i:"right"===l?a.width:s.inverted&&"center"===l?a.width/2:s.inverted?n?a.width+i:-i:a.width/2,n=s.inverted?a.height/2:n?-i:a.height,this.alignOptions.x=f(this.options.x,0),this.alignOptions.y=f(this.options.y,0),o.x-=l,o.y-=n,t.align(this.alignOptions,null,o),s.isInsidePlot(t.alignAttr.x+l-this.alignOptions.x,t.alignAttr.y+n-this.alignOptions.y)?t.show():(t.hide(),e=!1),e&&r.prototype.justifyDataLabel.call(this.axis,t,this.alignOptions,t.alignAttr,a,o),t.attr({x:t.alignAttr.x,y:t.alignAttr.y}),f(!e&&this.options.crop,!0)&&((s=d(t.x)&&d(t.y)&&s.isInsidePlot(t.x-i+t.width,t.y)&&s.isInsidePlot(t.x+i,t.y))||t.hide()))},e.prototype.getStackBox=function(e,t,n,i,r,a,o){var s=t.axis.reversed,l=e.inverted,u=o.height+o.pos-(l?e.plotLeft:e.plotTop);return t=t.isNegative&&!s||!t.isNegative&&s,{x:l?t?i-o.right:i-a+o.pos-e.plotLeft:n+e.xAxis[0].transB-e.plotLeft,y:l?o.height-n-r:t?u-i-a:u-i,width:l?a:r,height:l?r:a}},e}();return t.prototype.getStacks=function(){var e=this,t=e.inverted;e.yAxis.forEach((function(e){e.stacking&&e.stacking.stacks&&e.hasVisibleSeries&&(e.stacking.oldStacks=e.stacking.stacks)})),e.series.forEach((function(n){var i=n.xAxis&&n.xAxis.options||{};!n.options.stacking||!0!==n.visible&&!1!==e.options.chart.ignoreHiddenSeries||(n.stackKey=[n.type,f(n.options.stack,""),t?i.top:i.left,t?i.height:i.width].join())}))},a.compose(e),r.prototype.setGroupedPoints=function(){var e=this.yAxis.stacking;this.options.centerInCategory&&(this.is("column")||this.is("columnrange"))&&!this.options.stacking&&1<this.chart.series.length?r.prototype.setStackedPoints.call(this,"group"):e&&p(e.stacks,(function(t,n){"group"===n.slice(-5)&&(p(t,(function(e){return e.destroy()})),delete e.stacks[n])}))},r.prototype.setStackedPoints=function(e){var t=e||this.options.stacking;if(t&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var n=this.processedXData,i=this.processedYData,r=[],a=i.length,o=this.options,s=o.threshold,c=f(o.startFromThreshold&&s,0);o=o.stack;var d,p,v="-"+(e=e?this.type+","+t:this.stackKey),y=this.negStacks,g=this.yAxis,_=g.stacking.stacks,x=g.stacking.oldStacks;for(g.stacking.stacksTouched+=1,p=0;p<a;p++){var b=n[p],w=i[p],k=this.getStackIndicator(k,b,this.index),S=k.key,T=(d=y&&w<(c?0:s))?v:e;_[T]||(_[T]={}),_[T][b]||(x[T]&&x[T][b]?(_[T][b]=x[T][b],_[T][b].total=null):_[T][b]=new m(g,g.options.stackLabels,d,b,o)),T=_[T][b],null!==w?(T.points[S]=T.points[this.index]=[f(T.cumulative,c)],u(T.cumulative)||(T.base=S),T.touched=g.stacking.stacksTouched,0<k.index&&!1===this.singleStacks&&(T.points[S][0]=T.points[this.index+","+b+",0"][0])):T.points[S]=T.points[this.index]=null,"percent"===t?(d=d?e:v,y&&_[d]&&_[d][b]?(d=_[d][b],T.total=d.total=Math.max(d.total,T.total)+Math.abs(w)||0):T.total=l(T.total+(Math.abs(w)||0))):"group"===t?(h(w)&&(w=w[0]),null!==w&&(T.total=(T.total||0)+1)):T.total=l(T.total+(w||0)),T.cumulative="group"===t?(T.total||1)-1:f(T.cumulative,c)+(w||0),null!==w&&(T.points[S].push(T.cumulative),r[p]=T.cumulative,T.hasValidPoints=!0)}"percent"===t&&(g.stacking.usePercentage=!0),"group"!==t&&(this.stackedYData=r),g.stacking.oldStacks={}}},r.prototype.modifyStacks=function(){var e,t=this,n=t.stackKey,i=t.yAxis.stacking.stacks,r=t.processedXData,a=t.options.stacking;t[a+"Stacker"]&&[n,"-"+n].forEach((function(n){for(var o,s,l=r.length;l--;)o=r[l],e=t.getStackIndicator(e,o,t.index,n),(s=(o=i[n]&&i[n][o])&&o.points[e.key])&&t[a+"Stacker"](s,o,l)}))},r.prototype.percentStacker=function(e,t,n){t=t.total?100/t.total:0,e[0]=l(e[0]*t),e[1]=l(e[1]*t),this.stackedYData[n]=e[1]},r.prototype.getStackIndicator=function(e,t,n,i){return!u(e)||e.x!==t||i&&e.stackKey!==i?e={x:t,index:0,key:i,stackKey:i}:e.index++,e.key=[n,t,e.index].join(),e},i.StackItem=m,i.StackItem})),t(n,"Series/Line/LineSeries.js",[n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=n.defined,a=n.merge;return n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return i(n,t),n.prototype.drawGraph=function(){var e=this,t=this.options,n=(this.gappedPath||this.getGraphPath).call(this),i=this.chart.styledMode,r=[["graph","highcharts-graph"]];i||r[0].push(t.lineColor||this.color||"#cccccc",t.dashStyle),(r=e.getZonesGraphs(r)).forEach((function(r,a){var o=r[0],s=e[o],l=s?"animate":"attr";s?(s.endX=e.preventGraphAnimation?null:n.xMap,s.animate({d:n})):n.length&&(e[o]=s=e.chart.renderer.path(n).addClass(r[1]).attr({zIndex:1}).add(e.group)),s&&!i&&(o={stroke:r[2],"stroke-width":t.lineWidth,fill:e.fillGraph&&e.color||"none"},r[3]?o.dashstyle=r[3]:"square"!==t.linecap&&(o["stroke-linecap"]=o["stroke-linejoin"]="round"),s[l](o).shadow(2>a&&t.shadow)),s&&(s.startX=n.xMap,s.isArea=n.isArea)}))},n.prototype.getGraphPath=function(e,t,n){var i,a=this,o=a.options,s=[],l=[],u=o.step,c=(e=e||a.points).reversed;return c&&e.reverse(),(u={right:1,center:2}[u]||u&&3)&&c&&(u=4-u),(e=this.getValidPoints(e,!1,!(o.connectNulls&&!t&&!n))).forEach((function(c,h){var d=c.plotX,p=c.plotY,f=e[h-1];(c.leftCliff||f&&f.rightCliff)&&!n&&(i=!0),c.isNull&&!r(t)&&0<h?i=!o.connectNulls:c.isNull&&!t?i=!0:(0===h||i?h=[["M",c.plotX,c.plotY]]:a.getPointSpline?h=[a.getPointSpline(e,c,h)]:u?(h=1===u?[["L",f.plotX,p]]:2===u?[["L",(f.plotX+d)/2,f.plotY],["L",(f.plotX+d)/2,p]]:[["L",d,f.plotY]]).push(["L",d,p]):h=[["L",d,p]],l.push(c.x),u&&(l.push(c.x),2===u&&l.push(c.x)),s.push.apply(s,h),i=!1)})),s.xMap=l,a.graphPath=s},n.prototype.getZonesGraphs=function(e){return this.zones.forEach((function(t,n){n=["zone-graph-"+n,"highcharts-graph highcharts-zone-graph-"+n+" "+(t.className||"")],this.chart.styledMode||n.push(t.color||this.color,t.dashStyle||this.options.dashStyle),e.push(n)}),this),e},n.defaultOptions=a(e.defaultOptions,{}),n}(e),t.registerSeriesType("line",n),n})),t(n,"Series/Area/AreaSeries.js",[n["Core/Color/Color.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=e.parse,o=n.seriesTypes.line;e=i.extend;var s=i.merge,l=i.objectEach,u=i.pick;return i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return r(t,e),t.prototype.drawGraph=function(){this.areaPath=[],e.prototype.drawGraph.apply(this);var t=this,n=this.areaPath,i=this.options,r=[["area","highcharts-area",this.color,i.fillColor]];this.zones.forEach((function(e,n){r.push(["zone-area-"+n,"highcharts-area highcharts-zone-area-"+n+" "+e.className,e.color||t.color,e.fillColor||i.fillColor])})),r.forEach((function(e){var r=e[0],o=t[r],s=o?"animate":"attr",l={};o?(o.endX=t.preventGraphAnimation?null:n.xMap,o.animate({d:n})):(l.zIndex=0,(o=t[r]=t.chart.renderer.path(n).addClass(e[1]).add(t.group)).isArea=!0),t.chart.styledMode||(l.fill=u(e[3],a(e[2]).setOpacity(u(i.fillOpacity,.75)).get())),o[s](l),o.startX=n.xMap,o.shiftUnit=i.step?2:1}))},t.prototype.getGraphPath=function(e){var t,n=o.prototype.getGraphPath,i=this.options,r=i.stacking,a=this.yAxis,s=[],l=[],c=this.index,h=a.stacking.stacks[this.stackKey],d=i.threshold,p=Math.round(a.getThreshold(i.threshold));i=u(i.connectNulls,"percent"===r);var f=function(t,n,i){var o=e[t];t=r&&h[o.x].points[c];var u=o[i+"Null"]||0;if(i=o[i+"Cliff"]||0,o=!0,i||u){var f=(u?t[0]:t[1])+i,m=t[0]+i;o=!!u}else!r&&e[n]&&e[n].isNull&&(f=m=d);"undefined"!==typeof f&&(l.push({plotX:v,plotY:null===f?p:a.getThreshold(f),isNull:o,isCliff:!0}),s.push({plotX:v,plotY:null===m?p:a.getThreshold(m),doCurve:!1}))};for(e=e||this.points,r&&(e=this.getStackPoints(e)),t=0;t<e.length;t++){r||(e[t].leftCliff=e[t].rightCliff=e[t].leftNull=e[t].rightNull=void 0);var m=e[t].isNull,v=u(e[t].rectPlotX,e[t].plotX),y=r?u(e[t].yBottom,p):p;m&&!i||(i||f(t,t-1,"left"),m&&!r&&i||(l.push(e[t]),s.push({x:t,plotX:v,plotY:y})),i||f(t,t+1,"right"))}return t=n.call(this,l,!0,!0),s.reversed=!0,(y=(m=n.call(this,s,!0,!0))[0])&&"M"===y[0]&&(m[0]=["L",y[1],y[2]]),(m=t.concat(m)).length&&m.push(["Z"]),n=n.call(this,l,!1,i),m.xMap=t.xMap,this.areaPath=m,n},t.prototype.getStackPoints=function(e){var t=this,n=[],i=[],r=this.xAxis,a=this.yAxis,o=a.stacking.stacks[this.stackKey],s={},c=a.series,h=c.length,d=a.options.reversedStacks?1:-1,p=c.indexOf(t);if(e=e||this.points,this.options.stacking){for(var f=0;f<e.length;f++)e[f].leftNull=e[f].rightNull=void 0,s[e[f].x]=e[f];l(o,(function(e,t){null!==e.total&&i.push(t)})),i.sort((function(e,t){return e-t}));var m=c.map((function(e){return e.visible}));i.forEach((function(e,l){var f,v,y=0;if(s[e]&&!s[e].isNull)n.push(s[e]),[-1,1].forEach((function(n){var r=1===n?"rightNull":"leftNull",a=0,u=o[i[l+n]];if(u)for(var y=p;0<=y&&y<h;){var g=c[y].index;(f=u.points[g])||(g===t.index?s[e][r]=!0:m[y]&&(v=o[e].points[g])&&(a-=v[1]-v[0])),y+=d}s[e][1===n?"rightCliff":"leftCliff"]=a}));else{for(var g=p;0<=g&&g<h;){if(f=o[e].points[c[g].index]){y=f[1];break}g+=d}y=u(y,0),y=a.translate(y,0,1,0,1),n.push({isNull:!0,plotX:r.translate(e,0,0,0,1),x:e,plotY:y,yBottom:y})}}))}return n},t.defaultOptions=s(o.defaultOptions,{threshold:0}),t}(o),e(i.prototype,{singleStacks:!1,drawLegendSymbol:t.drawRectangle}),n.registerSeriesType("area",i),i})),t(n,"Series/Spline/SplineSeries.js",[n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),i=e.seriesTypes.line,r=t.merge,a=t.pick;return t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return n(t,e),t.prototype.getPointSpline=function(e,t,n){var i=t.plotX||0,r=t.plotY||0,o=e[n-1];if(n=e[n+1],o&&!o.isNull&&!1!==o.doCurve&&!t.isCliff&&n&&!n.isNull&&!1!==n.doCurve&&!t.isCliff){e=o.plotY||0;var s=n.plotX||0;n=n.plotY||0;var l=0,u=(1.5*i+(o.plotX||0))/2.5,c=(1.5*r+e)/2.5,h=(1.5*r+n)/2.5;(s=(1.5*i+s)/2.5)!==u&&(l=(h-c)*(s-i)/(s-u)+r-h),h+=l,(c+=l)>e&&c>r?h=2*r-(c=Math.max(e,r)):c<e&&c<r&&(h=2*r-(c=Math.min(e,r))),h>n&&h>r?c=2*r-(h=Math.max(n,r)):h<n&&h<r&&(c=2*r-(h=Math.min(n,r))),t.rightContX=s,t.rightContY=h}return t=["C",a(o.rightContX,o.plotX,0),a(o.rightContY,o.plotY,0),a(u,i,0),a(c,r,0),i,r],o.rightContX=o.rightContY=void 0,t},t.defaultOptions=r(i.defaultOptions),t}(i),e.registerSeriesType("spline",t),t})),t(n,"Series/AreaSpline/AreaSplineSeries.js",[n["Series/Area/AreaSeries.js"],n["Series/Spline/SplineSeries.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r){var a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=e.prototype,s=r.extend,l=r.merge;return r=function(n){function i(){var e=null!==n&&n.apply(this,arguments)||this;return e.data=void 0,e.points=void 0,e.options=void 0,e}return a(i,n),i.defaultOptions=l(t.defaultOptions,e.defaultOptions),i}(t),s(r.prototype,{getGraphPath:o.getGraphPath,getStackPoints:o.getStackPoints,drawGraph:o.drawGraph,drawLegendSymbol:n.drawRectangle}),i.registerSeriesType("areaspline",r),r})),t(n,"Series/Column/ColumnSeries.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a,o){var s=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=e.animObject,u=t.parse,c=n.hasTouch;e=n.noop;var h=o.clamp,d=o.css,p=o.defined,f=o.extend,m=o.fireEvent,v=o.isArray,y=o.isNumber,g=o.merge,_=o.pick,x=o.objectEach;return o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.borderWidth=void 0,t.data=void 0,t.group=void 0,t.options=void 0,t.points=void 0,t}return s(t,e),t.prototype.animate=function(e){var t=this,n=this.yAxis,i=t.options,r=this.chart.inverted,a={},o=r?"translateX":"translateY";if(e)a.scaleY=.001,e=h(n.toPixels(i.threshold),n.pos,n.pos+n.len),r?a.translateX=e-n.len:a.translateY=e,t.clipBox&&t.setClip(),t.group.attr(a);else{var s=Number(t.group.attr(o));t.group.animate({scaleY:1},f(l(t.options.animation),{step:function(e,i){t.group&&(a[o]=s+i.pos*(n.pos-s),t.group.attr(a))}}))}},t.prototype.init=function(t,n){e.prototype.init.apply(this,arguments);var i=this;(t=i.chart).hasRendered&&t.series.forEach((function(e){e.type===i.type&&(e.isDirty=!0)}))},t.prototype.getColumnMetrics=function(){var e=this,t=e.options,n=e.xAxis,i=e.yAxis,r=n.options.reversedStacks;r=n.reversed&&!r||!n.reversed&&r;var a,o={},s=0;!1===t.grouping?s=1:e.chart.series.forEach((function(t){var n=t.yAxis,r=t.options;if(t.type===e.type&&(t.visible||!e.chart.options.chart.ignoreHiddenSeries)&&i.len===n.len&&i.pos===n.pos){if(r.stacking&&"group"!==r.stacking){a=t.stackKey,"undefined"===typeof o[a]&&(o[a]=s++);var l=o[a]}else!1!==r.grouping&&(l=s++);t.columnIndex=l}}));var l=Math.min(Math.abs(n.transA)*(n.ordinal&&n.ordinal.slope||t.pointRange||n.closestPointRange||n.tickInterval||1),n.len),u=l*t.groupPadding,c=(l-2*u)/(s||1);return t=Math.min(t.maxPointWidth||n.len,_(t.pointWidth,c*(1-2*t.pointPadding))),e.columnMetrics={width:t,offset:(c-t)/2+(u+((e.columnIndex||0)+(r?1:0))*c-l/2)*(r?-1:1),paddedWidth:c,columnCount:s},e.columnMetrics},t.prototype.crispCol=function(e,t,n,i){var r=this.chart,a=this.borderWidth,o=-(a%2?.5:0);return a=a%2?.5:1,r.inverted&&r.renderer.isVML&&(a+=1),this.options.crisp&&(n=Math.round(e+n)+o,n-=e=Math.round(e)+o),i=Math.round(t+i)+a,o=.5>=Math.abs(t)&&.5<i,i-=t=Math.round(t)+a,o&&i&&(--t,i+=1),{x:e,y:t,width:n,height:i}},t.prototype.adjustForMissingColumns=function(e,t,n,i){var r=this,a=this.options.stacking;if(!n.isNull&&1<i.columnCount){var o=this.yAxis.options.reversedStacks,s=0,l=o?0:-i.columnCount;x(this.yAxis.stacking&&this.yAxis.stacking.stacks,(function(e){if("number"===typeof n.x&&(e=e[n.x.toString()])){var t=e.points[r.index],i=e.total;a?(t&&(s=l),e.hasValidPoints&&(o?l++:l--)):v(t)&&(s=t[1],l=i||0)}})),e=(n.plotX||0)+((l-1)*i.paddedWidth+t)/2-t-s*i.paddedWidth}return e},t.prototype.translate=function(){var e=this,t=e.chart,n=e.options,i=e.dense=2>e.closestPointRange*e.xAxis.transA;i=e.borderWidth=_(n.borderWidth,i?0:1);var a=e.xAxis,o=e.yAxis,s=n.threshold,l=e.translatedThreshold=o.getThreshold(s),u=_(n.minPointLength,5),c=e.getColumnMetrics(),d=c.width,f=e.pointXOffset=c.offset,m=e.dataMin,v=e.dataMax,g=e.barW=Math.max(d,1+2*i);t.inverted&&(l-=.5),n.pointPadding&&(g=Math.ceil(g)),r.prototype.translate.apply(e),e.points.forEach((function(i){var r=_(i.yBottom,l),x=999+Math.abs(r),b=i.plotX||0;x=h(i.plotY,-x,o.len+x);var w=Math.min(x,r),k=Math.max(x,r)-w,S=d,T=b+f,C=g;u&&Math.abs(k)<u&&(k=u,b=!o.reversed&&!i.negative||o.reversed&&i.negative,y(s)&&y(v)&&i.y===s&&v<=s&&(o.min||0)<s&&(m!==v||(o.max||0)<=s)&&(b=!b),w=Math.abs(w-l)>u?r-u:l-(b?u:0)),p(i.options.pointWidth)&&(S=C=Math.ceil(i.options.pointWidth),T-=Math.round((S-d)/2)),n.centerInCategory&&(T=e.adjustForMissingColumns(T,S,i,c)),i.barX=T,i.pointWidth=S,i.tooltipPos=t.inverted?[h(o.len+o.pos-t.plotLeft-x,o.pos-t.plotLeft,o.len+o.pos-t.plotLeft),a.len+a.pos-t.plotTop-T-C/2,k]:[a.left-t.plotLeft+T+C/2,h(x+o.pos-t.plotTop,o.pos-t.plotTop,o.len+o.pos-t.plotTop),k],i.shapeType=e.pointClass.prototype.shapeType||"rect",i.shapeArgs=e.crispCol.apply(e,i.isNull?[T,l,C,0]:[T,w,C,k])}))},t.prototype.drawGraph=function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},t.prototype.pointAttribs=function(e,t){var n=this.options,i=this.pointAttrToOptions||{},r=i.stroke||"borderColor",a=i["stroke-width"]||"borderWidth",o=e&&e.color||this.color,s=e&&e[r]||n[r]||o;i=e&&e.options.dashStyle||n.dashStyle;var l=e&&e[a]||n[a]||this[a]||0,c=_(e&&e.opacity,n.opacity,1);if(e&&this.zones.length){var h=e.getZone();o=e.options.color||h&&(h.color||e.nonZonedColor)||this.color,h&&(s=h.borderColor||s,i=h.dashStyle||i,l=h.borderWidth||l)}return t&&e&&(t=(e=g(n.states[t],e.options.states&&e.options.states[t]||{})).brightness,o=e.color||"undefined"!==typeof t&&u(o).brighten(e.brightness).get()||o,s=e[r]||s,l=e[a]||l,i=e.dashStyle||i,c=_(e.opacity,c)),r={fill:o,stroke:s,"stroke-width":l,opacity:c},i&&(r.dashstyle=i),r},t.prototype.drawPoints=function(){var e,t=this,n=this.chart,i=t.options,r=n.renderer,a=i.animationLimit||250;t.points.forEach((function(o){var s=o.graphic,l=!!s,u=s&&n.pointCount<a?"animate":"attr";y(o.plotY)&&null!==o.y?(e=o.shapeArgs,s&&o.hasNewShapeType()&&(s=s.destroy()),t.enabledDataSorting&&(o.startXPos=t.xAxis.reversed?-(e&&e.width||0):t.xAxis.width),s||(o.graphic=s=r[o.shapeType](e).add(o.group||t.group))&&t.enabledDataSorting&&n.hasRendered&&n.pointCount<a&&(s.attr({x:o.startXPos}),l=!0,u="animate"),s&&l&&s[u](g(e)),i.borderRadius&&s[u]({r:i.borderRadius}),n.styledMode||s[u](t.pointAttribs(o,o.selected&&"select")).shadow(!1!==o.allowShadow&&i.shadow,null,i.stacking&&!i.borderRadius),s&&(s.addClass(o.getClassName(),!0),s.attr({visibility:o.visible?"inherit":"hidden"}))):s&&(o.graphic=s.destroy())}))},t.prototype.drawTracker=function(){var e,t=this,n=t.chart,i=n.pointer,r=function(e){var t=i.getPointFromEvent(e);"undefined"!==typeof t&&(i.isDirectTouch=!0,t.onMouseOver(e))};t.points.forEach((function(t){e=v(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[],t.graphic&&(t.graphic.element.point=t),e.forEach((function(e){e.div?e.div.point=t:e.element.point=t}))})),t._hasTracking||(t.trackerGroups.forEach((function(e){t[e]&&(t[e].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",(function(e){i.onTrackerMouseOut(e)})),c&&t[e].on("touchstart",r),!n.styledMode&&t.options.cursor&&t[e].css(d).css({cursor:t.options.cursor}))})),t._hasTracking=!0),m(this,"afterDrawTracker")},t.prototype.remove=function(){var e=this,t=e.chart;t.hasRendered&&t.series.forEach((function(t){t.type===e.type&&(t.isDirty=!0)})),r.prototype.remove.apply(e,arguments)},t.defaultOptions=g(r.defaultOptions,{borderRadius:0,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),t}(r),f(o.prototype,{cropShoulder:0,directTouch:!0,drawLegendSymbol:i.drawRectangle,getSymbol:e,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),a.registerSeriesType("column",o),o})),t(n,"Core/Series/DataLabel.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/FormatUtilities.js"],n["Core/Utilities.js"]],(function(e,t,n){var i,r=e.getDeferredAnimation,a=t.format,o=n.defined,s=n.extend,l=n.fireEvent,u=n.isArray,c=n.merge,h=n.objectEach,d=n.pick,p=n.splat;return function(e){function t(e,t,n,i,r){var a=this,l=this.chart,u=this.isCartesian&&l.inverted,c=this.enabledDataSorting,h=d(e.dlBox&&e.dlBox.centerX,e.plotX),p=e.plotY,f=n.rotation,m=n.align,v=o(h)&&o(p)&&l.isInsidePlot(h,Math.round(p),{inverted:u,paneCoordinates:!0,series:a}),y=function(n){c&&a.xAxis&&!g&&a.setDataLabelStartPos(e,t,r,v,n)},g="justify"===d(n.overflow,c?"none":"justify"),_=this.visible&&!1!==e.visible&&(e.series.forceDL||c&&!g||v||d(n.inside,!!this.options.stacking)&&i&&l.isInsidePlot(h,u?i.x+1:i.y+i.height-1,{inverted:u,paneCoordinates:!0,series:a}));if(_&&o(h)&&o(p)){f&&t.attr({align:m}),m=t.getBBox(!0);var x=[0,0],b=l.renderer.fontMetrics(l.styledMode?void 0:n.style.fontSize,t).b;i=s({x:u?this.yAxis.len-p:h,y:Math.round(u?this.xAxis.len-h:p),width:0,height:0},i),s(n,{width:m.width,height:m.height}),f?(g=!1,x=l.renderer.rotCorr(b,f),h={x:i.x+(n.x||0)+i.width/2+x.x,y:i.y+(n.y||0)+{top:0,middle:.5,bottom:1}[n.verticalAlign]*i.height},x=[m.x-Number(t.attr("x")),m.y-Number(t.attr("y"))],y(h),t[r?"attr":"animate"](h)):(y(i),t.align(n,void 0,i),h=t.alignAttr),g&&0<=i.height?this.justifyDataLabel(t,n,h,m,i,r):d(n.crop,!0)&&(i=h.x,y=h.y,i+=x[0],y+=x[1],_=l.isInsidePlot(i,y,{paneCoordinates:!0,series:a})&&l.isInsidePlot(i+m.width,y+m.height,{paneCoordinates:!0,series:a})),n.shape&&!f&&t[r?"attr":"animate"]({anchorX:u?l.plotWidth-e.plotY:e.plotX,anchorY:u?l.plotHeight-e.plotX:e.plotY})}r&&c&&(t.placed=!1),_||c&&!g?t.show():(t.hide(),t.placed=!1)}function n(){var e=this,t=e.chart,n=e.options,i=e.points,s=e.hasRendered||0,c=t.renderer,m=n.dataLabels,v=m.animation;if(v=m.defer?r(t,v,e):{defer:0,duration:0},m=f(f(t.options.plotOptions&&t.options.plotOptions.series&&t.options.plotOptions.series.dataLabels,t.options.plotOptions&&t.options.plotOptions[e.type]&&t.options.plotOptions[e.type].dataLabels),m),l(this,"drawDataLabels"),u(m)||m.enabled||e._hasPointLabels){var y=e.plotGroup("dataLabelsGroup","data-labels",s?"inherit":"hidden",m.zIndex||6);y.attr({opacity:+s}),!s&&(s=e.dataLabelsGroup)&&(e.visible&&y.show(),s[n.animation?"animate":"attr"]({opacity:1},v)),i.forEach((function(i){p(f(m,i.dlOptions||i.options&&i.options.dataLabels)).forEach((function(r,s){var l=r.enabled&&(!i.isNull||i.dataLabelOnNull)&&function(e,t){var n=t.filter;return!n||(t=n.operator,e=e[n.property],n=n.value,">"===t&&e>n||"<"===t&&e<n||">="===t&&e>=n||"<="===t&&e<=n||"=="===t&&e==n||"==="===t&&e===n)}(i,r),u=i.connectors?i.connectors[s]:i.connector,p=i.dataLabels?i.dataLabels[s]:i.dataLabel,f=!p,m=d(r.distance,i.labelDistance);if(l){var v=i.getLabelConfig(),g=d(r[i.formatPrefix+"Format"],r.format);v=o(g)?a(g,v,t):(r[i.formatPrefix+"Formatter"]||r.formatter).call(v,r),g=r.style;var _=r.rotation;t.styledMode||(g.color=d(r.color,g.color,e.color,"#000000"),"contrast"===g.color?(i.contrastColor=c.getContrast(i.color||e.color),g.color=!o(m)&&r.inside||0>m||n.stacking?i.contrastColor:"#000000"):delete i.contrastColor,n.cursor&&(g.cursor=n.cursor));var x={r:r.borderRadius||0,rotation:_,padding:r.padding,zIndex:1};t.styledMode||(x.fill=r.backgroundColor,x.stroke=r.borderColor,x["stroke-width"]=r.borderWidth),h(x,(function(e,t){"undefined"===typeof e&&delete x[t]}))}!p||l&&o(v)&&!!p.div===!!r.useHTML&&(p.rotation&&r.rotation||p.rotation===r.rotation)||(f=!0,i.dataLabel=p=i.dataLabel&&i.dataLabel.destroy(),i.dataLabels&&(1===i.dataLabels.length?delete i.dataLabels:delete i.dataLabels[s]),s||delete i.dataLabel,u&&(i.connector=i.connector.destroy(),i.connectors&&(1===i.connectors.length?delete i.connectors:delete i.connectors[s]))),l&&o(v)?(p?x.text=v:(i.dataLabels=i.dataLabels||[],p=i.dataLabels[s]=_?c.text(v,0,0,r.useHTML).addClass("highcharts-data-label"):c.label(v,0,0,r.shape,null,null,r.useHTML,null,"data-label"),s||(i.dataLabel=p),p.addClass(" highcharts-data-label-color-"+i.colorIndex+" "+(r.className||"")+(r.useHTML?" highcharts-tracker":""))),p.options=r,p.attr(x),t.styledMode||p.css(g).shadow(r.shadow),p.added||p.add(y),r.textPath&&!r.useHTML&&(p.setTextPath(i.getDataLabelPath&&i.getDataLabelPath(p)||i.graphic,r.textPath),i.dataLabelPath&&!r.textPath.enabled&&(i.dataLabelPath=i.dataLabelPath.destroy())),e.alignDataLabel(i,p,r,null,f)):p&&p.hide()}))}))}l(this,"afterDrawDataLabels")}function i(e,t,n,i,r,a){var o=this.chart,s=t.align,l=t.verticalAlign,u=e.box?0:e.padding||0,c=t.x;c=void 0===c?0:c;var h=t.y;h=void 0===h?0:h;var d=(n.x||0)+u;if(0>d){"right"===s&&0<=c?(t.align="left",t.inside=!0):c-=d;var p=!0}return(d=(n.x||0)+i.width-u)>o.plotWidth&&("left"===s&&0>=c?(t.align="right",t.inside=!0):c+=o.plotWidth-d,p=!0),0>(d=n.y+u)&&("bottom"===l&&0<=h?(t.verticalAlign="top",t.inside=!0):h-=d,p=!0),(d=(n.y||0)+i.height-u)>o.plotHeight&&("top"===l&&0>=h?(t.verticalAlign="bottom",t.inside=!0):h+=o.plotHeight-d,p=!0),p&&(t.x=c,t.y=h,e.placed=!a,e.align(t,void 0,r)),p}function f(e,t){var n,i=[];if(u(e)&&!u(t))i=e.map((function(e){return c(e,t)}));else if(u(t)&&!u(e))i=t.map((function(t){return c(e,t)}));else if(u(e)||u(t))for(n=Math.max(e.length,t.length);n--;)i[n]=c(e[n],t[n]);else i=c(e,t);return i}function m(e,t,n,i,r){var a=this.chart,o=a.inverted,s=this.xAxis,l=s.reversed,u=o?t.height/2:t.width/2;e=(e=e.pointWidth)?e/2:0,t.startXPos=o?r.x:l?-u-e:s.width-u+e,t.startYPos=o?l?this.yAxis.height-u+e:-u-e:r.y,i?"hidden"===t.visibility&&(t.show(),t.attr({opacity:0}).animate({opacity:1})):t.attr({opacity:1}).animate({opacity:0},void 0,t.hide),a.hasRendered&&(n&&t.attr({x:t.startXPos,y:t.startYPos}),t.placed=!0)}var v=[];e.compose=function(e){if(-1===v.indexOf(e)){var r=e.prototype;v.push(e),r.alignDataLabel=t,r.drawDataLabels=n,r.justifyDataLabel=i,r.setDataLabelStartPos=m}}}(i||(i={})),i})),t(n,"Series/Column/ColumnDataLabel.js",[n["Core/Series/DataLabel.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n){var i,r=t.series,a=n.merge,o=n.pick;return function(t){function n(e,t,n,i,s){var l=this.chart.inverted,u=e.series,c=(u.xAxis?u.xAxis.len:this.chart.plotSizeX)||0;u=(u.yAxis?u.yAxis.len:this.chart.plotSizeY)||0;var h=e.dlBox||e.shapeArgs,d=o(e.below,e.plotY>o(this.translatedThreshold,u)),p=o(n.inside,!!this.options.stacking);h&&(0>(i=a(h)).y&&(i.height+=i.y,i.y=0),0<(h=i.y+i.height-u)&&h<i.height&&(i.height-=h),l&&(i={x:u-i.y-i.height,y:c-i.x-i.width,width:i.height,height:i.width}),p||(l?(i.x+=d?0:i.width,i.width=0):(i.y+=d?i.height:0,i.height=0))),n.align=o(n.align,!l||p?"center":d?"right":"left"),n.verticalAlign=o(n.verticalAlign,l||p?"middle":d?"top":"bottom"),r.prototype.alignDataLabel.call(this,e,t,n,i,s),n.inside&&e.contrastColor&&t.css({color:e.contrastColor})}var i=[];t.compose=function(t){e.compose(r),-1===i.indexOf(t)&&(i.push(t),t.prototype.alignDataLabel=n)}}(i||(i={})),i})),t(n,"Series/Bar/BarSeries.js",[n["Series/Column/ColumnSeries.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=n.extend,a=n.merge;return n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=void 0,e.options=void 0,e.points=void 0,e}return i(n,t),n.defaultOptions=a(e.defaultOptions,{}),n}(e),r(n.prototype,{inverted:!0}),t.registerSeriesType("bar",n),n})),t(n,"Series/Scatter/ScatterSeries.js",[n["Series/Column/ColumnSeries.js"],n["Series/Line/LineSeries.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n,i){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=i.addEvent,o=i.extend,s=i.merge;return i=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return r(n,e),n.prototype.applyJitter=function(){var e=this,t=this.options.jitter,n=this.points.length;t&&this.points.forEach((function(i,r){["x","y"].forEach((function(a,o){var s="plot"+a.toUpperCase();if(t[a]&&!i.isNull){var l=e[a+"Axis"],u=t[a]*l.transA;if(l&&!l.isLog){var c=Math.max(0,i[s]-u);l=Math.min(l.len,i[s]+u),o=1e4*Math.sin(r+o*n),i[s]=c+(l-c)*(o-Math.floor(o)),"x"===a&&(i.clientX=i.plotX)}}}))}))},n.prototype.drawGraph=function(){this.options.lineWidth?e.prototype.drawGraph.call(this):this.graph&&(this.graph=this.graph.destroy())},n.defaultOptions=s(t.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 10px"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),n}(t),o(i.prototype,{drawTracker:e.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1}),a(i,"afterTranslate",(function(){this.applyJitter()})),n.registerSeriesType("scatter",i),i})),t(n,"Series/CenteredUtilities.js",[n["Core/Globals.js"],n["Core/Series/Series.js"],n["Core/Utilities.js"]],(function(e,t,n){var i,r=e.deg2rad,a=n.isNumber,o=n.pick,s=n.relativeLength;return function(e){e.getCenter=function(){var e=this.options,n=this.chart,i=2*(e.slicedOffset||0),r=n.plotWidth-2*i,l=n.plotHeight-2*i,u=e.center,c=Math.min(r,l),h=e.thickness,d=e.size,p=e.innerSize||0;for("string"===typeof d&&(d=parseFloat(d)),"string"===typeof p&&(p=parseFloat(p)),e=[o(u[0],"50%"),o(u[1],"50%"),o(d&&0>d?void 0:e.size,"100%"),o(p&&0>p?void 0:e.innerSize||0,"0%")],!n.angular||this instanceof t||(e[3]=0),u=0;4>u;++u)d=e[u],n=2>u||2===u&&/%$/.test(d),e[u]=s(d,[r,l,c,e[2]][u])+(n?i:0);return e[3]>e[2]&&(e[3]=e[2]),a(h)&&2*h<e[2]&&0<h&&(e[3]=e[2]-2*h),e},e.getStartAndEndRadians=function(e,t){return e=a(e)?e:0,t=a(t)&&t>e&&360>t-e?t:e+360,{start:r*(e+-90),end:r*(t+-90)}}}(i||(i={})),i})),t(n,"Series/Pie/PiePoint.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Series/Point.js"],n["Core/Utilities.js"]],(function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=e.setAnimation,a=n.addEvent,o=n.defined;e=n.extend;var s=n.isNumber,l=n.pick,u=n.relativeLength;return t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelDistance=void 0,t.options=void 0,t.series=void 0,t}return i(t,e),t.prototype.getConnectorPath=function(){var e=this.labelPosition,t=this.series.options.dataLabels,n=this.connectorShapes,i=t.connectorShape;return n[i]&&(i=n[i]),i.call(this,{x:e.final.x,y:e.final.y,alignment:e.alignment},e.connectorPosition,t)},t.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},t.prototype.haloPath=function(e){var t=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(t.x,t.y,t.r+e,t.r+e,{innerR:t.r-1,start:t.start,end:t.end})},t.prototype.init=function(){var t=this;e.prototype.init.apply(this,arguments),this.name=l(this.name,"Slice");var n=function(e){t.slice("select"===e.type)};return a(this,"select",n),a(this,"unselect",n),this},t.prototype.isValid=function(){return s(this.y)&&0<=this.y},t.prototype.setVisible=function(e,t){var n=this,i=this.series,r=i.chart,a=i.options.ignoreHiddenPoint;t=l(t,a),e!==this.visible&&(this.visible=this.options.visible=e="undefined"===typeof e?!this.visible:e,i.options.data[i.data.indexOf(this)]=this.options,["graphic","dataLabel","connector","shadowGroup"].forEach((function(t){n[t]&&n[t][e?"show":"hide"](e)})),this.legendItem&&r.legend.colorizeItem(this,e),e||"hover"!==this.state||this.setState(""),a&&(i.isDirty=!0),t&&r.redraw())},t.prototype.slice=function(e,t,n){var i=this.series;r(n,i.chart),l(t,!0),this.sliced=this.options.sliced=o(e)?e:!this.sliced,i.options.data[i.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},t}(t),e(t.prototype,{connectorShapes:{fixedOffset:function(e,t,n){var i=t.breakAt;return t=t.touchingSliceAt,[["M",e.x,e.y],n.softConnector?["C",e.x+("left"===e.alignment?-5:5),e.y,2*i.x-t.x,2*i.y-t.y,i.x,i.y]:["L",i.x,i.y],["L",t.x,t.y]]},straight:function(e,t){return t=t.touchingSliceAt,[["M",e.x,e.y],["L",t.x,t.y]]},crookedLine:function(e,t,n){t=t.touchingSliceAt;var i=this.series,r=i.center[0],a=i.chart.plotWidth,o=i.chart.plotLeft;i=e.alignment;var s=this.shapeArgs.r;return n=u(n.crookDistance,1),n=["L",a="left"===i?r+s+(a+o-r-s)*(1-n):o+(r-s)*n,e.y],r=!0,("left"===i?a>e.x||a<t.x:a<e.x||a>t.x)&&(r=!1),e=[["M",e.x,e.y]],r&&e.push(n),e.push(["L",t.x,t.y]),e}}}),t})),t(n,"Series/Pie/PieSeries.js",[n["Series/CenteredUtilities.js"],n["Series/Column/ColumnSeries.js"],n["Core/Globals.js"],n["Core/Legend/LegendSymbol.js"],n["Series/Pie/PiePoint.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/Symbols.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r,a,o,s,l){var u=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=e.getStartAndEndRadians;n=n.noop;var h=l.clamp,d=l.extend,p=l.fireEvent,f=l.merge,m=l.pick,v=l.relativeLength;return l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.center=void 0,t.data=void 0,t.maxLabelDistance=void 0,t.options=void 0,t.points=void 0,t}return u(t,e),t.prototype.animate=function(e){var t=this,n=t.points,i=t.startAngleRad;e||n.forEach((function(e){var n=e.graphic,r=e.shapeArgs;n&&r&&(n.attr({r:m(e.startR,t.center&&t.center[3]/2),start:i,end:i}),n.animate({r:r.r,start:r.start,end:r.end},t.options.animation))}))},t.prototype.drawEmpty=function(){var e=this.startAngleRad,t=this.endAngleRad,n=this.options;if(0===this.total&&this.center){var i=this.center[0],r=this.center[1];this.graph||(this.graph=this.chart.renderer.arc(i,r,this.center[1]/2,0,e,t).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:s.arc(i,r,this.center[2]/2,0,{start:e,end:t,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":n.borderWidth,fill:n.fillColor||"none",stroke:n.color||"#cccccc"})}else this.graph&&(this.graph=this.graph.destroy())},t.prototype.drawPoints=function(){var e=this.chart.renderer;this.points.forEach((function(t){t.graphic&&t.hasNewShapeType()&&(t.graphic=t.graphic.destroy()),t.graphic||(t.graphic=e[t.shapeType](t.shapeArgs).add(t.series.group),t.delayedRendering=!0)}))},t.prototype.generatePoints=function(){e.prototype.generatePoints.call(this),this.updateTotals()},t.prototype.getX=function(e,t,n){var i=this.center,r=this.radii?this.radii[n.index]||0:i[2]/2;return e=Math.asin(h((e-i[1])/(r+n.labelDistance),-1,1)),i[0]+(t?-1:1)*Math.cos(e)*(r+n.labelDistance)+(0<n.labelDistance?(t?-1:1)*this.options.dataLabels.padding:0)},t.prototype.hasData=function(){return!!this.processedXData.length},t.prototype.redrawPoints=function(){var e,t,n,i,r=this,a=r.chart,o=a.renderer,s=r.options.shadow;this.drawEmpty(),!s||r.shadowGroup||a.styledMode||(r.shadowGroup=o.g("shadow").attr({zIndex:-1}).add(r.group)),r.points.forEach((function(l){var u={};if(t=l.graphic,!l.isNull&&t){var c=void 0;i=l.shapeArgs,e=l.getTranslate(),a.styledMode||(c=l.shadowGroup,s&&!c&&(c=l.shadowGroup=o.g("shadow").add(r.shadowGroup)),c&&c.attr(e),n=r.pointAttribs(l,l.selected&&"select")),l.delayedRendering?(t.setRadialReference(r.center).attr(i).attr(e),a.styledMode||t.attr(n).attr({"stroke-linejoin":"round"}).shadow(s,c),l.delayedRendering=!1):(t.setRadialReference(r.center),a.styledMode||f(!0,u,n),f(!0,u,i,e),t.animate(u)),t.attr({visibility:l.visible?"inherit":"hidden"}),t.addClass(l.getClassName(),!0)}else t&&(l.graphic=t.destroy())}))},t.prototype.sortByAngle=function(e,t){e.sort((function(e,n){return"undefined"!==typeof e.angle&&(n.angle-e.angle)*t}))},t.prototype.translate=function(e){this.generatePoints();var t=this.options,n=t.slicedOffset,i=n+(t.borderWidth||0),r=c(t.startAngle,t.endAngle),a=this.startAngleRad=r.start;r=(this.endAngleRad=r.end)-a;var o=this.points,s=t.dataLabels.distance;t=t.ignoreHiddenPoint;var l,u=o.length,h=0;for(e||(this.center=e=this.getCenter()),l=0;l<u;l++){var d=o[l],f=a+h*r;!d.isValid()||t&&!d.visible||(h+=d.percentage/100);var y=a+h*r,g={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:Math.round(1e3*f)/1e3,end:Math.round(1e3*y)/1e3};d.shapeType="arc",d.shapeArgs=g,d.labelDistance=m(d.options.dataLabels&&d.options.dataLabels.distance,s),d.labelDistance=v(d.labelDistance,g.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,d.labelDistance),(y=(y+f)/2)>1.5*Math.PI?y-=2*Math.PI:y<-Math.PI/2&&(y+=2*Math.PI),d.slicedTranslation={translateX:Math.round(Math.cos(y)*n),translateY:Math.round(Math.sin(y)*n)},g=Math.cos(y)*e[2]/2;var _=Math.sin(y)*e[2]/2;d.tooltipPos=[e[0]+.7*g,e[1]+.7*_],d.half=y<-Math.PI/2||y>Math.PI/2?1:0,d.angle=y,f=Math.min(i,d.labelDistance/5),d.labelPosition={natural:{x:e[0]+g+Math.cos(y)*d.labelDistance,y:e[1]+_+Math.sin(y)*d.labelDistance},final:{},alignment:0>d.labelDistance?"center":d.half?"right":"left",connectorPosition:{breakAt:{x:e[0]+g+Math.cos(y)*f,y:e[1]+_+Math.sin(y)*f},touchingSliceAt:{x:e[0]+g,y:e[1]+_}}}}p(this,"afterTranslate")},t.prototype.updateTotals=function(){var e,t=this.points,n=t.length,i=this.options.ignoreHiddenPoint,r=0;for(e=0;e<n;e++){var a=t[e];!a.isValid()||i&&!a.visible||(r+=a.y)}for(this.total=r,e=0;e<n;e++)(a=t[e]).percentage=0<r&&(a.visible||!i)?a.y/r*100:0,a.total=r},t.defaultOptions=f(a.defaultOptions,{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:"fixedOffset",crookDistance:"70%",distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),t}(a),d(l.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawLegendSymbol:i.drawRectangle,drawTracker:t.prototype.drawTracker,getCenter:e.getCenter,getSymbol:n,isCartesian:!1,noSharedTooltip:!0,pointAttribs:t.prototype.pointAttribs,pointClass:r,requireSorting:!1,searchPoint:n,trackerGroups:["group","dataLabelsGroup"]}),o.registerSeriesType("pie",l),l})),t(n,"Series/Pie/PieDataLabel.js",[n["Core/Series/DataLabel.js"],n["Core/Globals.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(e,t,n,i,r){var a,o=t.noop,s=n.distribute,l=i.series,u=r.arrayMax,c=r.clamp,h=r.defined,d=r.merge,p=r.pick,f=r.relativeLength;return function(t){function n(){var e,t,n,i,r,a,o,c,f,m,v,y,g=this,_=g.data,x=g.chart,b=g.options.dataLabels||{},w=b.connectorPadding,k=x.plotWidth,S=x.plotHeight,T=x.plotLeft,C=Math.round(x.chartWidth/3),E=g.center,M=E[2]/2,P=E[1],A=[[],[]],D=[0,0,0,0],I=g.dataLabelPositioners;g.visible&&(b.enabled||g._hasPointLabels)&&(_.forEach((function(e){e.dataLabel&&e.visible&&e.dataLabel.shortened&&(e.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),e.dataLabel.shortened=!1)})),l.prototype.drawDataLabels.apply(g),_.forEach((function(e){e.dataLabel&&(e.visible?(A[e.half].push(e),e.dataLabel._pos=null,!h(b.style.width)&&!h(e.options.dataLabels&&e.options.dataLabels.style&&e.options.dataLabels.style.width)&&e.dataLabel.getBBox().width>C&&(e.dataLabel.css({width:Math.round(.7*C)+"px"}),e.dataLabel.shortened=!0)):(e.dataLabel=e.dataLabel.destroy(),e.dataLabels&&1===e.dataLabels.length&&delete e.dataLabels))})),A.forEach((function(t,n){var l,u=t.length,d=[];if(u){if(g.sortByAngle(t,n-.5),0<g.maxLabelDistance){var _=Math.max(0,P-M-g.maxLabelDistance),C=Math.min(P+M+g.maxLabelDistance,x.plotHeight);t.forEach((function(e){0<e.labelDistance&&e.dataLabel&&(e.top=Math.max(0,P-M-e.labelDistance),e.bottom=Math.min(P+M+e.labelDistance,x.plotHeight),l=e.dataLabel.getBBox().height||21,e.distributeBox={target:e.labelPosition.natural.y-e.top+l/2,size:l,rank:e.y},d.push(e.distributeBox))})),s(d,_=C+l-_,_/5)}for(v=0;v<u;v++){if(e=t[v],a=e.labelPosition,i=e.dataLabel,m=!1===e.visible?"hidden":"inherit",f=_=a.natural.y,d&&h(e.distributeBox)&&("undefined"===typeof e.distributeBox.pos?m="hidden":(o=e.distributeBox.size,f=I.radialDistributionY(e))),delete e.positionIndex,b.justify)c=I.justify(e,M,E);else switch(b.alignTo){case"connectors":c=I.alignToConnectors(t,n,k,T);break;case"plotEdges":c=I.alignToPlotEdges(i,n,k,T);break;default:c=I.radialDistributionX(g,e,f,_)}i._attr={visibility:m,align:a.alignment},y=e.options.dataLabels||{},i._pos={x:c+p(y.x,b.x)+({left:w,right:-w}[a.alignment]||0),y:f+p(y.y,b.y)-10},a.final.x=c,a.final.y=f,p(b.crop,!0)&&(r=i.getBBox().width,_=null,c-r<w&&1===n?(_=Math.round(r-c+w),D[3]=Math.max(_,D[3])):c+r>k-w&&0===n&&(_=Math.round(c+r-k+w),D[1]=Math.max(_,D[1])),0>f-o/2?D[0]=Math.max(Math.round(o/2-f),D[0]):f+o/2>S&&(D[2]=Math.max(Math.round(f+o/2-S),D[2])),i.sideOverflow=_)}}})),0===u(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),this.points.forEach((function(e){var r;y=d(b,e.options.dataLabels),(t=p(y.connectorWidth,1))&&(n=e.connector,(i=e.dataLabel)&&i._pos&&e.visible&&0<e.labelDistance?(m=i._attr.visibility,(r=!n)&&(e.connector=n=x.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+e.colorIndex+(e.className?" "+e.className:"")).add(g.dataLabelsGroup),x.styledMode||n.attr({"stroke-width":t,stroke:y.connectorColor||e.color||"#666666"})),n[r?"attr":"animate"]({d:e.getConnectorPath()}),n.attr("visibility",m)):n&&(e.connector=n.destroy()))})))}function i(){this.points.forEach((function(e){var t,n=e.dataLabel;n&&e.visible&&((t=n._pos)?(n.sideOverflow&&(n._attr.width=Math.max(n.getBBox().width-n.sideOverflow,0),n.css({width:n._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),n.shortened=!0),n.attr(n._attr),n[n.moved?"animate":"attr"](t),n.moved=!0):n&&n.attr({y:-9999})),delete e.distributeBox}),this)}function r(e){var t=this.center,n=this.options,i=n.center,r=n.minSize||80,a=null!==n.size;if(!a){if(null!==i[0])var o=Math.max(t[2]-Math.max(e[1],e[3]),r);else o=Math.max(t[2]-e[1]-e[3],r),t[0]+=(e[3]-e[1])/2;null!==i[1]?o=c(o,r,t[2]-Math.max(e[0],e[2])):(o=c(o,r,t[2]-e[0]-e[2]),t[1]+=(e[0]-e[2])/2),o<t[2]?(t[2]=o,t[3]=Math.min(n.thickness?Math.max(0,o-2*n.thickness):Math.max(0,f(n.innerSize||0,o)),o),this.translate(t),this.drawDataLabels&&this.drawDataLabels()):a=!0}return a}var a=[],m={radialDistributionY:function(e){return e.top+e.distributeBox.pos},radialDistributionX:function(e,t,n,i){return e.getX(n<t.top+2||n>t.bottom-2?i:n,t.half,t)},justify:function(e,t,n){return n[0]+(e.half?-1:1)*(t+e.labelDistance)},alignToPlotEdges:function(e,t,n,i){return e=e.getBBox().width,t?e+i:n-e-i},alignToConnectors:function(e,t,n,i){var r,a=0;return e.forEach((function(e){(r=e.dataLabel.getBBox().width)>a&&(a=r)})),t?a+i:n-a-i}};t.compose=function(t){e.compose(l),-1===a.indexOf(t)&&(a.push(t),(t=t.prototype).dataLabelPositioners=m,t.alignDataLabel=o,t.drawDataLabels=n,t.placeDataLabels=i,t.verifyDataLabelOverflow=r)}}(a||(a={})),a})),t(n,"Extensions/OverlappingDataLabels.js",[n["Core/Chart/Chart.js"],n["Core/Utilities.js"]],(function(e,t){function n(e,t){var n=!1;if(e){var i=e.newOpacity;e.oldOpacity!==i&&(e.alignAttr&&e.placed?(e[i?"removeClass":"addClass"]("highcharts-data-label-hidden"),n=!0,e.alignAttr.opacity=i,e[e.isOld?"animate":"attr"](e.alignAttr,null,(function(){t.styledMode||e.css({pointerEvents:i?"auto":"none"})})),r(t,"afterHideOverlappingLabel")):e.attr({opacity:i})),e.isOld=!0}return n}var i=t.addEvent,r=t.fireEvent,a=t.isArray,o=t.isNumber,s=t.objectEach,l=t.pick;i(e,"render",(function(){var e=this,t=[];(this.labelCollectors||[]).forEach((function(e){t=t.concat(e())})),(this.yAxis||[]).forEach((function(e){e.stacking&&e.options.stackLabels&&!e.options.stackLabels.allowOverlap&&s(e.stacking.stacks,(function(e){s(e,(function(e){e.label&&t.push(e.label)}))}))})),(this.series||[]).forEach((function(i){var r=i.options.dataLabels;i.visible&&(!1!==r.enabled||i._hasPointLabels)&&(r=function(i){return i.forEach((function(i){i.visible&&(a(i.dataLabels)?i.dataLabels:i.dataLabel?[i.dataLabel]:[]).forEach((function(r){var a=r.options;r.labelrank=l(a.labelrank,i.labelrank,i.shapeArgs&&i.shapeArgs.height),a.allowOverlap?(r.oldOpacity=r.opacity,r.newOpacity=1,n(r,e)):t.push(r)}))}))},r(i.nodes||[]),r(i.points))})),this.hideOverlappingLabels(t)})),e.prototype.hideOverlappingLabels=function(e){var t,i,a,s=this,l=e.length,u=s.renderer,c=!1,h=function(e){var t,n,i=e.box?0:e.padding||0,r=t=0;if(e&&(!e.alignAttr||e.placed)){var a=e.alignAttr||{x:e.attr("x"),y:e.attr("y")},s=e.parentGroup;e.width||(t=e.getBBox(),e.width=t.width,e.height=t.height,t=u.fontMetrics(null,e.element).h);var l=e.width-2*i;return(n={left:"0",center:"0.5",right:"1"}[e.alignValue])?r=+n*l:o(e.x)&&Math.round(e.x)!==e.translateX&&(r=e.x-e.translateX),{x:a.x+(s.translateX||0)+i-(r||0),y:a.y+(s.translateY||0)+i-t,width:e.width-2*i,height:e.height-2*i}}};for(i=0;i<l;i++)(t=e[i])&&(t.oldOpacity=t.opacity,t.newOpacity=1,t.absoluteBox=h(t));for(e.sort((function(e,t){return(t.labelrank||0)-(e.labelrank||0)})),i=0;i<l;i++){var d=(h=e[i])&&h.absoluteBox;for(t=i+1;t<l;++t){var p=(a=e[t])&&a.absoluteBox;!d||!p||h===a||0===h.newOpacity||0===a.newOpacity||"hidden"===h.visibility||"hidden"===a.visibility||p.x>=d.x+d.width||p.x+p.width<=d.x||p.y>=d.y+d.height||p.y+p.height<=d.y||((h.labelrank<a.labelrank?h:a).newOpacity=0)}}e.forEach((function(e){n(e,s)&&(c=!0)})),c&&r(s,"afterHideAllOverlappingLabels")}})),t(n,"Core/Responsive.js",[n["Core/Utilities.js"]],(function(e){var t,n=e.extend,i=e.find,r=e.isArray,a=e.isObject,o=e.merge,s=e.objectEach,l=e.pick,u=e.splat,c=e.uniqueKey;return function(e){var t=[];e.compose=function(e){return-1===t.indexOf(e)&&(t.push(e),n(e.prototype,h.prototype)),e};var h=function(){function e(){}return e.prototype.currentOptions=function(e){var t=this,n={};return function e(n,i,o,l){var c;s(n,(function(n,s){if(!l&&-1<t.collectionsWithUpdate.indexOf(s)&&i[s])for(n=u(n),o[s]=[],c=0;c<Math.max(n.length,i[s].length);c++)i[s][c]&&(void 0===n[c]?o[s][c]=i[s][c]:(o[s][c]={},e(n[c],i[s][c],o[s][c],l+1)));else a(n)?(o[s]=r(n)?[]:{},e(n,i[s]||{},o[s],l+1)):o[s]="undefined"===typeof i[s]?null:i[s]}))}(e,this.options,n,0),n},e.prototype.matchResponsiveRule=function(e,t){var n=e.condition;(n.callback||function(){return this.chartWidth<=l(n.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=l(n.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=l(n.minWidth,0)&&this.chartHeight>=l(n.minHeight,0)}).call(this)&&t.push(e._id)},e.prototype.setResponsive=function(e,t){var n=this,r=this.options.responsive,a=this.currentResponsive,s=[];!t&&r&&r.rules&&r.rules.forEach((function(e){"undefined"===typeof e._id&&(e._id=c()),n.matchResponsiveRule(e,s)}),this),t=o.apply(void 0,s.map((function(e){return i((r||{}).rules||[],(function(t){return t._id===e}))})).map((function(e){return e&&e.chartOptions}))),t.isResponsiveOptions=!0,(s=s.toString()||void 0)!==(a&&a.ruleIds)&&(a&&this.update(a.undoOptions,e,!0),s?((a=this.currentOptions(t)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:s,mergedOptions:t,undoOptions:a},this.update(t,e,!0)):this.currentResponsive=void 0)},e}()}(t||(t={})),t})),t(n,"masters/highcharts.src.js",[n["Core/Globals.js"],n["Core/Utilities.js"],n["Core/DefaultOptions.js"],n["Core/Animation/Fx.js"],n["Core/Animation/AnimationUtilities.js"],n["Core/Renderer/HTML/AST.js"],n["Core/FormatUtilities.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Renderer/HTML/HTMLElement.js"],n["Core/Renderer/HTML/HTMLRenderer.js"],n["Core/Axis/Axis.js"],n["Core/Axis/DateTimeAxis.js"],n["Core/Axis/LogarithmicAxis.js"],n["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],n["Core/Axis/Tick.js"],n["Core/Tooltip.js"],n["Core/Series/Point.js"],n["Core/Pointer.js"],n["Core/MSPointer.js"],n["Core/Legend/Legend.js"],n["Core/Chart/Chart.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Series/Column/ColumnSeries.js"],n["Series/Column/ColumnDataLabel.js"],n["Series/Pie/PieSeries.js"],n["Series/Pie/PieDataLabel.js"],n["Core/Series/DataLabel.js"],n["Core/Responsive.js"],n["Core/Color/Color.js"],n["Core/Time.js"]],(function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y,g,_,x,b,w,k,S,T,C,E,M,P,A,D,I){return e.animate=r.animate,e.animObject=r.animObject,e.getDeferredAnimation=r.getDeferredAnimation,e.setAnimation=r.setAnimation,e.stop=r.stop,e.timers=i.timers,e.AST=a,e.Axis=d,e.Chart=w,e.chart=w.chart,e.Fx=i,e.Legend=b,e.PlotLineOrBand=m,e.Point=g,e.Pointer=x.isRequired()?x:_,e.Series=k,e.SVGElement=l,e.SVGRenderer=u,e.Tick=v,e.Time=I,e.Tooltip=y,e.Color=D,e.color=D.parse,h.compose(u),c.compose(l),e.defaultOptions=n.defaultOptions,e.getOptions=n.getOptions,e.time=n.defaultTime,e.setOptions=n.setOptions,e.dateFormat=o.dateFormat,e.format=o.format,e.numberFormat=o.numberFormat,e.addEvent=t.addEvent,e.arrayMax=t.arrayMax,e.arrayMin=t.arrayMin,e.attr=t.attr,e.clearTimeout=t.clearTimeout,e.correctFloat=t.correctFloat,e.createElement=t.createElement,e.css=t.css,e.defined=t.defined,e.destroyObjectProperties=t.destroyObjectProperties,e.discardElement=t.discardElement,e.distribute=s.distribute,e.erase=t.erase,e.error=t.error,e.extend=t.extend,e.extendClass=t.extendClass,e.find=t.find,e.fireEvent=t.fireEvent,e.getMagnitude=t.getMagnitude,e.getStyle=t.getStyle,e.inArray=t.inArray,e.isArray=t.isArray,e.isClass=t.isClass,e.isDOMElement=t.isDOMElement,e.isFunction=t.isFunction,e.isNumber=t.isNumber,e.isObject=t.isObject,e.isString=t.isString,e.keys=t.keys,e.merge=t.merge,e.normalizeTickInterval=t.normalizeTickInterval,e.objectEach=t.objectEach,e.offset=t.offset,e.pad=t.pad,e.pick=t.pick,e.pInt=t.pInt,e.relativeLength=t.relativeLength,e.removeEvent=t.removeEvent,e.seriesType=S.seriesType,e.splat=t.splat,e.stableSort=t.stableSort,e.syncTimeout=t.syncTimeout,e.timeUnits=t.timeUnits,e.uniqueKey=t.uniqueKey,e.useSerialIds=t.useSerialIds,e.wrap=t.wrap,C.compose(T),P.compose(k),p.compose(d),f.compose(d),M.compose(E),m.compose(d),A.compose(w),e})),n["masters/highcharts.src.js"]._modules=n,n["masters/highcharts.src.js"]},e.exports?(a.default=a,e.exports=r.document?a(r):a):void 0===(i=function(){return a(r)}.call(t,n,t,e))||(e.exports=i)},3412:function(e,t,n){var i,r,a;a=function(e){function t(e,t,n,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,n),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e=e?e._modules:{},"Extensions/DownloadURL.js",[e["Core/Globals.js"]],(function(e){var t=e.isSafari,n=e.win,i=n.document,r=n.URL||n.webkitURL||n,a=e.dataURLtoBlob=function(e){if((e=e.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<e.length&&n.atob&&n.ArrayBuffer&&n.Uint8Array&&n.Blob&&r.createObjectURL){var t=n.atob(e[3]),i=new n.ArrayBuffer(t.length);i=new n.Uint8Array(i);for(var a=0;a<i.length;++a)i[a]=t.charCodeAt(a);return e=new n.Blob([i],{type:e[1]}),r.createObjectURL(e)}};return e=e.downloadURL=function(e,r){var o=n.navigator,s=i.createElement("a");if("string"===typeof e||e instanceof String||!o.msSaveOrOpenBlob){if(e=""+e,o=/Edge\/\d+/.test(o.userAgent),(t&&"string"===typeof e&&0===e.indexOf("data:application/pdf")||o||2e6<e.length)&&!(e=a(e)||""))throw Error("Failed to convert to blob");if("undefined"!==typeof s.download)s.href=e,s.download=r,i.body.appendChild(s),s.click(),i.body.removeChild(s);else try{var l=n.open(e,"chart");if("undefined"===typeof l||null===l)throw Error("Failed to open window")}catch(u){n.location.href=e}}else o.msSaveOrOpenBlob(e,r)},{dataURLtoBlob:a,downloadURL:e}})),t(e,"Extensions/ExportData.js",[e["Core/Axis/Axis.js"],e["Core/Chart/Chart.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Globals.js"],e["Core/DefaultOptions.js"],e["Core/Utilities.js"],e["Extensions/DownloadURL.js"]],(function(e,t,n,i,r,a,o){function s(e,t){var n=c.navigator,i=-1<n.userAgent.indexOf("WebKit")&&0>n.userAgent.indexOf("Chrome"),r=c.URL||c.webkitURL||c;try{if(n.msSaveOrOpenBlob&&c.MSBlobBuilder){var a=new c.MSBlobBuilder;return a.append(e),a.getBlob("image/svg+xml")}if(!i)return r.createObjectURL(new c.Blob(["\ufeff"+e],{type:t}))}catch(o){}}var l=i.doc,u=i.seriesTypes,c=i.win;i=r.getOptions,r=r.setOptions;var h=a.addEvent,d=a.defined,p=a.extend,f=a.find,m=a.fireEvent,v=a.isNumber,y=a.pick,g=o.downloadURL;r({exporting:{csv:{annotations:{itemDelimiter:"; ",join:!1},columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:"\n"},showTable:!1,useMultiLevelHeaders:!0,useRowspanHeaders:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",exportData:{annotationHeader:"Annotations",categoryHeader:"Category",categoryDatetimeHeader:"DateTime"},viewData:"View data table",hideData:"Hide data table"}}),h(t,"render",(function(){this.options&&this.options.exporting&&this.options.exporting.showTable&&!this.options.chart.forExport&&this.viewData()})),t.prototype.setUpKeyToAxis=function(){u.arearange&&(u.arearange.prototype.keyToAxis={low:"y",high:"y"}),u.gantt&&(u.gantt.prototype.keyToAxis={start:"x",end:"x"})},t.prototype.getDataRows=function(t){var n,i=this.hasParallelCoordinates,r=this.time,a=this.options.exporting&&this.options.exporting.csv||{},o=this.xAxis,s={},l=[],u=[],c=[],h=this.options.lang.exportData,p=h.categoryHeader,g=h.categoryDatetimeHeader,_=function(n,i,r){if(a.columnHeaderFormatter){var o=a.columnHeaderFormatter(n,i,r);if(!1!==o)return o}return n?n instanceof e?n.options.title&&n.options.title.text||(n.dateTime?g:p):t?{columnTitle:1<r?i:n.name,topLevelColumnTitle:n.name}:n.name+(1<r?" ("+i+")":""):p},x=function(e,t,n){var i={},r={};return t.forEach((function(t){var a=(e.keyToAxis&&e.keyToAxis[t]||t)+"Axis";a=v(n)?e.chart[a][n]:e[a],i[t]=a&&a.categories||[],r[t]=a&&a.dateTime})),{categoryMap:i,dateTimeValueAxisMap:r}},b=[],w=0;for(k in this.setUpKeyToAxis(),this.series.forEach((function(e){var l,h=e.xAxis,d=e.options.keys||function(e,t){return e.data.filter((function(e){return"undefined"!==typeof e.y&&e.name})).length&&t&&!t.categories&&!e.keyToAxis?e.pointArrayMap&&e.pointArrayMap.filter((function(e){return"x"===e})).length?(e.pointArrayMap.unshift("x"),e.pointArrayMap):["x","y"]:e.pointArrayMap||["y"]}(e,h),p=d.length,m=!e.requireSorting&&{},v=o.indexOf(h),g=x(e,d);if(!1!==e.options.includeInDataExport&&!e.options.isInternal&&!1!==e.visible){for(f(b,(function(e){return e[0]===v}))||b.push([v,w]),l=0;l<p;)n=_(e,d[l],d.length),c.push(n.columnTitle||n),t&&u.push(n.topLevelColumnTitle||n),l++;var k={chart:e.chart,autoIncrement:e.autoIncrement,options:e.options,pointArrayMap:e.pointArrayMap};e.options.data.forEach((function(t,n){i&&(g=x(e,d,n));var o={series:k};e.pointClass.prototype.applyOptions.apply(o,[t]),t=o.x;var u=e.data[n]&&e.data[n].name;for(l=0,(!h||"name"===e.exportKey||!i&&h&&h.hasNames&&u)&&(t=u),m&&(m[t]&&(t+="|"+n),m[t]=!0),s[t]||(s[t]=[],s[t].xValues=[]),s[t].x=o.x,s[t].name=u,s[t].xValues[v]=o.x;l<p;)u=o[n=d[l]],s[t][w+l]=y(g.categoryMap[n][u],g.dateTimeValueAxisMap[n]?r.dateFormat(a.dateFormat,u):null,u),l++})),w+=l}})),s)Object.hasOwnProperty.call(s,k)&&l.push(s[k]);var k=t?[u,c]:[c];for(w=b.length;w--;){var S=b[w][0],T=b[w][1],C=o[S];l.sort((function(e,t){return e.xValues[S]-t.xValues[S]})),h=_(C),k[0].splice(T,0,h),t&&k[1]&&k[1].splice(T,0,h),l.forEach((function(e){var t=e.name;C&&!d(t)&&(C.dateTime?(e.x instanceof Date&&(e.x=e.x.getTime()),t=r.dateFormat(a.dateFormat,e.x)):t=C.categories?y(C.names[e.x],C.categories[e.x],e.x):e.x),e.splice(T,0,t)}))}return k=k.concat(l),m(this,"exportData",{dataRows:k}),k},t.prototype.getCSV=function(e){var t="",n=this.getDataRows(),i=this.options.exporting.csv,r=y(i.decimalPoint,","!==i.itemDelimiter&&e?1.1.toLocaleString()[1]:"."),a=y(i.itemDelimiter,","===r?";":","),o=i.lineDelimiter;return n.forEach((function(e,i){for(var s,l=e.length;l--;)"string"===typeof(s=e[l])&&(s='"'+s+'"'),"number"===typeof s&&"."!==r&&(s=s.toString().replace(".",r)),e[l]=s;t+=e.join(a),i<n.length-1&&(t+=o)})),t},t.prototype.getTable=function(e){return function e(t){if(!t.tagName||"#text"===t.tagName)return t.textContent||"";var n=t.attributes,i="<"+t.tagName;return n&&Object.keys(n).forEach((function(e){i+=" "+e+'="'+n[e]+'"'})),i+=">",i+=t.textContent||"",(t.children||[]).forEach((function(t){i+=e(t)})),i+="</"+t.tagName+">"}(e=this.getTableAST(e))},t.prototype.getTableAST=function(e){var t=0,n=[],i=this.options,r=e?1.1.toLocaleString()[1]:".",a=y(i.exporting.useMultiLevelHeaders,!0);e=this.getDataRows(a);var o=a?e.shift():null,s=e.shift(),l=function(e,t,n,i){var a=y(i,"");return t="text"+(t?" "+t:""),"number"===typeof a?(a=a.toString(),","===r&&(a=a.replace(".",r)),t="number"):i||(t="empty"),{tagName:e,attributes:n=p({class:t},n),textContent:a}};!1!==i.exporting.tableCaption&&n.push({tagName:"caption",attributes:{class:"highcharts-table-caption"},textContent:y(i.exporting.tableCaption,i.title.text?i.title.text:"Chart")});for(var u=0,c=e.length;u<c;++u)e[u].length>t&&(t=e[u].length);n.push(function(e,t,n){var r=[],o=0;n=n||t&&t.length;var s,u=0;if(s=a&&e&&t){e:if(s=e.length,t.length===s){for(;s--;)if(e[s]!==t[s]){s=!1;break e}s=!0}else s=!1;s=!s}if(s){for(s=[];o<n;++o){var c=e[o],h=e[o+1];c===h?++u:u?(s.push(l("th","highcharts-table-topheading",{scope:"col",colspan:u+1},c)),u=0):(c===t[o]?i.exporting.useRowspanHeaders?(h=2,delete t[o]):(h=1,t[o]=""):h=1,c=l("th","highcharts-table-topheading",{scope:"col"},c),1<h&&c.attributes&&(c.attributes.valign="top",c.attributes.rowspan=h),s.push(c))}r.push({tagName:"tr",children:s})}if(t){for(s=[],o=0,n=t.length;o<n;++o)"undefined"!==typeof t[o]&&s.push(l("th",null,{scope:"col"},t[o]));r.push({tagName:"tr",children:s})}return{tagName:"thead",children:r}}(o,s,Math.max(t,s.length)));var h=[];return e.forEach((function(e){for(var n=[],i=0;i<t;i++)n.push(l(i?"td":"th",null,i?{}:{scope:"row"},e[i]));h.push({tagName:"tr",children:n})})),n.push({tagName:"tbody",children:h}),n={tree:{tagName:"table",id:"highcharts-data-table-"+this.index,children:n}},m(this,"aftergetTableAST",n),n.tree},t.prototype.downloadCSV=function(){var e=this.getCSV(!0);g(s(e,"text/csv")||"data:text/csv,\ufeff"+encodeURIComponent(e),this.getFilename()+".csv")},t.prototype.downloadXLS=function(){var e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";g(s(e,"application/vnd.ms-excel")||"data:application/vnd.ms-excel;base64,"+c.btoa(unescape(encodeURIComponent(e))),this.getFilename()+".xls")},t.prototype.viewData=function(){this.toggleDataTable(!0)},t.prototype.hideData=function(){this.toggleDataTable(!1)},t.prototype.toggleDataTable=function(e){(e=y(e,!this.isDataTableVisible))&&!this.dataTableDiv&&(this.dataTableDiv=l.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv&&(this.dataTableDiv.style.display=e?"block":"none",e&&(this.dataTableDiv.innerHTML=n.emptyHTML,new n([this.getTableAST()]).addToDOM(this.dataTableDiv),m(this,"afterViewData",this.dataTableDiv))),this.isDataTableVisible=e,e=this.exportDivElements;var t=this.options.exporting,i=t&&t.buttons&&t.buttons.contextButton.menuItems;t=this.options.lang,_&&_.menuItemDefinitions&&t&&t.viewData&&t.hideData&&i&&e&&(e=e[i.indexOf("viewData")])&&n.setElementHTML(e,this.isDataTableVisible?t.hideData:t.viewData)};var _=i().exporting;_&&(p(_.menuItemDefinitions,{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},viewData:{textKey:"viewData",onclick:function(){this.toggleDataTable()}}}),_.buttons&&_.buttons.contextButton.menuItems.push("separator","downloadCSV","downloadXLS","viewData")),u.map&&(u.map.prototype.exportKey="name"),u.mapbubble&&(u.mapbubble.prototype.exportKey="name"),u.treemap&&(u.treemap.prototype.exportKey="name")})),t(e,"masters/modules/export-data.src.js",[],(function(){}))},e.exports?(a.default=a,e.exports=a):(i=[n(9718),n(6298)],void 0===(r=function(e){return a(e),a.Highcharts=e,a}.apply(t,i))||(e.exports=r))},6298:function(e,t,n){var i,r,a;a=function(e){function t(e,t,n,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,n),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e=e?e._modules:{},"Extensions/FullScreen.js",[e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/Renderer/HTML/AST.js"],e["Core/Utilities.js"]],(function(e,t,n,i){var r=i.addEvent,a=i.fireEvent;return i=function(){function e(e){this.chart=e,this.isOpen=!1,e=e.renderTo,this.browserProps||("function"===typeof e.requestFullscreen?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:e.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:e.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:e.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}return e.prototype.close=function(){var e=this,t=e.chart,n=t.options.chart;a(t,"fullscreenClose",null,(function(){e.isOpen&&e.browserProps&&t.container.ownerDocument instanceof Document&&t.container.ownerDocument[e.browserProps.exitFullscreen](),e.unbindFullscreenEvent&&(e.unbindFullscreenEvent=e.unbindFullscreenEvent()),t.setSize(e.origWidth,e.origHeight,!1),e.origWidth=void 0,e.origHeight=void 0,n.width=e.origWidthOption,n.height=e.origHeightOption,e.origWidthOption=void 0,e.origHeightOption=void 0,e.isOpen=!1,e.setButtonText()}))},e.prototype.open=function(){var e=this,t=e.chart,n=t.options.chart;a(t,"fullscreenOpen",null,(function(){if(n&&(e.origWidthOption=n.width,e.origHeightOption=n.height),e.origWidth=t.chartWidth,e.origHeight=t.chartHeight,e.browserProps){var i=r(t.container.ownerDocument,e.browserProps.fullscreenChange,(function(){e.isOpen?(e.isOpen=!1,e.close()):(t.setSize(null,null,!1),e.isOpen=!0,e.setButtonText())})),a=r(t,"destroy",i);e.unbindFullscreenEvent=function(){i(),a()};var o=t.renderTo[e.browserProps.requestFullscreen]();o&&o.catch((function(){alert("Full screen is not supported inside a frame.")}))}}))},e.prototype.setButtonText=function(){var e=this.chart,t=e.exportDivElements,i=e.options.exporting,r=i&&i.buttons&&i.buttons.contextButton.menuItems;e=e.options.lang,i&&i.menuItemDefinitions&&e&&e.exitFullscreen&&e.viewFullscreen&&r&&t&&(t=t[r.indexOf("viewFullscreen")])&&n.setElementHTML(t,this.isOpen?e.exitFullscreen:i.menuItemDefinitions.viewFullscreen.text||e.viewFullscreen)},e.prototype.toggle=function(){this.isOpen?this.close():this.open()},e}(),t.Fullscreen=i,r(e,"beforeRender",(function(){this.fullscreen=new t.Fullscreen(this)})),t.Fullscreen})),t(e,"Core/Chart/ChartNavigationComposition.js",[],(function(){var e;return function(e){e.compose=function(e){return e.navigation||(e.navigation=new t(e)),e};var t=function(){function e(e){this.updates=[],this.chart=e}return e.prototype.addUpdate=function(e){this.chart.navigation.updates.push(e)},e.prototype.update=function(e,t){var n=this;this.updates.forEach((function(i){i.call(n.chart,e,t)}))},e}();e.Additions=t}(e||(e={})),e})),t(e,"Extensions/Exporting/ExportingDefaults.js",[e["Core/Globals.js"]],(function(e){return{exporting:{type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:"viewFullscreen printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{padding:5}},menuStyle:{border:"1px solid #999999",background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",color:"#333333",background:"none",fontSize:e.isTouchDevice?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"}}}})),t(e,"Extensions/Exporting/ExportingSymbols.js",[],(function(){var e;return function(e){function t(e,t,n,i){return[["M",e,t+2.5],["L",e+n,t+2.5],["M",e,t+i/2+.5],["L",e+n,t+i/2+.5],["M",e,t+i-1.5],["L",e+n,t+i-1.5]]}function n(e,t,n,i){return e=i/3-2,(i=[]).concat(this.circle(n-e,t,e,e),this.circle(n-e,t+e+4,e,e),this.circle(n-e,t+2*(e+4),e,e))}var i=[];e.compose=function(e){-1===i.indexOf(e)&&(i.push(e),(e=e.prototype.symbols).menu=t,e.menuball=n.bind(e))}}(e||(e={})),e})),t(e,"Core/HttpUtilities.js",[e["Core/Globals.js"],e["Core/Utilities.js"]],(function(e,t){var n=e.doc,i=t.createElement,r=t.discardElement,a=t.merge,o=t.objectEach,s={ajax:function(e){var t=a(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e);e={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var n=new XMLHttpRequest;if(!t.url)return!1;n.open(t.type.toUpperCase(),t.url,!0),t.headers["Content-Type"]||n.setRequestHeader("Content-Type",e[t.dataType]||e.text),o(t.headers,(function(e,t){n.setRequestHeader(t,e)})),t.responseType&&(n.responseType=t.responseType),n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status){if("blob"!==t.responseType){var e=n.responseText;if("json"===t.dataType)try{e=JSON.parse(e)}catch(i){return void(t.error&&t.error(n,i))}}return t.success&&t.success(e,n)}t.error&&t.error(n,n.responseText)}};try{t.data=JSON.stringify(t.data)}catch(i){}n.send(t.data||!0)},getJSON:function(e,t){s.ajax({url:e,success:t,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(e,t,s){var l=i("form",a({method:"post",action:e,enctype:"multipart/form-data"},s),{display:"none"},n.body);o(t,(function(e,t){i("input",{type:"hidden",name:t,value:e},null,l)})),l.submit(),r(l)}};return s})),t(e,"Extensions/Exporting/Exporting.js",[e["Core/Renderer/HTML/AST.js"],e["Core/Chart/Chart.js"],e["Core/Chart/ChartNavigationComposition.js"],e["Core/DefaultOptions.js"],e["Extensions/Exporting/ExportingDefaults.js"],e["Extensions/Exporting/ExportingSymbols.js"],e["Core/Globals.js"],e["Core/HttpUtilities.js"],e["Core/Utilities.js"]],(function(e,t,n,i,r,a,o,s,l){t=i.defaultOptions;var u,c=o.doc,h=o.SVG_NS,d=o.win,p=l.addEvent,f=l.css,m=l.createElement,v=l.discardElement,y=l.extend,g=l.find,_=l.fireEvent,x=l.isObject,b=l.merge,w=l.objectEach,k=l.pick,S=l.removeEvent,T=l.uniqueKey;return function(t){function i(e){var t=this,n=t.renderer,i=b(t.options.navigation.buttonOptions,e),r=i.onclick,a=i.menuItems,o=i.symbolSize||12;if(t.btnCount||(t.btnCount=0),t.exportDivElements||(t.exportDivElements=[],t.exportSVGElements=[]),!1!==i.enabled&&i.theme){var s,l=i.theme;t.styledMode||(l.fill=k(l.fill,"#ffffff"),l.stroke=k(l.stroke,"none")),r?s=function(e){e&&e.stopPropagation(),r.call(t,e)}:a&&(s=function(e){e&&e.stopPropagation(),t.contextMenu(u.menuClassName,a,u.translateX,u.translateY,u.width,u.height,u),u.setState(2)}),i.text&&i.symbol?l.paddingLeft=k(l.paddingLeft,30):i.text||y(l,{width:i.width,height:i.height,padding:0}),t.styledMode||(l["stroke-linecap"]="round",l.fill=k(l.fill,"#ffffff"),l.stroke=k(l.stroke,"none"));var u=n.button(i.text,0,0,s,l).addClass(e.className).attr({title:k(t.options.lang[i._titleKey||i.titleKey],"")});if(u.menuClassName=e.menuClassName||"highcharts-menu-"+t.btnCount++,i.symbol){var c=n.symbol(i.symbol,i.symbolX-o/2,i.symbolY-o/2,o,o,{width:o,height:o}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(u);t.styledMode||c.attr({stroke:i.symbolStroke,fill:i.symbolFill,"stroke-width":i.symbolStrokeWidth||1})}u.add(t.exportingGroup).align(y(i,{width:u.width,x:k(i.x,t.buttonOffset)}),!0,"spacingBox"),t.buttonOffset+=(u.width+i.buttonSpacing)*("right"===i.align?-1:1),t.exportSVGElements.push(u,c)}}function r(){if(this.printReverseInfo){var e=this.printReverseInfo,t=e.childNodes,n=e.origDisplay;e=e.resetParams,this.moveContainers(this.renderTo),[].forEach.call(t,(function(e,t){1===e.nodeType&&(e.style.display=n[t]||"")})),this.isPrinting=!1,e&&this.setSize.apply(this,e),delete this.printReverseInfo,W=void 0,_(this,"afterPrint")}}function u(){var e=c.body,t=this.options.exporting.printMaxWidth,n={childNodes:e.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,this.pointer.reset(null,0),_(this,"beforePrint"),t&&this.chartWidth>t&&(n.resetParams=[this.options.chart.width,void 0,!1],this.setSize(t,void 0,!1)),[].forEach.call(n.childNodes,(function(e,t){1===e.nodeType&&(n.origDisplay[t]=e.style.display,e.style.display="none")})),this.moveContainers(e),this.printReverseInfo=n}function C(e){e.renderExporting(),p(e,"redraw",e.renderExporting),p(e,"destroy",e.destroyExport)}function E(t,n,i,r,a,o,s){var u=this,h=u.options.navigation,v=u.chartWidth,g=u.chartHeight,b="cache-"+t,w=Math.max(a,o),k=u[b];if(!k){u.exportContextMenu=u[b]=k=m("div",{className:t},{position:"absolute",zIndex:1e3,padding:w+"px",pointerEvents:"auto"},u.fixedDiv||u.container);var S=m("ul",{className:"highcharts-menu"},{listStyle:"none",margin:0,padding:0},k);u.styledMode||f(S,y({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},h.menuStyle)),k.hideMenu=function(){f(k,{display:"none"}),s&&s.setState(0),u.openMenu=!1,f(u.renderTo,{overflow:"hidden"}),f(u.container,{overflow:"hidden"}),l.clearTimeout(k.hideTimer),_(u,"exportMenuHidden")},u.exportEvents.push(p(k,"mouseleave",(function(){k.hideTimer=d.setTimeout(k.hideMenu,500)})),p(k,"mouseenter",(function(){l.clearTimeout(k.hideTimer)})),p(c,"mouseup",(function(e){u.pointer.inClass(e.target,t)||k.hideMenu()})),p(k,"click",(function(){u.openMenu&&k.hideMenu()}))),n.forEach((function(t){if("string"===typeof t&&(t=u.options.exporting.menuItemDefinitions[t]),x(t,!0)){var n=void 0;t.separator?n=m("hr",void 0,void 0,S):("viewData"===t.textKey&&u.isDataTableVisible&&(t.textKey="hideData"),n=m("li",{className:"highcharts-menu-item",onclick:function(e){e&&e.stopPropagation(),k.hideMenu(),t.onclick&&t.onclick.apply(u,arguments)}},void 0,S),e.setElementHTML(n,t.text||u.options.lang[t.textKey]),u.styledMode||(n.onmouseover=function(){f(this,h.menuItemHoverStyle)},n.onmouseout=function(){f(this,h.menuItemStyle)},f(n,y({cursor:"pointer"},h.menuItemStyle||{})))),u.exportDivElements.push(n)}})),u.exportDivElements.push(S,k),u.exportMenuWidth=k.offsetWidth,u.exportMenuHeight=k.offsetHeight}n={display:"block"},i+u.exportMenuWidth>v?n.right=v-i-a-w+"px":n.left=i-w+"px",r+o+u.exportMenuHeight>g&&"top"!==s.alignOptions.verticalAlign?n.bottom=g-r-w+"px":n.top=r+o-w+"px",f(k,n),f(u.renderTo,{overflow:""}),f(u.container,{overflow:""}),u.openMenu=!0,_(u,"exportMenuShown")}function M(e){var t,n=e?e.target:this,i=n.exportSVGElements,r=n.exportDivElements;e=n.exportEvents,i&&(i.forEach((function(e,r){e&&(e.onclick=e.ontouchstart=null,t="cache-"+e.menuClassName,n[t]&&delete n[t],i[r]=e.destroy())})),i.length=0),n.exportingGroup&&(n.exportingGroup.destroy(),delete n.exportingGroup),r&&(r.forEach((function(e,t){e&&(l.clearTimeout(e.hideTimer),S(e,"mouseleave"),r[t]=e.onmouseout=e.onmouseover=e.ontouchstart=e.onclick=null,v(e))})),r.length=0),e&&(e.forEach((function(e){e()})),e.length=0)}function P(e,t){t=this.getSVGForExport(e,t),e=b(this.options.exporting,e),s.post(e.url,{filename:e.filename?e.filename.replace(/\//g,"-"):this.getFilename(),type:e.type,width:e.width||0,scale:e.scale,svg:t},e.formAttributes)}function A(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function D(){var e=this.userOptions.title&&this.userOptions.title.text,t=this.options.exporting.filename;return t?t.replace(/\//g,"-"):("string"===typeof e&&(t=e.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!t||5>t.length)&&(t="chart"),t)}function I(e){var t,n=b(this.options,e);n.plotOptions=b(this.userOptions.plotOptions,e&&e.plotOptions),n.time=b(this.userOptions.time,e&&e.time);var i=m("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},c.body),r=this.renderTo.style.width,a=this.renderTo.style.height;r=n.exporting.sourceWidth||n.chart.width||/px$/.test(r)&&parseInt(r,10)||(n.isGantt?800:600),a=n.exporting.sourceHeight||n.chart.height||/px$/.test(a)&&parseInt(a,10)||400,y(n.chart,{animation:!1,renderTo:i,forExport:!0,renderer:"SVGRenderer",width:r,height:a}),n.exporting.enabled=!1,delete n.data,n.series=[],this.series.forEach((function(e){(t=b(e.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:e.visible})).isInternal||n.series.push(t)}));var o={};this.axes.forEach((function(e){e.userOptions.internalKey||(e.userOptions.internalKey=T()),e.options.isInternal||(o[e.coll]||(o[e.coll]=!0,n[e.coll]=[]),n[e.coll].push(b(e.userOptions,{visible:e.visible})))}));var s=new this.constructor(n,this.callback);return e&&["xAxis","yAxis","series"].forEach((function(t){var n={};e[t]&&(n[t]=e[t],s.update(n))})),this.axes.forEach((function(e){var t=g(s.axes,(function(t){return t.options.internalKey===e.userOptions.internalKey})),n=e.getExtremes(),i=n.userMin;n=n.userMax,t&&("undefined"!==typeof i&&i!==t.min||"undefined"!==typeof n&&n!==t.max)&&t.setExtremes(i,n,!0,!1)})),a=s.getChartHTML(),_(this,"getSVG",{chartCopy:s}),a=this.sanitizeSVG(a,n),n=null,s.destroy(),v(i),a}function L(e,t){var n=this.options.exporting;return this.getSVG(b({chart:{borderRadius:0}},n.chartOptions,t,{exporting:{sourceWidth:e&&e.sourceWidth||n.sourceWidth,sourceHeight:e&&e.sourceHeight||n.sourceHeight}}))}function O(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()}))}function z(){var e,n=V,i=t.inlineWhitelist,r={},a=c.createElement("iframe");f(a,{width:"1px",height:"1px",visibility:"hidden"}),c.body.appendChild(a);var s=a.contentWindow&&a.contentWindow.document;s&&s.body.appendChild(s.createElementNS(h,"svg")),function t(a){var l,u,c={};if(s&&1===a.nodeType&&-1===G.indexOf(a.nodeName)){var h=d.getComputedStyle(a,null),p="svg"===a.nodeName?{}:d.getComputedStyle(a.parentNode,null);if(!r[a.nodeName]){e=s.getElementsByTagName("svg")[0];var m=s.createElementNS(a.namespaceURI,a.nodeName);e.appendChild(m),r[a.nodeName]=b(d.getComputedStyle(m,null)),"text"===a.nodeName&&delete r.text.fill,e.removeChild(m)}for(var v in h)if(o.isFirefox||o.isMS||o.isSafari||Object.hasOwnProperty.call(h,v)){var y=h[v],g=v;if(m=l=!1,i.length){for(u=i.length;u--&&!l;)l=i[u].test(g);m=!l}for("transform"===g&&"none"===y&&(m=!0),u=n.length;u--&&!m;)m=n[u].test(g)||"function"===typeof y;m||p[g]===y&&"svg"!==a.nodeName||r[a.nodeName][g]===y||(Z&&-1===Z.indexOf(g)?c[g]=y:y&&a.setAttribute(O(g),y))}f(a,c),"svg"===a.nodeName&&a.setAttribute("stroke-width","1px"),"text"!==a.nodeName&&[].forEach.call(a.children||a.childNodes,t)}}(this.container.querySelector("svg")),e.parentNode.removeChild(e),a.parentNode.removeChild(a)}function R(e){(this.fixedDiv?[this.fixedDiv,this.scrollingContainer]:[this.container]).forEach((function(t){e.appendChild(t)}))}function B(){var e=this;e.exporting={update:function(t,n){e.isDirtyExporting=!0,b(!0,e.options.exporting,t),k(n,!0)&&e.redraw()}},n.compose(e).navigation.addUpdate((function(t,n){e.isDirtyExporting=!0,b(!0,e.options.navigation,t),k(n,!0)&&e.redraw()}))}function F(){var e=this;e.isPrinting||(W=e,o.isSafari||e.beforePrint(),setTimeout((function(){d.focus(),d.print(),o.isSafari||setTimeout((function(){e.afterPrint()}),1e3)}),1))}function N(){var e=this,t=e.options.exporting,n=t.buttons,i=e.isDirtyExporting||!e.exportSVGElements;e.buttonOffset=0,e.isDirtyExporting&&e.destroyExport(),i&&!1!==t.enabled&&(e.exportEvents=[],e.exportingGroup=e.exportingGroup||e.renderer.g("exporting-group").attr({zIndex:3}).add(),w(n,(function(t){e.addButton(t)})),e.isDirtyExporting=!1)}function j(e,t){var n=e.indexOf("</svg>")+6,i=e.substr(n);return e=e.substr(0,n),t&&t.exporting&&t.exporting.allowHTML&&i&&(i='<foreignObject x="0" y="0" width="'+t.chart.width+'" height="'+t.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+i.replace(/(<(?:img|br).*?(?=>))>/g,"$1 />")+"</body></foreignObject>",e=e.replace("</svg>",i+"</svg>")),e=e.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;);?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+:)href=/g," xlink:href=").replace(/\n/," ").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xa0").replace(/&shy;/g,"\xad"),this.ieSanitizeSVG&&(e=this.ieSanitizeSVG(e)),e}var U=[],V=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/],Z="fill stroke strokeLinecap strokeLinejoin strokeWidth textAnchor x y".split(" ");t.inlineWhitelist=[];var W,G=["clipPath","defs","desc"];t.compose=function(e,t){a.compose(t),-1===U.indexOf(e)&&(U.push(e),(t=e.prototype).afterPrint=r,t.exportChart=P,t.inlineStyles=z,t.print=F,t.sanitizeSVG=j,t.getChartHTML=A,t.getSVG=I,t.getSVGForExport=L,t.getFilename=D,t.moveContainers=R,t.beforePrint=u,t.contextMenu=E,t.addButton=i,t.destroyExport=M,t.renderExporting=N,t.callbacks.push(C),p(e,"init",B),o.isSafari&&o.win.matchMedia("print").addListener((function(e){W&&(e.matches?W.beforePrint():W.afterPrint())})))}}(u||(u={})),t.exporting=b(r.exporting,t.exporting),t.lang=b(r.lang,t.lang),t.navigation=b(r.navigation,t.navigation),u})),t(e,"masters/modules/exporting.src.js",[e["Core/Globals.js"],e["Extensions/Exporting/Exporting.js"],e["Core/HttpUtilities.js"]],(function(e,t,n){e.HttpUtilities=n,e.ajax=n.ajax,e.getJSON=n.getJSON,e.post=n.post,t.compose(e.Chart,e.Renderer)}))},e.exports?(a.default=a,e.exports=a):(i=[n(9718)],void 0===(r=function(e){return a(e),a.Highcharts=e,a}.apply(t,i))||(e.exports=r))},2110:function(e,t,n){"use strict";var i=n(8309),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return i.isMemo(e)?o:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=l(t),m=l(n),v=0;v<o.length;++v){var y=o[v];if(!a[y]&&(!i||!i[y])&&(!m||!m[y])&&(!s||!s[y])){var g=d(n,y);try{u(t,y,g)}catch(_){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case c:case h:case a:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case v:case m:case l:return e;default:return t}}case r:return t}}}function w(e){return b(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=r,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||b(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===g||e.$$typeof===_||e.$$typeof===x||e.$$typeof===y)},t.typeOf=b},8309:function(e,t,n){"use strict";e.exports=n(746)},4643:function(e,t,n){"use strict";var i=n(8085),r=n(6767),a=n(1621),o="localStorage"in n.g&&n.g.localStorage?n.g.localStorage:i;function s(e,t){return 1===arguments.length?l(e):u(e,t)}function l(e){var t=o.getItem(e);return r(t)}function u(e,t){try{return o.setItem(e,JSON.stringify(t)),!0}catch(n){return!1}}s.set=u,s.get=l,s.remove=function(e){return o.removeItem(e)},s.clear=function(){return o.clear()},s.backend=function(e){return e&&(o=e),o},s.on=a.on,s.off=a.off,e.exports=s},6767:function(e){"use strict";e.exports=function(e){var t=function(e){try{return JSON.parse(e)}catch(t){return e}}(e);return void 0===t?null:t}},8085:function(e){"use strict";var t={};e.exports={getItem:function(e){return e in t?t[e]:null},setItem:function(e,n){return t[e]=n,!0},removeItem:function(e){return!!(e in t)&&delete t[e]},clear:function(){return t={},!0}}},1621:function(e,t,n){"use strict";var i=n(6767),r={};function a(e){e||(e=n.g.event);var t=r[e.key];t&&t.forEach((function(t){t(i(e.newValue),i(e.oldValue),e.url||e.uri)}))}e.exports={on:function(e,t){r[e]?r[e].push(t):r[e]=[t],n.g.addEventListener?n.g.addEventListener("storage",a,!1):n.g.attachEvent?n.g.attachEvent("onstorage",a):n.g.onstorage=a},off:function(e,t){var n=r[e];n.length>1?n.splice(n.indexOf(t),1):r[e]=[]}}},5483:function(e,t,n){var i=n(9713).default,r=n(1506).default,a=n(9100).default,o=n(6525).default,s=n(9754).default,l=n(8585).default,u=n(8551).default,c=n(319).default,h=n(3038).default,d=n(3269).default,p=n(5957).default,f=n(2205).default,m=n(9842).default,v=n(4575).default,y=n(3913).default;e.exports=function(){"use strict";var e,t,n;function g(i,r){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),n=r(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=r;else e=r}return g(["exports"],(function(e){var t="2.8.2",n=i;function i(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=n,this.p2y=i}i.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},i.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},i.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},i.prototype.solveCurveX=function(e,t){var n,i,r,a,o;for(void 0===t&&(t=1e-6),r=e,o=0;o<8;o++){if(a=this.sampleCurveX(r)-e,Math.abs(a)<t)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=a/s}if((r=e)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(a=this.sampleCurveX(r),Math.abs(a-e)<t)return r;e>a?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var g=_;function _(e,t){this.x=e,this.y=t}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),i=Math.sin(e),r=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-i*(this.y-t.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(e){return e instanceof _?e:Array.isArray(e)?new _(e[0],e[1]):e};var x="undefined"!=typeof self?self:{},b=Math.PI/180,w=180/Math.PI;function k(e){return e*b}function S(e){return e*w}var T=[[0,0],[1,0],[1,1],[0,1]];function C(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function E(e,t,i,r){var a=new n(e,t,i,r);return function(e){return a.solve(e)}}var M=E(.25,.1,.25,1);function P(e,t,n){return Math.min(n,Math.max(t,e))}function A(e,t,n){return(n=P((n-e)/(t-e),0,1))*n*(3-2*n)}function D(e,t,n){var i=n-t,r=((e-t)%i+i)%i+t;return r===t?n:r}function I(e,t,n){if(!e.length)return n(null,[]);var i=e.length,r=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),r[o]=t,0==--i&&n(a,r)}))}))}function L(e){var t=[];for(var n in e)t.push(e[n]);return t}function O(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];for(var s in o)e[s]=o[s]}return e}var z=1;function R(){return z++}function B(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function F(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function N(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function j(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function U(e,t){return-1!==e.indexOf(t,e.length-t.length)}function V(e,t,n){var i={};for(var r in e)i[r]=t.call(n||this,e[r],r,e);return i}function Z(e,t,n){var i={};for(var r in e)t.call(n||this,e[r],r,e)&&(i[r]=e[r]);return i}function W(e){return Array.isArray(e)?e.map(W):"object"==typeof e&&e?V(e,W):e}var G={};function Y(e){G[e]||("undefined"!=typeof console&&console.warn(e),G[e]=!0)}function H(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function X(e){for(var t,n,i=0,r=0,a=e.length,o=a-1;r<a;o=r++)t=e[r],i+=((n=e[o]).x-t.x)*(t.y+n.y);return i}function q(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function K(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,i,r){var a=i||r;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var $,Q,J,ee,te=null;function ne(e){if(null==te){var t=e.navigator?e.navigator.userAgent:null;te=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return te}function ie(e){try{var t=x[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var re,ae,oe,se={now:function(){return void 0!==J?J:x.performance.now()},setNow:function(e){J=e},restoreNow:function(){J=void 0},frame:function(e){var t=x.requestAnimationFrame(e);return{cancel:function(){return x.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width,i=e.height;ee||(ee=x.document.createElement("canvas"));var r=ee.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return(n>ee.width||i>ee.height)&&(ee.width=n,ee.height=i),r.clearRect(-t,-t,n+2*t,i+2*t),r.drawImage(e,0,0,n,i),r.getImageData(-t,-t,n+2*t,i+2*t)},resolveURL:function(e){return $||($=x.document.createElement("a")),$.href=e,$.href},get devicePixelRatio(){return x.devicePixelRatio},get prefersReducedMotion(){return!!x.matchMedia&&(null==Q&&(Q=x.matchMedia("(prefers-reduced-motion: reduce)")),Q.matches)}},le={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==re){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{re=null!={NODE_ENV:"production",PUBLIC_URL:"/csf-waterdef-v4",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/csf-waterdef-v4",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):e}catch(t){re=e}}return re},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ue={supported:!1,testSupport:function(e){!ce&&oe&&(he?de(e):ae=e)}},ce=!1,he=!1;function de(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,oe),e.isContextLost())return;ue.supported=!0}catch(e){}e.deleteTexture(t),ce=!0}x.document&&((oe=x.document.createElement("img")).onload=function(){ae&&de(ae),ae=null,he=!0},oe.onerror=function(){ce=!0,ae=null},oe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var pe="01",fe="NO_ACCESS_TOKEN";function me(e){return 0===e.indexOf("mapbox:")}function ve(e){return le.API_URL_REGEX.test(e)}var ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ge(e){var t=e.match(ye);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function _e(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function xe(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(x.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var be,we,ke=function(){function e(t){v(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return y(e,[{key:"getStorageKey",value:function(e){var t=xe(le.ACCESS_TOKEN),n="";return n=t&&t.u?x.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):le.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(n):"mapbox.eventData:".concat(n)}},{key:"fetchEventData",value:function(){var e=ie("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var i=x.localStorage.getItem(t);i&&(this.eventData=JSON.parse(i));var r=x.localStorage.getItem(n);r&&(this.anonId=r)}catch(e){Y("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=ie("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{x.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&x.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){Y("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,n,i,r){var a=this;if(le.EVENTS_URL){var o=ge(le.EVENTS_URL);o.params.push("access_token=".concat(r||le.ACCESS_TOKEN||""));var s={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:t,skuId:pe,userId:this.anonId},l=n?O(s,n):s,u={url:_e(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([l])};this.pendingRequest=Ve(u,(function(e){a.pendingRequest=null,i(e),a.saveEventData(),a.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Se=new(function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,"appUserTurnstile"))._customAccessToken=e,i}return y(n,[{key:"postTurnstileEvent",value:function(e,t){le.EVENTS_URL&&le.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return me(e)||ve(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=xe(le.ACCESS_TOKEN),i=n?n.u:le.ACCESS_TOKEN,r=i!==this.eventData.tokenU;N(this.anonId)||(this.anonId=B(),r=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;r=r||l>=1||l<-1||o.getDate()!==s.getDate()}else r=!0;r?this.postEvent(a,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=i)}),e):this.processRequests()}}}]),n}(ke)),Te=Se.postTurnstileEvent.bind(Se),Ce=new(function(e){f(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return y(n,[{key:"postMapLoadEvent",value:function(e,t,n,i){this.skuToken=t,this.errorCb=i,le.EVENTS_URL&&(n||le.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(fe)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,r=n.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),N(this.anonId)||(this.anonId=B()),this.postEvent(r,{skuToken:this.skuToken},(function(e){e?t.errorCb(e):i&&(t.success[i]=!0)}),e))}}}]),n}(ke)),Ee=Ce.postMapLoadEvent.bind(Ce),Me=new(function(e){f(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return y(n,[{key:"getSession",value:function(e,t,n,i){var r=this;if(le.API_URL&&le.SESSION_PATH){var a=ge(le.API_URL+le.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(i||le.ACCESS_TOKEN||""));var o={url:_e(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ze(o,(function(e){r.pendingRequest=null,n(e),r.saveEventData(),r.processRequests(i)}))}}},{key:"getSessionAPI",value:function(e,t,n,i){this.skuToken=t,this.errorCb=i,le.SESSION_PATH&&le.API_URL&&(n||le.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(fe)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,r=n.timestamp;i&&this.success[i]||this.getSession(r,this.skuToken,(function(e){e?t.errorCb(e):i&&(t.success[i]=!0)}),e)}}}]),n}(ke)),Pe=Me.getSessionAPI.bind(Me),Ae=new Set,De="mapbox-tiles",Ie=500,Le=50;function Oe(){x.caches&&!be&&(be=x.caches.open(De))}function ze(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Re=1/0,Be={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Be);var Fe=function(e){f(n,e);var t=m(n);function n(e,i,r){var a;return v(this,n),401===i&&ve(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=i,a.url=r,a}return y(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(p(Error)),Ne=q()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===x.location.protocol?x.parent:x).location.href},je=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(Ne())&&!/^\w+:/.test(n))){if(x.fetch&&x.Request&&x.AbortController&&x.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,i=new x.AbortController,r=new x.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ne(),signal:i.signal}),a=!1,o=!1,s=(n=r.url).indexOf("sku=")>0&&ve(n);"json"===e.type&&r.headers.set("Accept","application/json");var l=function(n,i,a){if(!o){if(n&&"SecurityError"!==n.message&&Y(n),i&&a)return u(i);var l=Date.now();x.fetch(r).then((function(n){if(n.ok){var i=s?n.clone():null;return u(n,i,l)}return t(new Fe(n.statusText,n.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},u=function(n,i,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){o||(i&&s&&function(e,t,n){if(Oe(),be){var i={status:t.status,statusText:t.statusText,headers:new x.Headers};t.headers.forEach((function(e,t){return i.headers.set(t,e)}));var r=K(t.headers.get("Cache-Control")||"");if(!r["no-store"]){r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString());var a=i.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(e,t){if(void 0===we)try{new Response(new ReadableStream),we=!0}catch(e){we=!1}we?t(e.body):e.blob().then(t)}(t,(function(t){var n=new x.Response(t,i);Oe(),be&&be.then((function(t){return t.put(ze(e.url),n)})).catch((function(e){return Y(e.message)}))})))}}}(r,i,s),a=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(Oe(),!be)return t(null);var n=ze(e.url);be.then((function(e){e.match(n).then((function(i){var r=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=K(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(i);e.delete(n),r&&e.put(n,i.clone()),t(null,i,r)})).catch(t)})).catch(t)}(r,l):l(null,null),{cancel:function(){o=!0,a||i.abort()}}}(e,t);if(q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new x.XMLHttpRequest;for(var i in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(i,e.headers[i]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===e.type)try{i=JSON.parse(n.response)}catch(e){return t(e)}t(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new Fe(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},Ue=function(e,t){return je(O(e,{type:"arrayBuffer"}),t)},Ve=function(e,t){return je(O(e,{method:"POST"}),t)},Ze=function(e,t){return je(O(e,{method:"GET"}),t)};function We(e){var t=x.document.createElement("a");return t.href=e,t.protocol===x.document.location.protocol&&t.host===x.document.location.host}var Ge,Ye,He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ge=[],Ye=0;var Xe=function e(t,n){if(ue.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ye>=le.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ge.push(i),i}Ye++;var r=!1,a=function(){if(!r)for(r=!0,Ye--;Ge.length&&Ye<le.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Ge.shift(),n=t.requestParameters,i=t.callback;t.cancelled||(t.cancel=e(n,i).cancel)}},o=Ue(t,(function(e,t,i,r){a(),e?n(e):t&&(x.createImageBitmap?function(e,t){var n=new x.Blob([new Uint8Array(e)],{type:"image/png"});x.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,(function(e,t){return n(e,t,i,r)})):function(e,t){var n=new x.Image,i=x.URL;n.onload=function(){t(null,n),i.revokeObjectURL(n.src),n.onload=null,x.requestAnimationFrame((function(){n.src=He}))},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var r=new x.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?i.createObjectURL(r):He}(t,(function(e,t){return n(e,t,i,r)})))}));return{cancel:function(){o.cancel(),a()}}};function qe(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Ke(e,t,n){if(n&&n[e]){var i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}var $e=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,e),O(this,n),this.type=t})),Qe=function(e){f(n,e);var t=m(n);function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,n),t.call(this,"error",O({error:e},i))}return y(n)}($e),Je=function(){function e(){v(this,e)}return y(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},qe(e,t,this._listeners),this}},{key:"off",value:function(e,t){return Ke(e,t,this._listeners),Ke(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var n=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},qe(e,t,this._oneTimeListeners),this):new Promise((function(t){return n.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new $e(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var i,r=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],a=d(r);try{for(a.s();!(i=a.n()).done;)i.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],l=d(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;Ke(n,u,this._oneTimeListeners),u.call(this,e)}}catch(h){l.e(h)}finally{l.f()}var c=this._eventedParent;c&&(O(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof Qe&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function tt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];for(var s in o)e[s]=o[s]}return e}function nt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function it(e){if(Array.isArray(e))return e.map(it);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=it(e[n]);return t}return nt(e)}var rt=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,i)).message=i,r.key=e,r}return y(n)}(p(Error)),at=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];v(this,e),this.parent=t,this.bindings={};var i,r=d(n);try{for(r.s();!(i=r.n()).done;){var a=h(i.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(l){r.e(l)}finally{r.f()}}return y(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),ot={kind:"null"},st={kind:"number"},lt={kind:"string"},ut={kind:"boolean"},ct={kind:"color"},ht={kind:"object"},dt={kind:"value"},pt={kind:"collator"},ft={kind:"formatted"},mt={kind:"resolvedImage"};function vt(e,t){return{kind:"array",itemType:e,N:t}}function yt(e){if("array"===e.kind){var t=yt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var gt=[ot,st,lt,ut,ct,ft,ht,vt(dt),mt];function _t(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!_t(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var n,i=d(gt);try{for(i.s();!(n=i.n()).done;)if(!_t(n.value,t))return null}catch(r){i.e(r)}finally{i.f()}}}return"Expected ".concat(yt(e)," but found ").concat(yt(t)," instead.")}function xt(e,t){return t.some((function(t){return t.kind===e.kind}))}function bt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}function wt(e){var t={exports:{}};return e(t,t.exports),t.exports}var kt=wt((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(e){return(e=Math.round(e))<0?0:e>255?255:e}function r(e){return i("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),h=s.substr(l+1,u-(l+1)).split(","),d=1;switch(c){case"rgba":if(4!==h.length)return null;d=a(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),d];case"hsla":if(4!==h.length)return null;d=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=a(h[1]),m=a(h[2]),v=m<=.5?m*(f+1):m+f-m*f,y=2*m-v;return[i(255*o(y,v,p+1/3)),i(255*o(y,v,p)),i(255*o(y,v,p-1/3)),d];default:return null}}return null}}catch(e){}})),St=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,e),this.r=t,this.g=n,this.b=i,this.a=r}return y(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),n=t[0],i=t[1],r=t[2],a=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(i),",").concat(Math.round(r),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,i=this.a;return 0===i?[0,0,0,0]:[255*e/i,255*t/i,255*n/i,i]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=kt.parseCSSColor(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();St.black=new St(0,0,0,1),St.white=new St(1,1,1,1),St.transparent=new St(0,0,0,0),St.red=new St(1,0,0,1),St.blue=new St(0,0,1,1);var Tt=function(){function e(t,n,i){v(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return y(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Ct=y((function e(t,n,i,r,a){v(this,e),this.text=t.normalize?t.normalize():t,this.image=n,this.scale=i,this.fontStack=r,this.textColor=a})),Et=function(){function e(t){v(this,e),this.sections=t}return y(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=d(this.sections);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var r={};i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(r)}}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new Ct(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Mt=function(){function e(t){v(this,e),this.name=t.name,this.available=t.available}return y(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Pt(e,t,n,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value [".concat([e,t,n,i].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof i?[e,t,n,i]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function At(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof St)return!0;if(e instanceof Tt)return!0;if(e instanceof Et)return!0;if(e instanceof Mt)return!0;if(Array.isArray(e)){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(!At(t.value))return!1}catch(r){n.e(r)}finally{n.f()}return!0}if("object"==typeof e){for(var i in e)if(!At(e[i]))return!1;return!0}return!1}function Dt(e){if(null===e)return ot;if("string"==typeof e)return lt;if("boolean"==typeof e)return ut;if("number"==typeof e)return st;if(e instanceof St)return ct;if(e instanceof Tt)return pt;if(e instanceof Et)return ft;if(e instanceof Mt)return mt;if(Array.isArray(e)){var t,n,i=e.length,r=d(e);try{for(r.s();!(n=r.n()).done;){var a=Dt(n.value);if(t){if(t===a)continue;t=dt;break}t=a}}catch(o){r.e(o)}finally{r.f()}return vt(t||dt,i)}return ht}function It(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof St||e instanceof Et||e instanceof Mt?e.toString():JSON.stringify(e)}var Lt=function(){function e(t,n){v(this,e),this.type=t,this.value=n}return y(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof St?["rgba"].concat(this.value.toArray()):this.value instanceof Et?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!At(t[1]))return n.error("invalid value");var i=t[1],r=Dt(i),a=n.expectedType;return"array"!==r.kind||0!==r.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(r=a),new e(r,i)}}]),e}(),Ot=function(){function e(t){v(this,e),this.name="ExpressionEvaluationError",this.message=t}return y(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),zt={string:lt,number:st,boolean:ut,object:ht},Rt=function(){function e(t,n){v(this,e),this.type=t,this.args=n}return y(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!_t(this.type,Dt(n)))return n;if(t===this.args.length-1)throw new Ot("Expected value to be of type ".concat(yt(this.type),", but found ").concat(yt(Dt(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var i=e.N;("number"==typeof i||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i,r=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var l=t[1];if("string"!=typeof l||!(l in zt)||"object"===l)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=zt[l],r++}else o=dt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],r++}i=vt(o,s)}else i=zt[a];for(var u=[];r<t.length;r++){var c=n.parse(t[r],r,dt);if(!c)return null;u.push(c)}return new e(i,u)}}]),e}(),Bt=function(){function e(t){v(this,e),this.type=ft,this.sections=t}return y(e,[{key:"evaluate",value:function(e){return new Et(this.sections.map((function(t){var n=t.content.evaluate(e);return Dt(n)===mt?new Ct("",n,null,null,null):new Ct(It(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=d(this.sections);try{for(n.s();!(t=n.n()).done;){var i=t.value;e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=d(this.sections);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(i.content.serialize());var r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),i.textColor&&(r["text-color"]=i.textColor.serialize()),t.push(r)}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return n.error("First argument must be an image or text section.");for(var r=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var l=null;if(s["font-scale"]&&!(l=n.parse(s["font-scale"],1,st)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,vt(lt))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,ct)))return null;var h=r[r.length-1];h.scale=l,h.font=u,h.textColor=c}else{var d=n.parse(t[o],1,dt);if(!d)return null;var p=d.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,r.push({content:d,scale:null,font:null,textColor:null})}}return new e(r)}}]),e}(),Ft=function(){function e(t){v(this,e),this.type=mt,this.input=t}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Mt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,lt);return i?new e(i):n.error("No image name provided.")}}]),e}(),Nt={"to-boolean":ut,"to-color":ct,"to-number":st,"to-string":lt},jt=function(){function e(t,n){v(this,e),this.type=t,this.args=n}return y(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,i,r=d(this.args);try{for(r.s();!(i=r.n()).done;){if(t=i.value.evaluate(e),n=null,t instanceof St)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Pt(t[0],t[1],t[2],t[3])))return new St(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){r.e(c)}finally{r.f()}throw new Ot(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,l=d(this.args);try{for(l.s();!(o=l.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(c){l.e(c)}finally{l.f()}throw new Ot("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Et.fromString(It(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Mt.fromString(It(this.args[0].evaluate(e))):It(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new Bt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ft(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return n.error("Expected one argument.");for(var r=Nt[i],a=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,dt);if(!s)return null;a.push(s)}return new e(r,a)}}]),e}(),Ut=["Unknown","Point","LineString","Polygon"],Vt=function(){function e(){v(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return y(e,[{key:"id",value:function(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?Ut[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,n=this.featureTileCoord,i=n.x,r=n.y;return this.featureDistanceData.bearing[0]*(i*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=St.parse(e)),t}}]),e}(),Zt=function(){function e(t,n,i,r){v(this,e),this.name=t,this.type=n,this._evaluate=i,this.args=r}return y(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var i,r=t[0],a=e.definitions[r];if(!a)return n.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,l=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=l.filter((function(e){var n=h(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),p=null,f=d(u);try{for(f.s();!(o=f.n()).done;){var m=h(o.value,2),v=m[0],y=m[1];p=new pn(n.registry,n.path,null,n.scope);for(var g=[],_=!1,x=1;x<t.length;x++){var b=t[x],w=Array.isArray(v)?v[x-1]:v.type,k=p.parse(b,1+g.length,w);if(!k){_=!0;break}g.push(k)}if(!_)if(Array.isArray(v)&&v.length!==g.length)p.error("Expected ".concat(v.length," arguments, but found ").concat(g.length," instead."));else{for(var S=0;S<g.length;S++){var T=Array.isArray(v)?v[S]:v.type,C=g[S];p.concat(S+1).checkSubtype(T,C.type)}if(0===p.errors.length)return new e(r,s,y,g)}}}catch(D){f.e(D)}finally{f.f()}if(1===u.length)(i=n.errors).push.apply(i,c(p.errors));else{for(var E=(u.length?u:l).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(yt).join(", "),")"):"(".concat(yt(t.type),"...)")})).join(" | "),M=[],P=1;P<t.length;P++){var A=n.parse(t[P],1+M.length);if(!A)return null;M.push(yt(A.type))}n.error("Expected arguments of type ".concat(E,", but found (").concat(M.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var i in e.definitions=n,n)t[i]=e}}]),e}(),Wt=function(){function e(t,n,i){v(this,e),this.type=pt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n}return y(e,[{key:"evaluate",value:function(e){return new Tt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return n.error("Collator options argument must be an object.");var r=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,ut);if(!r)return null;var a=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,ut);if(!a)return null;var o=null;return i.locale&&!(o=n.parse(i.locale,1,lt))?null:new e(r,a,o)}}]),e}(),Gt=8192;function Yt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ht(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Xt(e,t){var n=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,r=Math.pow(2,t.z);return[Math.round(n*r*Gt),Math.round(i*r*Gt)]}function qt(e,t,n){var i=e[0]-t[0],r=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return i*o-a*r==0&&i*a<=0&&r*o<=0}function Kt(e,t){for(var n,i,r,a=!1,o=0,s=t.length;o<s;o++)for(var l=t[o],u=0,c=l.length;u<c-1;u++){if(qt(e,l[u],l[u+1]))return!1;(i=l[u])[1]>(n=e)[1]!=(r=l[u+1])[1]>n[1]&&n[0]<(r[0]-i[0])*(n[1]-i[1])/(r[1]-i[1])+i[0]&&(a=!a)}return a}function $t(e,t){for(var n=0;n<t.length;n++)if(Kt(e,t[n]))return!0;return!1}function Qt(e,t,n,i){var r=i[0]-n[0],a=i[1]-n[1],o=(e[0]-n[0])*a-r*(e[1]-n[1]),s=(t[0]-n[0])*a-r*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function Jt(e,t,n){var i,r,a,o,s,l,u,c=d(n);try{for(c.s();!(i=c.n()).done;)for(var h=i.value,p=0;p<h.length-1;++p)if(0!=(l=[(s=h[p+1])[0]-(o=h[p])[0],s[1]-o[1]])[0]*(u=[(a=t)[0]-(r=e)[0],a[1]-r[1]])[1]-l[1]*u[0]&&Qt(r,a,o,s)&&Qt(o,s,r,a))return!0}catch(f){c.e(f)}finally{c.f()}return!1}function en(e,t){for(var n=0;n<e.length;++n)if(!Kt(e[n],t))return!1;for(var i=0;i<e.length-1;++i)if(Jt(e[i],e[i+1],t))return!1;return!0}function tn(e,t){for(var n=0;n<t.length;n++)if(en(e,t[n]))return!0;return!1}function nn(e,t,n){for(var i=[],r=0;r<e.length;r++){for(var a=[],o=0;o<e[r].length;o++){var s=Xt(e[r][o],n);Yt(t,s),a.push(s)}i.push(a)}return i}function rn(e,t,n){for(var i=[],r=0;r<e.length;r++){var a=nn(e[r],t,n);i.push(a)}return i}function an(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){var r=.5*i,a=e[0]-n[0]>r?-i:n[0]-e[0]>r?i:0;0===a&&(a=e[0]-n[2]>r?-i:n[2]-e[0]>r?i:0),e[0]+=a}Yt(t,e)}function on(e,t,n,i){var r=Math.pow(2,i.z)*Gt,a=[i.x*Gt,i.y*Gt],o=[];if(!e)return o;var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var u,c=s.value,h=d(c);try{for(h.s();!(u=h.n()).done;){var p=u.value,f=[p.x+a[0],p.y+a[1]];an(f,t,n,r),o.push(f)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){l.e(m)}finally{l.f()}return o}function sn(e,t,n,i){var r=Math.pow(2,i.z)*Gt,a=[i.x*Gt,i.y*Gt],o=[];if(!e)return o;var s,l,u=d(e);try{for(u.s();!(s=u.n()).done;){var c,h=s.value,p=[],f=d(h);try{for(f.s();!(c=f.n()).done;){var m=c.value,v=[m.x+a[0],m.y+a[1]];Yt(t,v),p.push(v)}}catch(w){f.e(w)}finally{f.f()}o.push(p)}}catch(w){u.e(w)}finally{u.f()}if(t[2]-t[0]<=r/2){(l=t)[0]=l[1]=1/0,l[2]=l[3]=-1/0;var y,g=d(o);try{for(g.s();!(y=g.n()).done;){var _,x=y.value,b=d(x);try{for(b.s();!(_=b.n()).done;)an(_.value,t,n,r)}catch(w){b.e(w)}finally{b.f()}}}catch(w){g.e(w)}finally{g.f()}}return o}var ln=function(){function e(t,n){v(this,e),this.type=ut,this.geojson=t,this.geometries=n}return y(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if(!r)return!1;if("Polygon"===t.type){var a=nn(t.coordinates,i,r),o=on(e.geometry(),n,i,r);if(!Ht(n,i))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!Kt(s.value,a))return!1}catch(f){l.e(f)}finally{l.f()}}if("MultiPolygon"===t.type){var u=rn(t.coordinates,i,r),c=on(e.geometry(),n,i,r);if(!Ht(n,i))return!1;var h,p=d(c);try{for(p.s();!(h=p.n()).done;)if(!$t(h.value,u))return!1}catch(f){p.e(f)}finally{p.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if(!r)return!1;if("Polygon"===t.type){var a=nn(t.coordinates,i,r),o=sn(e.geometry(),n,i,r);if(!Ht(n,i))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!en(s.value,a))return!1}catch(f){l.e(f)}finally{l.f()}}if("MultiPolygon"===t.type){var u=rn(t.coordinates,i,r),c=sn(e.geometry(),n,i,r);if(!Ht(n,i))return!1;var h,p=d(c);try{for(p.s();!(h=p.n()).done;)if(!tn(h.value,u))return!1}catch(f){p.e(f)}finally{p.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(At(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var a=i.features[r].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new e(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}();function un(e){if(e instanceof Zt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof ln)return!1;var t=!0;return e.eachChild((function(e){t&&!un(e)&&(t=!1)})),t}function cn(e){if(e instanceof Zt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!cn(e)&&(t=!1)})),t}function hn(e,t){if(e instanceof Zt&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!hn(e,t)&&(n=!1)})),n}var dn=function(){function e(t,n){v(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return y(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var i=t[1];return n.scope.has(i)?new e(i,n.scope.get(i)):n.error('Unknown variable "'.concat(i,'". Make sure "').concat(i,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),pn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new at,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];v(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=r,this.errors=a,this.expectedType=i}return y(e,[{key:"parse",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,i)._parse(e,r):this._parse(e,r)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new Rt(t,[e]):"coerce"===n?new jt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=e[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found ".concat(typeof i,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var r=this.registry[i];if(r){var a=r.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,t.typeAnnotation||"coerce");else a=n(a,o,t.typeAnnotation||"assert")}if(!(a instanceof Lt)&&"resolvedImage"!==a.type.kind&&fn(a)){var l=new Vt;try{a=new Lt(a.type,a.evaluate(l))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,i){var r="number"==typeof t?this.path.concat(t):this.path,a=i?this.scope.concat(i):this.scope;return new e(this.registry,r,n||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new rt(r,e))}},{key:"checkSubtype",value:function(e,t){var n=_t(e,t);return n&&this.error(n),n}}]),e}();function fn(e){if(e instanceof dn)return fn(e.boundExpression);if(e instanceof Zt&&"error"===e.name)return!1;if(e instanceof Wt)return!1;if(e instanceof ln)return!1;var t=e instanceof jt||e instanceof Rt,n=!0;return e.eachChild((function(e){n=t?n&&fn(e):n&&e instanceof Lt})),!!n&&un(e)&&hn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function mn(e,t){for(var n,i,r=e.length-1,a=0,o=r,s=0;a<=o;)if(n=e[s=Math.floor((a+o)/2)],i=e[s+1],n<=t){if(s===r||t<i)return s;a=s+1}else{if(!(n>t))throw new Ot("Input is not a number.");o=s-1}return 0}var vn=function(){function e(t,n,i){v(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var r,a=d(i);try{for(a.s();!(r=a.n()).done;){var o=h(r.value,2),s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}}catch(u){a.e(u)}finally{a.f()}}return y(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);var r=t.length;return i>=t[r-1]?n[r-1].evaluate(e):n[mn(t,i)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=d(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var i=n.parse(t[1],1,st);if(!i)return null;var r=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],l=t[o+1],u=o,c=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(l,c,a);if(!h)return null;a=a||h.type,r.push([s,h])}return new e(a,i,r)}}]),e}();function yn(e,t,n){return e*(1-n)+t*n}var gn=Object.freeze({__proto__:null,number:yn,color:function(e,t,n){return new St(yn(e.r,t.r,n),yn(e.g,t.g,n),yn(e.b,t.b,n),yn(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,i){return yn(e,t[i],n)}))}}),_n=.95047,xn=1.08883,bn=4/29,wn=6/29,kn=3*wn*wn,Sn=Math.PI/180,Tn=180/Math.PI;function Cn(e){return e>.008856451679035631?Math.pow(e,1/3):e/kn+bn}function En(e){return e>wn?e*e*e:kn*(e-bn)}function Mn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Pn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function An(e){var t=Pn(e.r),n=Pn(e.g),i=Pn(e.b),r=Cn((.4124564*t+.3575761*n+.1804375*i)/_n),a=Cn((.2126729*t+.7151522*n+.072175*i)/1);return{l:116*a-16,a:500*(r-a),b:200*(a-Cn((.0193339*t+.119192*n+.9503041*i)/xn)),alpha:e.a}}function Dn(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,i=isNaN(e.b)?t:t-e.b/200;return t=1*En(t),n=_n*En(n),i=xn*En(i),new St(Mn(3.2404542*n-1.5371385*t-.4985314*i),Mn(-.969266*n+1.8760108*t+.041556*i),Mn(.0556434*n-.2040259*t+1.0572252*i),e.alpha)}function In(e,t,n){var i=t-e;return e+n*(i>180||i<-180?i-360*Math.round(i/360):i)}var Ln={forward:An,reverse:Dn,interpolate:function(e,t,n){return{l:yn(e.l,t.l,n),a:yn(e.a,t.a,n),b:yn(e.b,t.b,n),alpha:yn(e.alpha,t.alpha,n)}}},On={forward:function(e){var t=An(e),n=t.l,i=t.a,r=t.b,a=Math.atan2(r,i)*Tn;return{h:a<0?a+360:a,c:Math.sqrt(i*i+r*r),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Sn,n=e.c;return Dn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:In(e.h,t.h,n),c:yn(e.c,t.c,n),l:yn(e.l,t.l,n),alpha:yn(e.alpha,t.alpha,n)}}},zn=Object.freeze({__proto__:null,lab:Ln,hcl:On}),Rn=function(){function e(t,n,i,r,a){v(this,e),this.type=t,this.operator=n,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];var o,s=d(a);try{for(s.s();!(o=s.n()).done;){var l=h(o.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(p){s.e(p)}finally{s.f()}}return y(e,[{key:"evaluate",value:function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=n[0])return i[0].evaluate(t);var a=n.length;if(r>=n[a-1])return i[a-1].evaluate(t);var o=mn(n,r),s=e.interpolationFactor(this.interpolation,r,n[o],n[o+1]),l=i[o].evaluate(t),u=i[o+1].evaluate(t);return"interpolate"===this.operator?gn[this.type.kind.toLowerCase()](l,u,s):"interpolate-hcl"===this.operator?On.reverse(On.interpolate(On.forward(l),On.forward(u),s)):Ln.reverse(Ln.interpolate(Ln.forward(l),Ln.forward(u),s))}},{key:"eachChild",value:function(e){e(this.input);var t,n=d(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,i,r){var a=0;if("exponential"===e.name)a=Bn(t,e.base,i,r);else if("linear"===e.name)a=Bn(t,1,i,r);else if("cubic-bezier"===e.name){var o=e.controlPoints;a=new n(o[0],o[1],o[2],o[3]).solve(Bn(t,1,i,r))}return a}},{key:"parse",value:function(t,n){var i=u(t),r=i[0],a=i[1],o=i[2],s=i.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,st)))return null;var h=[],d=null;"interpolate-hcl"===r||"interpolate-lab"===r?d=ct:n.expectedType&&"value"!==n.expectedType.kind&&(d=n.expectedType);for(var p=0;p<s.length;p+=2){var f=s[p],m=s[p+1],v=p+3,y=p+4;if("number"!=typeof f)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(h.length&&h[h.length-1][0]>=f)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var g=n.parse(m,y,d);if(!g)return null;d=d||g.type,h.push([f,g])}return"number"===d.kind||"color"===d.kind||"array"===d.kind&&"number"===d.itemType.kind&&"number"==typeof d.N?new e(d,r,a,o,h):n.error("Type ".concat(yt(d)," is not interpolatable."))}}]),e}();function Bn(e,t,n,i){var r=i-n,a=e-n;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}var Fn=function(){function e(t,n){v(this,e),this.type=t,this.args=n}return y(e,[{key:"evaluate",value:function(e){var t,n,i=null,r=0,a=d(this.args);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(r++,(i=o.evaluate(e))&&i instanceof Mt&&!i.available&&(t||(t=i),i=null,r===this.args.length))return t;if(null!==i)break}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var i=null,r=n.expectedType;r&&"value"!==r.kind&&(i=r);var a,o=[],s=d(t.slice(1));try{for(s.s();!(a=s.n()).done;){var l=a.value,u=n.parse(l,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!u)return null;i=i||u.type,o.push(u)}}catch(h){s.e(h)}finally{s.f()}var c=r&&o.some((function(e){return _t(r,e.type)}));return new e(c?dt:i,o)}}]),e}(),Nn=function(){function e(t,n){v(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return y(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=d(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(i){n.e(i)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=d(this.bindings);try{for(n.s();!(e=n.n()).done;){var i=h(e.value,2),r=i[0],a=i[1];t.push(r,a.serialize())}}catch(o){n.e(o)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var i=[],r=1;r<t.length-1;r+=2){var a=t[r];if("string"!=typeof a)return n.error("Expected string, but found ".concat(typeof a," instead."),r);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=n.parse(t[r+1],r+1);if(!o)return null;i.push([a,o])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return s?new e(i,s):null}}]),e}(),jn=function(){function e(t,n,i){v(this,e),this.type=t,this.index=n,this.input=i}return y(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Ot("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new Ot("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new Ot("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,st),r=n.parse(t[2],2,vt(n.expectedType||dt));return i&&r?new e(r.type.itemType,i,r):null}}]),e}(),Un=function(){function e(t,n){v(this,e),this.type=ut,this.needle=t,this.haystack=n}return y(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!bt(t,["boolean","string","number","null"]))throw new Ot("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(Dt(t))," instead."));if(!bt(n,["string","array"]))throw new Ot("Expected second argument to be of type array or string, but found ".concat(yt(Dt(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,dt),r=n.parse(t[2],2,dt);return i&&r?xt(i.type,[ut,lt,st,ot,dt])?new e(i,r):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(i.type)," instead")):null}}]),e}(),Vn=function(){function e(t,n,i){v(this,e),this.type=st,this.needle=t,this.haystack=n,this.fromIndex=i}return y(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!bt(t,["boolean","string","number","null"]))throw new Ot("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(Dt(t))," instead."));if(!bt(n,["string","array"]))throw new Ot("Expected second argument to be of type array or string, but found ".concat(yt(Dt(n))," instead."));if(this.fromIndex){var i=this.fromIndex.evaluate(e);return n.indexOf(t,i)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,dt),r=n.parse(t[2],2,dt);if(!i||!r)return null;if(!xt(i.type,[ut,lt,st,ot,dt]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(yt(i.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,st);return a?new e(i,r,a):null}return new e(i,r)}}]),e}(),Zn=function(){function e(t,n,i,r,a,o){v(this,e),this.inputType=t,this.type=n,this.input=i,this.cases=r,this.outputs=a,this.otherwise=o}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Dt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),r=[],a={},o=d(i);try{for(o.s();!(e=o.n()).done;){var s=e.value,l=a[this.cases[s]];void 0===l?(a[this.cases[s]]=r.length,r.push([this.cases[s],[s]])):r[l][1].push(s)}}catch(y){o.e(y)}finally{o.f()}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,p=r;c<p.length;c++){var f=h(p[c],2),m=f[0],v=f[1];n.push(1===v.length?u(v[0]):v.map(u)),n.push(this.outputs[m].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var i,r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var l=t[s],u=t[s+1];Array.isArray(l)||(l=[l]);var c=n.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,p=d(l);try{for(p.s();!(h=p.n()).done;){var f=h.value;if("number"!=typeof f&&"string"!=typeof f)return c.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof f&&Math.floor(f)!==f)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,Dt(f)))return null}else i=Dt(f);if(void 0!==a[String(f)])return c.error("Branch labels must be unique.");a[String(f)]=o.length}}catch(g){p.e(g)}finally{p.f()}var m=n.parse(u,s,r);if(!m)return null;r=r||m.type,o.push(m)}var v=n.parse(t[1],1,dt);if(!v)return null;var y=n.parse(t[t.length-1],t.length-1,r);return y?"value"!==v.type.kind&&n.concat(1).checkSubtype(i,v.type)?null:new e(i,r,v,a,o,y):null}}]),e}(),Wn=function(){function e(t,n,i){v(this,e),this.type=t,this.branches=n,this.otherwise=i}return y(e,[{key:"evaluate",value:function(e){var t,n=d(this.branches);try{for(n.s();!(t=n.n()).done;){var i=h(t.value,2),r=i[0],a=i[1];if(r.evaluate(e))return a.evaluate(e)}}catch(o){n.e(o)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=d(this.branches);try{for(n.s();!(t=n.n()).done;){var i=h(t.value,2),r=i[0],a=i[1];e(r),e(a)}}catch(o){n.e(o)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var r=[],a=1;a<t.length-1;a+=2){var o=n.parse(t[a],a,ut);if(!o)return null;var s=n.parse(t[a+1],a+1,i);if(!s)return null;r.push([o,s]),i=i||s.type}var l=n.parse(t[t.length-1],t.length-1,i);return l?new e(i,r,l):null}}]),e}(),Gn=function(){function e(t,n,i,r){v(this,e),this.type=t,this.input=n,this.beginIndex=i,this.endIndex=r}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!bt(t,["string","array"]))throw new Ot("Expected first argument to be of type array or string, but found ".concat(yt(Dt(t))," instead."));if(this.endIndex){var i=this.endIndex.evaluate(e);return t.slice(n,i)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1,dt),r=n.parse(t[2],2,st);if(!i||!r)return null;if(!xt(i.type,[vt(dt),lt,dt]))return n.error("Expected first argument to be of type array or string, but found ".concat(yt(i.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,st);return a?new e(i.type,i,r,a):null}return new e(i.type,i,r)}}]),e}();function Yn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Hn(e,t,n,i){return 0===i.compare(t,n)}function Xn(e,t,n){var i="=="!==e&&"!="!==e;return function(){function r(e,t,n){v(this,r),this.type=ut,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return y(r,[{key:"evaluate",value:function(r){var a=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){var s=Dt(a),l=Dt(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new Ot('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!i&&this.hasUntypedArgument){var u=Dt(a),c=Dt(o);if("string"!==u.kind||"string"!==c.kind)return t(r,a,o)}return this.collator?n(r,a,o,this.collator.evaluate(r)):t(r,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,dt);if(!a)return null;if(!Yn(n,a.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(yt(a.type),"'."));var o=t.parse(e[2],2,dt);if(!o)return null;if(!Yn(n,o.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(yt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(yt(a.type),"' and '").concat(yt(o.type),"'."));i&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Rt(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Rt(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,pt)))return null}return new r(a,o,s)}}]),r}()}var qn=Xn("==",(function(e,t,n){return t===n}),Hn),Kn=Xn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,i){return!Hn(0,t,n,i)})),$n=Xn("<",(function(e,t,n){return t<n}),(function(e,t,n,i){return i.compare(t,n)<0})),Qn=Xn(">",(function(e,t,n){return t>n}),(function(e,t,n,i){return i.compare(t,n)>0})),Jn=Xn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,i){return i.compare(t,n)<=0})),ei=Xn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,i){return i.compare(t,n)>=0})),ti=function(){function e(t,n,i,r,a){v(this,e),this.type=lt,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=a}return y(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,st);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return n.error("NumberFormat options argument must be an object.");var a=null;if(r.locale&&!(a=n.parse(r.locale,1,lt)))return null;var o=null;if(r.currency&&!(o=n.parse(r.currency,1,lt)))return null;var s=null;if(r["min-fraction-digits"]&&!(s=n.parse(r["min-fraction-digits"],1,st)))return null;var l=null;return r["max-fraction-digits"]&&!(l=n.parse(r["max-fraction-digits"],1,st))?null:new e(i,a,o,s,l)}}]),e}(),ni=function(){function e(t){v(this,e),this.type=st,this.input=t}return y(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Ot("Expected value to be of type string or array, but found ".concat(yt(Dt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var i=n.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error("Expected argument of type string or array, but found ".concat(yt(i.type)," instead.")):new e(i):null}}]),e}(),ii={"==":qn,"!=":Kn,">":Qn,"<":$n,">=":ei,"<=":Jn,array:Rt,at:jn,boolean:Rt,case:Wn,coalesce:Fn,collator:Wt,format:Bt,image:Ft,in:Un,"index-of":Vn,interpolate:Rn,"interpolate-hcl":Rn,"interpolate-lab":Rn,length:ni,let:Nn,literal:Lt,match:Zn,number:Rt,"number-format":ti,object:Rt,slice:Gn,step:vn,string:Rt,"to-boolean":jt,"to-color":jt,"to-number":jt,"to-string":jt,var:dn,within:ln};function ri(e,t){var n=h(t,4),i=n[0],r=n[1],a=n[2],o=n[3];i=i.evaluate(e),r=r.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,l=Pt(i,r,a,s);if(l)throw new Ot(l);return new St(i/255*s,r/255*s,a/255*s,s)}function ai(e,t){return e in t}function oi(e,t){var n=t[e];return void 0===n?null:n}function si(e){return{type:e}}function li(e){return{result:"success",value:e}}function ui(e){return{result:"error",value:e}}function ci(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function hi(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function di(e){return!!e.expression&&e.expression.interpolated}function pi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function fi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function mi(e){return e}function vi(e,t){var n,i,r,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),l=e.type||(di(t)?"exponential":"interval");if(a&&((e=tt({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],St.parse(e[1])]}))),e.default=St.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!zn[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===l)n=xi;else if("interval"===l)n=_i;else if("categorical"===l){n=gi,i=Object.create(null);var u,c=d(e.stops);try{for(c.s();!(u=c.n()).done;){var h=u.value;i[h[0]]=h[1]}}catch(S){c.e(S)}finally{c.f()}r=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));n=bi}if(o){for(var p={},f=[],m=0;m<e.stops.length;m++){var v=e.stops[m],y=v[0].zoom;void 0===p[y]&&(p[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},f.push(y)),p[y].stops.push([v[0].value,v[1]])}for(var g=[],_=0,x=f;_<x.length;_++){var b=x[_];g.push([p[b].zoom,vi(p[b],t)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:Rn.interpolationFactor.bind(void 0,w),zoomStops:g.map((function(e){return e[0]})),evaluate:function(n,i){var r=n.zoom;return xi({stops:g,base:e.base},t,r).evaluate(r,i)}}}if(s){var k="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:Rn.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return n(e,t,o,i,r)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?yi(e.default,t.default):n(e,t,s,i,r)}}}function yi(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function gi(e,t,n,i,r){return yi(typeof n===r?i[n]:void 0,e.default,t.default)}function _i(e,t,n){if("number"!==pi(n))return yi(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var r=mn(e.stops.map((function(e){return e[0]})),n);return e.stops[r][1]}function xi(e,t,n){var i=void 0!==e.base?e.base:1;if("number"!==pi(n))return yi(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var a=mn(e.stops.map((function(e){return e[0]})),n),o=function(e,t,n,i){var r=i-n,a=e-n;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}(n,i,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1],u=gn[t.type]||mi;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=zn[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=s.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return u(i,r,o)}}:u(s,l,o)}function bi(e,t,n){return"color"===t.type?n=St.parse(n):"formatted"===t.type?n=Et.fromString(n.toString()):"resolvedImage"===t.type?n=Mt.fromString(n.toString()):pi(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),yi(n,e.default,t.default)}Zt.register(ii,{error:[{kind:"error"},[lt],function(e,t){var n=h(t,1)[0];throw new Ot(n.evaluate(e))}],typeof:[lt,[dt],function(e,t){return yt(Dt(h(t,1)[0].evaluate(e)))}],"to-rgba":[vt(st,4),[ct],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[ct,[st,st,st],ri],rgba:[ct,[st,st,st,st],ri],has:{type:ut,overloads:[[[lt],function(e,t){return ai(h(t,1)[0].evaluate(e),e.properties())}],[[lt,ht],function(e,t){var n=h(t,2),i=n[0],r=n[1];return ai(i.evaluate(e),r.evaluate(e))}]]},get:{type:dt,overloads:[[[lt],function(e,t){return oi(h(t,1)[0].evaluate(e),e.properties())}],[[lt,ht],function(e,t){var n=h(t,2),i=n[0],r=n[1];return oi(i.evaluate(e),r.evaluate(e))}]]},"feature-state":[dt,[lt],function(e,t){return oi(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[ht,[],function(e){return e.properties()}],"geometry-type":[lt,[],function(e){return e.geometryType()}],id:[dt,[],function(e){return e.id()}],zoom:[st,[],function(e){return e.globals.zoom}],pitch:[st,[],function(e){return e.globals.pitch||0}],"distance-from-center":[st,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[st,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[st,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[st,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[dt,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[st,si(st),function(e,t){var n,i=0,r=d(t);try{for(r.s();!(n=r.n()).done;)i+=n.value.evaluate(e)}catch(a){r.e(a)}finally{r.f()}return i}],"*":[st,si(st),function(e,t){var n,i=1,r=d(t);try{for(r.s();!(n=r.n()).done;)i*=n.value.evaluate(e)}catch(a){r.e(a)}finally{r.f()}return i}],"-":{type:st,overloads:[[[st,st],function(e,t){var n=h(t,2),i=n[0],r=n[1];return i.evaluate(e)-r.evaluate(e)}],[[st],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[st,[st,st],function(e,t){var n=h(t,2),i=n[0],r=n[1];return i.evaluate(e)/r.evaluate(e)}],"%":[st,[st,st],function(e,t){var n=h(t,2),i=n[0],r=n[1];return i.evaluate(e)%r.evaluate(e)}],ln2:[st,[],function(){return Math.LN2}],pi:[st,[],function(){return Math.PI}],e:[st,[],function(){return Math.E}],"^":[st,[st,st],function(e,t){var n=h(t,2),i=n[0],r=n[1];return Math.pow(i.evaluate(e),r.evaluate(e))}],sqrt:[st,[st],function(e,t){var n=h(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[st,[st],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[st,[st],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))}],log2:[st,[st],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[st,[st],function(e,t){var n=h(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[st,[st],function(e,t){var n=h(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[st,[st],function(e,t){var n=h(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[st,[st],function(e,t){var n=h(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[st,[st],function(e,t){var n=h(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[st,[st],function(e,t){var n=h(t,1)[0];return Math.atan(n.evaluate(e))}],min:[st,si(st),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[st,si(st),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[st,[st],function(e,t){var n=h(t,1)[0];return Math.abs(n.evaluate(e))}],round:[st,[st],function(e,t){var n=h(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[st,[st],function(e,t){var n=h(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[st,[st],function(e,t){var n=h(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[ut,[lt,dt],function(e,t){var n=h(t,2),i=n[0],r=n[1];return e.properties()[i.value]===r.value}],"filter-id-==":[ut,[dt],function(e,t){var n=h(t,1)[0];return e.id()===n.value}],"filter-type-==":[ut,[lt],function(e,t){var n=h(t,1)[0];return e.geometryType()===n.value}],"filter-<":[ut,[lt,dt],function(e,t){var n=h(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a<o}],"filter-id-<":[ut,[dt],function(e,t){var n=h(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[ut,[lt,dt],function(e,t){var n=h(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a>o}],"filter-id->":[ut,[dt],function(e,t){var n=h(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[ut,[lt,dt],function(e,t){var n=h(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[ut,[dt],function(e,t){var n=h(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[ut,[lt,dt],function(e,t){var n=h(t,2),i=n[0],r=n[1],a=e.properties()[i.value],o=r.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[ut,[dt],function(e,t){var n=h(t,1)[0],i=e.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[ut,[dt],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[ut,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[ut,[vt(lt)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[ut,[vt(dt)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[ut,[lt,vt(dt)],function(e,t){var n=h(t,2),i=n[0];return n[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[ut,[lt,vt(dt)],function(e,t){var n=h(t,2),i=n[0],r=n[1];return function(e,t,n,i){for(;n<=i;){var r=n+i>>1;if(t[r]===e)return!0;t[r]>e?i=r-1:n=r+1}return!1}(e.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:ut,overloads:[[[ut,ut],function(e,t){var n=h(t,2),i=n[0],r=n[1];return i.evaluate(e)&&r.evaluate(e)}],[si(ut),function(e,t){var n,i=d(t);try{for(i.s();!(n=i.n()).done;)if(!n.value.evaluate(e))return!1}catch(r){i.e(r)}finally{i.f()}return!0}]]},any:{type:ut,overloads:[[[ut,ut],function(e,t){var n=h(t,2),i=n[0],r=n[1];return i.evaluate(e)||r.evaluate(e)}],[si(ut),function(e,t){var n,i=d(t);try{for(i.s();!(n=i.n()).done;)if(n.value.evaluate(e))return!0}catch(r){i.e(r)}finally{i.f()}return!1}]]},"!":[ut,[ut],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[ut,[lt],function(e,t){var n=h(t,1)[0],i=e.globals&&e.globals.isSupportedScript;return!i||i(n.evaluate(e))}],upcase:[lt,[lt],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[lt,[lt],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[lt,si(dt),function(e,t){return t.map((function(t){return It(t.evaluate(e))})).join("")}],"resolved-locale":[lt,[pt],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var wi=function(){function e(t,n){v(this,e),this.expression=t,this._warningHistory={},this._evaluator=new Vt,this._defaultValue=n?function(e){return"color"===e.type&&fi(e.default)?new St(0,0,0,0):"color"===e.type?St.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return y(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,i,r,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,i,r,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new Ot("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(l)," instead."));return l}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function ki(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in ii}function Si(e,t){var n=new pn(ii,[],t?function(e){var t={color:ct,string:lt,number:st,enum:lt,boolean:ut,formatted:ft,resolvedImage:mt};return"array"===e.type?vt(t[e.value]||dt,e.length):t[e.type]}(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?li(new wi(i,t)):ui(n.errors)}var Ti=function(){function e(t,n){v(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!cn(n.expression)}return y(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,i,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,a)}},{key:"evaluate",value:function(e,t,n,i,r,a){return this._styleExpression.evaluate(e,t,n,i,r,a)}}]),e}(),Ci=function(){function e(t,n,i,r){v(this,e),this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==t&&!cn(n.expression),this.interpolationType=r}return y(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,i,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,a)}},{key:"evaluate",value:function(e,t,n,i,r,a){return this._styleExpression.evaluate(e,t,n,i,r,a)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?Rn.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function Ei(e,t){if("error"===(e=Si(e,t)).result)return e;var n=e.value.expression,i=un(n);if(!i&&!ci(t))return ui([new rt("","data expressions not supported")]);var r=hn(n,["zoom","pitch","distance-from-center"]);if(!r&&!hi(t))return ui([new rt("","zoom expressions not supported")]);var a=Pi(n);return a||r?a instanceof rt?ui([a]):a instanceof Rn&&!di(t)?ui([new rt("",'"interpolate" expressions cannot be used with this property')]):li(a?new Ci(i?"camera":"composite",e.value,a.labels,a instanceof Rn?a.interpolation:void 0):new Ti(i?"constant":"source",e.value)):ui([new rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var Mi=function(){function e(t,n){v(this,e),this._parameters=t,this._specification=n,tt(this,vi(this._parameters,this._specification))}return y(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function Pi(e){var t=null;if(e instanceof Nn)t=Pi(e.result);else if(e instanceof Fn){var n,i=d(e.args);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(t=Pi(r))break}}catch(a){i.e(a)}finally{i.f()}}else(e instanceof vn||e instanceof Rn)&&e.input instanceof Zt&&"zoom"===e.input.name&&(t=e);return t instanceof rt||e.eachChild((function(e){var n=Pi(e);n instanceof rt?t=n:!t&&n?t=new rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}var Ai=y((function e(t,n,i,r){v(this,e),this.message=(t?"".concat(t,": "):"")+i,r&&(this.identifier=r),null!=n&&n.__line__&&(this.line=n.__line__)}));function Di(e){var t=e.key,n=e.value,i=e.valueSpec||{},r=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],l=pi(n);if("object"!==l)return[new Ai(t,n,"object expected, ".concat(l," found"))];for(var u in n){var c=u.split(".")[0],h=i[c]||i["*"],d=void 0;r[c]?d=r[c]:i[c]?d=cr:r["*"]?d=r["*"]:i["*"]&&(d=cr),d?s=s.concat(d({key:(t?"".concat(t,"."):t)+u,value:n[u],valueSpec:h,style:a,styleSpec:o,object:n,objectKey:u},n)):s.push(new Ai(t,n[u],'unknown property "'.concat(u,'"')))}for(var p in i)r[p]||i[p].required&&void 0===i[p].default&&void 0===n[p]&&s.push(new Ai(t,n,'missing required property "'.concat(p,'"')));return s}function Ii(e){var t=e.value,n=e.valueSpec,i=e.style,r=e.styleSpec,a=e.key,o=e.arrayElementValidator||cr;if("array"!==pi(t))return[new Ai(a,t,"array expected, ".concat(pi(t)," found"))];if(n.length&&t.length!==n.length)return[new Ai(a,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new Ai(a,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};r.$version<7&&(s.function=n.function),"object"===pi(n.value)&&(s=n.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:i,styleSpec:r,key:"".concat(a,"[").concat(u,"]")}));return l}function Li(e){var t=e.key,n=e.value,i=e.valueSpec,r=pi(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new Ai(t,n,"number expected, ".concat(r," found"))];if("minimum"in i){var a=i.minimum;if("array"===pi(i.minimum)&&(a=i.minimum[e.arrayIndex]),n<a)return[new Ai(t,n,"".concat(n," is less than the minimum value ").concat(a))]}if("maximum"in i){var o=i.maximum;if("array"===pi(i.maximum)&&(o=i.maximum[e.arrayIndex]),n>o)return[new Ai(t,n,"".concat(n," is greater than the maximum value ").concat(o))]}return[]}function Oi(e){var t,n,i,r=e.valueSpec,a=nt(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,l=!s,u="array"===pi(e.value.stops)&&"array"===pi(e.value.stops[0])&&"object"===pi(e.value.stops[0][0]),c=Di({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new Ai(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(Ii({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===pi(n)&&0===n.length&&t.push(new Ai(e.key,n,"array must have at least one stop")),t},default:function(e){return cr({key:e.key,value:e.value,valueSpec:r,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new Ai(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new Ai(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!di(e.valueSpec)&&c.push(new Ai(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!ci(e.valueSpec)?c.push(new Ai(e.key,e.value,"property functions not supported")):s&&!hi(e.valueSpec)&&c.push(new Ai(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==e.value.property||c.push(new Ai(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],a=e.value,s=e.key;if("array"!==pi(a))return[new Ai(s,a,"array expected, ".concat(pi(a)," found"))];if(2!==a.length)return[new Ai(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(u){if("object"!==pi(a[0]))return[new Ai(s,a,"object expected, ".concat(pi(a[0])," found"))];if(void 0===a[0].zoom)return[new Ai(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new Ai(s,a,"object stop key must have value")];var l=nt(a[0].zoom);if("number"!=typeof l)return[new Ai(s,a[0].zoom,"stop zoom values must be numbers")];if(i&&i>l)return[new Ai(s,a[0].zoom,"stop zoom values must appear in ascending order")];l!==i&&(i=l,n=void 0,o={}),t=t.concat(Di({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Li,value:d}}))}else t=t.concat(d({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return ki(it(a[1]))?t.concat([new Ai("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(cr({key:"".concat(s,"[1]"),value:a[1],valueSpec:r,style:e.style,styleSpec:e.styleSpec}))}function d(e,i){var s=pi(e.value),l=nt(e.value),u=null!==e.value?e.value:i;if(t){if(s!==t)return[new Ai(e.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new Ai(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, ".concat(s," found");return ci(r)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ai(e.key,u,c)]}return"categorical"!==a||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&"number"==typeof l&&"number"==typeof n&&void 0!==n&&l<n?[new Ai(e.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===a&&l in o?[new Ai(e.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new Ai(e.key,u,"integer expected, found ".concat(String(l)))]}}function zi(e){var t=("property"===e.expressionContext?Ei:Si)(it(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new Ai("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Ai(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!cn(n))return[new Ai(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return Ri(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!hn(n,["zoom","feature-state"]))return[new Ai(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!un(n))return[new Ai(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ri(e,t){var n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression){var i,r=d(t.valueSpec.expression.parameters);try{for(r.s();!(i=r.n()).done;){var a=i.value;n.delete(a)}}catch(s){r.e(s)}finally{r.f()}}if(0===n.size)return[];var o=[];return e instanceof Zt&&n.has(e.name)?[new Ai(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((function(e){o.push.apply(o,c(Ri(e,t)))})),o)}function Bi(e){var t=e.key,n=e.value,i=e.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(nt(n))&&r.push(new Ai(t,n,"expected one of [".concat(i.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(i.values).indexOf(nt(n))&&r.push(new Ai(t,n,"expected one of [".concat(Object.keys(i.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),r}function Fi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=d(e.slice(1));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!Fi(i)&&"boolean"!=typeof i)return!1}}catch(r){n.e(r)}finally{n.f()}return!0;default:return!0}}function Ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Fi(e)||(e=Yi(e));var n=e,i=!0;try{i=function(e){if(!Vi(e))return e;var t=it(e);return Ui(t),t=ji(t)}(n)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}var r=et["filter_".concat(t)],a=Si(i,r),o=null;if("error"===a.result)throw new Error(a.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));o=function(e,t,n){return a.value.evaluate(e,t,{},n)};var s=null,l=null;if(i!==n){var u=Si(n,r);if("error"===u.result)throw new Error(u.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));s=function(e,t,n,i,r){return u.value.evaluate(e,t,{},n,void 0,void 0,i,r)},l=!un(u.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:Gi(i),needFeature:!!l}}function ji(e){if(!Array.isArray(e))return e;var t=function(e){if(Zi.has(e[0]))for(var t=1;t<e.length;t++)if(Vi(e[t]))return!0;return e}(e);return!0===t?t:t.map((function(e){return ji(e)}))}function Ui(e){var t=!1,n=[];if("case"===e[0]){for(var i=1;i<e.length-1;i+=2)t=t||Vi(e[i]),n.push(e[i+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||Vi(e[1]);for(var r=2;r<e.length-1;r+=2)n.push(e[r+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||Vi(e[1]);for(var a=1;a<e.length-1;a+=2)n.push(e[a+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(n)));for(var o=1;o<e.length;o++)Ui(e[o])}function Vi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,n=1;n<e.length;n++)if(Vi(e[n]))return!0;return!1}var Zi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Wi(e,t){return e<t?-1:e>t?1:0}function Gi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Gi(e[t]))return!0;return!1}function Yi(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Hi(e[1],e[2],"=="):"!="===n?Ki(Hi(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Hi(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Yi))):"all"===n?["all"].concat(e.slice(1).map(Yi)):"none"===n?["all"].concat(e.slice(1).map(Yi).map(Ki)):"in"===n?Xi(e[1],e.slice(2)):"!in"===n?Ki(Xi(e[1],e.slice(2))):"has"===n?qi(e[1]):"!has"===n?Ki(qi(e[1])):"within"!==n||e}function Hi(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function Xi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Wi)]]:["filter-in-small",e,["literal",t]]}}function qi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ki(e){return["!",e]}function $i(e){return Fi(it(e.value))?zi(tt({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):Qi(e)}function Qi(e){var t=e.value,n=e.key;if("array"!==pi(t))return[new Ai(n,t,"array expected, ".concat(pi(t)," found"))];var i,r=e.styleSpec,a=[];if(t.length<1)return[new Ai(n,t,"filter array must have at least 1 element")];switch(a=a.concat(Bi({key:"".concat(n,"[0]"),value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),nt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===nt(t[1])&&a.push(new Ai(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new Ai(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(i=pi(t[1]))&&a.push(new Ai("".concat(n,"[1]"),t[1],"string expected, ".concat(i," found")));for(var o=2;o<t.length;o++)i=pi(t[o]),"$type"===nt(t[1])?a=a.concat(Bi({key:"".concat(n,"[").concat(o,"]"),value:t[o],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Ai("".concat(n,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(i," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(Qi({key:"".concat(n,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=pi(t[1]),2!==t.length?a.push(new Ai(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==i&&a.push(new Ai("".concat(n,"[1]"),t[1],"string expected, ".concat(i," found")));break;case"within":i=pi(t[1]),2!==t.length?a.push(new Ai(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==i&&a.push(new Ai("".concat(n,"[1]"),t[1],"object expected, ".concat(i," found")))}return a}function Ji(e,t){var n=e.key,i=e.style,r=e.styleSpec,a=e.value,o=e.objectKey,s=r["".concat(t,"_").concat(e.layerType)];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return cr({key:n,value:a,valueSpec:r.transition,style:i,styleSpec:r});var u,c=e.valueSpec||s[o];if(!c)return[new Ai(n,a,'unknown property "'.concat(o,'"'))];if("string"===pi(a)&&ci(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new Ai(n,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(u[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===o&&i&&!i.glyphs&&h.push(new Ai(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&fi(it(a))&&"identity"===nt(a.type)&&h.push(new Ai(n,a,'"text-font" does not support identity functions'))),h.concat(cr({key:e.key,value:a,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:t,propertyKey:o}))}function er(e){return Ji(e,"paint")}function tr(e){return Ji(e,"layout")}function nr(e){var t=[],n=e.value,i=e.key,r=e.style,a=e.styleSpec;n.type||n.ref||t.push(new Ai(i,n,'either "type" or "ref" is required'));var o,s=nt(n.type),l=nt(n.ref);if(n.id)for(var u=nt(n.id),c=0;c<e.arrayIndex;c++){var h=r.layers[c];nt(h.id)===u&&t.push(new Ai(i,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new Ai(i,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),r.layers.forEach((function(e){nt(e.id)===l&&(o=e)})),o?o.ref?t.push(new Ai(i,n.ref,"ref cannot reference another ref layer")):s=nt(o.type):"string"==typeof l&&t.push(new Ai(i,n.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var d=r.sources&&r.sources[n.source],p=d&&nt(d.type);d?"vector"===p&&"raster"===s?t.push(new Ai(i,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===p&&"raster"!==s?t.push(new Ai(i,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?t.push(new Ai(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&d.lineMetrics||t.push(new Ai(i,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new Ai(i,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new Ai(i,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new Ai(i,n,'missing required property "source"'));return t=t.concat(Di({key:i,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return cr({key:"".concat(i,".type"),value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:function(e){return $i(tt({layerType:s},e))},layout:function(e){return Di({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return tr(tt({layerType:s},e))}}})},paint:function(e){return Di({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return er(tt({layerType:s},e))}}})}}})),t}function ir(e){var t=e.value,n=e.key,i=pi(t);return"string"!==i?[new Ai(n,t,"string expected, ".concat(i," found"))]:[]}var rr={promoteId:function(e){var t=e.key,n=e.value;if("string"===pi(n))return ir({key:t,value:n});var i=[];for(var r in n)i.push.apply(i,c(ir({key:"".concat(t,".").concat(r),value:n[r]})));return i}};function ar(e){var t=e.value,n=e.key,i=e.styleSpec,r=e.style;if(!t.type)return[new Ai(n,t,'"type" is required')];var a,o=nt(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=Di({key:n,value:t,valueSpec:i["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:i,objectElementValidators:rr});case"geojson":if(a=Di({key:n,value:t,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:rr}),t.cluster)for(var s in t.clusterProperties){var l,u,d=h(t.clusterProperties[s],2),p=d[0],f=d[1],m="string"==typeof p?[p,["accumulated"],["get",s]]:p;(l=a).push.apply(l,c(zi({key:"".concat(n,".").concat(s,".map"),value:f,expressionContext:"cluster-map"}))),(u=a).push.apply(u,c(zi({key:"".concat(n,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return a;case"video":return Di({key:n,value:t,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Di({key:n,value:t,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new Ai(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bi({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function or(e){var t=e.value,n=e.styleSpec,i=n.light,r=e.style,a=[],o=pi(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new Ai("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&i[l[1]]&&i[l[1]].transition?cr({key:s,value:t[s],valueSpec:n.transition,style:r,styleSpec:n}):i[s]?cr({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}):[new Ai(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function sr(e){var t=e.value,n=e.key,i=e.style,r=e.styleSpec,a=r.terrain,o=[],s=pi(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new Ai("terrain",t,"object expected, ".concat(s," found"))]);for(var l in t){var u=l.match(/^(.*)-transition$/);o=o.concat(u&&a[u[1]]&&a[u[1]].transition?cr({key:l,value:t[l],valueSpec:r.transition,style:i,styleSpec:r}):a[l]?cr({key:l,value:t[l],valueSpec:a[l],style:i,styleSpec:r}):[new Ai(l,t[l],'unknown property "'.concat(l,'"'))])}if(t.source){var c=i.sources&&i.sources[t.source],h=c&&nt(c.type);c?"raster-dem"!==h&&o.push(new Ai(n,t.source,"terrain cannot be used with a source of type ".concat(String(h),', it only be used with a "raster-dem" source type'))):o.push(new Ai(n,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new Ai(n,t,'terrain is missing required property "source"'));return o}function lr(e){var t=e.value,n=e.style,i=e.styleSpec,r=i.fog,a=[],o=pi(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new Ai("fog",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&r[l[1]]&&r[l[1]].transition?cr({key:s,value:t[s],valueSpec:i.transition,style:n,styleSpec:i}):r[s]?cr({key:s,value:t[s],valueSpec:r[s],style:n,styleSpec:i}):[new Ai(s,t[s],'unknown property "'.concat(s,'"'))])}return a}var ur={"*":function(){return[]},array:Ii,boolean:function(e){var t=e.value,n=e.key,i=pi(t);return"boolean"!==i?[new Ai(n,t,"boolean expected, ".concat(i," found"))]:[]},number:Li,color:function(e){var t=e.key,n=e.value,i=pi(n);return"string"!==i?[new Ai(t,n,"color expected, ".concat(i," found"))]:null===kt.parseCSSColor(n)?[new Ai(t,n,'color expected, "'.concat(n,'" found'))]:[]},enum:Bi,filter:$i,function:Oi,layer:nr,object:Di,source:ar,light:or,terrain:sr,fog:lr,string:ir,formatted:function(e){return 0===ir(e).length?[]:zi(e)},resolvedImage:function(e){return 0===ir(e).length?[]:zi(e)},projection:function(e){var t=e.value,n=e.styleSpec,i=n.projection,r=e.style,a=[],o=pi(t);if("object"===o)for(var s in t)a=a.concat(cr({key:s,value:t[s],valueSpec:i[s],style:r,styleSpec:n}));else"string"!==o&&(a=a.concat([new Ai("projection",t,"object or string expected, ".concat(o," found"))]));return a}};function cr(e){var t=e.value,n=e.valueSpec,i=e.styleSpec;return n.expression&&fi(nt(t))?Oi(e):n.expression&&ki(it(t))?zi(e):n.type&&ur[n.type]?ur[n.type](e):Di(tt({},e,{valueSpec:n.type?i[n.type]:n}))}function hr(e){var t=e.value,n=e.key,i=ir(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new Ai(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new Ai(n,t,'"glyphs" url must include a "{range}" token'))),i}function dr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et;return mr(cr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:hr,"*":function(){return[]}}}))}var pr=function(e){return mr(er(e))},fr=function(e){return mr(tr(e))};function mr(e){return e.slice().sort((function(e,t){return e.line&&t.line?e.line-t.line:0}))}function vr(e,t){var n=!1;if(t&&t.length){var i,r=d(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.fire(new Qe(new Error(a.message))),n=!0}}catch(o){r.e(o)}finally{r.f()}}return n}var yr=gr;function gr(e,t,n){var i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var r=new Int32Array(this.arrayBuffer);e=r[0],this.d=(t=r[1])+2*(n=r[2]);for(var a=0;a<this.d*this.d;a++){var o=r[3+a],s=r[3+a+1];i.push(o===s?null:r.subarray(o,s))}var l=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var u=0;u<this.d*this.d;u++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}gr.prototype.insert=function(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},gr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gr.prototype._insertCell=function(e,t,n,i,r,a){this.cells[r].push(a)},gr.prototype.query=function(e,t,n,i,r){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,i,this._queryCell,s,{},r),s},gr.prototype._queryCell=function(e,t,n,i,r,a,o,s){var l=this.cells[r];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===o[d]){var p=4*d;(s?s(c[p+0],c[p+1],c[p+2],c[p+3]):e<=c[p+2]&&t<=c[p+3]&&n>=c[p+0]&&i>=c[p+1])?(o[d]=!0,a.push(u[d])):o[d]=!1}}},gr.prototype._forEachCell=function(e,t,n,i,r,a,o,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(i),d=l;d<=c;d++)for(var p=u;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&r.call(this,e,t,n,i,f,a,o,s))return}},gr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},gr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},gr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(t+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];r[3+o]=a,r.set(s,a),a+=s.length}return r[3+e.length]=a,r.set(this.keys,a),r[3+e.length+1]=a+=this.keys.length,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer};var _r={};function xr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),_r[t]={klass:e,omit:n.omit||[]}}for(var br in xr(Object,"Object"),yr.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},yr.deserialize=function(e){return new yr(e.buffer)},Object.defineProperty(yr,"name",{value:"Grid"}),xr(yr,"Grid"),xr(St,"Color"),xr(Error,"Error"),xr(Fe,"AJAXError"),xr(Mt,"ResolvedImage"),xr(Mi,"StylePropertyFunction"),xr(wi,"StyleExpression",{omit:["_evaluator"]}),xr(Ci,"ZoomDependentExpression"),xr(Ti,"ZoomConstantExpression"),xr(Zt,"CompoundExpression",{omit:["_evaluate"]}),ii)_r[ii[br]._classRegistryKey]||xr(ii[br],"Expression".concat(br));function wr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function kr(e){return x.ImageBitmap&&e instanceof x.ImageBitmap}function Sr(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(wr(e)||kr(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof x.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var i,r=[],a=d(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;r.push(Sr(o,t))}}catch(h){a.e(h)}finally{a.f()}return r}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class ".concat(l));var u=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)e.hasOwnProperty(c)&&(_r[l].omit.indexOf(c)>=0||(u[c]=Sr(e[c],t)));e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof e)}function Tr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||wr(e)||kr(e)||ArrayBuffer.isView(e)||e instanceof x.ImageData)return e;if(Array.isArray(e))return e.map(Tr);if("object"==typeof e){var t=e.$name||"Object",n=_r[t].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);for(var i=Object.create(n.prototype),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r];"$name"!==o&&(i[o]=Tr(e[o]))}return i}throw new Error("can't deserialize object of type "+typeof e)}var Cr=function(){function e(){v(this,e),this.first=!0}return y(e,[{key:"update",value:function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}]),e}(),Er=function(e){return e>=1536&&e<=1791},Mr=function(e){return e>=1872&&e<=1919},Pr=function(e){return e>=2208&&e<=2303},Ar=function(e){return e>=11904&&e<=12031},Dr=function(e){return e>=12032&&e<=12255},Ir=function(e){return e>=12272&&e<=12287},Lr=function(e){return e>=12288&&e<=12351},Or=function(e){return e>=12352&&e<=12447},zr=function(e){return e>=12448&&e<=12543},Rr=function(e){return e>=12544&&e<=12591},Br=function(e){return e>=12704&&e<=12735},Fr=function(e){return e>=12736&&e<=12783},Nr=function(e){return e>=12784&&e<=12799},jr=function(e){return e>=12800&&e<=13055},Ur=function(e){return e>=13056&&e<=13311},Vr=function(e){return e>=13312&&e<=19903},Zr=function(e){return e>=19968&&e<=40959},Wr=function(e){return e>=40960&&e<=42127},Gr=function(e){return e>=42128&&e<=42191},Yr=function(e){return e>=44032&&e<=55215},Hr=function(e){return e>=63744&&e<=64255},Xr=function(e){return e>=64336&&e<=65023},qr=function(e){return e>=65040&&e<=65055},Kr=function(e){return e>=65072&&e<=65103},$r=function(e){return e>=65104&&e<=65135},Qr=function(e){return e>=65136&&e<=65279},Jr=function(e){return e>=65280&&e<=65519};function ea(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(ia(t.value.charCodeAt(0)))return!0}catch(i){n.e(i)}finally{n.f()}return!1}function ta(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(!na(t.value.charCodeAt(0)))return!1}catch(i){n.e(i)}finally{n.f()}return!0}function na(e){return!(Er(e)||Mr(e)||Pr(e)||Xr(e)||Qr(e))}function ia(e){return!(746!==e&&747!==e&&(e<4352||!(Br(e)||Rr(e)||Kr(e)&&!(e>=65097&&e<=65103)||Hr(e)||Ur(e)||Ar(e)||Fr(e)||!(!Lr(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Vr(e)||Zr(e)||jr(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||Yr(e)||Or(e)||Ir(e)||function(e){return e>=12688&&e<=12703}(e)||Dr(e)||Nr(e)||zr(e)&&12540!==e||!(!Jr(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!$r(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||qr(e)||function(e){return e>=19904&&e<=19967}(e)||Wr(e)||Gr(e))))}function ra(e){return!(ia(e)||function(e){return!!(function(e){return e>=128&&e<=255}(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||function(e){return e>=8192&&e<=8303}(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||function(e){return e>=8448&&e<=8527}(e)||function(e){return e>=8528&&e<=8591}(e)||function(e){return e>=8960&&e<=9215}(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||function(e){return e>=9216&&e<=9279}(e)&&9251!==e||function(e){return e>=9280&&e<=9311}(e)||function(e){return e>=9312&&e<=9471}(e)||function(e){return e>=9632&&e<=9727}(e)||function(e){return e>=9728&&e<=9983}(e)&&!(e>=9754&&e<=9759)||function(e){return e>=11008&&e<=11263}(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Lr(e)||zr(e)||function(e){return e>=57344&&e<=63743}(e)||Kr(e)||$r(e)||Jr(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function aa(e){return e>=1424&&e<=2303||Xr(e)||Qr(e)}function oa(e,t){return!(!t&&aa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function sa(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(aa(t.value.charCodeAt(0)))return!0}catch(i){n.e(i)}finally{n.f()}return!1}var la="deferred",ua="loading",ca="loaded",ha=null,da="unavailable",pa=null,fa=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(da="error"),ha&&ha(e)};function ma(){va.fire(new $e("pluginStateChange",{pluginStatus:da,pluginURL:pa}))}var va=new Je,ya=function(){return da},ga=function(){if(da!==la||!pa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");da=ua,ma(),pa&&Ue({url:pa},(function(e){e?fa(e):(da=ca,ma())}))},_a={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return da===ca||null!=_a.applyArabicShaping},isLoading:function(){return da===ua},setState:function(e){da=e.pluginStatus,pa=e.pluginURL},isParsed:function(){return null!=_a.applyArabicShaping&&null!=_a.processBidirectionalText&&null!=_a.processStyledBidirectionalText},getPluginURL:function(){return pa}},xa=function(){function e(t,n){v(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Cr,this.transition={},this.pitch=0)}return y(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,i=d(e);try{for(i.s();!(n=i.n()).done;)if(!oa(n.value.charCodeAt(0),t))return!1}catch(r){i.e(r)}finally{i.f()}return!0}(e,_a.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}]),e}(),ba=function(){function e(t,n){v(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(fi(e))return new Mi(e,t);if(ki(e)){var n=Ei(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var i=e;return"string"==typeof e&&"color"===t.type&&(i=St.parse(e)),{kind:"constant",evaluate:function(){return i}}}(void 0===n?t.specification.default:n,t.specification)}return y(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),wa=function(){function e(t){v(this,e),this.property=t,this.value=new ba(t,void 0)}return y(e,[{key:"transitioned",value:function(e,t){return new Sa(this.property,this.value,t,O({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new Sa(this.property,this.value,null,{},0)}}]),e}(),ka=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return y(e,[{key:"getValue",value:function(e){return W(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new wa(this._values[e].property)),this._values[e].value=new ba(this._values[e].property,null===t?void 0:W(t))}},{key:"getTransition",value:function(e){return W(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new wa(this._values[e].property)),this._values[e].transition=W(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var i=n[t],r=this.getValue(i);void 0!==r&&(e[i]=r);var a=this.getTransition(i);void 0!==a&&(e["".concat(i,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var n=new Ta(this._properties),i=0,r=Object.keys(this._values);i<r.length;i++){var a=r[i];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n}},{key:"untransitioned",value:function(){for(var e=new Ta(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var i=n[t];e._values[i]=this._values[i].untransitioned()}return e}}]),e}(),Sa=function(){function e(t,n,i,r,a){v(this,e);var o=r.delay||0,s=r.duration||0;a=a||0,this.property=t,this.value=n,this.begin=a+o,this.end=this.begin+s,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n){var i=e.now||0,r=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return a.possiblyEvaluate(e,t,n);var o=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),r,C(o))}return r}}]),e}(),Ta=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var i=new Ma(this._properties),r=0,a=Object.keys(this._values);r<a.length;r++){var o=a[r];i._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return i}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),Ca=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return y(e,[{key:"getValue",value:function(e){return W(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new ba(this._values[e].property,null===t?void 0:W(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var i=n[t],r=this.getValue(i);void 0!==r&&(e[i]=r)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var i=new Ma(this._properties),r=0,a=Object.keys(this._values);r<a.length;r++){var o=a[r];i._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return i}}]),e}(),Ea=function(){function e(t,n,i){v(this,e),this.property=t,this.value=n,this.parameters=i}return y(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,i){return this.property.evaluate(this.value,this.parameters,e,t,n,i)}}]),e}(),Ma=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return y(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),Pa=function(){function e(t){v(this,e),this.specification=t}return y(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var i=gn[this.specification.type];return i?i(e,t,n):e}}]),e}(),Aa=function(){function e(t,n){v(this,e),this.specification=t,this.overrides=n}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n,i){return new Ea(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,i)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Ea(this,{kind:"constant",value:void 0},e.parameters);var i=gn[this.specification.type];return i?new Ea(this,{kind:"constant",value:i(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,i,r,a){return"constant"===e.kind?e.value:e.evaluate(t,n,i,r,a)}}]),e}(),Da=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"possiblyEvaluate",value:function(e,t,n,i){if(void 0===e.value)return new Ea(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var r=e.expression.evaluate(t,null,{},n,i),a="resolvedImage"===e.property.specification.type&&"string"!=typeof r?r.name:r,o=this._calculate(a,a,a,t);return new Ea(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Ea(this,{kind:"constant",value:s},t)}return new Ea(this,e.expression,t)}},{key:"evaluate",value:function(e,t,n,i,r,a){if("source"===e.kind){var o=e.evaluate(t,n,i,r,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,i),e.evaluate({zoom:Math.floor(t.zoom)},n,i),e.evaluate({zoom:Math.floor(t.zoom)+1},n,i),t):e.value}},{key:"_calculate",value:function(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t,other:n}:{from:n,to:t,other:e}}},{key:"interpolate",value:function(e){return e}}]),n}(Aa),Ia=function(){function e(t){v(this,e),this.specification=t}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n,i){if(void 0!==e.value){if("constant"===e.expression.kind){var r=e.expression.evaluate(t,null,{},n,i);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new xa(Math.floor(t.zoom-1),t)),e.expression.evaluate(new xa(Math.floor(t.zoom),t)),e.expression.evaluate(new xa(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),La=function(){function e(t){v(this,e),this.specification=t}return y(e,[{key:"possiblyEvaluate",value:function(e,t,n,i){return!!e.expression.evaluate(t,null,{},n,i)}},{key:"interpolate",value:function(){return!1}}]),e}(),Oa=y((function e(t){for(var n in v(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[n];i.specification.overridable&&this.overridableProperties.push(n);var r=this.defaultPropertyValues[n]=new ba(i,void 0),a=this.defaultTransitionablePropertyValues[n]=new wa(i);this.defaultTransitioningPropertyValues[n]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=r.possiblyEvaluate({})}}));function za(e,t){return 256*(e=P(Math.floor(e),0,255))+P(Math.floor(t),0,255)}xr(Aa,"DataDrivenProperty"),xr(Pa,"DataConstantProperty"),xr(Da,"CrossFadedDataDrivenProperty"),xr(Ia,"CrossFadedProperty"),xr(La,"ColorRampProperty");var Ra={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ba=y((function e(t,n){v(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),Fa=function(){function e(){v(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return y(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}},{key:"destroy",value:function(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function Na(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;return{members:e.map((function(e){var r=Ra[e.type].BYTES_PER_ELEMENT,a=n=ja(n,Math.max(t,r)),o=e.components||1;return i=Math.max(i,r),n+=r*o,{name:e.name,type:e.type,components:o,offset:a}})),size:ja(n,Math.max(i,t)),alignment:t}}function ja(e,t){return Math.ceil(e/t)*t}var Ua=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var i=2*e;return this.int16[i+0]=t,this.int16[i+1]=n,e}}]),n}(Fa);Ua.prototype.bytesPerElement=4,xr(Ua,"StructArrayLayout2i4");var Va=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}},{key:"emplace",value:function(e,t,n,i){var r=3*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=i,e}}]),n}(Fa);Va.prototype.bytesPerElement=6,xr(Va,"StructArrayLayout3i6");var Za=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,e}}]),n}(Fa);Za.prototype.bytesPerElement=8,xr(Za,"StructArrayLayout4i8");var Wa=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,a,o)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s){var l=6*e,u=12*e,c=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[u+4]=i,this.uint8[u+5]=r,this.uint8[u+6]=a,this.uint8[u+7]=o,this.float32[c+2]=s,e}}]),n}(Fa);Wa.prototype.bytesPerElement=12,xr(Wa,"StructArrayLayout2i4ub1f12");var Ga=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=i,this.float32[a+3]=r,e}}]),n}(Fa);Ga.prototype.bytesPerElement=16,xr(Ga,"StructArrayLayout4f16");var Ya=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,i,r,a,o,s,l,u)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,l,u,c){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,e}}]),n}(Fa);Ya.prototype.bytesPerElement=20,xr(Ya,"StructArrayLayout10ui20");var Ha=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,i,r,a,o,s)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,l){var u=8*e;return this.uint16[u+0]=t,this.uint16[u+1]=n,this.uint16[u+2]=i,this.uint16[u+3]=r,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,e}}]),n}(Fa);Ha.prototype.bytesPerElement=16,xr(Ha,"StructArrayLayout8ui16");var Xa=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,r,a)}},{key:"emplace",value:function(e,t,n,i,r,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=a,this.int16[s+5]=o,e}}]),n}(Fa);Xa.prototype.bytesPerElement=12,xr(Xa,"StructArrayLayout6i12");var qa=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m){var v=this.length;return this.resize(v+1),this.emplace(v,e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v){var y=16*e;return this.int16[y+0]=t,this.int16[y+1]=n,this.int16[y+2]=i,this.int16[y+3]=r,this.uint16[y+4]=a,this.uint16[y+5]=o,this.uint16[y+6]=s,this.uint16[y+7]=l,this.int16[y+8]=u,this.int16[y+9]=c,this.int16[y+10]=h,this.int16[y+11]=d,this.int16[y+12]=p,this.int16[y+13]=f,this.int16[y+14]=m,this.int16[y+15]=v,e}}]),n}(Fa);qa.prototype.bytesPerElement=32,xr(qa,"StructArrayLayout4i4ui4i4i32");var Ka=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}},{key:"emplace",value:function(e,t,n,i){var r=3*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}]),n}(Fa);Ka.prototype.bytesPerElement=12,xr(Ka,"StructArrayLayout3f12");var $a=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(Fa);$a.prototype.bytesPerElement=4,xr($a,"StructArrayLayout1ul4");var Qa=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d){var p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,i,r,a,o,s,l,u,c,h,d)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p){var f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=i,this.int16[f+3]=r,this.int16[f+4]=a,this.float32[m+3]=o,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=u,this.int16[f+14]=c,this.uint32[m+8]=h,this.uint16[f+18]=d,this.uint16[f+19]=p,e}}]),n}(Fa);Qa.prototype.bytesPerElement=40,xr(Qa,"StructArrayLayout5i4f1i1ul2ui40");var Ja=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,a,o)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+4]=r,this.int16[l+5]=a,this.int16[l+6]=o,this.int16[l+7]=s,e}}]),n}(Fa);Ja.prototype.bytesPerElement=16,xr(Ja,"StructArrayLayout3i2i2i16");var eo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r)}},{key:"emplace",value:function(e,t,n,i,r,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.int16[s+6]=r,this.int16[s+7]=a,e}}]),n}(Fa);eo.prototype.bytesPerElement=16,xr(eo,"StructArrayLayout2f1f2i16");var to=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=i,this.float32[o+2]=r,e}}]),n}(Fa);to.prototype.bytesPerElement=12,xr(to,"StructArrayLayout2ub2f12");var no=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}},{key:"emplace",value:function(e,t,n,i){var r=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,this.uint16[r+2]=i,e}}]),n}(Fa);no.prototype.bytesPerElement=6,xr(no,"StructArrayLayout3ui6");var io=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y,g,_,x){var b=this.length;return this.resize(b+1),this.emplace(b,e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y,g,_,x)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y,g,_,x,b){var w=30*e,k=15*e,S=60*e;return this.int16[w+0]=t,this.int16[w+1]=n,this.int16[w+2]=i,this.float32[k+2]=r,this.float32[k+3]=a,this.uint16[w+8]=o,this.uint16[w+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=u,this.uint32[k+7]=c,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=p,this.float32[k+10]=f,this.float32[k+11]=m,this.uint8[S+48]=v,this.uint8[S+49]=y,this.uint8[S+50]=g,this.uint32[k+13]=_,this.int16[w+28]=x,this.uint8[S+58]=b,e}}]),n}(Fa);io.prototype.bytesPerElement=60,xr(io,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");var ro=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y,g,_,x,b,w,k,S,T,C,E,M,P){var A=this.length;return this.resize(A+1),this.emplace(A,e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y,g,_,x,b,w,k,S,T,C,E,M,P)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y,g,_,x,b,w,k,S,T,C,E,M,P,A){var D=38*e,I=19*e;return this.int16[D+0]=t,this.int16[D+1]=n,this.int16[D+2]=i,this.float32[I+2]=r,this.float32[I+3]=a,this.int16[D+8]=o,this.int16[D+9]=s,this.int16[D+10]=l,this.int16[D+11]=u,this.int16[D+12]=c,this.int16[D+13]=h,this.uint16[D+14]=d,this.uint16[D+15]=p,this.uint16[D+16]=f,this.uint16[D+17]=m,this.uint16[D+18]=v,this.uint16[D+19]=y,this.uint16[D+20]=g,this.uint16[D+21]=_,this.uint16[D+22]=x,this.uint16[D+23]=b,this.uint16[D+24]=w,this.uint16[D+25]=k,this.uint16[D+26]=S,this.uint16[D+27]=T,this.uint16[D+28]=C,this.uint32[I+15]=E,this.float32[I+16]=M,this.float32[I+17]=P,this.float32[I+18]=A,e}}]),n}(Fa);ro.prototype.bytesPerElement=76,xr(ro,"StructArrayLayout3i2f6i15ui1ul3f76");var ao=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(Fa);ao.prototype.bytesPerElement=4,xr(ao,"StructArrayLayout1f4");var oo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,a,o)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s){var l=7*e;return this.float32[l+0]=t,this.float32[l+1]=n,this.float32[l+2]=i,this.float32[l+3]=r,this.float32[l+4]=a,this.float32[l+5]=o,this.float32[l+6]=s,e}}]),n}(Fa);oo.prototype.bytesPerElement=28,xr(oo,"StructArrayLayout7f28");var so=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r)}},{key:"emplace",value:function(e,t,n,i,r,a){var o=5*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,this.float32[o+4]=a,e}}]),n}(Fa);so.prototype.bytesPerElement=20,xr(so,"StructArrayLayout5f20");var lo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}},{key:"emplace",value:function(e,t,n,i,r){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=i,this.uint16[a+4]=r,e}}]),n}(Fa);lo.prototype.bytesPerElement=12,xr(lo,"StructArrayLayout1ul3ui12");var uo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,e}}]),n}(Fa);uo.prototype.bytesPerElement=4,xr(uo,"StructArrayLayout2ui4");var co=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(Fa);co.prototype.bytesPerElement=2,xr(co,"StructArrayLayout1ui2");var ho=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var i=2*e;return this.float32[i+0]=t,this.float32[i+1]=n,e}}]),n}(Fa);ho.prototype.bytesPerElement=8,xr(ho,"StructArrayLayout2f8");var po=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,i,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,a,o)}},{key:"emplace",value:function(e,t,n,i,r,a,o,s){var l=8*e,u=4*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+3]=r,this.int16[l+4]=a,this.int16[l+5]=o,this.float32[u+3]=s,e}}]),n}(Fa);po.prototype.bytesPerElement=16,xr(po,"StructArrayLayout6i1f16");var fo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"a_pos_30",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"a_pos_31",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"a_pos_32",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"a_pos_normal_30",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"a_pos_normal_31",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"a_pos_normal_32",get:function(){return this._structArray.int16[this._pos2+5]}}]),n}(Ba);fo.prototype.size=12;var mo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new fo(this,e)}}]),n}(Xa);xr(mo,"FillExtrusionExtArray");var vo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),n}(Ba);vo.prototype.size=40;var yo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new vo(this,e)}}]),n}(Qa);xr(yo,"CollisionBoxArray");var go=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(e){this._structArray.uint8[this._pos1+49]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(e){this._structArray.uint8[this._pos1+50]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(e){this._structArray.uint32[this._pos4+13]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(e){this._structArray.uint8[this._pos1+58]=e}}]),n}(Ba);go.prototype.size=60;var _o=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new go(this,e)}}]),n}(io);xr(_o,"PlacedSymbolArray");var xo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(e){this._structArray.uint32[this._pos4+15]=e}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),n}(Ba);xo.prototype.size=76;var bo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new xo(this,e)}}]),n}(ro);xr(bo,"SymbolInstanceArray");var wo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(ao);xr(wo,"GlyphOffsetArray");var ko=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),n}(Va);xr(ko,"SymbolLineVertexArray");var So=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(Ba);So.prototype.size=12;var To=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new So(this,e)}}]),n}(lo);xr(To,"FeatureIndexArray");var Co=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"a_centroid_pos0",get:function(){return this._structArray.uint16[this._pos2+0]}},{key:"a_centroid_pos1",get:function(){return this._structArray.uint16[this._pos2+1]}}]),n}(Ba);Co.prototype.size=4;var Eo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new Co(this,e)}}]),n}(uo);xr(Eo,"FillExtrusionCentroidArray");var Mo=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"a_pos_30",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"a_pos_31",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"a_pos_32",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"a_pos_normal_30",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"a_pos_normal_31",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"a_pos_normal_32",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"a_scale",get:function(){return this._structArray.float32[this._pos4+3]}}]),n}(Ba);Mo.prototype.size=16;var Po=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"get",value:function(e){return new Mo(this,e)}}]),n}(po);xr(Po,"CircleGlobeExtArray");var Ao=Na([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Do=Na([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]),Io=wt((function(e){e.exports=function(e,t){var n,i,r,a,o,s,l,u;for(i=e.length-(n=3&e.length),r=t,o=3432918353,s=461845907,u=0;u<i;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,r=27492+(65535&(a=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),Lo=wt((function(e){e.exports=function(e,t){for(var n,i=e.length,r=t^i,a=0;i>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++a;switch(i){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),Oo=Io,zo=Lo;Oo.murmur3=Io,Oo.murmur2=zo;var Ro=function(){function e(){v(this,e),this.ids=[],this.positions=[],this.indexed=!1}return y(e,[{key:"add",value:function(e,t,n,i){this.ids.push(Bo(e)),this.positions.push(t,n,i)}},{key:"getPositions",value:function(e){for(var t=Bo(e),n=0,i=this.ids.length-1;n<i;){var r=n+i>>1;this.ids[r]>=t?i=r:n=r+1}for(var a=[];this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return Fo(n,i,0,n.length-1),t&&t.push(n.buffer,i.buffer),{ids:n,positions:i}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function Bo(e){var t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Oo(String(e))}function Fo(e,t,n,i){for(;n<i;){for(var r=e[n+i>>1],a=n-1,o=i+1;;){do{a++}while(e[a]<r);do{o--}while(e[o]>r);if(a>=o)break;No(e,a,o),No(t,3*a,3*o),No(t,3*a+1,3*o+1),No(t,3*a+2,3*o+2)}o-n<i-o?(Fo(e,t,n,o),n=o+1):(Fo(e,t,o+1,i),i=o)}}function No(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}xr(Ro,"FeaturePositionMap");var jo=y((function e(t,n){v(this,e),this.gl=t.gl,this.location=n})),Uo=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=0,r}return y(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}]),n}(jo),Vo=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=[0,0,0,0],r}return y(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}]),n}(jo),Zo=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=St.transparent,r}return y(n,[{key:"set",value:function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}]),n}(jo),Wo=new Float32Array(16),Go=new Float32Array(9),Yo=new Float32Array(4);function Ho(e){return[za(255*e.r,255*e.g),za(255*e.b,255*e.a)]}var Xo=function(){function e(t,n,i){v(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=i}return y(e,[{key:"setUniform",value:function(e,t,n){e.set(n.constantOr(this.value))}},{key:"getBinding",value:function(e,t,n){return"color"===this.type?new Zo(e,t):new Uo(e,t)}}]),e}(),qo=function(){function e(t,n){v(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return y(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}},{key:"setUniform",value:function(e,t,n,i){var r="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&e.set(r)}},{key:"getBinding",value:function(e,t,n){return"u_pattern_from"===n||"u_pattern_to"===n||"u_dash_from"===n||"u_dash_to"===n?new Vo(e,t):new Uo(e,t)}}]),e}(),Ko=function(){function e(t,n,i,r){v(this,e),this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r}return y(e,[{key:"populatePaintArray",value:function(e,t,n,i,r,a){var o=this.paintVertexArray.length,s=this.expression.evaluate(new xa(0),t,{},r,i,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}},{key:"updatePaintArray",value:function(e,t,n,i,r){var a=this.expression.evaluate({zoom:0},n,i,void 0,r);this._setPaintValue(e,t,a)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var i=Ho(n),r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),$o=function(){function e(t,n,i,r,a,o){v(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=i,this.useIntegerZoom=r,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new o}return y(e,[{key:"populatePaintArray",value:function(e,t,n,i,r,a){var o=this.expression.evaluate(new xa(this.zoom),t,{},r,i,a),s=this.expression.evaluate(new xa(this.zoom+1),t,{},r,i,a),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,s)}},{key:"updatePaintArray",value:function(e,t,n,i,r){var a=this.expression.evaluate({zoom:this.zoom},n,i,void 0,r),o=this.expression.evaluate({zoom:this.zoom+1},n,i,void 0,r);this._setPaintValue(e,t,a,o)}},{key:"_setPaintValue",value:function(e,t,n,i){if("color"===this.type)for(var r=Ho(n),a=Ho(i),o=e;o<t;o++)this.paintVertexArray.emplace(o,r[0],r[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,i=P(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(i)}},{key:"getBinding",value:function(e,t,n){return new Uo(e,t)}}]),e}(),Qo=function(){function e(t,n,i,r,a,o,s){v(this,e),this.expression=t,this.type=i,this.useIntegerZoom=r,this.zoom=a,this.layerId=s,this.paintVertexAttributes=("array"===i?Do:Ao).members;for(var l=0;l<n.length;++l);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return y(e,[{key:"populatePaintArray",value:function(e,t,n){var i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,i,r,a){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],a)}},{key:"_setPaintValues",value:function(e,t,n,i){if(i&&n){var r=n.min,a=n.mid,o=n.max,s=i[r],l=i[a],u=i[o];if(s&&l&&u)for(var c=e;c<t;c++)this._setPaintValue(this.zoomInPaintVertexArray,c,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,c,l,u)}}},{key:"_setPaintValue",value:function(e,t,n,i){e.emplace(t,n.tl[0],n.tl[1],n.br[0],n.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],n.pixelRatio,i.pixelRatio)}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),Jo=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};v(this,e),this.binders={},this._buffers=[];var r=[];for(var a in t.paint._values)if(i(a)){var o=t.paint.get(a);if(o instanceof Ea&&ci(o.property.specification)){var s=ns(a,t.type),l=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,h=o.property.specification["property-type"],d="cross-faded"===h||"cross-faded-data-driven"===h,p="line-dasharray"===String(a)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==l.kind||p)if("source"===l.kind||p||d){var f=as(a,u,"source");this.binders[a]=d?new Qo(l,s,u,c,n,f,t.id):new Ko(l,s,u,f),r.push("/a_".concat(a))}else{var m=as(a,u,"composite");this.binders[a]=new $o(l,s,u,c,n,m),r.push("/z_".concat(a))}else this.binders[a]=d?new qo(l.value,s):new Xo(l.value,s,u),r.push("/u_".concat(a))}}this.cacheKey=r.sort().join("")}return y(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof Ko||t instanceof $o?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,i,r,a){for(var o in this.binders){var s=this.binders[o];(s instanceof Ko||s instanceof $o||s instanceof Qo)&&s.populatePaintArray(e,t,n,i,r,a)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var n in this.binders){var i=this.binders[n];i instanceof qo&&i.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,n,i,r,a){var o=!1;for(var s in e){var l,u=t.getPositions(s),c=d(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,p=n.feature(h.index);for(var f in this.binders){var m=this.binders[f];if((m instanceof Ko||m instanceof $o||m instanceof Qo)&&!0===m.expression.isStateDependent){var v=i.paint.get(f);m.expression=v.value,m.updatePaintArray(h.start,h.end,p,e[s],r,a),o=!0}}}}catch(y){c.e(y)}finally{c.f()}}return o}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Xo||n instanceof qo)&&e.push.apply(e,c(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Ko||n instanceof $o||n instanceof Qo)for(var i=0;i<n.paintVertexAttributes.length;i++)e.push(n.paintVertexAttributes[i].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Xo||n instanceof qo||n instanceof $o){var i,r=d(n.uniformNames);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.push(a)}}catch(o){r.e(o)}finally{r.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e,t){var n=[];for(var i in this.binders){var r=this.binders[i];if(r instanceof Xo||r instanceof qo||r instanceof $o){var a,o=d(r.uniformNames);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t[s]){var l=r.getBinding(e,t[s],s);n.push({name:s,property:i,binding:l})}}}catch(u){o.e(u)}finally{o.f()}}}return n}},{key:"setUniforms",value:function(e,t,n,i){var r,a=d(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.name,l=o.property,u=o.binding;this.binders[l].setUniform(u,i,n.get(l),s)}}catch(c){a.e(c)}finally{a.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Qo){var i=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof Ko||n instanceof $o)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Ko||n instanceof $o||n instanceof Qo)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Ko||t instanceof $o||t instanceof Qo)&&t.destroy()}}}]),e}(),es=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};v(this,e),this.programConfigurations={};var r,a=d(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.programConfigurations[o.id]=new Jo(o,n,i)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new Ro,this._bufferOffset=0}return y(e,[{key:"populatePaintArrays",value:function(e,t,n,i,r,a,o){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,i,r,a,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,i,r){var a,o=d(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,i,r)||this.needsUpload}}catch(l){o.e(l)}finally{o.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}(),ts={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function ns(e,t){return ts[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}var is={"line-pattern":{source:Ya,composite:Ya},"fill-pattern":{source:Ya,composite:Ya},"fill-extrusion-pattern":{source:Ya,composite:Ya},"line-dasharray":{source:Ha,composite:Ha}},rs={color:{source:ho,composite:Ga},number:{source:ao,composite:ho}};function as(e,t,n){var i=is[e];return i&&i[n]||rs[t][n]}xr(Xo,"ConstantBinder"),xr(qo,"CrossFadedConstantBinder"),xr(Ko,"SourceExpressionBinder"),xr(Qo,"CrossFadedCompositeBinder"),xr($o,"CompositeExpressionBinder"),xr(Jo,"ProgramConfiguration",{omit:["_buffers"]}),xr(es,"ProgramConfigurationSet");var os="-transition",ss=function(e){f(n,e);var t=m(n);function n(e,i){var r;if(v(this,n),(r=t.call(this)).id=e.id,r.type=e.type,r._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},r._filterCompiled=!1,"custom"!==e.type&&(r.metadata=e.metadata,r.minzoom=e.minzoom,r.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(r.source=e.source,r.sourceLayer=e["source-layer"],r.filter=e.filter),i.layout&&(r._unevaluatedLayout=new Ca(i.layout)),i.paint)){for(var a in r._transitionablePaint=new ka(i.paint),e.paint)r.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)r.setLayoutProperty(o,e.layout[o],{validate:!1});r._transitioningPaint=r._transitionablePaint.untransitioned(),r.paint=new Ma(i.paint)}return l(r)}return y(n,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(fr,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return U(e,os)?this._transitionablePaint.getTransition(e.slice(0,-os.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(pr,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(U(e,os))return this._transitionablePaint.setTransition(e.slice(0,-os.length),t||void 0),!1;var i=this._transitionablePaint._values[e],r="cross-faded-data-driven"===i.property.specification["property-type"],a=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||a||r||this._handleOverridablePaintPropertyUpdate(e,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Z(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&vr(this,e.call(dr,{key:t,layerType:this.type,objectKey:n,value:i,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof Ea&&ci(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=Ni(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),n}(Je),ls=Na([{name:"a_pos",components:2,type:"Int16"}],4),us=Na([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"},{name:"a_scale",components:1,type:"Float32"}]),cs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.segments=t}return y(e,[{key:"prepareSegment",value:function(t,n,i,r){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&Y("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==r)&&(a={vertexOffset:n.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(a.sortKey=r),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=d(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var i in n.vaos)n.vaos[i].destroy()}}catch(r){t.e(r)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,i,r){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}]),e}();cs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xr(cs,"SegmentVector");var hs=8192,ds=function(){function e(t,n){v(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return y(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof fs?new fs(e.lng,e.lat):fs.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof fs?new fs(e.lng,e.lat):fs.convert(e),this}},{key:"extend",value:function(t){var n,i,r=this._sw,a=this._ne;if(t instanceof fs)n=t,i=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(fs.convert(t)):this;if(n=t._sw,i=t._ne,!n||!i)return this}return r||a?(r.lng=Math.min(n.lng,r.lng),r.lat=Math.min(n.lat,r.lat),a.lng=Math.max(i.lng,a.lng),a.lat=Math.max(i.lat,a.lat)):(this._sw=new fs(n.lng,n.lat),this._ne=new fs(i.lng,i.lat)),this}},{key:"getCenter",value:function(){return new fs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new fs(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new fs(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=fs.convert(e),n=t.lng,i=t.lat,r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),ps=6371008.8,fs=function(){function e(t,n){if(v(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return y(e,[{key:"wrap",value:function(){return new e(D(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,i=e.lat*t,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return ps*Math.acos(Math.min(r,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new ds(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),ms=2*Math.PI*ps;function vs(e){return ms*Math.cos(e*Math.PI/180)}function ys(e){return(180+e)/360}function gs(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function _s(e,t){return e/vs(t)}function xs(e){return 360*e-180}function bs(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function ws(e,t){return e*vs(bs(t))}var ks=85.051129,Ss=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v(this,e),this.x=+t,this.y=+n,this.z=+i}return y(e,[{key:"toLngLat",value:function(){return new fs(xs(this.x),bs(this.y))}},{key:"toAltitude",value:function(){return ws(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/ms*(e=bs(this.y),1/Math.cos(e*Math.PI/180));var e}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=fs.convert(t);return new e(ys(i.lng),gs(i.lat),_s(n,i.lat))}}]),e}();function Ts(e,t,n,i,r,a,o,s,l){var u=(t+i)/2,c=(n+r)/2,h=new g(u,c);s(h),function(e,t,n,i,r,a){var o=n-r,s=i-a;return Math.abs((i-t)*o-(n-e)*s)/Math.hypot(o,s)}(h.x,h.y,a.x,a.y,o.x,o.y)>=l?(Ts(e,t,n,u,c,a,h,s,l),Ts(e,u,c,i,r,h,o,s,l)):e.push(o)}function Cs(e,t,n){var i=e[0],r=i.x,a=i.y;t(i);for(var o=[i],s=1;s<e.length;s++){var l=e[s],u=l.x,c=l.y;t(l),Ts(o,r,a,u,c,i,l,t,n),r=u,a=c,i=l}return o}var Es=Math.pow(2,14)-1,Ms=-Es-1;function Ps(e,t){var n=Math.round(e.x*t),i=Math.round(e.y*t);return e.x=P(n,Ms,Es),e.y=P(i,Ms,Es),(n<e.x||n>e.x+1||i<e.y||i>e.y+1)&&Y("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function As(e,t,n){var i=e.loadGeometry(),r=e.extent,a=hs/r;if(t&&n&&n.projection.isReprojectedInTileSpace)for(var o=1<<t.z,s=n.scale,l=n.x,u=n.y,c=n.projection,h=function(e){var n=xs((t.x+e.x/r)/o),i=bs((t.y+e.y/r)/o),a=c.project(n,i);e.x=(a.x*s-l)*r,e.y=(a.y*s-u)*r},p=0;p<i.length;p++)if(1!==e.type)i[p]=Cs(i[p],h,1);else{var f,m=[],v=d(i[p]);try{for(v.s();!(f=v.n()).done;){var y=f.value;y.x<0||y.x>=r||y.y<0||y.y>=r||(h(y),m.push(y))}}catch(k){v.e(k)}finally{v.f()}i[p]=m}var g,_=d(i);try{for(_.s();!(g=_.n()).done;){var x,b=g.value,w=d(b);try{for(w.s();!(x=w.n()).done;)Ps(x.value,a)}catch(k){w.e(k)}finally{w.f()}}}catch(k){_.e(k)}finally{_.f()}return i}function Ds(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?As(e):[]}}function Is(e,t,n,i,r){e.emplaceBack(2*t+(i+1)/2,2*n+(r+1)/2)}function Ls(e,t,n,i){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r,i)}var Os=function(){function e(t){v(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Ua,this.indexArray=new no,this.segments=new cs,this.programConfigurations=new es(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return y(e,[{key:"populate",value:function(e,t,n,i){var r=this.layers[0],a=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.feature,h=u.id,p=u.index,f=u.sourceLayerIndex,m=this.layers[0]._featureFilter.needGeometry,v=Ds(c,m);if(this.layers[0]._featureFilter.filter(new xa(this.zoom),v,n)){var y=o?o.evaluate(v,{},n):void 0,g={id:h,properties:c.properties,type:c.type,sourceLayerIndex:f,index:p,geometry:m?v.geometry:As(c,n,i),patterns:{},sortKey:y};a.push(g)}}}catch(E){l.e(E)}finally{l.f()}o&&a.sort((function(e,t){return e.sortKey-t.sortKey}));var _=null;"globe"===i.projection.name&&(this.globeExtVertexArray=new Po,_=i.projection);for(var x=0,b=a;x<b.length;x++){var w=b[x],k=w.geometry,S=w.index,T=w.sourceLayerIndex,C=e[S].feature;this.addFeature(w,k,S,t.availableImages,n,_),t.featureIndex.insert(C,k,S,T,this.index)}}},{key:"update",value:function(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ls.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,us.members))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}},{key:"addFeature",value:function(e,t,n,i,r,a){var o,s=d(t);try{for(s.s();!(o=s.n()).done;){var l,u=o.value,c=d(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,p=h.x,f=h.y;if(!(p<0||p>=hs||f<0||f>=hs)){if(a){var m=a.projectTilePoint(p,f,r),v=a.upVector(r,p,f),y=bs((f/hs+r.y)/(1<<r.z)),g=a.pixelsPerMeter(y,1)/_s(1,y),_=this.globeExtVertexArray;Ls(_,m,v,g),Ls(_,m,v,g),Ls(_,m,v,g),Ls(_,m,v,g)}var x=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),b=x.vertexLength;Is(this.layoutVertexArray,p,f,-1,-1),Is(this.layoutVertexArray,p,f,1,-1),Is(this.layoutVertexArray,p,f,1,1),Is(this.layoutVertexArray,p,f,-1,1),this.indexArray.emplaceBack(b,b+1,b+2),this.indexArray.emplaceBack(b,b+3,b+2),x.vertexLength+=4,x.primitiveLength+=2}}}catch(w){c.e(w)}finally{c.f()}}}catch(w){s.e(w)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},i,r)}}]),e}();function zs(e,t){for(var n=0;n<e.length;n++)if(Ws(t,e[n]))return!0;for(var i=0;i<t.length;i++)if(Ws(e,t[i]))return!0;return!!Ns(e,t)}function Rs(e,t,n){return!!Ws(e,t)||!!Us(t,e,n)}function Bs(e,t){if(1===e.length)return Zs(t,e[0]);for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;r++)if(Ws(e,i[r]))return!0;for(var a=0;a<e.length;a++)if(Zs(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(Ns(e,t[o]))return!0;return!1}function Fs(e,t,n){if(e.length>1){if(Ns(e,t))return!0;for(var i=0;i<t.length;i++)if(Us(t[i],e,n))return!0}for(var r=0;r<e.length;r++)if(Us(e[r],t,n))return!0;return!1}function Ns(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var i=e[n],r=e[n+1],a=0;a<t.length-1;a++)if(js(i,r,t[a],t[a+1]))return!0;return!1}function js(e,t,n,i){return H(e,n,i)!==H(t,n,i)&&H(e,t,n)!==H(e,t,i)}function Us(e,t,n){var i=n*n;if(1===t.length)return e.distSqr(t[0])<i;for(var r=1;r<t.length;r++)if(Vs(e,t[r-1],t[r])<i)return!0;return!1}function Vs(e,t,n){var i=t.distSqr(n);if(0===i)return e.distSqr(t);var r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return e.distSqr(r<0?t:r>1?n:n.sub(t)._mult(r)._add(t))}function Zs(e,t){for(var n,i,r,a=!1,o=0;o<e.length;o++)for(var s=0,l=(n=e[o]).length-1;s<n.length;l=s++)i=n[s],r=n[l],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(a=!a);return a}function Ws(e,t){for(var n=!1,i=0,r=e.length-1;i<e.length;r=i++){var a=e[i],o=e[r];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function Gs(e,t,n,i,r){var a,o=d(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&n<=s.y&&i>=s.x&&r>=s.y)return!0}}catch(p){o.e(p)}finally{o.f()}var l=[new g(t,n),new g(t,r),new g(i,r),new g(i,n)];if(e.length>2){var u,c=d(l);try{for(c.s();!(u=c.n()).done;)if(Ws(e,u.value))return!0}catch(p){c.e(p)}finally{c.f()}}for(var h=0;h<e.length-1;h++)if(Ys(e[h],e[h+1],l))return!0;return!1}function Ys(e,t,n){var i=n[0],r=n[2];if(e.x<i.x&&t.x<i.x||e.x>r.x&&t.x>r.x||e.y<i.y&&t.y<i.y||e.y>r.y&&t.y>r.y)return!1;var a=H(e,t,n[0]);return a!==H(e,t,n[1])||a!==H(e,t,n[2])||a!==H(e,t,n[3])}function Hs(e,t,n){var i=t.paint.get(e).value;return"constant"===i.kind?i.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Xs(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function qs(e,t,n,i,r){if(!t[0]&&!t[1])return e;var a=g.convert(t)._mult(r);"viewport"===n&&a._rotate(-i);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function Ks(e,t,n,i){var r=g.convert(e)._mult(i);return"viewport"===t&&r._rotate(-n),r}xr(Os,"CircleBucket",{omit:["layers"]});var $s=new Oa({"circle-sort-key":new Aa(et.layout_circle["circle-sort-key"])}),Qs={paint:new Oa({"circle-radius":new Aa(et.paint_circle["circle-radius"]),"circle-color":new Aa(et.paint_circle["circle-color"]),"circle-blur":new Aa(et.paint_circle["circle-blur"]),"circle-opacity":new Aa(et.paint_circle["circle-opacity"]),"circle-translate":new Pa(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Pa(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pa(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pa(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Aa(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Aa(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Aa(et.paint_circle["circle-stroke-opacity"])}),layout:$s},Js=1e-6,el="undefined"!=typeof Float32Array?Float32Array:Array;function tl(){var e=new el(9);return el!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function nl(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function il(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],v=t[13],y=t[14],g=t[15],_=n[0],x=n[1],b=n[2],w=n[3];return e[0]=_*i+x*s+b*h+w*m,e[1]=_*r+x*l+b*d+w*v,e[2]=_*a+x*u+b*p+w*y,e[3]=_*o+x*c+b*f+w*g,e[4]=(_=n[4])*i+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,e[5]=_*r+x*l+b*d+w*v,e[6]=_*a+x*u+b*p+w*y,e[7]=_*o+x*c+b*f+w*g,e[8]=(_=n[8])*i+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,e[9]=_*r+x*l+b*d+w*v,e[10]=_*a+x*u+b*p+w*y,e[11]=_*o+x*c+b*f+w*g,e[12]=(_=n[12])*i+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,e[13]=_*r+x*l+b*d+w*v,e[14]=_*a+x*u+b*p+w*y,e[15]=_*o+x*c+b*f+w*g,e}function rl(e,t,n){var i,r,a,o,s,l,u,c,h,d,p,f,m=n[0],v=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*y+t[12],e[13]=t[1]*m+t[5]*v+t[9]*y+t[13],e[14]=t[2]*m+t[6]*v+t[10]*y+t[14],e[15]=t[3]*m+t[7]*v+t[11]*y+t[15]):(r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=i=t[0],e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=i*m+s*v+h*y+t[12],e[13]=r*m+l*v+d*y+t[13],e[14]=a*m+u*v+p*y+t[14],e[15]=o*m+c*v+f*y+t[15]),e}function al(e,t,n){var i=n[0],r=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ol(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+u*i,e[5]=o*r+c*i,e[6]=s*r+h*i,e[7]=l*r+d*i,e[8]=u*r-a*i,e[9]=c*r-o*i,e[10]=h*r-s*i,e[11]=d*r-l*i,e}function sl(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-u*i,e[1]=o*r-c*i,e[2]=s*r-h*i,e[3]=l*r-d*i,e[8]=a*i+u*r,e[9]=o*i+c*r,e[10]=s*i+h*r,e[11]=l*i+d*r,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ll=il;function ul(){var e=new el(3);return el!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function cl(e){var t=new el(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function hl(e){return Math.hypot(e[0],e[1],e[2])}function dl(e,t,n){var i=new el(3);return i[0]=e,i[1]=t,i[2]=n,i}function pl(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function fl(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function ml(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function vl(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function yl(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function gl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function _l(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function xl(e,t){var n=t[0],i=t[1],r=t[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function bl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function wl(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=r*l-a*s,e[1]=a*o-i*l,e[2]=i*s-r*o,e}function kl(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[3]*i+n[7]*r+n[11]*a+n[15];return e[0]=(n[0]*i+n[4]*r+n[8]*a+n[12])/(o=o||1),e[1]=(n[1]*i+n[5]*r+n[9]*a+n[13])/o,e[2]=(n[2]*i+n[6]*r+n[10]*a+n[14])/o,e}function Sl(e,t,n){var i=n[0],r=n[1],a=n[2],o=t[0],s=t[1],l=t[2],u=r*l-a*s,c=a*o-i*l,h=i*s-r*o,d=r*h-a*c,p=a*u-i*h,f=i*c-r*u,m=2*n[3];return c*=m,h*=m,p*=2,f*=2,e[0]=o+(u*=m)+(d*=2),e[1]=s+c+p,e[2]=l+h+f,e}var Tl,Cl=fl,El=ml,Ml=hl;function Pl(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,e[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,e[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,e[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,e}function Al(){var e=new el(4);return el!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Dl(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Il(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+o*s,e[1]=r*l+a*s,e[2]=a*l-r*s,e[3]=o*l-i*s,e}ul(),Tl=new el(4),el!=Float32Array&&(Tl[0]=0,Tl[1]=0,Tl[2]=0,Tl[3]=0),ul(),dl(1,0,0),dl(0,1,0),Al(),Al(),tl();var Ll=function(){function e(t,n){v(this,e),this.points=t,this.planes=n}return y(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,i,r){var a=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var i=Pl([],e,t),o=1/i[3]/n*a;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(i,i,[o,o,r?1/i[3]:o,o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=xl([],wl([],Cl([],o[e[0]],o[e[1]]),Cl([],o[e[2]],o[e[1]]))),n=-bl(t,o[e[1]]);return t.concat(n)}));return new e(o,s)}}]),e}(),Ol=function(){function e(t,n){v(this,e),this.min=t,this.max=n,this.center=gl([],pl([],this.min,this.max),.5)}return y(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],i=cl(this.min),r=cl(this.max),a=0;a<n.length;a++)i[a]=n[a]?this.min[a]:this.center[a],r[a]=n[a]?this.center[a]:this.max[a];return r[2]=this.max[2],new e(i,r)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"getCorners",value:function(){var e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}},{key:"intersects",value:function(e){for(var t=this.getCorners(),n=!0,i=0;i<e.planes.length;i++){for(var r=e.planes[i],a=0,o=0;o<t.length;o++)a+=bl(r,t[o])+r[3]>=0;if(0===a)return 0;a!==t.length&&(n=!1)}if(n)return 2;for(var s=0;s<3;s++){for(var l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var h=e.points[c][s]-this.min[s];l=Math.min(l,h),u=Math.max(u,h)}if(u<0||l>this.max[s]-this.min[s])return 0}return 1}}]),e}();function zl(e,t,n,i,r,a,o,s,l){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(l*=e.pixelToTileUnitsFactor);var u,c=d(t);try{for(c.s();!(u=c.n()).done;){var h,p=u.value,f=d(p);try{var m=function(){var t=h.value,u=t.add(s),c=r&&n.elevation?n.elevation.exaggeration()*r.getElevationAt(u.x,u.y,!0):0,d=a?u:Rl(u,c,i),p=a?e.tilespaceRays.map((function(e){return Nl(e,c)})):e.queryGeometry.screenGeometry,f=Pl([],[t.x,t.y,c,1],i);if(!o&&a?l*=f[3]/n.cameraToCenterDistance:o&&!a&&(l*=n.cameraToCenterDistance/f[3]),Rs(p,d,l))return{v:!0}};for(f.s();!(h=f.n()).done;){var v=m();if("object"===typeof v)return v.v}}catch(y){f.e(y)}finally{f.f()}}}catch(y){c.e(y)}finally{c.f()}return!1}function Rl(e,t,n){var i=Pl([],[e.x,e.y,t,1],n);return new g(i[0]/i[3],i[1]/i[3])}var Bl=dl(0,0,0),Fl=dl(0,0,1);function Nl(e,t){var n=ul();return Bl[2]=t,e.intersectsPlane(Bl,Fl,n),new g(n[0],n[1])}var jl=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n)}(Os);function Ul(e,t,n,i){var r=t.width,a=t.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*a*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*a*n);return e.width=r,e.height=a,e.data=i,e}function Vl(e,t,n){var i=t.width,r=t.height;i===e.width&&r===e.height||(Zl(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,r)},n),e.width=i,e.height=r,e.data=t.data)}function Zl(e,t,n,i,r,a){if(0===r.width||0===r.height)return t;if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<r.height;l++)for(var u=((n.y+l)*e.width+n.x)*a,c=((i.y+l)*t.width+i.x)*a,h=0;h<r.width*a;h++)s[c+h]=o[u+h];return t}xr(jl,"HeatmapBucket",{omit:["layers"]});var Wl=function(){function e(t,n){v(this,e),Ul(this,t,1,n)}return y(e,[{key:"resize",value:function(t){Vl(this,new e(t),1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,i,r){Zl(e,t,n,i,r,1)}}]),e}(),Gl=function(){function e(t,n){v(this,e),Ul(this,t,4,n)}return y(e,[{key:"resize",value:function(t){Vl(this,new e(t),4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,i,r){Zl(e,t,n,i,r,4)}}]),e}();xr(Wl,"AlphaImage"),xr(Gl,"RGBAImage");var Yl={paint:new Oa({"heatmap-radius":new Aa(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Aa(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pa(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new La(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pa(et.paint_heatmap["heatmap-opacity"])})};function Hl(e){var t={},n=e.resolution||256,i=e.clips?e.clips.length:1,r=e.image||new Gl({width:n,height:i}),a=function(n,i,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);r.data[n+i+0]=Math.floor(255*o.r/o.a),r.data[n+i+1]=Math.floor(255*o.g/o.a),r.data[n+i+2]=Math.floor(255*o.b/o.a),r.data[n+i+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<i;++o,s+=4*n)for(var l=0,u=0;l<n;l++,u+=4){var c=l/(n-1),h=e.clips[o];a(s,u,h.start*(1-c)+h.end*c)}else for(var d=0,p=0;d<n;d++,p+=4)a(0,p,d/(n-1));return r}var Xl={paint:new Oa({"hillshade-illumination-direction":new Pa(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pa(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pa(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pa(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pa(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pa(et.paint_hillshade["hillshade-accent-color"])})},ql=Na([{name:"a_pos",components:2,type:"Int16"}],4).members,Kl=Ql,$l=Ql;function Ql(e,t,n){n=n||2;var i,r,a,o,s,l,u,c=t&&t.length,h=c?t[0]*n:e.length,d=Jl(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(e,t,n,i){var r,a,o,s=[];for(r=0,a=t.length;r<a;r++)(o=Jl(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),s.push(cu(o));for(s.sort(ou),r=0;r<s.length;r++)n=eu(n=su(s[r],n),n.next);return n}(e,t,d,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var f=n;f<h;f+=n)(s=e[f])<i&&(i=s),(l=e[f+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-i,o-r))?1/u:0}return tu(d,p,n,i,r,u),p}function Jl(e,t,n,i,r){var a,o;if(r===ku(e,t,n,i)>0)for(a=t;a<n;a+=i)o=xu(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=xu(a,e[a],e[a+1],o);return o&&fu(o,o.next)&&(bu(o),o=o.next),o}function eu(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!fu(i,i.next)&&0!==pu(i.prev,i,i.next))i=i.next;else{if(bu(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function tu(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=uu(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<u&&(s++,i=i.nextZ);t++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1)}(r)}(e,i,r,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?iu(e,i,r,a):nu(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),bu(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?tu(e=ru(eu(e),t,n),t,n,i,r,a,2):2===o&&au(e,t,n,i,r,a):tu(eu(e),t,n,i,r,a,1);break}}}function nu(e){var t=e.prev,n=e,i=e.next;if(pu(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(hu(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&pu(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function iu(e,t,n,i){var r=e.prev,a=e,o=e.next;if(pu(r,a,o)>=0)return!1;for(var s=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,l=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,u=uu(r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,t,n,i),c=uu(s,l,t,n,i),h=e.prevZ,d=e.nextZ;h&&h.z>=u&&d&&d.z<=c;){if(h!==e.prev&&h!==e.next&&hu(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&pu(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==e.prev&&d!==e.next&&hu(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&pu(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=u;){if(h!==e.prev&&h!==e.next&&hu(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&pu(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=c;){if(d!==e.prev&&d!==e.next&&hu(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&pu(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function ru(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!fu(r,a)&&mu(r,i,i.next,a)&&gu(r,a)&&gu(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),bu(i),bu(i.next),i=e=a),i=i.next}while(i!==e);return eu(i)}function au(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&du(o,s)){var l=_u(o,s);return o=eu(o,o.next),l=eu(l,l.next),tu(o,t,n,i,r,a),void tu(l,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function ou(e,t){return e.x-t.x}function su(e,t){var n=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n;var l,u=n,c=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&hu(a<h?r:o,a,c,h,a<h?o:r,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(r-i.x),gu(i,e)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&lu(n,i)))&&(n=i,d=l)),i=i.next}while(i!==u);return n}(e,t);if(!n)return t;var i=_u(n,e),r=eu(n,n.next);return eu(i,i.next),t===n?r:t}function lu(e,t){return pu(e.prev,e,t.prev)<0&&pu(t.next,e,e.next)<0}function uu(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function cu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function hu(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function du(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&mu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(gu(e,t)&&gu(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(pu(e.prev,e,t.prev)||pu(e,t.prev,t))||fu(e,t)&&pu(e.prev,e,e.next)>0&&pu(t.prev,t,t.next)>0)}function pu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function fu(e,t){return e.x===t.x&&e.y===t.y}function mu(e,t,n,i){var r=yu(pu(e,t,n)),a=yu(pu(e,t,i)),o=yu(pu(n,i,e)),s=yu(pu(n,i,t));return r!==a&&o!==s||!(0!==r||!vu(e,n,t))||!(0!==a||!vu(e,i,t))||!(0!==o||!vu(n,e,i))||!(0!==s||!vu(n,t,i))}function vu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function yu(e){return e>0?1:e<0?-1:0}function gu(e,t){return pu(e.prev,e,e.next)<0?pu(e,t,e.next)>=0&&pu(e,e.prev,t)>=0:pu(e,t,e.prev)<0||pu(e,e.next,t)<0}function _u(e,t){var n=new wu(e.i,e.x,e.y),i=new wu(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function xu(e,t,n,i){var r=new wu(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function wu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ku(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}function Su(e,t,n,i,r){Tu(e,t,n||0,i||e.length-1,r||Eu)}function Tu(e,t,n,i,r){for(;i>n;){if(i-n>600){var a=i-n+1,o=t-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);Tu(e,t,Math.max(n,Math.floor(t-o*l/a+u)),Math.min(i,Math.floor(t+(a-o)*l/a+u)),r)}var c=e[t],h=n,d=i;for(Cu(e,n,t),r(e[i],c)>0&&Cu(e,n,i);h<d;){for(Cu(e,h,d),h++,d--;r(e[h],c)<0;)h++;for(;r(e[d],c)>0;)d--}0===r(e[n],c)?Cu(e,n,d):Cu(e,++d,i),d<=t&&(n=d+1),t<=d&&(i=d-1)}}function Cu(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function Eu(e,t){return e<t?-1:e>t?1:0}function Mu(e,t){var n=e.length;if(n<=1)return[e];for(var i,r,a=[],o=0;o<n;o++){var s=X(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(i&&a.push(i),i=[e[o]]):i.push(e[o]))}if(i&&a.push(i),t>1)for(var l=0;l<a.length;l++)a[l].length<=t||(Su(a[l],t,1,a[l].length-1,Pu),a[l]=a[l].slice(0,t));return a}function Pu(e,t){return t.area-e.area}function Au(e,t,n){var i,r=n.patternDependencies,a=!1,o=d(t);try{for(o.s();!(i=o.n()).done;){var s=i.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var l=s.constantOr(null);l&&(a=!0,r[l.to]=!0,r[l.from]=!0)}}catch(u){o.e(u)}finally{o.f()}return a}function Du(e,t,n,i,r){var a,o=r.patternDependencies,s=d(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.paint.get("".concat(e,"-pattern")).value;if("constant"!==u.kind){var c=u.evaluate({zoom:i-1},n,{},r.availableImages),h=u.evaluate({zoom:i},n,{},r.availableImages),p=u.evaluate({zoom:i+1},n,{},r.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,o[c]=!0,o[h]=!0,o[p]=!0,n.patterns[l.id]={min:c,mid:h,max:p}}}}catch(f){s.e(f)}finally{s.f()}return n}Ql.deviation=function(e,t,n,i){var r=t&&t.length,a=Math.abs(ku(e,0,r?t[0]*n:e.length,n));if(r)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(ku(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var l=0;for(o=0;o<i.length;o+=3){var u=i[o]*n,c=i[o+1]*n,h=i[o+2]*n;l+=Math.abs((e[u]-e[h])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[h+1]-e[u+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},Ql.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var a=0;a<e[r].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[r][a][o]);r>0&&n.holes.push(i+=e[r-1].length)}return n},Kl.default=$l;var Iu=function(){function e(t){v(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ua,this.indexArray=new no,this.indexArray2=new uo,this.programConfigurations=new es(t.layers,t.zoom),this.segments=new cs,this.segments2=new cs,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.projection=t.projection}return y(e,[{key:"populate",value:function(e,t,n,i){this.hasPattern=Au("fill",this.layers,t);var r,a=this.layers[0].layout.get("fill-sort-key"),o=[],s=d(e);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,m=Ds(u,f);if(this.layers[0]._featureFilter.filter(new xa(this.zoom),m,n)){var v=a?a.evaluate(m,{},n,t.availableImages):void 0,y={id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:f?m.geometry:As(u,n,i),patterns:{},sortKey:v};o.push(y)}}}catch(T){s.e(T)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=0,_=o;g<_.length;g++){var x=_[g],b=x.geometry,w=x.index,k=x.sourceLayerIndex;if(this.hasPattern){var S=Du("fill",this.layers,x,this.zoom,t);this.patternFeatures.push(S)}else this.addFeature(x,b,w,n,{},t.availableImages);t.featureIndex.insert(e[w].feature,b,w,k,this.index)}}},{key:"update",value:function(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}},{key:"addFeatures",value:function(e,t,n,i,r){var a,o=d(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,i)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ql),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,i,r){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=d(Mu(t,500));try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=0,h=d(u);try{for(h.s();!(l=h.n()).done;)c+=l.value.length}catch(T){h.e(T)}finally{h.f()}var p,f=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),m=f.vertexLength,v=[],y=[],g=d(u);try{for(g.s();!(p=g.n()).done;){var _=p.value;if(0!==_.length){_!==u[0]&&y.push(v.length/2);var x=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),b=x.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(b+_.length-1,b),v.push(_[0].x),v.push(_[0].y);for(var w=1;w<_.length;w++)this.layoutVertexArray.emplaceBack(_[w].x,_[w].y),this.indexArray2.emplaceBack(b+w-1,b+w),v.push(_[w].x),v.push(_[w].y);x.vertexLength+=_.length,x.primitiveLength+=_.length}}}catch(T){g.e(T)}finally{g.f()}for(var k=Kl(v,y),S=0;S<k.length;S+=3)this.indexArray.emplaceBack(m+k[S],m+k[S+1],m+k[S+2]);f.vertexLength+=c,f.primitiveLength+=k.length/3}}catch(T){s.e(T)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,o,i)}}]),e}();xr(Iu,"FillBucket",{omit:["layers","patternFeatures"]});var Lu=new Oa({"fill-sort-key":new Aa(et.layout_fill["fill-sort-key"])}),Ou={paint:new Oa({"fill-antialias":new Pa(et.paint_fill["fill-antialias"]),"fill-opacity":new Aa(et.paint_fill["fill-opacity"]),"fill-color":new Aa(et.paint_fill["fill-color"]),"fill-outline-color":new Aa(et.paint_fill["fill-outline-color"]),"fill-translate":new Pa(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Pa(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Da(et.paint_fill["fill-pattern"])}),layout:Lu},zu=Na([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ru=Na([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Bu=Na([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Fu=zu.members,Nu=ju;function ju(e,t,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=r,e.readFields(Uu,this,t)}function Uu(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[i]=r}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Vu(e){for(var t,n,i=0,r=0,a=e.length,o=a-1;r<a;o=r++)i+=((n=e[o]).x-(t=e[r]).x)*(t.y+n.y);return i}ju.types=["Unknown","Point","LineString","Polygon"],ju.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,r=0,a=0,o=0,s=[];e.pos<n;){if(r<=0){var l=e.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)a+=e.readSVarint(),o+=e.readSVarint(),1===i&&(t&&s.push(t),t=[]),t.push(new g(a,o));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&s.push(t),s},ju.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,r=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(i<=0){var c=e.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=e.readSVarint())<o&&(o=r),r>s&&(s=r),(a+=e.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,u]},ju.prototype.toGeoJSON=function(e,t,n){var i,r,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=ju.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];c(l=h);break;case 2:for(i=0;i<l.length;i++)c(l[i]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,i,r=[],a=0;a<t;a++){var o=Vu(e[a]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[e[a]]):n.push(e[a]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)c(l[i][r])}1===l.length?l=l[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Zu=Wu;function Wu(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Gu,this,t),this.length=this._features.length}function Gu(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(n))}function Yu(e,t,n){if(3===e){var i=new Zu(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}Wu.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Nu(this._pbf,t,this.extent,this._keys,this._values)};var Hu={VectorTile:function(e,t){this.layers=e.readFields(Yu,{},t)},VectorTileFeature:Nu,VectorTileLayer:Zu};function Xu(e,t,n,i){var r,a=[],o=0===i?function(e,t,n,i,r,a){e.push(new g(a,n+(a-t)/(i-t)*(r-n)))}:function(e,t,n,i,r,a){e.push(new g(t+(a-n)/(r-n)*(i-t),a))},s=d(e);try{for(s.s();!(r=s.n()).done;){var l,u=r.value,c=[],h=d(u);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(!(p.length<=2)){for(var f=[],m=0;m<p.length-1;m++){var v=p[m].x,y=p[m].y,_=p[m+1].x,x=p[m+1].y,b=0===i?v:y,w=0===i?_:x;b<t?w>t&&o(f,v,y,_,x,t):b>n?w<n&&o(f,v,y,_,x,n):f.push(p[m]),w<t&&b>=t&&o(f,v,y,_,x,t),w>n&&b<=n&&o(f,v,y,_,x,n)}var k=p[p.length-1],S=0===i?k.x:k.y;S>=t&&S<=n&&f.push(k),f.length&&(k=f[f.length-1],f[0].x===k.x&&f[0].y===k.y||f.push(f[0]),c.push(f))}}}catch(T){h.e(T)}finally{h.f()}c.length&&a.push(c)}}catch(T){s.e(T)}finally{s.f()}return a}var qu=Hu.VectorTileFeature.types,Ku=Math.pow(2,13);function $u(e,t,n,i,r,a,o,s){e.emplaceBack((t<<1)+o,(n<<1)+a,(Math.floor(i*Ku)<<1)+r,Math.round(s))}function Qu(e,t,n){var i=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*i,n[1]*i,n[2]*i)}var Ju=function(){function e(){v(this,e),this.acc=new g(0,0),this.polyCount=[]}return y(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new g(e.x,e.y),this.max=new g(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=this.min,i=this.max;e.x<n.x?n.x=e.x:e.x>i.x&&(i.x=e.x),e.y<n.y?n.y=e.y:e.y>i.y&&(i.y=e.y),((0===e.x||e.x===hs)&&e.x===t.x)!=((0===e.y||e.y===hs)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,yn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>hs!=e.x>hs&&this.addBorderIntersection(1,yn(t.y,e.y,(hs-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,yn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>hs!=e.y>hs&&this.addBorderIntersection(3,yn(t.x,e.x,(hs-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var i=0===e.y?2:3;this.addBorderIntersection(i,t.x),this.addBorderIntersection(i,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new g(0,0)}},{key:"span",value:function(){return new g(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),ec=function(){function e(t){v(this,e),this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Za,this.centroidVertexArray=new Eo,this.indexArray=new no,this.programConfigurations=new es(t.layers,t.zoom),this.segments=new cs,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return y(e,[{key:"populate",value:function(e,t,n,i){this.features=[],this.hasPattern=Au("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/hs/(1<<e.z)}(n);var r,a=d(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.feature,l=o.id,u=o.index,c=o.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=Ds(s,h);if(this.layers[0]._featureFilter.filter(new xa(this.zoom),p,n)){var f={id:l,sourceLayerIndex:c,index:u,geometry:h?p.geometry:As(s,n,i),properties:s.properties,type:s.type,patterns:{}},m=this.layoutVertexArray.length;this.hasPattern?this.features.push(Du("fill-extrusion",this.layers,f,this.zoom,t)):this.addFeature(f,f.geometry,u,n,{},t.availableImages,i),t.featureIndex.insert(s,f.geometry,u,c,this.index,m)}}}catch(v){a.e(v)}finally{a.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n,i,r){var a,o=d(this.features);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.geometry;this.addFeature(s,l,s.index,t,n,i,r)}}catch(u){o.e(u)}finally{o.f()}this.sortBorders()}},{key:"update",value:function(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Bu.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ru.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,i,r,a,o){var s=[new g(0,0),new g(hs,hs)],l=o.projection,u="globe"===l.name,c=this.enableTerrain&&!u?new Ju:null;u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new mo);for(var h,p,f=Mu(t,500),m=f.length-1;m>=0;m--){var v=f[m];(0===v.length||(h=v[0]).every((function(e){return e.x<=0}))||h.every((function(e){return e.x>=hs}))||h.every((function(e){return e.y<=0}))||h.every((function(e){return e.y>=hs})))&&f.splice(m,1)}if(u){var y=11.25,_=1<<i.z,x=xs(i.x/_),b=xs((i.x+1)/_),w=bs(i.y/_),k=bs((i.y+1)/_);p=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=[];if(!e.length||!n||!i)return o;for(var s=function(e,t){var n,i=d(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;o.push({polygon:r,bounds:t})}}catch(a){i.e(a)}finally{i.f()}},l=Math.ceil(Math.log2(n)),u=Math.ceil(Math.log2(i)),c=l-u,h=[],p=0;p<Math.abs(c);p++)h.push(c>0?0:1);for(var f=0;f<Math.min(l,u);f++)h.push(0),h.push(1);var m=e;if(m=Xu(m,t[0].y-r,t[1].y+r,1),!(m=Xu(m,t[0].x-r,t[1].x+r,0)).length)return o;var v=[];for(h.length?v.push({polygons:m,bounds:t,depth:0}):s(m,t);v.length;){var y=v.pop(),_=y.depth,x=h[_],b=y.bounds[0],w=y.bounds[1],k=0===x?b.x:b.y,S=0===x?w.x:w.y,T=a?a(x,k,S):.5*(k+S),C=Xu(y.polygons,k-r,T+r,x),E=Xu(y.polygons,T-r,S+r,x);if(C.length){var M=[b,new g(0===x?T:w.x,1===x?T:w.y)];h.length>_+1?v.push({polygons:C,bounds:M,depth:_+1}):s(C,M)}if(E.length){var P=[new g(0===x?T:b.x,1===x?T:b.y),w];h.length>_+1?v.push({polygons:E,bounds:P,depth:_+1}):s(E,P)}}return o}(f,s,Math.ceil((b-x)/y),Math.ceil((w-k)/y),1,(function(e,t,n){if(0===e)return.5*(t+n);var r=bs((i.y+t/hs)/_);return(gs(.5*(bs((i.y+n/hs)/_)+r))*_-i.y)*hs}))}else{p=[];var S,T=d(f);try{for(T.s();!(S=T.n()).done;){var C=S.value;p.push({polygon:C,bounds:s})}}catch(se){T.e(se)}finally{T.f()}}var E,M=d(p);try{for(M.s();!(E=M.n()).done;){for(var P=E.value,A=P.polygon,D=0,I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),L=0;L<A.length;L++){var O=A[L];if(0!==O.length){D+=O.length;var z=0;c&&c.startRing(O[0]);for(var R=0;R<O.length;R++){var B=O[R];if(R>=1){var F=O[R-1];if(!tc(B,F,P.bounds)){c&&c.append(B,F),I.vertexLength+4>cs.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var N=B.sub(F)._perp(),j=N.x/(Math.abs(N.x)+Math.abs(N.y)),U=N.y>0?1:0,V=F.dist(B);z+V>32768&&(z=0),$u(this.layoutVertexArray,B.x,B.y,j,U,0,0,z),$u(this.layoutVertexArray,B.x,B.y,j,U,0,1,z),z+=V,$u(this.layoutVertexArray,F.x,F.y,j,U,0,0,z),$u(this.layoutVertexArray,F.x,F.y,j,U,0,1,z);var Z=I.vertexLength;if(this.indexArray.emplaceBack(Z,Z+2,Z+1),this.indexArray.emplaceBack(Z+1,Z+2,Z+3),I.vertexLength+=4,I.primitiveLength+=2,u){var W=this.layoutVertexExtArray,G=l.projectTilePoint(B.x,B.y,i),Y=l.projectTilePoint(F.x,F.y,i),H=l.upVector(i,B.x,B.y),X=l.upVector(i,F.x,F.y);Qu(W,G,H),Qu(W,G,H),Qu(W,Y,X),Qu(W,Y,X)}}}}}}if(I.vertexLength+D>cs.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),"Polygon"===qu[e.type]){for(var q=[],K=[],$=I.vertexLength,Q=0;Q<A.length;Q++){var J=A[Q];if(0!==J.length){J!==A[0]&&K.push(q.length/2);for(var ee=0;ee<J.length;ee++){var te=J[ee];$u(this.layoutVertexArray,te.x,te.y,0,0,1,1,0),q.push(te.x),q.push(te.y),c&&c.currentPolyCount.top++,u&&Qu(this.layoutVertexExtArray,l.projectTilePoint(te.x,te.y,i),l.upVector(i,te.x,te.y))}}}for(var ne=Kl(q,K),ie=0;ie<ne.length;ie+=3)this.indexArray.emplaceBack($+ne[ie],$+ne[ie+2],$+ne[ie+1]);I.primitiveLength+=ne.length/3,I.vertexLength+=D}}}catch(se){M.e(se)}finally{M.f()}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;for(var re=c.borders,ae=this.featuresOnBorder.push(c)-1,oe=0;oe<4;oe++)re[oe][0]!==Number.MAX_VALUE&&this.borders[oe].push(ae)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,a,i)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,i){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[i].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else n=Math.ceil(7*(e.x+450)),i=0;else n=0,i=+r;var o,s=r?this.centroidVertexArray.length:t.vertexArrayOffset,l=d(t.polyCount);try{for(l.s();!(o=l.n()).done;){var u=o.value;r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*u.edges+u.top);for(var c=0;c<2*u.edges;c++)this.centroidVertexArray.emplace(s++,0,i),this.centroidVertexArray.emplace(s++,n,i);for(var h=0;h<u.top;h++)this.centroidVertexArray.emplace(s++,n,i)}}catch(p){l.e(p)}finally{l.f()}}}]),e}();function tc(e,t,n){return e.x===t.x&&(e.x<n[0].x||e.x>n[1].x)||e.y===t.y&&(e.y<n[0].y||e.y>n[1].y)}xr(ec,"FillExtrusionBucket",{omit:["layers","features"]}),xr(Ju,"PartMetadata");var nc={paint:new Oa({"fill-extrusion-opacity":new Pa(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Aa(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pa(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pa(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Da(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Aa(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Aa(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pa(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ic(e,t){return e.x*t.x+e.y*t.y}function rc(e,t){if(1===e.length){for(var n,i=0,r=t[i++];!n||r.equals(n);)if(!(n=t[i++]))return 1/0;for(;i<t.length;i++){var a=t[i],o=e[0],s=n.sub(r),l=a.sub(r),u=o.sub(r),c=ic(s,s),h=ic(s,l),p=ic(l,l),f=ic(u,s),m=ic(u,l),v=c*p-h*h,y=(p*f-h*m)/v,g=(c*m-h*f)/v,_=r.z*(1-y-g)+n.z*y+a.z*g;if(isFinite(_))return _}return 1/0}var x,b=1/0,w=d(t);try{for(w.s();!(x=w.n()).done;){var k=x.value;b=Math.min(b,k.z)}}catch(S){w.e(S)}finally{w.f()}return b}function ac(e){var t=new g(e[0],e[1]);return t.z=e[2],t}function oc(e,t,n,i,r,a,o,s){var l=o*r.getElevationAt(e,t,!0,!0),u=0!==a[0],c=u?0===a[1]?o*(a[0]/7-450):o*function(e,t,n){var i=Math.floor(t[0]/8),r=Math.floor(t[1]/8),a=10*(t[0]-8*i),o=10*(t[1]-8*r),s=e.getElevationAt(i,r,!0,!0),l=e.getMeterToDEM(n),u=Math.floor(.5*(a*l-1)),c=Math.floor(.5*(o*l-1)),h=e.tileCoordToPixel(i,r),d=2*u+1,p=2*c+1,f=function(e,t,n,i,r){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+r,n,!0),e.getElevationAtPixel(t,n+r,!0),e.getElevationAtPixel(t+i,n+r,!0)]}(e,h.x-u,h.y-c,d,p),m=Math.abs(f[0]-f[1]),v=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),g=Math.min(.25,.5*l*(m+v)/d),_=Math.min(.25,.5*l*y/p);return s+Math.max(g*a,_*o)}(r,a,s):l;return{base:l+(0===n)?-1:n,top:u?Math.max(c+i,l+n+2):l+i}}var sc=Na([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,lc=Na([{name:"a_packed",components:3,type:"Float32"}]).members,uc=Hu.VectorTileFeature.types,cc=Math.cos(Math.PI/180*37.5),hc=function(){function e(t){var n=this;v(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new Wa,this.layoutVertexArray2=new Ka,this.indexArray=new no,this.programConfigurations=new es(t.layers,t.zoom),this.segments=new cs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return y(e,[{key:"populate",value:function(e,t,n,i){this.hasPattern=Au("line",this.layers,t);var r,a=this.layers[0].layout.get("line-sort-key"),o=[],s=d(e);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,m=Ds(u,f);if(this.layers[0]._featureFilter.filter(new xa(this.zoom),m,n)){var v=a?a.evaluate(m,{},n):void 0,y={id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:f?m.geometry:As(u,n,i),patterns:{},sortKey:v};o.push(y)}}}catch(M){s.e(M)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=t.lineAtlas,_=t.featureIndex,x=this.addConstantDashes(g),b=0,w=o;b<w.length;b++){var k=w[b],S=k.geometry,T=k.index,C=k.sourceLayerIndex;if(x&&this.addFeatureDashes(k,g),this.hasPattern){var E=Du("line",this.layers,k,this.zoom,t);this.patternFeatures.push(E)}else this.addFeature(k,S,T,n,g.positions,t.availableImages);_.insert(e[T].feature,S,T,C,this.index)}}},{key:"addConstantDashes",value:function(e){var t,n=!1,i=d(this.layers);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==o.kind)n=!0;else{var s=o.value,l=a.value;if(!l)continue;e.addDash(l.from,s),e.addDash(l.to,s),l.other&&e.addDash(l.other,s)}}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"addFeatureDashes",value:function(e,t){var n,i=this.zoom,r=d(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.paint.get("line-dasharray").value,s=a.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==s.kind){var l=void 0,u=void 0,c=void 0,h=void 0,p=void 0,f=void 0;if("constant"===o.kind){var m=o.value;if(!m)continue;l=m.other||m.to,u=m.to,c=m.from}else l=o.evaluate({zoom:i-1},e),u=o.evaluate({zoom:i},e),c=o.evaluate({zoom:i+1},e);"constant"===s.kind?h=p=f=s.value:(h=s.evaluate({zoom:i-1},e),p=s.evaluate({zoom:i},e),f=s.evaluate({zoom:i+1},e)),t.addDash(l,h),t.addDash(u,p),t.addDash(c,f);var v=t.getKey(l,h),y=t.getKey(u,p),g=t.getKey(c,f);e.patterns[a.id]={min:v,mid:y,max:g}}}}catch(_){r.e(_)}finally{r.f()}}},{key:"update",value:function(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}},{key:"addFeatures",value:function(e,t,n,i,r){var a,o=d(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,i)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,lc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,i,r,a){var o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),l=o.get("line-cap").evaluate(e,{}),u=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var h,p=d(t);try{for(p.s();!(h=p.n()).done;){var f=h.value;this.addLine(f,e,s,l,u,c)}}catch(m){p.e(m)}finally{p.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,a,i)}},{key:"addLine",value:function(e,t,n,i,r,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===uc[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(r=1.05);var c,h,d,p,f,m=this.overscaling<=16?122880/(512*this.overscaling):0,v=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=e[l-2],f=e[u].sub(c)._unit()._perp());for(var y=u;y<l;y++)if(!(d=y===l-1?s?e[u+1]:void 0:e[y+1])||!e[y].equals(d)){f&&(p=f),c&&(h=c),c=e[y],f=d?d.sub(c)._unit()._perp():p;var g=(p=p||f).add(f);0===g.x&&0===g.y||g._unit();var _=p.x*f.x+p.y*f.y,x=g.x*f.x+g.y*f.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),k=x<cc&&h&&d,S=p.x*f.y-p.y*f.x>0;if(k&&y>u){var T=c.dist(h);if(T>2*m){var C=c.sub(c.sub(h)._mult(m/T)._round());this.updateDistance(h,C),this.addCurrentVertex(C,p,0,0,v),h=C}}var E=h&&d,M=E?n:s?"butt":i;if(E&&"round"===M&&(b<a?M="miter":b<=2&&(M="fakeround")),"miter"===M&&b>r&&(M="bevel"),"bevel"===M&&(b>2&&(M="flipbevel"),b<r&&(M="miter")),h&&this.updateDistance(h,c),"miter"===M)g._mult(b),this.addCurrentVertex(c,g,0,0,v);else if("flipbevel"===M){if(b>100)g=f.mult(-1);else{var P=b*p.add(f).mag()/p.sub(f).mag();g._perp()._mult(P*(S?-1:1))}this.addCurrentVertex(c,g,0,0,v),this.addCurrentVertex(c,g.mult(-1),0,0,v)}else if("bevel"===M||"fakeround"===M){var A=-Math.sqrt(b*b-1),D=S?A:0,I=S?0:A;if(h&&this.addCurrentVertex(c,p,D,I,v),"fakeround"===M)for(var L=Math.round(180*w/Math.PI/20),O=1;O<L;O++){var z=O/L;if(.5!==z){var R=z-.5;z+=z*R*(z-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*R*R+(.848013+_*(.215638*_-1.06021)))}var B=f.sub(p)._mult(z)._add(p)._unit()._mult(S?-1:1);this.addHalfVertex(c,B.x,B.y,!1,S,0,v)}d&&this.addCurrentVertex(c,f,-D,-I,v)}else if("butt"===M)this.addCurrentVertex(c,g,0,0,v);else if("square"===M){var F=h?1:-1;h||this.addCurrentVertex(c,g,F,F,v),this.addCurrentVertex(c,g,0,0,v),h&&this.addCurrentVertex(c,g,F,F,v)}else"round"===M&&(h&&(this.addCurrentVertex(c,p,0,0,v),this.addCurrentVertex(c,p,1,1,v,!0)),d&&(this.addCurrentVertex(c,f,-1,-1,v,!0),this.addCurrentVertex(c,f,0,0,v)));if(k&&y<l-1){var N=c.dist(d);if(N>2*m){var j=c.add(d.sub(c)._mult(m/N)._round());this.updateDistance(c,j),this.addCurrentVertex(j,f,0,0,v),c=j}}}}}},{key:"addCurrentVertex",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*i-t.x,s=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,r),this.addHalfVertex(e,o,s,a,!0,-i,r)}},{key:"addHalfVertex",value:function(e,t,n,i,r,a,o){var s=e.x,l=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(i?1:0),(l<<1)+(r?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);var u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),r?this.e2=u:this.e1=u}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();xr(hc,"LineBucket",{omit:["layers","patternFeatures"]});var dc=new Oa({"line-cap":new Aa(et.layout_line["line-cap"]),"line-join":new Aa(et.layout_line["line-join"]),"line-miter-limit":new Pa(et.layout_line["line-miter-limit"]),"line-round-limit":new Pa(et.layout_line["line-round-limit"]),"line-sort-key":new Aa(et.layout_line["line-sort-key"])}),pc={paint:new Oa({"line-opacity":new Aa(et.paint_line["line-opacity"]),"line-color":new Aa(et.paint_line["line-color"]),"line-translate":new Pa(et.paint_line["line-translate"]),"line-translate-anchor":new Pa(et.paint_line["line-translate-anchor"]),"line-width":new Aa(et.paint_line["line-width"]),"line-gap-width":new Aa(et.paint_line["line-gap-width"]),"line-offset":new Aa(et.paint_line["line-offset"]),"line-blur":new Aa(et.paint_line["line-blur"]),"line-dasharray":new Da(et.paint_line["line-dasharray"]),"line-pattern":new Da(et.paint_line["line-pattern"]),"line-gradient":new La(et.paint_line["line-gradient"])}),layout:dc},fc=new(function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new xa(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),o(s(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,i,r){return t=O({},t,{zoom:Math.floor(t.zoom)}),o(s(n.prototype),"evaluate",this).call(this,e,t,i,r)}}]),n}(Aa))(pc.paint.properties["line-width"].specification);function mc(e,t){return t>0?t+2*e:e}fc.useIntegerZoom=!0;var vc=Na([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),yc=Na([{name:"a_projected_pos",components:3,type:"Float32"}],4);Na([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var gc=Na([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_c=Na([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Na([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var xc=Na([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),bc=Na([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Na([{name:"triangle",components:3,type:"Uint16"}]),Na([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Na([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Na([{type:"Float32",name:"offsetX"}]),Na([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var wc=24,kc=128;function Sc(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new xa(e+1))};if("source"===n.kind)return{kind:"source"};for(var i=n.zoomStops,r=n.interpolationType,a=0;a<i.length&&i[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<i.length&&i[o]<e+1;)o++;o=Math.min(i.length-1,o);var s=i[a],l=i[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:l,minSize:n.evaluate(new xa(s)),maxSize:n.evaluate(new xa(l)),interpolationType:r}}function Tc(e,t,n){var i=t.uSize,r=t.uSizeT,a=n.lowerSize,o=n.upperSize;return"source"===e.kind?a/kc:"composite"===e.kind?yn(a/kc,o/kc,r):i}function Cc(e,t){var n=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){var r=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=r?P(Rn.interpolationFactor(r,t,a,o),0,1):0;"camera"===e.kind?i=yn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:i}}var Ec=Object.freeze({__proto__:null,getSizeData:Sc,evaluateSizeForFeature:Tc,evaluateSizeForZoom:Cc,SIZE_PACK_FACTOR:kc});function Mc(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var i=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),_a.applyArabicShaping&&(e=_a.applyArabicShaping(e)),e}(e.text,t,n)})),e}var Pc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Ac(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function Dc(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var Ic=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1,p=e[t+h];for(h+=d,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),a-=u}return(p?-1:1)*o*Math.pow(2,a-i)},Lc=function(e,t,n,i,r,a){var o,s,l,u=8*a-r-1,c=(1<<u)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,r),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;e[n+p]=255&s,p+=f,s/=256,r-=8);for(o=o<<r|s,u+=r;u>0;e[n+p]=255&o,p+=f,o/=256,u-=8);e[n+p-f]|=128*m},Oc=zc;function zc(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}zc.Varint=0,zc.Fixed64=1,zc.Bytes=2,zc.Fixed32=5;var Rc=4294967296,Bc=1/Rc,Fc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Nc(e){return e.type===zc.Bytes?e.readVarint()+e.pos:e.pos+1}function jc(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Uc(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=e;r--)n.buf[r+i]=n.buf[r]}function Vc(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Zc(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Wc(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Gc(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Yc(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Hc(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Xc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function qc(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Kc(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function $c(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Qc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Jc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function eh(e,t,n){t.glyphs=[],1===e&&n.readMessage(th,t)}function th(e,t,n){if(3===e){var i=n.readMessage(nh,{}),r=i.id,a=i.bitmap,o=i.width,s=i.height,l=i.left,u=i.top,c=i.advance;t.glyphs.push({id:r,bitmap:new Wl({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:l,top:u,advance:c}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function nh(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function ih(e){var t,n=0,i=0,r=d(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=a.w*a.h,i=Math.max(i,a.w)}}catch(v){r.e(v)}finally{r.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),i),h:1/0}],l=0,u=0,c=d(e);try{for(c.s();!(o=c.n()).done;)for(var h=o.value,p=s.length-1;p>=0;p--){var f=s[p];if(!(h.w>f.w||h.h>f.h)){if(h.x=f.x,h.y=f.y,u=Math.max(u,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===f.w&&h.h===f.h){var m=s.pop();p<s.length&&(s[p]=m)}else h.h===f.h?(f.x+=h.w,f.w-=h.w):h.w===f.w?(f.y+=h.h,f.h-=h.h):(s.push({x:f.x+h.w,y:f.y,w:f.w-h.w,h:h.h}),f.y+=h.h,f.h-=h.h);break}}}catch(v){c.e(v)}finally{c.f()}return{w:l,h:u,fill:n/(l*u)||0}}zc.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,a=this.pos;this.type=7&i,e(r,t,this),this.pos===a&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=$c(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Jc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=$c(this.buf,this.pos)+$c(this.buf,this.pos+4)*Rc;return this.pos+=8,e},readSFixed64:function(){var e=$c(this.buf,this.pos)+Jc(this.buf,this.pos+4)*Rc;return this.pos+=8,e},readFloat:function(){var e=Ic(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ic(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return t=127&(n=i[this.pos++]),n<128?t:(t|=(127&(n=i[this.pos++]))<<7,n<128?t:(t|=(127&(n=i[this.pos++]))<<14,n<128?t:(t|=(127&(n=i[this.pos++]))<<21,n<128?t:function(e,t,n){var i,r,a=n.buf;if(i=(112&(r=a[n.pos++]))>>4,r<128)return jc(e,i,t);if(i|=(127&(r=a[n.pos++]))<<3,r<128)return jc(e,i,t);if(i|=(127&(r=a[n.pos++]))<<10,r<128)return jc(e,i,t);if(i|=(127&(r=a[n.pos++]))<<17,r<128)return jc(e,i,t);if(i|=(127&(r=a[n.pos++]))<<24,r<128)return jc(e,i,t);if(i|=(1&(r=a[n.pos++]))<<31,r<128)return jc(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Fc?function(e,t,n){return Fc.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var i="",r=t;r<n;){var a,o,s,l=e[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(a=e[r+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(o=e[r+2],128==(192&(a=e[r+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[r+2],s=e[r+3],128==(192&(a=e[r+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=c}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==zc.Bytes)return e.push(this.readVarint(t));var n=Nc(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==zc.Bytes)return e.push(this.readSVarint());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==zc.Bytes)return e.push(this.readBoolean());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==zc.Bytes)return e.push(this.readFloat());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==zc.Bytes)return e.push(this.readDouble());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==zc.Bytes)return e.push(this.readFixed32());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==zc.Bytes)return e.push(this.readSFixed32());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==zc.Bytes)return e.push(this.readFixed64());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==zc.Bytes)return e.push(this.readSFixed64());var t=Nc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===zc.Varint)for(;this.buf[this.pos++]>127;);else if(t===zc.Bytes)this.pos=this.readVarint()+this.pos;else if(t===zc.Fixed32)this.pos+=4;else{if(t!==zc.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Qc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Qc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Qc(this.buf,-1&e,this.pos),Qc(this.buf,Math.floor(e*Bc),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Qc(this.buf,-1&e,this.pos),Qc(this.buf,Math.floor(e*Bc),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var i,r,a=0;a<t.length;a++){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){i>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):r=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(e[n++]=239,e[n++]=191,e[n++]=189,r=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Uc(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Lc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Lc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&Uc(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,zc.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Vc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Zc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Yc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Wc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Gc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Hc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Xc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,qc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Kc,t)},writeBytesField:function(e,t){this.writeTag(e,zc.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,zc.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,zc.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,zc.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,zc.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,zc.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,zc.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,zc.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,zc.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,zc.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var rh=function(){function e(t,n){var i=n.pixelRatio,r=n.version,a=n.stretchX,o=n.stretchY,s=n.content;v(this,e),this.paddedRect=t,this.pixelRatio=i,this.stretchX=a,this.stretchY=o,this.content=s,this.version=r}return y(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),ah=function(){function e(t,n){v(this,e);var i={},r={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,i,a),this.addImages(n,r,a);var o=ih(a),s=o.w,l=o.h,u=new Gl({width:s||1,height:l||1});for(var c in t){var h=t[c],d=i[c].paddedRect;Gl.copy(h.data,u,{x:0,y:0},{x:d.x+1,y:d.y+1},h.data)}for(var p in n){var f=n[p],m=r[p].paddedRect,y=m.x+1,g=m.y+1,_=f.data.width,x=f.data.height;Gl.copy(f.data,u,{x:0,y:0},{x:y,y:g},f.data),Gl.copy(f.data,u,{x:0,y:x-1},{x:y,y:g-1},{width:_,height:1}),Gl.copy(f.data,u,{x:0,y:0},{x:y,y:g+x},{width:_,height:1}),Gl.copy(f.data,u,{x:_-1,y:0},{x:y-1,y:g},{width:1,height:x}),Gl.copy(f.data,u,{x:0,y:0},{x:y+_,y:g},{width:1,height:x})}this.image=u,this.iconPositions=i,this.patternPositions=r}return y(e,[{key:"addImages",value:function(e,t,n){for(var i in e){var r=e[i],a={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(a),t[i]=new rh(a,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in this.haveRenderCallbacks=this.haveRenderCallbacks.filter((function(t){return e.hasImage(t)})),e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var i=h(e.tl,2),r=i[0],a=i[1];n.update(t.data,void 0,{x:r,y:a})}}}]),e}();xr(rh,"ImagePosition"),xr(ah,"ImageAtlas");var oh={horizontal:1,vertical:2,horizontalOnly:3},sh=function(){function e(){v(this,e),this.scale=1,this.fontStack="",this.imageName=null}return y(e,null,[{key:"forText",value:function(t,n){var i=new e;return i.scale=t||1,i.fontStack=n,i}},{key:"forImage",value:function(t){var n=new e;return n.imageName=t,n}}]),e}(),lh=function(){function e(){v(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return y(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(e){this.text=function(e,t){for(var n="",i=0;i<e.length;i++){var r=e.charCodeAt(i+1)||null,a=e.charCodeAt(i-1)||null;n+=!t&&(r&&ra(r)&&!Pc[e[i+1]]||a&&ra(a)&&!Pc[e[i-1]])||!Pc[e[i]]?e[i]:Pc[e[i]]}return n}(this.text,e)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&ch[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,i=this.text.length-1;i>=0&&i>=e&&ch[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}},{key:"substring",value:function(t,n){var i=new e;return i.text=this.text.substring(t,n),i.sectionIndex=this.sectionIndex.slice(t,n),i.sections=this.sections,i}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(sh.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,i=0;i<e.text.length;++i)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(sh.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Y("Reached maximum number of images 6401")}else Y("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,n){for(var i=new e,r=0;r<t.sections.length;r++){var a=t.sections[r];a.image?i.addImageSection(a):i.addTextSection(a,n)}return i}}]),e}();function uh(e,t,n,i,r,a,o,s,l,u,c,h,p,f,m,v){var y,g=lh.fromFeature(e,r);h===oh.vertical&&g.verticalizePunctuation(p);var _=_a.processBidirectionalText,x=_a.processStyledBidirectionalText;if(_&&1===g.sections.length){y=[];var b,w=_(g.toString(),yh(g,u,a,t,i,f,m)),k=d(w);try{for(k.s();!(b=k.n()).done;){var S=b.value,T=new lh;T.text=S,T.sections=g.sections;for(var C=0;C<S.length;C++)T.sectionIndex.push(0);y.push(T)}}catch(O){k.e(O)}finally{k.f()}}else if(x){y=[];var E,M=x(g.text,g.sectionIndex,yh(g,u,a,t,i,f,m)),P=d(M);try{for(P.s();!(E=P.n()).done;){var A=E.value,D=new lh;D.text=A[0],D.sectionIndex=A[1],D.sections=g.sections,y.push(D)}}catch(O){P.e(O)}finally{P.f()}}else y=function(e,t){var n,i=[],r=e.text,a=0,o=d(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;i.push(e.substring(a,s)),a=s}}catch(O){o.e(O)}finally{o.f()}return a<r.length&&i.push(e.substring(a,r.length)),i}(g,yh(g,u,a,t,i,f,m));var I=[],L={positionedLines:I,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,i,r,a,o,s,l,u,c,h){var p,f=0,m=0,v=0,y="right"===s?1:"left"===s?0:.5,g=!1,_=d(r);try{for(_.s();!(p=_.n()).done;){var x,b=p.value.getSections(),w=d(b);try{for(w.s();!(x=w.n()).done;){var k=x.value;if(!k.imageName){var S=t[k.fontStack];if(S&&!(g=void 0!==S.ascender&&void 0!==S.descender))break}}}catch(O){w.e(O)}finally{w.f()}if(!g)break}}catch(O){_.e(O)}finally{_.f()}var T,C,E=0,M=d(r);try{for(M.s();!(T=M.n()).done;){var P=T.value;P.trim();var A=P.getMaxScale(),D=(A-1)*wc,I={positionedGlyphs:[],lineOffset:0};e.positionedLines[E]=I;var L=I.positionedGlyphs,z=0;if(P.length()){for(var R=0,B=0,F=0;F<P.length();F++){var N=P.getSection(F),j=P.getSectionIndex(F),U=P.getCharCode(F),V=N.scale,Z=null,W=null,G=null,Y=wc,H=0,X=!(l===oh.horizontal||!c&&!ia(U)||c&&(ch[U]||(C=U,Er(C)||Mr(C)||Pr(C)||Xr(C)||Qr(C))));if(N.imageName){var q=i[N.imageName];if(!q)continue;G=N.imageName,e.iconsInText=e.iconsInText||!0,W=q.paddedRect;var K=q.displaySize;V=V*wc/h,Z={width:K[0],height:K[1],left:1,top:-3,advance:X?K[1]:K[0],localGlyph:!1},H=g?-Z.height*V:A*wc-17-K[1]*V,Y=Z.advance;var $=(X?K[0]:K[1])*V-wc*A;$>0&&$>z&&(z=$)}else{var Q=n[N.fontStack];if(!Q)continue;Q[U]&&(W=Q[U]);var J=t[N.fontStack];if(!J)continue;var ee=J.glyphs[U];if(!ee)continue;if(Z=ee.metrics,Y=8203!==U?wc:0,g){var te=void 0!==J.ascender?Math.abs(J.ascender):0,ne=void 0!==J.descender?Math.abs(J.descender):0,ie=(te+ne)*V;R<ie&&(R=ie,B=(te-ne)/2*V),H=-te*V}else H=(A-V)*wc-17}X?(e.verticalizable=!0,L.push({glyph:U,imageName:G,x:f,y:m+H,vertical:X,scale:V,localGlyph:Z.localGlyph,fontStack:N.fontStack,sectionIndex:j,metrics:Z,rect:W}),f+=Y*V+u):(L.push({glyph:U,imageName:G,x:f,y:m+H,vertical:X,scale:V,localGlyph:Z.localGlyph,fontStack:N.fontStack,sectionIndex:j,metrics:Z,rect:W}),f+=Z.advance*V+u)}0!==L.length&&(v=Math.max(f-u,v),g?_h(L,y,z,B,a*A/2):_h(L,y,z,0,a/2)),f=0;var re=a*A+z;I.lineOffset=Math.max(z,D),m+=re,++E}else m+=a,++E}}catch(O){M.e(O)}finally{M.f()}var ae=m,oe=gh(o),se=oe.horizontalAlign,le=oe.verticalAlign;(function(e,t,n,i,r,a){var o,s=(t-n)*r,l=-a*i,u=d(e);try{for(u.s();!(o=u.n()).done;){var c,h=o.value,p=d(h.positionedGlyphs);try{for(p.s();!(c=p.n()).done;){var f=c.value;f.x+=s,f.y+=l}}catch(O){p.e(O)}finally{p.f()}}}catch(O){u.e(O)}finally{u.f()}})(e.positionedLines,y,se,le,v,ae),e.top+=-le*ae,e.bottom=e.top+ae,e.left+=-se*v,e.right=e.left+v,e.hasBaseline=g}(L,t,n,i,y,o,s,l,h,u,p,v),!function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(O){n.e(O)}finally{n.f()}return!0}(I)&&L}var ch={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},hh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function dh(e,t,n,i,r,a){if(t.imageName){var o=i[t.imageName];return o?o.displaySize[0]*t.scale*wc/a+r:0}var s=n[t.fontStack],l=s&&s.glyphs[e];return l?l.metrics.advance*t.scale+r:0}function ph(e,t,n,i){var r=Math.pow(e-t,2);return i?e<t?r/2:2*r:r+Math.abs(n)*n}function fh(e,t,n){var i=0;return 10===e&&(i-=1e4),n&&(i+=150),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function mh(e,t,n,i,r,a){var o,s=null,l=ph(t,n,r,a),u=d(i);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=ph(t-c.x,n,r,a)+c.badness;h<=l&&(s=c,l=h)}}catch(p){u.e(p)}finally{u.f()}return{index:e,x:t,priorBreak:s,badness:l}}function vh(e){return e?vh(e.priorBreak).concat(e.index):[]}function yh(e,t,n,i,r,a,o){if("point"!==a)return[];if(!e)return[];for(var s,l=[],u=function(e,t,n,i,r,a){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=dh(e.getCharCode(s),l,i,r,t,a)}return o/Math.max(1,Math.ceil(o/n))}(e,t,n,i,r,o),c=e.text.indexOf("\u200b")>=0,h=0,d=0;d<e.length();d++){var p=e.getSection(d),f=e.getCharCode(d);if(ch[f]||(h+=dh(f,p,i,r,t,o)),d<e.length()-1){var m=!((s=f)<11904||!(Br(s)||Rr(s)||Kr(s)||Hr(s)||Ur(s)||Ar(s)||Fr(s)||Lr(s)||Vr(s)||Zr(s)||jr(s)||Jr(s)||Or(s)||Ir(s)||Dr(s)||Nr(s)||zr(s)||qr(s)||Gr(s)||Wr(s)));(hh[f]||m||p.imageName)&&l.push(mh(d+1,h,u,l,fh(f,e.getCharCode(d+1),m&&c),!1))}}return vh(mh(e.length(),h,u,l,0,!0))}function gh(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function _h(e,t,n,i,r){if(t||n||i||r)for(var a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t,l=0;l<=a;l++)e[l].x-=s,e[l].y+=n+i+r}function xh(e,t,n){var i=gh(n),r=i.horizontalAlign,a=i.verticalAlign,o=t[0]-e.displaySize[0]*r,s=t[1]-e.displaySize[1]*a;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function bh(e,t,n,i,r,a){var o,s=e.image;if(s.content){var l=s.content,u=s.pixelRatio||1;o=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,d,p,f=t.left*a,m=t.right*a;"width"===n||"both"===n?(p=r[0]+f-i[3],h=r[0]+m+i[1]):h=(p=r[0]+(f+m-s.displaySize[0])/2)+s.displaySize[0];var v=t.top*a,y=t.bottom*a;return"height"===n||"both"===n?(c=r[1]+v-i[0],d=r[1]+y+i[2]):d=(c=r[1]+(v+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:d,left:p,collisionPadding:o}}var wh=function(e){f(n,e);var t=m(n);function n(e,i,r,a,o){var s;return v(this,n),(s=t.call(this,e,i)).angle=a,s.z=r,void 0!==o&&(s.segment=o),s}return y(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.z,this.angle,this.segment)}}]),n}(g);function kh(e,t,n,i,r){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<n/2;){var c=e[o],h=e[o+1];if(!h)return!1;var d=e[o-1].angleTo(c)-c.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>r)return!1;o++,s+=c.dist(h)}return!0}function Sh(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Th(e,t,n){return e?.6*t*n:0}function Ch(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Eh(e,t,n,i,r,a){for(var o=Th(n,r,a),s=Ch(n,i)*a,l=0,u=Sh(e)/2,c=0;c<e.length-1;c++){var h=e[c],d=e[c+1],p=h.dist(d);if(l+p>u){var f=(u-l)/p,m=yn(h.x,d.x,f),v=yn(h.y,d.y,f),y=new wh(m,v,0,d.angleTo(h),c);return!o||kh(e,y,s,o,t)?y:void 0}l+=p}}function Mh(e,t,n,i,r,a,o,s,l){var u=Th(i,a,o),c=Ch(i,r),h=c*o,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),Ph(e,d?t/2*s%t:(c/2+2*a)*o*s%t,t,u,n,h,d,!1,l)}function Ph(e,t,n,i,r,a,o,s,l){for(var u=a/2,c=Sh(e),h=0,d=t-n,p=[],f=0;f<e.length-1;f++){for(var m=e[f],v=e[f+1],y=m.dist(v),g=v.angleTo(m);d+n<h+y;){var _=((d+=n)-h)/y,x=yn(m.x,v.x,_),b=yn(m.y,v.y,_);if(x>=0&&x<l&&b>=0&&b<l&&d-u>=0&&d+u<=c){var w=new wh(x,b,0,g,f);w._round(),i&&!kh(e,w,a,i,r)||p.push(w)}}h+=y}return s||p.length||o||(p=Ph(e,h/2,n,i,r,a,o,!0,l)),p}function Ah(e,t,n,i,r){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<t&&h.x<t||(c.x<t?c=new g(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<t&&(h=new g(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new g(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new g(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=i&&h.x>=i||(c.x>=i?c=new g(i,c.y+(i-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=i&&(h=new g(i,c.y+(i-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=r&&h.y>=r||(c.y>=r?c=new g(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round():h.y>=r&&(h=new g(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round()),l&&c.equals(l[l.length-1])||(l=[c],a.push(l)),l.push(h)))))}return a}xr(wh,"Anchor");var Dh=1e20;function Ih(e,t,n,i,r,a,o,s,l){for(var u=t;u<t+i;u++)Lh(e,n*a+u,a,r,o,s,l);for(var c=n;c<n+r;c++)Lh(e,c*a+t,1,i,o,s,l)}function Lh(e,t,n,i,r,a,o){a[0]=0,o[0]=-Dh,o[1]=Dh,r[0]=e[t];for(var s=1,l=0,u=0;s<i;s++){r[s]=e[t+s*n];var c=s*s;do{var h=a[l];u=(r[s]-r[h]+c-h*h)/(s-h)/2}while(u<=o[l]&&--l>-1);a[++l]=s,o[l]=u,o[l+1]=Dh}for(var d=0,p=0;d<i;d++){for(;o[p+1]<d;)p++;var f=a[p],m=d-f;e[t+d*n]=r[f]+m*m}}var Oh={none:0,ideographs:1,all:2},zh=function(){function e(t,n,i){v(this,e),this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=i,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return y(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,n){var i=this,r=[];for(var a in t){var o,s=d(t[a]);try{for(s.s();!(o=s.n()).done;){var l=o.value;r.push({stack:a,id:l})}}catch(u){s.e(u)}finally{s.f()}}I(r,(function(t,n){var r=t.stack,a=t.id,o=i.entries[r];o||(o=i.entries[r]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var s=o.glyphs[a];if(void 0===s){if(s=i._tinySDF(o,r,a))return o.glyphs[a]=s,void n(null,{stack:r,id:a,glyph:s});var l=Math.floor(a/256);if(256*l>65535)n(new Error("glyphs > 65535 not supported"));else if(o.ranges[l])n(null,{stack:r,id:a,glyph:s});else{var c=o.requests[l];c||(c=o.requests[l]=[],e.loadGlyphRange(r,l,i.url,i.requestManager,(function(e,t){if(t){for(var n in o.ascender=t.ascender,o.descender=t.descender,t.glyphs)i._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t.glyphs[+n]);o.ranges[l]=!0}var r,a=d(c);try{for(a.s();!(r=a.n()).done;)(0,r.value)(e,t)}catch(u){a.e(u)}finally{a.f()}delete o.requests[l]}))),c.push((function(e,t){e?n(e):t&&n(null,{stack:r,id:a,glyph:t.glyphs[a]||null})}))}}else n(null,{stack:r,id:a,glyph:s})}),(function(e,t){if(e)n(e);else if(t){var r,a={},o=d(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=s.stack,c=s.id,h=s.glyph;void 0===a[l]&&(a[l]={}),void 0===a[l].glyphs&&(a[l].glyphs={}),a[l].glyphs[c]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics},a[l].ascender=i.entries[l].ascender,a[l].descender=i.entries[l].descender}}catch(u){o.e(u)}finally{o.f()}n(null,a)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return this.localGlyphMode!==Oh.none&&(this.localGlyphMode===Oh.all?!!this.localFontFamily:!!this.localFontFamily&&(Zr(e)||Yr(e)||Or(e)||zr(e)||Lr(e)))}},{key:"_tinySDF",value:function(t,n,i){var r=this.localFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),(a=t.tinySDF=new e.TinySDF({fontFamily:r,fontWeight:o,fontSize:48,buffer:6,radius:16})).fontWeight=o}if(this.localGlyphs[a.fontWeight][i])return this.localGlyphs[a.fontWeight][i];var s=String.fromCharCode(i),l=a.draw(s),u=l.data,c=l.width,h=l.height,d=l.glyphWidth,p=l.glyphHeight,f=l.glyphLeft,m=l.glyphTop,v=l.glyphAdvance;return this.localGlyphs[a.fontWeight][i]={id:i,bitmap:new Wl({width:c,height:h},u),metrics:{width:d/2,height:p/2,left:f/2,top:m/2-27,advance:v/2,localGlyph:!0}}}}}]),e}();function Rh(e,t,n,i){var r=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2,l=a.paddedRect.h-2,u=e.right-e.left,c=e.bottom-e.top,h=a.stretchX||[[0,s]],d=a.stretchY||[[0,l]],p=function(e,t){return e+t[1]-t[0]},f=h.reduce(p,0),m=d.reduce(p,0),v=s-f,y=l-m,_=0,x=f,b=0,w=m,k=0,S=v,T=0,C=y;if(a.content&&i){var E=a.content;_=Bh(h,0,E[0]),b=Bh(d,0,E[1]),x=Bh(h,E[0],E[2]),w=Bh(d,E[1],E[3]),k=E[0]-_,T=E[1]-b,S=E[2]-E[0]-x,C=E[3]-E[1]-w}var M=function(i,r,s,l){var h=Nh(i.stretch-_,x,u,e.left),d=jh(i.fixed-k,S,i.stretch,f),p=Nh(r.stretch-b,w,c,e.top),v=jh(r.fixed-T,C,r.stretch,m),y=Nh(s.stretch-_,x,u,e.left),E=jh(s.fixed-k,S,s.stretch,f),M=Nh(l.stretch-b,w,c,e.top),P=jh(l.fixed-T,C,l.stretch,m),A=new g(h,p),D=new g(y,p),I=new g(y,M),L=new g(h,M),O=new g(d/o,v/o),z=new g(E/o,P/o),R=t*Math.PI/180;if(R){var B=Math.sin(R),F=Math.cos(R),N=[F,-B,B,F];A._matMult(N),D._matMult(N),L._matMult(N),I._matMult(N)}var j=i.stretch+i.fixed,U=r.stretch+r.fixed;return{tl:A,tr:D,bl:L,br:I,tex:{x:a.paddedRect.x+1+j,y:a.paddedRect.y+1+U,w:s.stretch+s.fixed-j,h:l.stretch+l.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:z,minFontScaleX:S/o/u,minFontScaleY:C/o/c,isSDF:n}};if(i&&(a.stretchX||a.stretchY))for(var P=Fh(h,v,f),A=Fh(d,y,m),D=0;D<P.length-1;D++)for(var I=P[D],L=P[D+1],O=0;O<A.length-1;O++)r.push(M(I,A[O],L,A[O+1]));else r.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return r}function Bh(e,t,n){var i,r=0,a=d(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;r+=Math.max(t,Math.min(n,o[1]))-Math.max(t,Math.min(n,o[0]))}}catch(s){a.e(s)}finally{a.f()}return r}function Fh(e,t,n){var i,r=[{fixed:-1,stretch:0}],a=d(e);try{for(a.s();!(i=a.n()).done;){var o=h(i.value,2),s=o[0],l=o[1],u=r[r.length-1];r.push({fixed:s-u.stretch,stretch:u.stretch}),r.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}}catch(c){a.e(c)}finally{a.f()}return r.push({fixed:t+1,stretch:n}),r}function Nh(e,t,n,i){return e/t*n+i}function jh(e,t,n,i){return e-t*n/i}function Uh(e,t,n,i){var r=t+e.positionedLines[i].lineOffset;return 0===i?n+r/2:n+(r+(t+e.positionedLines[i-1].lineOffset))/2}zh.loadGlyphRange=function(e,t,n,i,r){var a=256*t,o=a+255,s=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),Be.Glyphs);Ue(s,(function(e,t){if(e)r(e);else if(t){var n,i={},a=function(e){return new Oc(e).readFields(eh,{})}(t),o=d(a.glyphs);try{for(o.s();!(n=o.n()).done;){var s=n.value;i[s.id]=s}}catch(l){o.e(l)}finally{o.f()}r(null,{glyphs:i,ascender:a.ascender,descender:a.descender})}}))},zh.TinySDF=function(){function e(t){var n=t.fontSize,i=void 0===n?24:n,r=t.buffer,a=void 0===r?3:r,o=t.radius,s=void 0===o?8:o,l=t.cutoff,u=void 0===l?.25:l,c=t.fontFamily,h=void 0===c?"sans-serif":c,d=t.fontWeight,p=void 0===d?"normal":d,f=t.fontStyle,m=void 0===f?"normal":f;v(this,e),this.buffer=a,this.cutoff=u,this.radius=s;var y=this.size=i+4*a,g=this._createCanvas(y),_=this.ctx=g.getContext("2d",{willReadFrequently:!0});_.font="".concat(m," ").concat(p," ").concat(i,"px ").concat(h),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}return y(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),n=t.width,i=t.actualBoundingBoxAscent,r=t.actualBoundingBoxDescent,a=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight,s=Math.floor(i),l=Math.min(this.size-this.buffer,Math.ceil(o-a)),u=Math.min(this.size-this.buffer,Math.ceil(i)+Math.ceil(r)),c=l+2*this.buffer,h=u+2*this.buffer,d=c*h,p=new Uint8ClampedArray(d),f={data:p,width:c,height:h,glyphWidth:l,glyphHeight:u,glyphTop:s,glyphLeft:0,glyphAdvance:n};if(0===l||0===u)return f;var m=this.ctx,v=this.buffer,y=this.gridInner,g=this.gridOuter;m.clearRect(v,v,l,u),m.fillText(e,v,v+s+1);var _=m.getImageData(v,v,l,u);g.fill(Dh,0,d),y.fill(0,0,d);for(var x=0;x<u;x++)for(var b=0;b<l;b++){var w=_.data[4*(x*l+b)+3]/255;if(0!==w){var k=(x+v)*c+b+v;if(1===w)g[k]=0,y[k]=Dh;else{var S=.5-w;g[k]=S>0?S*S:0,y[k]=S<0?S*S:0}}}Ih(g,0,0,c,h,c,this.f,this.v,this.z),Ih(y,v,v,l,u,c,this.f,this.v,this.z);for(var T=0;T<d;T++){var C=Math.sqrt(g[T])-Math.sqrt(y[T]);p[T]=Math.round(255-255*(C/this.radius+this.cutoff))}return f}}]),e}();var Vh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zh;if(v(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}return y(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,i=t[e];e>0;){var r=e-1>>1,a=t[r];if(n(i,a)>=0)break;t[e]=a,e=r}t[e]=i}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,i=this.length>>1,r=t[e];e<i;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&n(t[s],o)<0&&(a=s,o=t[s]),n(o,r)>=0)break;t[e]=o,e=a}t[e]=r}}]),e}();function Zh(e,t){return e<t?-1:e>t?1:0}function Wh(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1/0,r=1/0,a=-1/0,o=-1/0,s=e[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<i)&&(i=u.x),(!l||u.y<r)&&(r=u.y),(!l||u.x>a)&&(a=u.x),(!l||u.y>o)&&(o=u.y)}var c=Math.min(a-i,o-r),h=c/2,d=new Vh([],Gh);if(0===c)return new g(i,r);for(var p=i;p<a;p+=c)for(var f=r;f<o;f+=c)d.push(new Yh(p+h,f+h,h,e));for(var m=function(e){for(var t=0,n=0,i=0,r=e[0],a=0,o=r.length,s=o-1;a<o;s=a++){var l=r[a],u=r[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,i+=(l.y+u.y)*c,t+=3*c}return new Yh(n/t,i/t,0,e)}(e),v=d.length;d.length;){var y=d.pop();(y.d>m.d||!m.d)&&(m=y,n&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,v)),y.max-m.d<=t||(h=y.h/2,d.push(new Yh(y.p.x-h,y.p.y-h,h,e)),d.push(new Yh(y.p.x+h,y.p.y-h,h,e)),d.push(new Yh(y.p.x-h,y.p.y+h,h,e)),d.push(new Yh(y.p.x+h,y.p.y+h,h,e)),v+=4)}return n&&(console.log("num probes: ".concat(v)),console.log("best distance: ".concat(m.d))),m.p}function Gh(e,t){return t.max-e.max}function Yh(e,t,n,i){this.p=new g(e,t),this.h=n,this.d=function(e,t){for(var n=!1,i=1/0,r=0;r<t.length;r++)for(var a=t[r],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(n=!n),i=Math.min(i,Vs(e,u,c))}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var Hh=Number.POSITIVE_INFINITY,Xh=Math.sqrt(2);function qh(e,t){return t[1]!==Hh?function(e,t,n){var i=0,r=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}return[i,r]}(e,t[0],t[1]):function(e,t){var n=0,i=0;t<0&&(t=0);var r=t/Xh;switch(e){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-t;break;case"top":i=t-7}switch(e){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=t;break;case"right":n=-t}return[n,i]}(e,t[0])}function Kh(e,t,n,i,r,a,o,s,l,u){e.createArrays(),e.tilePixelRatio=hs/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var c=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,p={};if("composite"===e.textSizeData.kind){var f=e.textSizeData,m=f.minZoom,v=f.maxZoom;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new xa(m),s),h["text-size"].possiblyEvaluate(new xa(v),s)]}if("composite"===e.iconSizeData.kind){var y=e.iconSizeData,g=y.minZoom,_=y.maxZoom;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new xa(g),s),h["icon-size"].possiblyEvaluate(new xa(_),s)]}p.layoutTextSize=h["text-size"].possiblyEvaluate(new xa(l+1),s),p.layoutIconSize=h["icon-size"].possiblyEvaluate(new xa(l+1),s),p.textMaxSize=h["text-size"].possiblyEvaluate(new xa(18),s);var x,b="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),w=c.get("text-size"),k=d(e.features);try{var S=function(){var a=x.value,l=c.get("text-font").evaluate(a,{},s).join(","),h=w.evaluate(a,{},s),d=p.layoutTextSize.evaluate(a,{},s),f=(p.layoutIconSize.evaluate(a,{},s),{horizontal:{},vertical:void 0}),m=a.text,v=void 0,y=[0,0];if(m){var g=m.toString(),_=c.get("text-letter-spacing").evaluate(a,{},s)*wc,k=c.get("text-line-height").evaluate(a,{},s)*wc,S=ta(g)?_:0,T=c.get("text-anchor").evaluate(a,{},s),C=c.get("text-variable-anchor");if(!C){var E=c.get("text-radial-offset").evaluate(a,{},s);y=E?qh(T,[E*wc,Hh]):c.get("text-offset").evaluate(a,{},s).map((function(e){return e*wc}))}var M=b?"center":c.get("text-justify").evaluate(a,{},s),P=c.get("symbol-placement"),A="point"===P,D="point"===P?c.get("text-max-width").evaluate(a,{},s)*wc:0,I=function(i){e.allowVerticalPlacement&&ea(g)&&(f.vertical=uh(m,t,n,r,l,D,k,T,i,S,y,oh.vertical,!0,P,d,h))};if(!b&&C){for(var L="auto"===M?C.map((function(e){return $h(e)})):[M],O=!1,z=0;z<L.length;z++){var R=L[z];if(!f.horizontal[R])if(O)f.horizontal[R]=f.horizontal[0];else{var B=uh(m,t,n,r,l,D,k,"center",R,S,y,oh.horizontal,!1,P,d,h);B&&(f.horizontal[R]=B,O=1===B.positionedLines.length)}}I("left")}else{if("auto"===M&&(M=$h(T)),A||c.get("text-writing-mode").indexOf("horizontal")>=0||!ea(g)){var F=uh(m,t,n,r,l,D,k,T,M,S,y,oh.horizontal,!1,P,d,h);F&&(f.horizontal[M]=F)}I("point"===P?"left":M)}}var N=!1;if(a.icon&&a.icon.name){var j=i[a.icon.name];j&&(v=xh(r[a.icon.name],c.get("icon-offset").evaluate(a,{},s),c.get("icon-anchor").evaluate(a,{},s)),N=j.sdf,void 0===e.sdfIcons?e.sdfIcons=j.sdf:e.sdfIcons!==j.sdf&&Y("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(j.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var U=td(f.horizontal)||f.vertical;e.iconsInText||(e.iconsInText=!!U&&U.iconsInText),(U||v)&&Qh(e,a,f,v,i,p,d,0,y,N,o,s,u)};for(k.s();!(x=k.n()).done;)S()}catch(T){k.e(T)}finally{k.f()}a&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function $h(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Qh(e,t,n,i,r,a,o,s,l,u,c,p,f){var m=a.textMaxSize.evaluate(t,{},p);void 0===m&&(m=o);var v,y,g=e.layers[0].layout,_=g.get("icon-offset").evaluate(t,{},p),x=td(n.horizontal)||n.vertical,b=o/24,w=e.tilePixelRatio*m/24,S=(v=e.overscaling,e.zoom>18&&v>2&&(v>>=1),Math.max(hs/(512*v),1)*g.get("symbol-spacing")),T=g.get("text-padding")*e.tilePixelRatio,C=g.get("icon-padding")*e.tilePixelRatio,E=k(g.get("text-max-angle")),M="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),P="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),A=g.get("symbol-placement"),D=S/2,I=g.get("icon-text-fit");i&&"none"!==I&&(e.allowVerticalPlacement&&n.vertical&&(y=bh(i,n.vertical,I,g.get("icon-text-fit-padding"),_,b)),x&&(i=bh(i,x,I,g.get("icon-text-fit-padding"),_,b)));var L=function(o,s,d){if(!(s.x<0||s.x>=hs||s.y<0||s.y>=hs)){var m=f.projectTilePoint(s.x,s.y,d),v=m.x,g=m.y,x=m.z,b=new wh(v,g,x,0,void 0);!function(e,t,n,i,r,a,o,s,l,u,c,d,p,f,m,v,y,g,_,x,b,w,k,S,T){var C,E,M,P,A,D,I,L,O,z=e.addToLineVertexArray(t,i),R=0,B=0,F=0,N=0,j=-1,U=-1,V={},Z=Oo(""),W=0,G=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(C=l.layout.get("text-offset").evaluate(b,{},T).map((function(e){return e*wc})),W=(E=h(C,2))[0],G=E[1]):(W=l.layout.get("text-radial-offset").evaluate(b,{},T)*wc,G=Hh),e.allowVerticalPlacement&&r.vertical){var H=r.vertical;if(m)L=id(H),s&&(O=id(s));else{var X=l.layout.get("text-rotate").evaluate(b,{},T)+90;A=nd(u,n,t,c,d,p,H,f,X,v),s&&(D=nd(u,n,t,c,d,p,s,g,X))}}if(a){var q=l.layout.get("icon-rotate").evaluate(b,{},T),K="none"!==l.layout.get("icon-text-fit"),$=Rh(a,q,k,K),Q=s?Rh(s,q,k,K):void 0;P=nd(u,n,t,c,d,p,a,g,q),R=4*$.length;var J=e.iconSizeData,ee=null;"source"===J.kind?(ee=[kc*l.layout.get("icon-size").evaluate(b,{},T)])[0]>Jh&&Y("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===J.kind&&((ee=[kc*w.compositeIconSizes[0].evaluate(b,{},T),kc*w.compositeIconSizes[1].evaluate(b,{},T)])[0]>Jh||ee[1]>Jh)&&Y("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,$,ee,x,_,b,!1,n,t,z.lineStartIndex,z.lineLength,-1,S,T),j=e.icon.placedSymbolArray.length-1,Q&&(B=4*Q.length,e.addSymbols(e.icon,Q,ee,x,_,b,oh.vertical,n,t,z.lineStartIndex,z.lineLength,-1,S,T),U=e.icon.placedSymbolArray.length-1)}for(var te in r.horizontal){var ne=r.horizontal[te];M||(Z=Oo(ne.text),m?I=id(ne):M=nd(u,n,t,c,d,p,ne,f,l.layout.get("text-rotate").evaluate(b,{},T),v));var ie=1===ne.positionedLines.length;if(F+=ed(e,n,t,ne,o,l,m,b,v,z,r.vertical?oh.horizontal:oh.horizontalOnly,ie?Object.keys(r.horizontal):[te],V,j,w,S,T),ie)break}r.vertical&&(N+=ed(e,n,t,r.vertical,o,l,m,b,v,z,oh.vertical,["vertical"],V,U,w,S,T));var re=-1,ae=function(e,t){return e?Math.max(e,t):t};re=ae(I,re),re=ae(L,re);var oe=(re=ae(O,re))>-1?1:0;e.glyphOffsetArray.length>=dd.MAX_GLYPHS&&Y("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(n.x,n.y,n.z,t.x,t.y,V.right>=0?V.right:-1,V.center>=0?V.center:-1,V.left>=0?V.left:-1,V.vertical>=0?V.vertical:-1,j,U,Z,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,void 0!==P?P:e.collisionBoxArray.length,void 0!==P?P+1:e.collisionBoxArray.length,D||e.collisionBoxArray.length,D?D+1:e.collisionBoxArray.length,c,F,N,R,B,oe,0,W,G,re)}(e,s,b,o,n,i,r,y,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,T,M,l,0,C,P,_,t,a,u,c,p)}};if("line"===A){var O,z=d(Ah(t.geometry,0,0,hs,hs));try{for(z.s();!(O=z.n()).done;){var R,B=O.value,F=Mh(B,S,E,n.vertical||x,i,24,w,e.overscaling,hs),N=d(F);try{for(N.s();!(R=N.n()).done;){var j=R.value;x&&rd(e,x.text,D,j)||L(B,j,p)}}catch(ae){N.e(ae)}finally{N.f()}}}catch(ae){z.e(ae)}finally{z.f()}}else if("line-center"===A){var U,V=d(t.geometry);try{for(V.s();!(U=V.n()).done;){var Z=U.value;if(Z.length>1){var W=Eh(Z,E,n.vertical||x,i,24,w);W&&L(Z,W,p)}}}catch(ae){V.e(ae)}finally{V.f()}}else if("Polygon"===t.type){var G,H=d(Mu(t.geometry,0));try{for(H.s();!(G=H.n()).done;){var X=G.value,q=Wh(X,16);L(X[0],new wh(q.x,q.y,0,0,void 0),p)}}catch(ae){H.e(ae)}finally{H.f()}}else if("LineString"===t.type){var K,$=d(t.geometry);try{for($.s();!(K=$.n()).done;){var Q=K.value;L(Q,new wh(Q[0].x,Q[0].y,0,0,void 0),p)}}catch(ae){$.e(ae)}finally{$.f()}}else if("Point"===t.type){var J,ee=d(t.geometry);try{for(ee.s();!(J=ee.n()).done;){var te,ne=J.value,ie=d(ne);try{for(ie.s();!(te=ie.n()).done;){var re=te.value;L([re],new wh(re.x,re.y,0,0,void 0),p)}}catch(ae){ie.e(ae)}finally{ie.f()}}}catch(ae){ee.e(ae)}finally{ee.f()}}}var Jh=32640;function ed(e,t,n,i,r,o,s,l,u,h,p,f,m,v,y,_,x){var b=function(e,t,n,i,r,o,s,l){var u=[];if(0===t.positionedLines.length)return u;var h,p=i.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,f=function(e){var t=e[0],n=e[1],i=t*n;return i>0?[t,-n]:i<0?[-t,n]:0===t?[n,t]:[n,-t]}(n),m=Math.abs(t.top-t.bottom),v=d(t.positionedLines);try{for(v.s();!(h=v.n()).done;)m-=h.value.lineOffset}catch(oe){v.e(oe)}finally{v.f()}for(var y=t.positionedLines.length,_=m/y,x=t.top-n[1],b=0;b<y;++b){var w=t.positionedLines[b];x=Uh(t,_,x,b);var k,S=d(w.positionedGlyphs);try{for(S.s();!(k=S.n()).done;){var T=k.value;if(T.rect){var C=T.rect||{},E=4,M=!0,P=1,A=0;if(T.imageName){var D=s[T.imageName];if(!D)continue;if(D.sdf){Y("SDF images are not supported in formatted text and will be ignored.");continue}M=!1,E=1/(P=D.pixelRatio)}var I=(r||l)&&T.vertical,L=T.metrics.advance*T.scale/2,O=T.metrics,z=T.rect;if(null!==z){l&&t.verticalizable&&(A=T.imageName?L-T.metrics.width*T.scale/2:0);var R=r?[T.x+L,T.y]:[0,0],B=[0,0],F=[0,0],N=!1;r||(I?(F=[T.x+L+f[0],T.y+f[1]-A],N=!0):B=[T.x+L+n[0],T.y+n[1]-A]);var j=z.w*T.scale/(P*(T.localGlyph?2:1)),U=z.h*T.scale/(P*(T.localGlyph?2:1)),V=void 0,Z=void 0,W=void 0,G=void 0;if(I){var H=T.y-x,X=new g(-L,L-H),q=-Math.PI/2,K=a(g,c(F));(V=new g(-L+B[0],B[1]))._rotateAround(q,X)._add(K),V.x+=-H+L,V.y-=(O.left-E)*T.scale;var $=T.imageName?O.advance*T.scale:wc*T.scale,Q=String.fromCharCode(T.glyph);Ac(Q)?V.x+=(1-E)*T.scale:Dc(Q)?V.x+=$-O.height*T.scale+(-E-1)*T.scale:V.x+=T.imageName||O.width+2*E===z.w&&O.height+2*E===z.h?($-U)/2:($-(O.height+2*E)*T.scale)/2,Z=new g(V.x,V.y-j),W=new g(V.x+U,V.y),G=new g(V.x+U,V.y-j)}else{var J=(O.left-E)*T.scale-L+B[0],ee=(-O.top-E)*T.scale+B[1],te=J+j,ne=ee+U;V=new g(J,ee),Z=new g(te,ee),W=new g(J,ne),G=new g(te,ne)}if(p){var ie=void 0;ie=r?new g(0,0):N?new g(f[0],f[1]):new g(n[0],n[1]),V._rotateAround(p,ie),Z._rotateAround(p,ie),W._rotateAround(p,ie),G._rotateAround(p,ie)}var re=new g(0,0),ae=new g(0,0);u.push({tl:V,tr:Z,bl:W,br:G,tex:C,writingMode:t.writingMode,glyphOffset:R,sectionIndex:T.sectionIndex,isSDF:M,pixelOffsetTL:re,pixelOffsetBR:ae,minFontScaleX:0,minFontScaleY:0})}}}}catch(oe){S.e(oe)}finally{S.f()}}return u}(0,i,u,o,s,l,r,e.allowVerticalPlacement),w=e.textSizeData,k=null;"source"===w.kind?(k=[kc*o.layout.get("text-size").evaluate(l,{},x)])[0]>Jh&&Y("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===w.kind&&((k=[kc*y.compositeTextSizes[0].evaluate(l,{},x),kc*y.compositeTextSizes[1].evaluate(l,{},x)])[0]>Jh||k[1]>Jh)&&Y("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,b,k,u,s,l,p,t,n,h.lineStartIndex,h.lineLength,v,_,x);var S,T=d(f);try{for(T.s();!(S=T.n()).done;)m[S.value]=e.text.placedSymbolArray.length-1}catch(C){T.e(C)}finally{T.f()}return 4*b.length}function td(e){for(var t in e)return e[t];return null}function nd(e,t,n,i,r,a,o,s,l,u){var c=o.top,h=o.bottom,d=o.left,p=o.right,f=o.collisionPadding;if(f&&(d-=f[0],c-=f[1],p+=f[2],h+=f[3]),l){var m=new g(d,c),v=new g(p,c),y=new g(d,h),_=new g(p,h),x=k(l),b=new g(0,0);u&&(b=new g(u[0],u[1])),m._rotateAround(x,b),v._rotateAround(x,b),y._rotateAround(x,b),_._rotateAround(x,b),d=Math.min(m.x,v.x,y.x,_.x),p=Math.max(m.x,v.x,y.x,_.x),c=Math.min(m.y,v.y,y.y,_.y),h=Math.max(m.y,v.y,y.y,_.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,d,c,p,h,s,i,r,a),e.length-1}function id(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function rd(e,t,n,i){var r=e.compareText;if(t in r){for(var a=r[t],o=a.length-1;o>=0;o--)if(i.dist(a[o])<n)return!0}else r[t]=[];return r[t].push(i),!1}var ad=Hu.VectorTileFeature.types,od=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sd(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m){var v=c?Math.min(Jh,Math.round(c[0])):0,y=c?Math.min(Jh,Math.round(c[1])):0;e.emplaceBack(t,n,Math.round(32*o),Math.round(32*s),l,u,(v<<1)+(h?1:0),y,16*d,16*p,256*f,256*m,i,r,a,0)}function ld(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function ud(e){var t,n=d(e.sections);try{for(n.s();!(t=n.n()).done;)if(sa(t.value.text))return!0}catch(i){n.e(i)}finally{n.f()}return!1}var cd=function(){function e(t){v(this,e),this.layoutVertexArray=new qa,this.indexArray=new no,this.programConfigurations=t,this.segments=new cs,this.dynamicLayoutVertexArray=new Ka,this.opacityVertexArray=new $a,this.placedSymbolArray=new _o}return y(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,yc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,od,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}]),e}();xr(cd,"SymbolBuffers");var hd=function(){function e(t,n,i){v(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new i,this.segments=new cs,this.collisionVertexArray=new to,this.collisionVertexArrayExt=new Ka}return y(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,gc.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,_c.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();xr(hd,"CollisionBuffers");var dd=function(){function e(t){v(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nl([]),this.placementViewportMatrix=nl([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sc(this.zoom,n["text-size"]),this.iconSizeData=Sc(this.zoom,n["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=i.get("text-writing-mode").map((function(e){return oh[e]})),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID,this.projection=t.projection}return y(e,[{key:"createArrays",value:function(){this.text=new cd(new es(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new cd(new es(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new wo,this.lineVertexArray=new ko,this.symbolInstances=new bo}},{key:"calculateGlyphDependencies",value:function(e,t,n,i,r){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,i&&r){var o=Pc[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n,i){var r=this.layers[0],a=r.layout,o=a.get("text-font"),s=a.get("text-field"),l=a.get("icon-image"),u=("constant"!==s.value.kind||s.value.value instanceof Et&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=a.get("symbol-sort-key");if(this.features=[],u||c){var p,f=t.iconDependencies,m=t.glyphDependencies,v=t.availableImages,y=new xa(this.zoom),g=d(e);try{for(g.s();!(p=g.n()).done;){var _=p.value,x=_.feature,b=_.id,w=_.index,k=_.sourceLayerIndex,S=r._featureFilter.needGeometry,T=Ds(x,S);if(r._featureFilter.filter(y,T,n)){var C=void 0,E=void 0;if(S||(T.geometry=As(x,n,i)),u){var M=r.getValueAndResolveTokens("text-field",T,n,v),P=Et.factory(M);ud(P)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ya()||this.hasRTLText&&_a.isParsed())&&(C=Mc(P,r,T))}if(c){var A=r.getValueAndResolveTokens("icon-image",T,n,v);E=A instanceof Mt?A:Mt.fromString(A)}if(C||E){var D=this.sortFeaturesByKey?h.evaluate(T,{},n):void 0;if(this.features.push({id:b,text:C,icon:E,index:w,sourceLayerIndex:k,geometry:T.geometry,properties:x.properties,type:ad[x.type],sortKey:D}),E&&(f[E.name]=!0),C){var I=o.evaluate(T,{},n).join(","),L="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(oh.vertical)>=0;var O,z=d(C.sections);try{for(z.s();!(O=z.n()).done;){var R=O.value;if(R.image)f[R.image.name]=!0;else{var B=ea(C.toString()),F=R.fontStack||I,N=m[F]=m[F]||{};this.calculateGlyphDependencies(R.text,N,L,this.allowVerticalPlacement,B)}}}catch(j){z.e(j)}finally{z.f()}}}}}}catch(j){g.e(j)}finally{g.f()}"line"===a.get("symbol-placement")&&(this.features=function(e){var t={},n={},i=[],r=0;function a(t){i.push(e[t]),r++}function o(e,t,r){var a=n[e];return delete n[e],n[t]=a,i[a].geometry[0].pop(),i[a].geometry[0]=i[a].geometry[0].concat(r[0]),a}function s(e,n,r){var a=t[n];return delete t[n],t[e]=a,i[a].geometry[0].shift(),i[a].geometry[0]=r[0].concat(i[a].geometry[0]),a}function l(e,t,n){var i=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(i.x,":").concat(i.y)}for(var u=0;u<e.length;u++){var c=e[u],h=c.geometry,d=c.text?c.text.toString():null;if(d){var p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){var m=s(p,f,h),v=o(p,f,i[m].geometry);delete t[p],delete n[f],n[l(d,i[v].geometry,!0)]=v,i[m].geometry=null}else p in n?o(p,f,h):f in t?s(p,f,h):(a(u),t[p]=r-1,n[f]=r-1)}else a(u)}return i.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,i))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length,i=e.segment;if(void 0!==i){for(var r=e.dist(t[i+1]),a=e.dist(t[i]),o={},s=i+1;s<t.length;s++)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:r},s<t.length-1&&(r+=t[s+1].dist(t[s]));for(var l=i||0;l>=0;l--)o[l]={x:t[l].x,y:t[l].y,tileUnitDistanceFromAnchor:a},l>0&&(a+=t[l-1].dist(t[l]));for(var u=0;u<t.length;u++){var c=o[u];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p){for(var f=e.indexArray,m=e.layoutVertexArray,v=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?a.sortKey:void 0),y=this.glyphOffsetArray.length,g=v.vertexLength,_=this.allowVerticalPlacement&&o===oh.vertical?Math.PI/2:0,x=a.text&&a.text.sections,b=0;b<t.length;b++){var w=t[b],k=w.tl,S=w.tr,T=w.bl,C=w.br,E=w.tex,M=w.pixelOffsetTL,P=w.pixelOffsetBR,A=w.minFontScaleX,D=w.minFontScaleY,I=w.glyphOffset,L=w.isSDF,O=w.sectionIndex,z=v.vertexLength,R=I[1];sd(m,s.x,s.y,s.z,l.x,l.y,k.x,R+k.y,E.x,E.y,n,L,M.x,M.y,A,D),sd(m,s.x,s.y,s.z,l.x,l.y,S.x,R+S.y,E.x+E.w,E.y,n,L,P.x,M.y,A,D),sd(m,s.x,s.y,s.z,l.x,l.y,T.x,R+T.y,E.x,E.y+E.h,n,L,M.x,P.y,A,D),sd(m,s.x,s.y,s.z,l.x,l.y,C.x,R+C.y,E.x+E.w,E.y+E.h,n,L,P.x,P.y,A,D),ld(e.dynamicLayoutVertexArray,s,_),f.emplaceBack(z,z+1,z+2),f.emplaceBack(z+1,z+2,z+3),v.vertexLength+=4,v.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(I[0]),b!==t.length-1&&O===t[b+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},d,p,x&&x[O])}e.placedSymbolArray.emplaceBack(s.x,s.y,s.z,l.x,l.y,y,this.glyphOffsetArray.length-y,g,u,c,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,0,!1,0,h,0)}},{key:"_commitLayoutVertex",value:function(e,t,n,i,r,a,o){e.emplaceBack(t,n,i,r,a,Math.round(o.x),Math.round(o.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,i,r,a,o){for(var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,u=o.tileAnchorX,c=o.tileAnchorY,h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,u,c,new g(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,u,c,new g(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,u,c,new g(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,u,c,new g(e.x1,e.y2)),s.vertexLength+=4;var d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,i,r,a){for(var o=i;o<r;o++){var s=n.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,l,this.textCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,i,r,a){for(var o=i;o<r;o++){var s=n.get(o),l=this.getSymbolInstanceIconSize(e,t,o);this._addCollisionDebugVertices(s,l,this.iconCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hd(Ja,xc.members,uo),this.iconCollisionBox=new hd(Ja,xc.members,uo);for(var n=Cc(this.iconSizeData,e),i=Cc(this.textSizeData,e),r=0;r<this.symbolInstances.length;r++){var a=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(i,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,i){var r=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:i),a=Tc(this.textSizeData,e,r)/wc;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var i=this.icon.placedSymbolArray.get(n),r=Tc(this.iconSizeData,e,i);return this.tilePixelRatio*r}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,i,r,a){for(var o=i;o<r;o++){var s=n.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,i,r){for(var a=i;a<r;a++){var o=n.get(a),s=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,o.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=Cc(this.iconSizeData,e),i=Cc(this.textSizeData,e),r=0;r<this.symbolInstances.length;r++){var a=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(i,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,i,r,a,o,s,l){for(var u={},c=t;c<n;c++){var h=e.get(c);u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,padding:h.padding,projectedAnchorX:h.projectedAnchorX,projectedAnchorY:h.projectedAnchorY,projectedAnchorZ:h.projectedAnchorZ,tileAnchorX:h.tileAnchorX,tileAnchorY:h.tileAnchorY},u.textFeatureIndex=h.featureIndex;break}for(var d=i;d<r;d++){var p=e.get(d);u.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,padding:p.padding,projectedAnchorX:p.projectedAnchorX,projectedAnchorY:p.projectedAnchorY,projectedAnchorZ:p.projectedAnchorZ,tileAnchorX:p.tileAnchorX,tileAnchorY:p.tileAnchorY},u.verticalTextFeatureIndex=p.featureIndex;break}for(var f=a;f<o;f++){var m=e.get(f);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,padding:m.padding,projectedAnchorX:m.projectedAnchorX,projectedAnchorY:m.projectedAnchorY,projectedAnchorZ:m.projectedAnchorZ,tileAnchorX:m.tileAnchorX,tileAnchorY:m.tileAnchorY},u.iconFeatureIndex=m.featureIndex;break}for(var v=s;v<l;v++){var y=e.get(v);u.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,padding:y.padding,projectedAnchorX:y.projectedAnchorX,projectedAnchorY:y.projectedAnchorY,projectedAnchorZ:y.projectedAnchorZ,tileAnchorX:y.tileAnchorX,tileAnchorY:y.tileAnchorY},u.verticalIconFeatureIndex=y.featureIndex;break}return u}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),i=n.vertexStartIndex+4*n.numGlyphs,r=n.vertexStartIndex;r<i;r+=4)e.indexArray.emplaceBack(r,r+1,r+2),e.indexArray.emplaceBack(r+1,r+2,r+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),i=[],r=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);i.push(0|Math.round(t*s.tileAnchorX+n*s.tileAnchorY)),r.push(s.featureIndex)}return a.sort((function(e,t){return i[e]-i[t]||r[t]-r[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var n,i=d(this.symbolInstanceIndexes);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this.symbolInstances.get(r);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,n,i){e>=0&&i.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}}catch(o){i.e(o)}finally{i.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();xr(dd,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),dd.MAX_GLYPHS=65535,dd.addDynamicAttributes=ld;var pd=new Oa({"symbol-placement":new Pa(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Pa(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pa(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Aa(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pa(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pa(et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pa(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pa(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pa(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Aa(et.layout_symbol["icon-size"]),"icon-text-fit":new Pa(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pa(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Aa(et.layout_symbol["icon-image"]),"icon-rotate":new Aa(et.layout_symbol["icon-rotate"]),"icon-padding":new Pa(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Pa(et.layout_symbol["icon-keep-upright"]),"icon-offset":new Aa(et.layout_symbol["icon-offset"]),"icon-anchor":new Aa(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pa(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pa(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pa(et.layout_symbol["text-rotation-alignment"]),"text-field":new Aa(et.layout_symbol["text-field"]),"text-font":new Aa(et.layout_symbol["text-font"]),"text-size":new Aa(et.layout_symbol["text-size"]),"text-max-width":new Aa(et.layout_symbol["text-max-width"]),"text-line-height":new Aa(et.layout_symbol["text-line-height"]),"text-letter-spacing":new Aa(et.layout_symbol["text-letter-spacing"]),"text-justify":new Aa(et.layout_symbol["text-justify"]),"text-radial-offset":new Aa(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pa(et.layout_symbol["text-variable-anchor"]),"text-anchor":new Aa(et.layout_symbol["text-anchor"]),"text-max-angle":new Pa(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Pa(et.layout_symbol["text-writing-mode"]),"text-rotate":new Aa(et.layout_symbol["text-rotate"]),"text-padding":new Pa(et.layout_symbol["text-padding"]),"text-keep-upright":new Pa(et.layout_symbol["text-keep-upright"]),"text-transform":new Aa(et.layout_symbol["text-transform"]),"text-offset":new Aa(et.layout_symbol["text-offset"]),"text-allow-overlap":new Pa(et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pa(et.layout_symbol["text-ignore-placement"]),"text-optional":new Pa(et.layout_symbol["text-optional"])}),fd={paint:new Oa({"icon-opacity":new Aa(et.paint_symbol["icon-opacity"]),"icon-color":new Aa(et.paint_symbol["icon-color"]),"icon-halo-color":new Aa(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Aa(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Aa(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Pa(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pa(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new Aa(et.paint_symbol["text-opacity"]),"text-color":new Aa(et.paint_symbol["text-color"],{runtimeType:ct,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Aa(et.paint_symbol["text-halo-color"]),"text-halo-width":new Aa(et.paint_symbol["text-halo-width"]),"text-halo-blur":new Aa(et.paint_symbol["text-halo-blur"]),"text-translate":new Pa(et.paint_symbol["text-translate"]),"text-translate-anchor":new Pa(et.paint_symbol["text-translate-anchor"])}),layout:pd},md=function(){function e(t){v(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:ot,this.defaultValue=t}return y(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();xr(md,"FormatSectionOverride",{omit:["defaultValue"]});var vd=function(e){f(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,fd)}return y(n,[{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var i=this.layout.get("text-writing-mode");if(i){var r,a=[],l=d(i);try{for(l.s();!(r=l.n()).done;){var u=r.value;a.indexOf(u)<0&&a.push(u)}}catch(c){l.e(c)}finally{l.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,i){var r=this.layout.get(e).evaluate(t,{},n,i),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||ki(a.value)||!r?r:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,r)}},{key:"createBucket",value:function(e){return new dd(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=d(fd.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(n.hasPaintOverride(this.layout,i)){var r=this.paint.get(i),a=new md(r),o=new wi(a,r.property.specification),s=null;s="constant"===r.value.kind||"source"===r.value.kind?new Ti("source",o):new Ci("composite",o,r.value.zoomStops,r.value._interpolationType),this.paint._values[i]=new Ea(r.property,s,r.parameters)}}}catch(l){t.e(l)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),i=fd.paint.properties[t],r=!1,a=function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(i.overrides&&i.overrides.hasOverride(a))return void(r=!0)}}catch(o){n.e(o)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Et)a(n.value.value.sections);else if("source"===n.value.kind){var o=function e(t){r||(t instanceof Lt&&Dt(t.value)===ft?a(t.value.sections):t instanceof Bt?a(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&o(s._styleExpression.expression)}return r}}]),n}(ss),yd={paint:new Oa({"background-color":new Pa(et.paint_background["background-color"]),"background-pattern":new Ia(et.paint_background["background-pattern"]),"background-opacity":new Pa(et.paint_background["background-opacity"])})},gd={paint:new Oa({"raster-opacity":new Pa(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pa(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pa(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pa(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Pa(et.paint_raster["raster-saturation"]),"raster-contrast":new Pa(et.paint_raster["raster-contrast"]),"raster-resampling":new Pa(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Pa(et.paint_raster["raster-fade-duration"])})},_d=function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e,{})).implementation=e,i}return y(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(ss),xd={paint:new Oa({"sky-type":new Pa(et.paint_sky["sky-type"]),"sky-atmosphere-sun":new Pa(et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Pa(et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Pa(et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Pa(et.paint_sky["sky-gradient-radius"]),"sky-gradient":new La(et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Pa(et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Pa(et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Pa(et.paint_sky["sky-opacity"])})};function bd(e,t,n){var i=[0,0,1],r=Dl([]);return function(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l-a*s,e[1]=r*l+o*s,e[2]=a*l+i*s,e[3]=o*l-r*s}(r,r,n?-k(e)+Math.PI:k(e)),Il(r,r,-k(t)),Sl(i,i,r),xl(i,i)}var wd={circle:function(e){f(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,Qs)}return y(n,[{key:"createBucket",value:function(e){return new Os(e)}},{key:"queryRadius",value:function(e){var t=e;return Hs("circle-radius",this,t)+Hs("circle-stroke-width",this,t)+Xs(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a,o,s){var l=Ks(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return zl(e,i,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}}]),n}(ss),heatmap:function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e,Yl))._updateColorRamp(),i}return y(n,[{key:"createBucket",value:function(e){return new jl(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=Hl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(e){return Hs("heatmap-radius",this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a,o,s){var l=this.paint.get("heatmap-radius").evaluate(t,n);return zl(e,i,a,o,s,!0,!0,new g(0,0),l)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}}]),n}(ss),hillshade:function(e){f(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,Xl)}return y(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}}]),n}(ss),fill:function(e){f(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,Ou)}return y(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new Iu(e)}},{key:"queryRadius",value:function(){return Xs(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a){return!e.queryGeometry.isAboveHorizon&&Bs(qs(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),i)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ss),"fill-extrusion":function(e){f(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,nc)}return y(n,[{key:"createBucket",value:function(e){return new ec(e)}},{key:"queryRadius",value:function(){return Xs(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a,o,s,l){var u=Ks(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),p=[0,0],f=s&&a.elevation,m=a.elevation?a.elevation.exaggeration():1,v=e.tile.getBucket(this);if(f&&v instanceof ec){var y=v.centroidVertexArray,_=l+1;if(_<y.length){var x=y.get(_);p[0]=x.a_centroid_pos0,p[1]=x.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;var b=function(e,t,n,i,r,a,o,s,l){return a?function(e,t,n,i,r,a,o,s,l){var u,c=[],h=[],p=[0,0,0,1],f=d(e);try{for(f.s();!(u=f.n()).done;){var m,v=u.value,y=[],g=[],_=d(v);try{for(_.s();!(m=_.n()).done;){var x=m.value,b=x.x+i.x,w=x.y+i.y,k=oc(b,w,t,n,a,o,s,l);p[0]=b,p[1]=w,p[2]=k.base,p[3]=1,Pl(p,p,r),p[3]=Math.max(p[3],1e-5);var S=ac([p[0]/p[3],p[1]/p[3],p[2]/p[3]]);p[0]=b,p[1]=w,p[2]=k.top,p[3]=1,Pl(p,p,r),p[3]=Math.max(p[3],1e-5);var T=ac([p[0]/p[3],p[1]/p[3],p[2]/p[3]]);y.push(S),g.push(T)}}catch(C){_.e(C)}finally{_.f()}c.push(y),h.push(g)}}catch(C){f.e(C)}finally{f.f()}return[c,h]}(e,t,n,i,r,a,o,s,l):function(e,t,n,i,r){var a,o=[],s=[],l=r[8]*t,u=r[9]*t,c=r[10]*t,h=r[11]*t,p=r[8]*n,f=r[9]*n,m=r[10]*n,v=r[11]*n,y=d(e);try{for(y.s();!(a=y.n()).done;){var _,x=a.value,b=[],w=[],k=d(x);try{for(k.s();!(_=k.n()).done;){var S=_.value,T=S.x+i.x,C=S.y+i.y,E=r[0]*T+r[4]*C+r[12],M=r[1]*T+r[5]*C+r[13],P=r[2]*T+r[6]*C+r[14],A=r[3]*T+r[7]*C+r[15],D=E+l,I=M+u,L=P+c,O=Math.max(A+h,1e-5),z=E+p,R=M+f,B=P+m,F=Math.max(A+v,1e-5),N=new g(D/O,I/O);N.z=L/O,b.push(N);var j=new g(z/F,R/F);j.z=B/F,w.push(j)}}catch(U){k.e(U)}finally{k.f()}o.push(b),s.push(w)}}catch(U){y.e(U)}finally{y.f()}return[o,s]}(e,t,n,i,r)}(i,h,c,u,o,f?s:null,p,m,a.center.lat),w=e.queryGeometry;return function(e,t,n){var i=1/0;Bs(n,t)&&(i=rc(n,t[0]));for(var r=0;r<t.length;r++)for(var a=t[r],o=e[r],s=0;s<a.length-1;s++){var l=a[s],u=[l,a[s+1],o[s+1],o[s],l];zs(n,u)&&(i=Math.min(i,rc(n,u)))}return i!==1/0&&i}(b[0],b[1],w.isPointQuery()?w.screenBounds:w.screenGeometry)}}]),n}(ss),line:function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e,pc)).gradientVersion=0,i}return y(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof vn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=fc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new hc(e)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(e){return new Jo(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=mc(Hs("line-width",this,t),Hs("line-gap-width",this,t)),i=Hs("line-offset",this,t);return n/2+Math.abs(i)+Xs(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,i,r,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=qs(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*mc(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(i=function(e,t){for(var n=[],i=new g(0,0),r=0;r<e.length;r++){for(var a=e[r],o=[],s=0;s<a.length;s++){var l=a[s-1],u=a[s],c=a[s+1],h=0===s?i:u.sub(l)._unit()._perp(),d=s===a.length-1?i:c.sub(u)._unit()._perp(),p=h._add(d)._unit();p._mult(1/(p.x*d.x+p.y*d.y)),o.push(p._mult(t)._add(u))}n.push(o)}return n}(i,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];if(e.length>=3)for(var a=0;a<r.length;a++)if(Ws(e,r[a]))return!0;if(Fs(e,r,n))return!0}return!1}(o,i,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ss),symbol:vd,background:function(e){f(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,yd)}return y(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(ss),raster:function(e){f(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,gd)}return y(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(ss),sky:function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e,xd))._updateColorRamp(),i}return y(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=Hl({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}},{key:"getCenter",value:function(e,t){if("atmosphere"===this.paint.get("sky-type")){var n=this.paint.get("sky-atmosphere-sun"),i=!n,r=e.style.light,a=r.properties.get("position");return i&&"viewport"===r.properties.get("anchor")&&Y("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?bd(a.azimuthal,90-a.polar,t):bd(n[0],90-n[1],t)}var o=this.paint.get("sky-gradient-center");return bd(o[0],90-o[1],t)}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(ss)},kd=function(){function e(t,n,i,r){v(this,e),this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(n,r)}return y(e,[{key:"update",value:function(e,t,n){var i=e.width,r=e.height,a=this.context,o=a.gl,s=x.HTMLImageElement,l=x.HTMLCanvasElement,u=x.HTMLVideoElement,c=x.ImageData,h=x.ImageBitmap;if(o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),n||this.size&&this.size[0]===i&&this.size[1]===r){var d=n||{x:0,y:0},p=d.x,f=d.y;e instanceof s||e instanceof l||e instanceof u||e instanceof c||h&&e instanceof h?o.texSubImage2D(o.TEXTURE_2D,0,p,f,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,p,f,i,r,o.RGBA,o.UNSIGNED_BYTE,e.data)}else this.size=[i,r],e instanceof s||e instanceof l||e instanceof u||e instanceof c||h&&e instanceof h?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,i,r,0,this.format,o.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D)}},{key:"bind",value:function(e,t){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),Sd=function(){function e(t,n){v(this,e),this.width=t,this.height=n,this.nextRow=0,this.image=new Wl({width:t,height:n}),this.positions={},this.uploaded=!1}return y(e,[{key:"getDash",value:function(e,t){var n=this.getKey(e,t);return this.positions[n]}},{key:"trim",value:function(){var e=this.width,t=this.height=F(this.nextRow);this.image.resize({width:e,height:t})}},{key:"getKey",value:function(e,t){return e.join(",")+t}},{key:"getDashRanges",value:function(e,t,n){var i=[],r=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;i.push({left:r,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){o=!o;var u=e[l];r=s*n,a=(s+=u)*n,i.push({left:r,right:a,isDash:o,zeroLength:0===u})}return i}},{key:"addRoundDash",value:function(e,t,n){for(var i=t/2,r=-n;r<=n;r++)for(var a=this.width*(this.nextRow+n+r),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),d=void 0,p=r/n*(i+1);if(s.isDash){var f=i-Math.abs(p);d=Math.sqrt(h*h+f*f)}else d=i-Math.sqrt(h*h+p*p);this.image.data[a+l]=Math.max(0,Math.min(255,d+128))}}},{key:"addRegularDash",value:function(e,t){for(var n=e.length-1;n>=0;--n){var i=e[n],r=e[n+1];i.zeroLength?e.splice(n,1):r&&r.isDash===i.isDash&&(r.left=i.left,e.splice(n,1))}var a=e[0],o=e[e.length-1];a.isDash===o.isDash&&(a.left=o.left-this.width,o.right=a.right+this.width);for(var s=this.width*this.nextRow,l=0,u=e[l],c=0;c<this.width;c++){c/u.right>1&&(u=e[++l]);var h=Math.abs(c-u.left),d=Math.abs(c-u.right),p=Math.min(h,d);this.image.data[s+c]=Math.max(0,Math.min(255,(u.isDash?p:-p)+t+128))}}},{key:"addDash",value:function(e,t){var n=this.getKey(e,t);if(this.positions[n])return this.positions[n];var i="round"===t,r=i?7:0,a=2*r+1;if(this.nextRow+a>this.height)return Y("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var o=0,s=0;s<e.length;s++)e[s]<0&&(Y("Negative value is found in line dasharray, replacing values with 0"),e[s]=0),o+=e[s];if(0!==o){var l=this.width/o,u=this.getDashRanges(e,this.width,l);i?this.addRoundDash(u,l,r):this.addRegularDash(u,"square"===t?.5*l:0)}var c=this.nextRow+r;this.nextRow+=a;var h={tl:[c,r],br:[o,0]};return this.positions[n]=h,h}}]),e}();xr(Sd,"LineAtlas");var Td=function(){function e(t){var n=this;v(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return y(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){this._channel=void 0,this._callback=function(){}}}]),e}(),Cd=x.performance;function Ed(e){var t=e?e.url.toString():void 0;return Cd.getEntriesByName(t)}var Md=function(){function e(){v(this,e),this.tasks={},this.taskQueue=[],j(["process"],this),this.invoker=new Td(this.process),this.nextId=0}return y(e,[{key:"add",value:function(e,t){var n=this,i=this.nextId++,r=function(e){var t=e.type,n=e.isSymbolTile,i=e.zoom;return i=i||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-i:"maybePrepare"===t&&n?400-i:500:200-i:100-i}(t);if(0===r){q();try{e()}finally{}return{cancel:function(){}}}return this.tasks[i]={fn:e,metadata:t,priority:r,id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:function(){delete n.tasks[i]}}}},{key:"process",value:function(){var e=this;q();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var i=this.tasks[this.taskQueue[n]];i.priority<t&&(t=i.priority,e=n)}if(null===e)return null;var r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),Pd=Na([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),Ad=Na([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),Dd=Pd.members,Id=Na([{name:"a_pos_3",components:3,type:"Int16"}]),Ld=Na([{name:"a_pos",type:"Int16",components:2}]),Od=hs/Math.PI/2,zd=-Od,Rd=Od,Bd=[new Ol([zd,zd,zd],[Rd,Rd,Rd]),new Ol([zd,zd,zd],[0,0,Rd]),new Ol([0,zd,zd],[Rd,0,Rd]),new Ol([zd,0,zd],[0,Rd,Rd]),new Ol([0,0,zd],[Rd,Rd,Rd])],Fd=y((function e(t,n,i){v(this,e),this.a=Cl([],t,i),this.b=Cl([],n,i),this.center=i;var r=xl([],this.a),a=xl([],this.b);this.angle=Math.acos(bl(r,a))}));function Nd(e,t){return 0===e.angle||(n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)))<0||n>1?null:function(e,t,n,i){var r=Math.sin(n);return e*(Math.sin((1-i)*n)/r)+t*(Math.sin(i*n)/r)}(e.a[t],e.b[t],e.angle,P(n,0,1))+e.center[t];var n}function jd(e){if(e.z<=1)return Bd[e.z+2*e.y+e.x];for(var t=Vd(e),n=h(t,2),i=n[0],r=n[1],a=[Wd(i[0],i[1]),Wd(i[0],r[1]),Wd(r[0],i[1]),Wd(r[0],r[1])],o=[Rd,Rd,Rd],s=[zd,zd,zd],l=0,u=a;l<u.length;l++){var c=u[l];o[0]=Math.min(o[0],c[0]),o[1]=Math.min(o[1],c[1]),o[2]=Math.min(o[2],c[2]),s[0]=Math.max(s[0],c[0]),s[1]=Math.max(s[1],c[1]),s[2]=Math.max(s[2],c[2])}return new Ol(o,s)}function Ud(e,t,n){var i=t/e.worldSize,r=function(e,t){gl(e,e,i),gl(t,t,i)},a=Number.MAX_VALUE,o=[-a,-a,-a],s=[a,a,a],l=qd(e);if(n.z<=1){for(var u=jd(n).getCorners(),c=0;c<u.length;c++)kl(u[c],u[c],l),vl(s,s,u[c]),yl(o,o,u[c]);return r(s,o),new Ol(s,o)}var d=Vd(n),p=h(d,2),f=p[0],m=p[1],v=new ds;v.setSouthWest([f[1],m[0]]),v.setNorthEast([m[1],f[0]]);for(var y=[Wd(v.getSouth(),v.getWest()),Wd(v.getSouth(),v.getEast()),Wd(v.getNorth(),v.getEast()),Wd(v.getNorth(),v.getWest())],g=0;g<y.length;g++)kl(y[g],y[g],l),vl(s,s,y[g]),yl(o,o,y[g]);if(v.contains(e.center))return o[2]=0,r(s,o),new Ol(s,o);var _=[l[12],l[13],l[14]],x=e.center.lng,b=P(e.center.lat,-85.051129,ks),w=[ys(x),gs(b)],S=v.getCenter().lng,T=P(v.getCenter().lat,-85.051129,ks),C=[ys(S),gs(T)],E=new Array(3),M=0,A=w[0]-C[0],D=w[1]-C[1];Math.abs(A)>Math.abs(D)?(M=A>=0?1:3,E=_):(M=D>=0?0:2,E=_l(E,_,[l[4],l[5],l[6]],D>=0?-Math.sin(k(v.getSouth()))*Od:-Math.sin(k(v.getNorth()))*Od));var I=y[M],L=y[(M+1)%4],O=new Fd(I,L,E),z=[Nd(O,0)||I[0],Nd(O,1)||I[1],Nd(O,2)||I[2]];return s[2]=Math.min(I[2],L[2]),vl(s,s,z),yl(o,o,z),r(s,o),new Ol(s,o)}function Vd(e){var t=1<<e.z,n=e.x/t,i=(e.x+1)/t,r=(e.y+1)/t;return[[bs(e.y/t),xs(n)],[bs(r),xs(i)]]}function Zd(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Od;return n=k(n),[e*Math.sin(n)*i,-t*i,e*Math.cos(n)*i]}function Wd(e,t,n){return Zd(Math.cos(k(e)),Math.sin(k(e)),t,n)}function Gd(e,t,n){var i=Math.pow(2,n.z),r=(e/hs+n.x)/i;return Wd(bs((t/hs+n.y)/i),xs(r))}function Yd(e){return 16383/Math.max.apply(Math,c(Cl([],e.max,e.min)))}function Hd(e){var t,n,i=nl(new Float64Array(16)),r=Yd(e);return al(i,i,[r,r,r]),rl(i,i,((t=[])[0]=-(n=e.min)[0],t[1]=-n[1],t[2]=-n[2],t)),i}function Xd(e,t,n,i,r){var a=function(e){var t=hs/(2*Math.PI);return e/(2*Math.PI)/t}(n),o=[e,t,-n/(2*Math.PI)],s=nl(new Float64Array(16));return rl(s,s,o),al(s,s,[a,a,a]),ol(s,s,k(-r)),sl(s,s,k(-i)),s}function qd(e){var t=e.point,n=t.x,i=t.y,r=e._center,a=r.lng,o=r.lat;return Xd(n,i,e.worldSize,a,o)}var Kd=k(85),$d=Math.cos(Kd),Qd=Math.sin(Kd);function Jd(e,t,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}var ep=function(){function e(t,n,i){v(this,e),this.z=t,this.x=n,this.y=i,this.key=ip(0,t,t,n,i)}return y(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n=function(e,t,n){var i=Jd(256*e,256*(t=Math.pow(2,n)-t-1),n),r=Jd(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+r[0]+","+r[1]}(this.x,this.y,this.z),i=function(e,t,n){for(var i,r="",a=e;a>0;a--)r+=(t&(i=1<<a-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),tp=y((function e(t,n){v(this,e),this.wrap=t,this.canonical=n,this.key=ip(t,n.z,n.z,n.x,n.y)})),np=function(){function e(t,n,i,r,a){v(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new ep(i,+r,+a),this.key=0===n&&t===i?this.canonical.key:ip(n,t,i,r,a)}return y(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return ip(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return ip(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new e(n,this.wrap,n,i,r),new e(n,this.wrap,n,i+1,r),new e(n,this.wrap,n,i,r+1),new e(n,this.wrap,n,i+1,r+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new tp(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),e}();function ip(e,t,n,i,r){var a=1<<Math.min(n,22),o=a*(r%a)+i%a;return e&&n<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*o+n)+(t-n)}function rp(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};var n=Math.pow(2,-e.z),i=e.x*n,r=(e.x+1)*n,a=e.y*n,o=(e.y+1)*n,s=xs(i),l=xs(r),u=bs(a),c=bs(o),h=t.project(s,u),d=t.project(l,u),p=t.project(l,c),f=t.project(s,c),m=Math.min(h.x,d.x,p.x,f.x),v=Math.min(h.y,d.y,p.y,f.y),y=Math.max(h.x,d.x,p.x,f.x),g=Math.max(h.y,d.y,p.y,f.y),_=n/16;function x(e,n,i,r,a,o){var s=(i+a)/2,l=(r+o)/2,u=t.project(xs(s),bs(l)),c=Math.max(0,m-u.x,v-u.y,u.x-y,u.y-g);m=Math.min(m,u.x),y=Math.max(y,u.x),v=Math.min(v,u.y),g=Math.max(g,u.y),c>_&&(x(e,u,i,r,s,l),x(u,n,s,l,a,o))}x(h,d,i,a,r,a),x(d,p,r,a,r,o),x(p,f,r,o,i,o),x(f,h,i,o,i,a),m-=_,v-=_,y+=_,g+=_;var b=1/Math.max(y-m,g-v);return{scale:b,x:m*b,y:v*b,x2:y*b,y2:g*b,projection:t}}xr(ep,"CanonicalTileID"),xr(np,"OverscaledTileID",{omit:["projMatrix"]});for(var ap=function(){function e(t){v(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var i=t[n];this._stringToNumber[i]=n,this._numberToString[n]=i}}return y(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),op=["tile","layer","source","sourceLayer","state"],sp=function(){function e(t,n,i,r,a){v(this,e),this.type="Feature",this._vectorTileFeature=t,this._z=n,this._x=i,this._y=r,this.properties=t.properties,this.id=a}return y(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);var t,n=d(op);try{for(n.s();!(t=n.n()).done;){var i=t.value;void 0!==this[i]&&(e[i]=this[i])}}catch(r){n.e(r)}finally{n.f()}return e}}]),e}(),lp=32,up=33,cp=new Uint16Array(8184),hp=0;hp<2046;hp++){var dp=hp+2,pp=0,fp=0,mp=0,vp=0,yp=0,gp=0;for(1&dp?mp=vp=yp=lp:pp=fp=gp=lp;(dp>>=1)>1;){var _p=pp+mp>>1,xp=fp+vp>>1;1&dp?(mp=pp,vp=fp,pp=yp,fp=gp):(pp=mp,fp=vp,mp=yp,vp=gp),yp=_p,gp=xp}var bp=4*hp;cp[bp+0]=pp,cp[bp+1]=fp,cp[bp+2]=mp,cp[bp+3]=vp}var wp=new Uint16Array(2178),kp=new Uint8Array(1089),Sp=new Uint16Array(1089);function Tp(e){return 0===e?-.03125:32===e?.03125:0}var Cp=Na([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ep={type:2,extent:hs,loadGeometry:function(){return[[new g(0,0),new g(8193,0),new g(8193,8193),new g(0,8193),new g(0,0)]]}},Mp=function(){function e(t,n,i,r,a){v(this,e),this.tileID=t,this.uid=R(),this.uses=0,this.tileSize=n,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}return y(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<se.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=rp(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){for(var i in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var i,r=d(e);try{var a=function(){var e=i.value,r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));var a,o=d(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=e}}catch(l){o.e(l)}finally{o.f()}}};for(r.s();!(i=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[i];if(r instanceof dd){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof dd&&o.hasRTLText){this.hasRTLText=!0,_a.isLoading()||_a.isLoaded()||"deferred"!==ya()||ga();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(l))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new yo}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var i=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new kd(e,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new kd(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new kd(e,this.lineAtlas.image,i.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,i,r,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:o,transform:a,params:r,tileTransform:this.tileTransform},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var i=n.loadVTLayers(),r=t?t.sourceLayer:"",a=i._geojsonTileLayer||i[r];if(a)for(var o=Ni(t&&t.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},d=0;d<a.length;d++){var p=a.feature(d);if(o.needGeometry){var f=Ds(p,!0);if(!o.filter(new xa(this.tileID.overscaledZ),f,this.tileID.canonical))continue}else if(!o.filter(new xa(this.tileID.overscaledZ),p))continue;var m=n.getId(p,r),v=new sp(p,l,u,c,m);v.tile=h,e.push(v)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=K(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),r=!1;if(this.expirationTime>i)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{var a=this.expirationTime-t;a?this.expirationTime=i+Math.max(a,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&t){var n=this.latestFeatureIndex.loadVTLayers(),i=t.style.listImages();for(var r in this.buckets)if(t.style.hasLayer(r)){var a=this.buckets[r],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],l=e[o];if(s&&l&&0!==Object.keys(l).length){if(a.update(l,s,i,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof hc||a instanceof Iu){var u=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&u&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(u.id,this.tileID)}var c=t&&t.style&&t.style.getLayer(r);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<se.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=se.now()+e}},{key:"setTexture",value:function(e,t){var n=t.context,i=n.gl;this.texture=t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new kd(n,e,i.RGBA,{useMipmap:!0}),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&i.texParameterf(i.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}},{key:"setDependencies",value:function(e,t){var n,i={},r=d(t);try{for(r.s();!(n=r.n()).done;)i[n.value]=!0}catch(a){r.e(a)}finally{r.f()}this.dependencies[e]=i}},{key:"hasDependency",value:function(e,t){var n,i=d(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this.dependencies[r];if(a){var o,s=d(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(e,t){if(t&&"mercator"!==t.name&&!this._tileDebugBuffer){for(var n=As(Ep,this.tileID.canonical,this.tileTransform)[0],i=new Ua,r=new co,a=0;a<n.length;a++){var o=n[a],s=o.x,l=o.y;i.emplaceBack(s,l),r.emplaceBack(a)}r.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(r),this._tileDebugBuffer=e.createVertexBuffer(i,Ld.members),this._tileDebugSegments=cs.simpleSegment(0,0,i.length,r.length)}}},{key:"_makeTileBoundsBuffers",value:function(e,t){if(!this._tileBoundsBuffer&&t&&"mercator"!==t.name){var n,i,r=As(Ep,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var a=function(e,t){for(var n=rp(e,t),i=Math.pow(2,e.z),r=0;r<up;r++)for(var a=0;a<up;a++){var o=xs((e.x+(a+Tp(a))/lp)/i),s=bs((e.y+(r+Tp(r))/lp)/i),l=t.project(o,s),u=r*up+a;wp[2*u+0]=Math.round((l.x*n.scale-n.x)*hs),wp[2*u+1]=Math.round((l.y*n.scale-n.y)*hs)}kp.fill(0),Sp.fill(0);for(var c=2045;c>=0;c--){var h=4*c,d=cp[h+0],p=cp[h+1],f=cp[h+2],m=cp[h+3],v=d+f>>1,y=p+m>>1,g=v+y-p,_=y+d-v,x=p*up+d,b=m*up+f,w=y*up+v,k=Math.hypot((wp[2*x+0]+wp[2*b+0])/2-wp[2*w+0],(wp[2*x+1]+wp[2*b+1])/2-wp[2*w+1])>=16;if(kp[w]=kp[w]||(k?1:0),c<1022){var S=(p+_>>1)*up+(d+g>>1),T=(m+_>>1)*up+(f+g>>1);kp[w]=kp[w]||kp[S]||kp[T]}}var C=new Za,E=new no,M=0;function P(e,t){var n=t*up+e;return 0===Sp[n]&&(C.emplaceBack(wp[2*n+0],wp[2*n+1],e*hs/lp,t*hs/lp),Sp[n]=++M),Sp[n]-1}function A(e,t,n,i,r,a){var o=e+n>>1,s=t+i>>1;if(Math.abs(e-r)+Math.abs(t-a)>1&&kp[s*up+o])A(r,a,e,t,o,s),A(n,i,r,a,o,s);else{var l=P(e,t),u=P(n,i),c=P(r,a);E.emplaceBack(l,u,c)}}return A(0,0,lp,lp,lp,0),A(lp,lp,0,0,0,lp),{vertices:C,indices:E}}(this.tileID.canonical,t);n=a.vertices,i=a.indices}else{n=new Za,i=new no;var o,s=d(r);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.x,c=l.y;n.emplaceBack(u,c,0,0)}}catch(f){s.e(f)}finally{s.f()}for(var h=Kl(n.int16,void 0,4),p=0;p<h.length;p+=3)i.emplaceBack(h[p],h[p+1],h[p+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,Cp.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=cs.simpleSegment(0,0,n.length,i.length)}}},{key:"_makeGlobeTileDebugBuffers",value:function(e,t){if(!this._globeTileDebugBorderBuffer&&!this._globeTileDebugTextBuffer&&t&&"globe"===t.name){var n=this.tileID.canonical,i=Hd(jd(n));this._makeGlobeTileDebugBorderBuffer(e,n,i),this._makeGlobeTileDebugTextBuffer(e,n,i)}}},{key:"_makeGlobeTileDebugBorderBuffer",value:function(e,t,n){var i=new Ua,r=new co,a=new Va,o=function(e,o,s,l,u){for(var c=(s-e)/(u-1),h=(l-o)/(u-1),d=i.length,p=0;p<u;p++){var f=e+p*c,m=o+p*h;i.emplaceBack(f,m);var v=Gd(f,m,t),y=kl(v,v,n);a.emplaceBack(y[0],y[1],y[2]),r.emplaceBack(d+p)}},s=hs;o(0,0,s,0,16),o(s,0,s,s,16),o(s,s,0,s,16),o(0,s,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(r),this._tileDebugBuffer=e.createVertexBuffer(i,Ld.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(a,Id.members),this._tileDebugSegments=cs.simpleSegment(0,0,i.length,r.length)}},{key:"_makeGlobeTileDebugTextBuffer",value:function(e,t,n){var i=new Ua,r=new no,a=new Va,o=25;r.reserve(32),i.reserve(o),a.reserve(o);for(var s=function(e,t){return o*e+t},l=0;l<o;l++)for(var u=2048*l,c=0;c<o;c++){var h=2048*c;i.emplaceBack(h,u);var d=Gd(h,u,t),p=kl(d,d,n);a.emplaceBack(p[0],p[1],p[2])}for(var f=0;f<4;f++)for(var m=0;m<4;m++){var v=s(f,m),y=s(f,m+1),g=s(f+1,m),_=s(f+1,m+1);r.emplaceBack(v,y,g),r.emplaceBack(g,y,_)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(r),this._tileDebugTextBuffer=e.createVertexBuffer(i,Ld.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(a,Id.members),this._tileDebugTextSegments=cs.simpleSegment(0,0,o,32)}}]),e}(),Pp=function(){function e(){v(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return y(e,[{key:"updateState",value:function(e,t,n){var i=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},O(this.stateChanges[e][i],n),null===this.deletedStates[e])for(var r in this.deletedStates[e]={},this.state[e])r!==i&&(this.deletedStates[e][r]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][i])for(var a in this.deletedStates[e][i]={},this.state[e][i])n[a]||(this.deletedStates[e][i][a]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][o]&&delete this.deletedStates[e][i][o]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(n in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][n]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),i=O({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var r=this.deletedStates[e][t];if(null===r)return{};for(var a in r)delete i[a]}return i}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var r={};for(var a in this.stateChanges[i])this.state[i][a]||(this.state[i][a]={}),O(this.state[i][a],this.stateChanges[i][a]),r[a]=this.state[i][a];n[i]=r}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else for(var c=0,h=Object.keys(this.deletedStates[o][u]);c<h.length;c++){var d=h[c];delete this.state[o][u][d]}s[u]=this.state[o][u]}n[o]=n[o]||{},O(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in e)e[p].setFeatureState(n,t)}}]),e}(),Ap=function(){function e(t){v(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return y(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function Dp(e,t,n,i){for(var r=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(i[o])<1e-15){if(n[o]<e[o]||n[o]>t[o])return null}else{var s=1/i[o],l=(e[o]-n[o])*s,u=(t[o]-n[o])*s;if(l>u){var c=l;l=u,u=c}if(l>r&&(r=l),u<a&&(a=u),r>a)return null}return r}function Ip(e,t,n,i,r,a,o,s,l,u,c){var h=i-e,d=r-t,p=a-n,f=o-e,m=s-t,v=l-n,y=c[1]*v-c[2]*m,g=c[2]*f-c[0]*v,_=c[0]*m-c[1]*f,x=h*y+d*g+p*_;if(Math.abs(x)<1e-15)return null;var b=1/x,w=u[0]-e,k=u[1]-t,S=u[2]-n,T=(w*y+k*g+S*_)*b;if(T<0||T>1)return null;var C=k*p-S*d,E=S*h-w*p,M=w*d-k*h,P=(c[0]*C+c[1]*E+c[2]*M)*b;return P<0||T+P>1?null:(f*C+m*E+v*M)*b}function Lp(e,t,n){return(e-t)/(n-t)}function Op(e,t,n,i,r,a,o,s,l){var u=1<<n,c=a-i,h=o-r,d=(e+1)/u*c+i,p=(t+0)/u*h+r,f=(t+1)/u*h+r;s[0]=(e+0)/u*c+i,s[1]=p,l[0]=d,l[1]=f}var zp=function(){function e(t){if(v(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],i=Math.ceil(Math.pow(2,t)),r=1/i,a=function(e,t,n,i,r){var a=i?1:0,o=(e+1)*n-a,s=t*n,l=(t+1)*n-a;r[0]=e*n,r[1]=s,r[2]=o,r[3]=l},o=new Ap(i),s=[],l=0;l<i*i;l++){a(l%i,Math.floor(l/i),r,!1,s);var u=Bp(s[0],s[1],e),c=Bp(s[2],s[1],e),h=Bp(s[2],s[3],e),d=Bp(s[0],s[3],e);o.minimums.push(Math.min(u,c,h,d)),o.maximums.push(Math.max(u,c,h,d)),o.leaves.push(1)}for(n.push(o),i/=2;i>=1;i/=2){var p=n[n.length-1];o=new Ap(i);for(var f=0;f<i*i;f++){a(f%i,Math.floor(f/i),2,!0,s);var m=p.getElevation(s[0],s[1]),v=p.getElevation(s[2],s[1]),y=p.getElevation(s[2],s[3]),g=p.getElevation(s[0],s[3]),_=p.isLeaf(s[0],s[1]),x=p.isLeaf(s[2],s[1]),b=p.isLeaf(s[2],s[3]),w=p.isLeaf(s[0],s[3]),k=Math.min(m.min,v.min,y.min,g.min),S=Math.max(m.max,v.max,y.max,g.max),T=_&&x&&b&&w;o.maximums.push(S),o.minimums.push(k),o.leaves.push(S-k<=5&&T?1:0)}n.push(o)}return n}(this.dem),i=n.length-1,r=n[i];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(n,0,0,i,0)}}return y(e,[{key:"raycastRoot",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Dp([e,t,-100],[n,i,this.maximums[0]*o],r,a)}},{key:"raycast",value:function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,n,i,r,a,o);if(null==s)return null;for(var l=[],u=[],c=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];d.length>0;){var p=d.pop(),f=p.idx,m=p.t,v=p.nodex,y=p.nodey,g=p.depth;if(this.leaves[f]){Op(v,y,g,e,t,n,i,c,h);var _=1<<g,x=(v+0)/_,b=(v+1)/_,w=(y+0)/_,k=(y+1)/_,S=Bp(x,w,this.dem)*o,T=Bp(b,w,this.dem)*o,C=Bp(b,k,this.dem)*o,E=Bp(x,k,this.dem)*o,M=Ip(c[0],c[1],S,h[0],c[1],T,h[0],h[1],C,r,a),P=Ip(h[0],h[1],C,c[0],h[1],E,c[0],c[1],S,r,a),A=Math.min(null!==M?M:Number.MAX_VALUE,null!==P?P:Number.MAX_VALUE);if(A!==Number.MAX_VALUE)return A;var D=_l([],r,a,m);if(Rp(S,T,E,C,Lp(D[0],c[0],h[0]),Lp(D[1],c[1],h[1]))>=D[2])return m}else{for(var I=0,L=0;L<this._siblingOffset.length;L++){Op((v<<1)+this._siblingOffset[L][0],(y<<1)+this._siblingOffset[L][1],g+1,e,t,n,i,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[f]+L]*o;var O=Dp(c,h,r,a);if(null!=O){var z=O;l[L]=z;for(var R=!1,B=0;B<I&&!R;B++)z>=l[u[B]]&&(u.splice(B,0,L),R=!0);R||(u[I]=L),I++}}for(var F=0;F<I;F++){var N=u[F];d.push({idx:this.childOffsets[f]+N,t:l[N],nodex:(v<<1)+this._siblingOffset[N][0],nodey:(y<<1)+this._siblingOffset[N][1],depth:g+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,i,r){if(1!==e[i].isLeaf(t,n)){this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);for(var a=i-1,o=e[a],s=0,l=0,u=0;u<this._siblingOffset.length;u++){var c=2*t+this._siblingOffset[u][0],h=2*n+this._siblingOffset[u][1],d=o.getElevation(c,h),p=o.isLeaf(c,h),f=this._addNode(d.min,d.max,p);p&&(s|=1<<u),l||(l=f)}for(var m=0;m<this._siblingOffset.length;m++)s&1<<m||this._construct(e,2*t+this._siblingOffset[m][0],2*n+this._siblingOffset[m][1],a,l+m)}}}]),e}();function Rp(e,t,n,i,r,a){return yn(yn(e,n,a),yn(t,i,a),r)}function Bp(e,t,n){var i=n.dim,r=P(e*i-.5,0,i-1),a=P(t*i-.5,0,i-1),o=Math.floor(r),s=Math.floor(a),l=Math.min(o+1,i-1),u=Math.min(s+1,i-1);return Rp(n.get(o,s),n.get(l,s),n.get(o,u),n.get(l,u),r-o,a-s)}var Fp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},Np=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(v(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return Y('"'.concat(i,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var o=this.dim=n.height-2,s=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=i||"mapbox",this.borderReady=r,!r){for(var l=0;l<o;l++)s[this._idx(-1,l)]=s[this._idx(0,l)],s[this._idx(o,l)]=s[this._idx(o-1,l)],s[this._idx(l,-1)]=s[this._idx(l,0)],s[this._idx(l,o)]=s[this._idx(l,o-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(o,-1)]=s[this._idx(o-1,0)],s[this._idx(-1,o)]=s[this._idx(0,o-1)],s[this._idx(o,o)]=s[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return y(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new zp(this)}},{key:"get",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=P(e,-1,this.dim),t=P(t,-1,this.dim));var n=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}},{key:"unpackVector",get:function(){return Fp[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,n){return(256*e*256+256*t+n)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,n){return 256*e+t+n/256-32768}},{key:"getPixels",value:function(){return new Gl({width:this.stride,height:this.stride},this.pixels)}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var i=t*this.dim,r=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,l=-n*this.dim,u=a;u<o;u++)for(var c=i;c<r;c++){var h=4*this._idx(c,u),d=4*this._idx(c+s,u+l);this.pixels[h+0]=e.pixels[d+0],this.pixels[h+1]=e.pixels[d+1],this.pixels[h+2]=e.pixels[d+2],this.pixels[h+3]=e.pixels[d+3]}}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return Fp[e]}},{key:"pack",value:function(t,n){var i=[0,0,0,0],r=e.getUnpackVector(n),a=Math.floor((t+r[3])/r[2]);return i[2]=a%256,a=Math.floor(a/256),i[1]=a%256,a=Math.floor(a/256),i[0]=a,i}}]),e}();xr(Np,"DEMData"),xr(zp,"DemMinMaxQuadTree",{omit:["dem"]});var jp=function(){function e(t,n){v(this,e),this.max=t,this.onRemove=n,this.reset()}return y(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=d(this.data[e]);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}}catch(r){n.e(r)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var i=this,r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){i.remove(e,a)}),n)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,i=void 0===t?0:this.data[n].indexOf(t),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var i,r=d(this.data[n]);try{for(r.s();!(i=r.n()).done;){var a=i.value;e(a.value)||t.push(a)}}catch(u){r.e(u)}finally{r.f()}}for(var o=0,s=t;o<s.length;o++){var l=s[o];this.remove(l.value.tileID,l)}}}]),e}(),Up=y((function e(t,n,i){v(this,e),this.func=t,this.mask=n,this.range=i}));Up.ReadOnly=!1,Up.ReadWrite=!0,Up.disabled=new Up(519,Up.ReadOnly,[0,1]);var Vp=7680,Zp=y((function e(t,n,i,r,a,o){v(this,e),this.test=t,this.ref=n,this.mask=i,this.fail=r,this.depthFail=a,this.pass=o}));Zp.disabled=new Zp({func:519,mask:0},0,0,Vp,Vp,Vp);var Wp=y((function e(t,n,i){v(this,e),this.blendFunction=t,this.blendColor=n,this.mask=i}));Wp.Replace=[1,0],Wp.disabled=new Wp(Wp.Replace,St.transparent,[!1,!1,!1,!1]),Wp.unblended=new Wp(Wp.Replace,St.transparent,[!0,!0,!0,!0]),Wp.alphaBlended=new Wp([1,771],St.transparent,[!0,!0,!0,!0]);var Gp=1029,Yp=2305,Hp=y((function e(t,n,i){v(this,e),this.enable=t,this.mode=n,this.frontFace=i}));Hp.disabled=new Hp(!1,Gp,Yp),Hp.backCCW=new Hp(!0,Gp,Yp),Hp.backCW=new Hp(!0,Gp,2304),Hp.frontCW=new Hp(!0,1028,2304),Hp.frontCCW=new Hp(!0,1028,Yp);var Xp=function(e){f(n,e);var t=m(n);function n(e,i,a){var o;return v(this,n),(o=t.call(this)).id=e,o._onlySymbols=a,i.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),i.on("error",(function(){o._sourceErrored=!0})),o._source=i,o._tiles={},o._cache=new jp(0,o._unloadTile.bind(r(o))),o._timers={},o._cacheTimers={},o._minTileCacheSize=i.minTileCacheSize,o._maxTileCacheSize=i.maxTileCacheSize,o._loadedParentTiles={},o._coveredTiles={},o._state=new Pp,o._isRaster="raster"===o._source.type||"raster-dem"===o._source.type||"custom"===o._source.type&&"raster"===o._source._dataType,o}return y(n,[{key:"onAdd",value:function(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(var t in this._tiles){var n=this._tiles[t];this._source.prepareTile(n)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,n.tileID),n.upload(e),n.prepare(this.map.style.imageManager)}else for(var i in this._tiles){var r=this._tiles[i];r.upload(e),r.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return L(this._tiles).map((function(e){return e.tileID})).sort(qp).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&n.push(this._tiles[i]);return e?n.sort((function(e,n){var i=e.tileID,r=n.tileID,a=new g(i.canonical.x,i.canonical.y)._rotate(t.transform.angle),o=new g(r.canonical.x,r.canonical.y)._rotate(t.transform.angle);return i.overscaledZ-r.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(qp).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,i){if(i)if(e.state="errored",404!==i.status)this._source.fire(new Qe(i,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var r=this.map.painter.terrain;this.update(this.transform,r.getScaledDemTileSize(),!0),r.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=se.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new $e("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var i=t[n];if(e.neighboringTiles&&e.neighboringTiles[i]){var r=this.getTileByID(i);a(e,r),a(r,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,i=t.tileID.canonical.y-e.tileID.canonical.y,r=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,i),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,i){for(var r in this._tiles){var a=this._tiles[r];if(!(i[r]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){i[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var i=e.overscaledZ-1;i>=t;i--){var r=e.scaledTo(i),a=this._getLoadedTile(r);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,i=Math.ceil(e.height/t)+1,r=Math.floor(n*i*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,r):r,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var i in this._tiles){var r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),n[r.tileID.key]=r}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,i){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||i)){var a;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new np(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return r._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(Kp(this._source.type)&&0!==a.length){for(var s={},l={},u=0,c=Object.keys(o);u<c.length;u++){var h=c[u],p=o[h],f=this._tiles[h];if(f&&!(f.fadeEndTime&&f.fadeEndTime<=se.now())){var m=this.findLoadedParent(p,Math.max(p.overscaledZ-n.maxOverzooming,this._source.minzoom));m&&(this._addTile(m.tileID),s[m.tileID.key]=m.tileID),l[h]=p}}var v=a[a.length-1].overscaledZ;for(var y in this._tiles){var g=this._tiles[y];if(!o[y]&&g.hasData())for(var _=g.tileID;_.overscaledZ>v;){_=_.scaledTo(_.overscaledZ-1);var x=this._tiles[_.key];if(x&&x.hasData()&&l[_.key]){o[y]=g.tileID;break}}}for(var b in s)o[b]||(this._coveredTiles[b]=!0,o[b]=s[b])}for(var w in o)this._tiles[w].clearFadeHold();var k,S=function(e,t){var n=[];for(var i in e)i in t||n.push(i);return n}(this._tiles,o),T=d(S);try{for(T.s();!(k=T.n()).done;){var C=k.value,E=this._tiles[C];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+C)}}catch(M){T.e(M)}finally{T.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var i,r={},a=e.reduce((function(e,t){return Math.min(e,t.overscaledZ)}),1/0),o=e[0].overscaledZ,s=Math.max(o-n.maxOverzooming,this._source.minzoom),l=Math.max(o+n.maxUnderzooming,this._source.minzoom),u={},c=d(e);try{for(c.s();!(i=c.n()).done;){var h=i.value,p=this._addTile(h);t[h.key]=h,p.hasData()||a<this._source.maxzoom&&(u[h.key]=h)}}catch(S){c.e(S)}finally{c.f()}this._retainLoadedChildren(u,a,l,t);var f,m=d(e);try{for(m.s();!(f=m.n()).done;){var v=f.value,y=this._tiles[v.key];if(!y.hasData()){if(v.canonical.z>=this._source.maxzoom){var g=v.children(this._source.maxzoom)[0],_=this.getTile(g);if(_&&_.hasData()){t[g.key]=g;continue}}else{var x=v.children(this._source.maxzoom);if(t[x[0].key]&&t[x[1].key]&&t[x[2].key]&&t[x[3].key])continue}for(var b=y.wasRequested(),w=v.overscaledZ-1;w>=s;--w){var k=v.scaledTo(w);if(r[k.key])break;if(r[k.key]=!0,!(y=this.getTile(k))&&b&&(y=this._addTile(k)),y&&(t[k.key]=k,b=y.wasRequested(),y.hasData()))break}}}}catch(S){m.e(S)}finally{m.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,i=this._tiles[e].tileID;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}t.push(i.key);var r=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(r))break;i=r}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return this._source.prepareTile&&this._source.prepareTile(t),t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);if(!n){var i=this.map?this.map.painter:null;t=new Mp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,i,this._isRaster),this._source.prepareTile&&this._source.prepareTile(t)||this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new $e("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var i=t.getExpiryTimeout();i&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),i))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}},{key:"tilesIn",value:function(e,t,n){var i=[],r=this.transform;if(!r)return i;for(var a in this._tiles){var o=this._tiles[a];if(n&&o.clearQueryDebugViz(),!o.holdingForFade()){var s=e.containsTile(o,r,t);s&&i.push(s)}}return i}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,i=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),r=d(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped())}}catch(o){r.e(o)}finally{r.f()}return i}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Kp(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=se.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var i=this._tiles[e];i&&i.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}},{key:"_preloadTiles",value:function(e,t){var n,i=this,r=new Map,a=Array.isArray(e)?e:[e],o=this.map.painter.terrain,s=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize,l=d(a);try{for(l.s();!(n=l.n()).done;){var u,c=n.value,h=c.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),p=d(h);try{for(p.s();!(u=p.n()).done;){var f=u.value;r.set(f.key,f)}}catch(m){p.e(m)}finally{p.f()}this.usedForTerrain&&c.updateElevation(!1)}}catch(m){l.e(m)}finally{l.f()}I(Array.from(r.values()),(function(e,t){var n=new Mp(e,i._source.tileSize*e.overscaleFactor(),i.transform.tileZoom,i.map.painter,i._isRaster);i._loadTile(n,(function(e){"raster-dem"===i._source.type&&n.dem&&i._backfillDEM(n),t(e,n)}))}),t)}}]),n}(Je);function qp(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Kp(e){return"raster"===e||"image"===e||"video"===e}Xp.maxOverzooming=10,Xp.maxUnderzooming=3;var $p=function(){function e(t,n,i){v(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=i}return y(e,[{key:"tileCoordToPixel",value:function(e,t){var n=t*this._scale+this._offset[1],i=Math.floor(e*this._scale+this._offset[0]),r=Math.floor(n);return new g(i,r)}},{key:"getElevationAt",value:function(e,t,n,i){var r=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(r),s=Math.floor(a),l=this._dem;return i=!!i,n?yn(yn(l.get(o,s,i),l.get(o,s+1,i),a-s),yn(l.get(o+1,s,i),l.get(o+1,s+1,i),a-s),r-o):l.get(o,s,i)}},{key:"getElevationAtPixel",value:function(e,t,n){return this._dem.get(e,t,!!n)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*_s(1,e)*this._dem.stride}}],[{key:"create",value:function(t,n,i){var r=i||t.findDEMTileFor(n);if(r&&r.dem){var a=r.dem,o=r.tileID,s=1<<n.canonical.z-o.canonical.z;return new e(r,r.tileSize/hs/s,[(n.canonical.x/s-o.canonical.x)*a.dim,(n.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}(),Qp=function(){function e(t,n){v(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new yr(hs,16,0),this.featureIndexArray=new To,this.promoteId=n}return y(e,[{key:"insert",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,a);for(var s=this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var d=u[h];c[0]=Math.min(c[0],d.x),c[1]=Math.min(c[1],d.y),c[2]=Math.max(c[2],d.x),c[3]=Math.max(c[3],d.y)}c[0]<hs&&c[1]<hs&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var e in this.vtLayers=new Hu.VectorTile(new Oc(this.rawTileData)).layers,this.sourceLayerCoder=new ap(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}},{key:"query",value:function(e,t,n,i){var r=this;this.loadVTLayers();var a=e.params||{},o=Ni(a.filter),s=e.tileResult,l=e.transform,u=s.bufferedTilespaceBounds,c=this.grid.query(u.min.x,u.min.y,u.max.x,u.max.y,(function(e,t,n,i){return Gs(s.bufferedTilespaceGeometry,e,t,n,i)}));c.sort(ef);var h=null;l.elevation&&c.length>0&&(h=$p.create(l.elevation,this.tileID));for(var d,p={},f=function(l){var u=c[l];if(u===d)return"continue";d=u;var f=r.featureIndexArray.get(u),m=null;r.loadMatchingFeature(p,f,o,a.layers,a.availableImages,t,n,i,(function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=As(t,r.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(s,t,i,m,r.z,e.transform,e.pixelPosMatrix,h,a)}))},m=0;m<c.length;m++)f(m);return p}},{key:"loadMatchingFeature",value:function(e,t,n,i,r,a,o,s,l){var u=t.featureIndex,c=t.bucketIndex,h=t.sourceLayerIndex,d=t.layoutVertexArrayOffset,p=this.bucketLayerIDs[c];if(!i||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(i,p)){var f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(u);if(n.needGeometry){var v=Ds(m,!0);if(!n.filter(new xa(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!n.filter(new xa(this.tileID.overscaledZ),m))return;for(var y=this.getId(m,f),g=0;g<p.length;g++){var _=p[g];if(!(i&&i.indexOf(_)<0)){var x=a[_];if(x){var b={};void 0!==y&&s&&(b=s.getState(x.sourceLayer||"_geojsonTileLayer",y));var w=O({},o[_]);w.paint=Jp(w.paint,x.paint,m,b,r),w.layout=Jp(w.layout,x.layout,m,b,r);var k=!l||l(m,x,b,d);if(k){var S=new sp(m,this.z,this.x,this.y,y);S.layer=w;var T=e[_];void 0===T&&(T=e[_]=[]),T.push({featureIndex:u,feature:S,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,i,r,a,o,s){var l={};this.loadVTLayers();var u,c=Ni(r),h=d(e);try{for(h.s();!(u=h.n()).done;){var p=u.value;this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:p,layoutVertexArrayOffset:0},c,a,o,s,t)}}catch(f){h.e(f)}finally{h.f()}return l}},{key:"loadFeature",value:function(e){var t=e.featureIndex,n=e.sourceLayerIndex;this.loadVTLayers();var i=this.sourceLayerCoder.decode(n),r=this.vtFeatures[i];if(r[t])return r[t];var a=this.vtLayers[i].feature(t);return r[t]=a,a}},{key:"hasLayer",value:function(e){var t,n=d(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,a=d(r);try{for(a.s();!(i=a.n()).done;)if(e===i.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n}}]),e}();function Jp(e,t,n,i,r){return V(e,(function(e,a){var o=t instanceof Ma?t.get(a):null;return o&&o.evaluate?o.evaluate(n,i,r):o}))}function ef(e,t){return t-e}xr(Qp,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var tf=y((function e(t){v(this,e);var n={},i=[];for(var r in t){var a=t[r],o=n[r]={};for(var s in a.glyphs){var l=a.glyphs[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u=l.metrics.localGlyph?2:1,c={x:0,y:0,w:l.bitmap.width+2*u,h:l.bitmap.height+2*u};i.push(c),o[s]=c}}}var h=ih(i),d=h.w,p=h.h,f=new Wl({width:d||1,height:p||1});for(var m in t){var y=t[m];for(var g in y.glyphs){var _=y.glyphs[+g];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var x=n[m][g],b=_.metrics.localGlyph?2:1;Wl.copy(_.bitmap,f,{x:0,y:0},{x:x.x+b,y:x.y+b},_.bitmap)}}}this.image=f,this.positions=n}));xr(tf,"GlyphAtlas");var nf=function(){function e(t){v(this,e),this.tileID=new np(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=rp(t.tileID.canonical,t.projection),this.projection=t.projection}return y(e,[{key:"parse",value:function(e,t,n,i,r){var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new yo;var o=new ap(Object.keys(e.layers).sort()),s=new Qp(this.tileID,this.promoteId);s.bucketLayerIDs=[];var l,u,c,h,p={},f=new Sd(256,256),m={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:f,availableImages:n},v=t.familiesBySource[this.source];for(var y in v){var g=e.layers[y];if(g){var _,x=!1,b=!1,w=d(v[y]);try{for(w.s();!(_=w.n()).done;)"symbol"===_.value[0].type?x=!0:b=!0}catch(F){w.e(F)}finally{w.f()}if((!0!==this.isSymbolTile||x)&&(!1!==this.isSymbolTile||b)){1===g.version&&Y('Vector tile source "'.concat(this.source,'" layer "').concat(y,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var k=o.encode(y),S=[],T=0;T<g.length;T++){var C=g.feature(T),E=s.getId(C,y);S.push({feature:C,id:E,index:T,sourceLayerIndex:k})}var M,P=d(v[y]);try{for(P.s();!(M=P.n()).done;){var A=M.value,D=A[0];void 0!==this.isSymbolTile&&"symbol"===D.type!==this.isSymbolTile||D.minzoom&&this.zoom<Math.floor(D.minzoom)||D.maxzoom&&this.zoom>=D.maxzoom||"none"!==D.visibility&&(rf(A,this.zoom,n),(p[D.id]=D.createBucket({index:s.bucketLayerIDs.length,layers:A,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:k,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.name,availableImages:n})).populate(S,m,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(A.map((function(e){return e.id}))))}}catch(F){P.e(F)}finally{P.f()}}}}f.trim();var I={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},O=V(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(O).length?i.send("getGlyphs",{uid:this.uid,stacks:O},(function(e,t){l||(l=e,u=t,B.call(a))}),void 0,!1,I):u={};var z=Object.keys(m.iconDependencies);z.length?i.send("getImages",{icons:z,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){l||(l=e,c=t,B.call(a))}),void 0,!1,I):c={};var R=Object.keys(m.patternDependencies);function B(){if(l)return r(l);if(u&&c&&h){var e=new tf(u),t=new ah(c,h);for(var i in p){var a=p[i];a instanceof dd?(rf(a.layers,this.zoom,n),Kh(a,u,e.positions,c,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):a.hasPattern&&(a instanceof hc||a instanceof Iu||a instanceof ec)&&(rf(a.layers,this.zoom,n),a.addFeatures(m,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",r(null,{buckets:L(p).filter((function(e){return!e.isEmpty()})),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:f,imageAtlas:t,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}R.length?i.send("getImages",{icons:R,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){l||(l=e,h=t,B.call(a))}),void 0,!1,I):h={},B.call(this)}}]),e}();function rf(e,t,n){var i,r=new xa(t),a=d(e);try{for(a.s();!(i=a.n()).done;)i.value.recalculate(r,n)}catch(o){a.e(o)}finally{a.f()}}var af=function(){function e(t){v(this,e),this.entries={},this.scheduler=t}return y(e,[{key:"request",value:function(e,t,n,i){var r=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=h(a.result,2),s=o[0],l=o[1];return this.scheduler?this.scheduler.add((function(){i(s,l)}),t):i(s,l),function(){}}return a.callbacks.push(i),a.cancel||(a.cancel=n((function(n,i){a.result=[n,i];var o,s=d(a.callbacks);try{var l=function(){var e=o.value;r.scheduler?r.scheduler.add((function(){e(n,i)}),t):e(n,i)};for(s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}setTimeout((function(){return delete r.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==i})),a.callbacks.length||(a.cancel(),delete r.entries[e]))}}}]),e}();function of(e,t,n){var i=JSON.stringify(e.request);return e.data&&(this.deduped.entries[i]={result:[null,e.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var i=Ue(e.request,(function(e,i,r,a){e?t(e):i&&t(null,{vectorTile:n?void 0:new Hu.VectorTile(new Oc(i)),rawData:i,cacheControl:r,expires:a})}));return function(){i.cancel(),t()}}),t)}var sf=nl(new Float32Array(16)),lf=function(){function e(t){v(this,e),this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}return y(e,[{key:"project",value:function(e,t){return{x:0,y:0,z:0}}},{key:"unproject",value:function(e,t){return new fs(0,0)}},{key:"projectTilePoint",value:function(e,t,n){return{x:e,y:t,z:0}}},{key:"locationPoint",value:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)}},{key:"pixelsPerMeter",value:function(e,t){return _s(1,e)*t}},{key:"farthestPixelDistance",value:function(e){return function(e,t){var n=e.fovAboveCenter,i=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,r=(e._camera.position[2]*e.worldSize-i)/Math.cos(e._pitch),a=Math.sin(n)*r/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),o=Math.sin(e._pitch)*a+r;return Math.min(1.01*o,r*(1/e._horizonShift))}(e,e.pixelsPerMeter)}},{key:"pointCoordinate",value:function(e,t,n,i){var r=e.horizonLineFromTop(!1),a=new g(t,Math.max(r,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,i))}},{key:"createInversionMatrix",value:function(e,t){return sf}},{key:"createTileMatrix",value:function(e,t,n){var i,r,a,o=n.canonical,s=nl(new Float64Array(16));if(this.isReprojectedInTileSpace){var l=rp(o,this);i=1,r=l.x+n.wrap*l.scale,a=l.y,al(s,s,[i/l.scale,i/l.scale,e.pixelsPerMeter/t])}else i=t/e.zoomScale(o.z),r=(o.x+Math.pow(2,o.z)*n.wrap)*i,a=o.y*i;return rl(s,s,[r,a,0]),al(s,s,[i/hs,i/hs,1]),s}},{key:"upVector",value:function(e,t,n){return[0,0,1]}},{key:"upVectorScale",value:function(e,t,n){return{metersToTile:1,metersToLabelSpace:1}}}]),e}(),uf=function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e)).wrap=!0,i.supportsWorldCopies=!0,i.supportsTerrain=!0,i.supportsFog=!0,i.supportsFreeCamera=!0,i.isReprojectedInTileSpace=!1,i.unsupportedLayers=[],i.range=null,i}return y(n,[{key:"project",value:function(e,t){return{x:ys(e),y:gs(t),z:0}}},{key:"unproject",value:function(e,t){var n=xs(e),i=bs(t);return new fs(n,i)}}]),n}(lf),cf=function(e){f(n,e);var t=m(n);function n(e){var i;v(this,n),(i=t.call(this,e)).range=[4,7],i.center=e.center||[-96,37.5];var r=i.parallels=e.parallels||[29.5,45.5],a=h(r,2),o=a[0],s=a[1],l=Math.sin(k(o));return i.n=(l+Math.sin(k(s)))/2,i.c=1+l*(2*i.n-l),i.r0=Math.sqrt(i.c)/i.n,i}return y(n,[{key:"project",value:function(e,t){var n=this.n,i=this.c,r=this.r0,a=k(e-this.center[0]),o=k(t),s=Math.sqrt(i-2*n*Math.sin(o))/n;return{x:s*Math.sin(a*n),y:s*Math.cos(a*n)-r,z:0}}},{key:"unproject",value:function(e,t){var n=this.n,i=this.c,r=this.r0+t,a=Math.atan2(e,Math.abs(r))*Math.sign(r);r*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(r));var o=k(this.center[0])*n,s=S((a=D(a,-Math.PI-o,Math.PI-o))/n)+this.center[0],l=Math.asin(P((i-(e*e+r*r)*n*n)/(2*n),-1,1)),u=P(S(l),-85.051129,ks);return new fs(s,u)}}]),n}(lf),hf=1.340264,df=-.081106,pf=893e-6,ff=.003796,mf=Math.sqrt(3)/2,vf=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"project",value:function(e,t){t=t/180*Math.PI,e=e/180*Math.PI;var n=Math.asin(mf*Math.sin(t)),i=n*n,r=i*i*i;return{x:.5*(e*Math.cos(n)/(mf*(hf+3*df*i+r*(7*pf+9*ff*i)))/Math.PI+.5),y:1-.5*(n*(hf+df*i+r*(pf+ff*i))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;for(var n,i=t=(2*(1-t)-1)*Math.PI,r=i*i,a=r*r*r,o=0;o<12&&(a=(r=(i=P(i-(n=(i*(hf+df*r+a*(pf+ff*r))-t)/(hf+3*df*r+a*(7*pf+9*ff*r))),-Math.PI/3,Math.PI/3))*i)*r*r,!(Math.abs(n)<1e-12));++o);var s=mf*e*(hf+3*df*r+a*(7*pf+9*ff*r))/Math.cos(i),l=Math.asin(Math.sin(i)/mf),u=P(180*s/Math.PI,-180,180),c=P(180*l/Math.PI,-85.051129,ks);return new fs(u,c)}}]),n}(lf),yf=function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e)).wrap=!0,i.supportsWorldCopies=!0,i}return y(n,[{key:"project",value:function(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}},{key:"unproject",value:function(e,t){var n=360*(e-.5),i=P(360*(.5-t),-85.051129,ks);return new fs(n,i)}}]),n}(lf),gf=Math.PI/2;function _f(e){return Math.tan((gf+e)/2)}var xf=function(e){f(n,e);var t=m(n);function n(e){var i;v(this,n),(i=t.call(this,e)).center=e.center||[0,30];var r=i.parallels=e.parallels||[30,30],a=h(r,2),o=a[0],s=a[1],l=k(o),u=k(s),c=Math.cos(l);return i.n=l===u?Math.sin(l):Math.log(c/Math.cos(u))/Math.log(_f(u)/_f(l)),i.f=c*Math.pow(_f(l),i.n)/i.n,i}return y(n,[{key:"project",value:function(e,t){t=k(t),e=k(e-this.center[0]);var n=1e-6,i=this.n,r=this.f;r>0?t<-gf+n&&(t=-gf+n):t>gf-n&&(t=gf-n);var a=r/Math.pow(_f(t),i),o=a*Math.sin(i*e),s=r-a*Math.cos(i*e);return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+.5),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI,t=(2*(1-t)-.5)*Math.PI;var n=this.n,i=this.f,r=i-t,a=Math.sign(r),o=Math.sign(n)*Math.sqrt(e*e+r*r),s=Math.atan2(e,Math.abs(r))*a;r*n<0&&(s-=Math.PI*Math.sign(e)*a);var l=P(S(s/n)+this.center[0],-180,180),u=P(S(2*Math.atan(Math.pow(i/o,1/n))-gf),-85.051129,ks);return new fs(l,u)}}]),n}(lf),bf=k(ks),wf=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"project",value:function(e,t){var n=(t=k(t))*t,i=n*n;return{x:.5*((e=k(e))*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;var n=t=(2*(1-t)-1)*Math.PI,i=25,r=0,a=n*n;do{var o=(a=n*n)*a;n=P(n-(r=(n*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))),-bf,bf)}while(Math.abs(r)>1e-6&&--i>0);var s=P(S(e/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),l=S(n);return new fs(s,l)}}]),n}(lf),kf=k(ks),Sf=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"project",value:function(e,t){t=k(t),e=k(e);var n=Math.cos(t),i=2/Math.PI,r=Math.acos(n*Math.cos(e/2)),a=Math.sin(r)/r,o=.5*(e*i+2*n*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){var n=e=(2*e-.5)*Math.PI,i=t=(2*(1-t)-1)*Math.PI,r=25,a=1e-6,o=0,s=0;do{var l=Math.cos(i),u=Math.sin(i),c=2*u*l,h=u*u,d=l*l,p=Math.cos(n/2),f=Math.sin(n/2),m=2*p*f,v=f*f,y=1-d*p*p,g=y?1/y:0,_=y?Math.acos(l*p)*Math.sqrt(1/y):0,x=.5*(2*_*l*f+2*n/Math.PI)-e,b=.5*(_*u+i)-t,w=.5*g*(d*v+_*l*p*h)+1/Math.PI,k=g*(m*c/4-_*u*f),T=.125*g*(c*f-_*u*d*m),C=.5*g*(h*p+_*v*l)+.5,E=k*T-C*w;s=(x*T-b*w)/E,n=P(n-(o=(b*k-x*C)/E),-Math.PI,Math.PI),i=P(i-s,-kf,kf)}while((Math.abs(o)>a||Math.abs(s)>a)&&--r>0);return new fs(S(n),S(i))}}]),n}(lf),Tf=function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e)).center=e.center||[0,0],i.parallels=e.parallels||[0,0],i.cosPhi=Math.max(.01,Math.cos(k(i.parallels[0]))),i.scale=1/(2*Math.max(Math.PI*i.cosPhi,1/i.cosPhi)),i.wrap=!0,i.supportsWorldCopies=!0,i}return y(n,[{key:"project",value:function(e,t){var n=this.scale,i=this.cosPhi;return{x:k(e)*i*n+.5,y:-Math.sin(k(t))/i*n+.5,z:0}}},{key:"unproject",value:function(e,t){var n=this.scale,i=this.cosPhi,r=-(t-.5)/n,a=P(S((e-.5)/n)/i,-180,180),o=Math.asin(P(r*i,-1,1)),s=P(S(o),-85.051129,ks);return new fs(a,s)}}]),n}(lf);e.ARRAY_TYPE=el,e.AUTH_ERR_MSG=fe,e.Aabb=Ol,e.Actor=function(){function e(t,n,i){v(this,e),this.target=t,this.parent=n,this.mapId=i,this.callbacks={},this.cancelCallbacks={},j(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?t:x,this.scheduler=new Md}return y(e,[{key:"send",value:function(e,t,n,i){var r=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[s]=n);var l=ne(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!n,targetMapId:i,mustQueue:a,sourceMapId:this.mapId,data:Sr(t,l)},l),{cancel:function(){n&&delete r.callbacks[s],r.target.postMessage({id:s,type:"<cancel>",targetMapId:i,sourceMapId:r.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,i=n.id;if(i&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r.cancel()}else if(n.mustQueue||q()){var a=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add((function(){return t.processTask(i,n)}),a&&a.metadata||{type:"message"})}else this.processTask(i,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var i=this.callbacks[e];delete this.callbacks[e],i&&(t.error?i(Tr(t.error)):i(null,Tr(t.data)))}else{var r=ne(this.globalScope)?void 0:[],a=t.hasCallback?function(t,i){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?Sr(t):null,data:Sr(i,r)},r)}:function(e){},o=Tr(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.CanonicalTileID=ep,e.Color=St,e.ColorMode=Wp,e.CullFaceMode=Hp,e.DEMData=Np,e.DataConstantProperty=Pa,e.DedupedRequest=af,e.DepthMode=Up,e.EXTENT=hs,e.Elevation=function(){function e(){v(this,e)}return y(e,[{key:"isDataAvailableAtPoint",value:function(e){var t=this._source();if(!t||e.y<0||e.y>1)return!1;var n=t.getSource().maxzoom,i=1<<n,r=Math.floor(e.x),a=Math.floor((e.x-r)*i),o=Math.floor(e.y*i),s=this.findDEMTileFor(new np(n,r,n,a,o));return!(!s||!s.dem)}},{key:"getAtPointOrZero",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}},{key:"getAtPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null==t&&(t=null);var i=this._source();if(!i)return t;if(e.y<0||e.y>1)return t;var r=i.getSource().maxzoom,a=1<<r,o=Math.floor(e.x),s=e.x-o,l=new np(r,o,r,Math.floor(s*a),Math.floor(e.y*a)),u=this.findDEMTileFor(l);if(!u||!u.dem)return t;var c=u.dem,h=1<<u.tileID.canonical.z,d=(s*h-u.tileID.canonical.x)*c.dim,p=(e.y*h-u.tileID.canonical.y)*c.dim,f=Math.floor(d),m=Math.floor(p);return(n?this.exaggeration():1)*yn(yn(c.get(f,m),c.get(f,m+1),p-m),yn(c.get(f+1,m),c.get(f+1,m+1),p-m),d-f)}},{key:"getAtTileOffset",value:function(e,t,n){var i=1<<e.canonical.z;return this.getAtPointOrZero(new Ss(e.wrap+(e.canonical.x+t/hs)/i,(e.canonical.y+n/hs)/i))}},{key:"getAtTileOffsetFunc",value:function(e,t,n,i){var r=this;return function(a){var o=r.getAtTileOffset(e,a.x,a.y),s=i.upVector(e.canonical,a.x,a.y);return gl(s,s,o*i.upVectorScale(e.canonical,t,n).metersToTile),s}}},{key:"getForTilePoints",value:function(e,t,n,i){var r=this,a=$p.create(this,e,i);return!!a&&(t.forEach((function(e){e[2]=r.exaggeration()*a.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,i=t.tileID,r=1<<e.canonical.z-i.canonical.z,a=e.canonical.x/r-i.canonical.x,o=e.canonical.y/r-i.canonical.y,s=0,l=0;l<e.canonical.z-i.canonical.z&&!n.leaves[s];l++){a*=2,o*=2;var u=2*Math.floor(o)+Math.floor(a);s=n.childOffsets[s]+u,a%=1,o%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=Qe,e.EvaluationParameters=xa,e.Event=$e,e.Evented=Je,e.FillExtrusionBucket=ec,e.Frustum=Ll,e.GLOBE_RADIUS=Od,e.GlobeSharedBuffers=function(){function e(t){v(this,e),this._createGrid(t),this._createPoles(t),this._createAtmosphere(t)}return y(e,[{key:"destroy",value:function(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();var e,t=d(this._poleSegments);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(n){t.e(n)}finally{t.f()}this._gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this._wireframeIndexBuffer&&(this._wireframeIndexBuffer.destroy(),this._wireframeSegments.destroy())}},{key:"_createGrid",value:function(e){for(var t=new Ua,n=new no,i=65,r=0;r<i;r++)for(var a=0;a<i;a++)t.emplaceBack(a,r);for(var o=0;o<64;o++)for(var s=0;s<64;s++){var l=o*i+s;n.emplaceBack(l+1,l,l+i),n.emplaceBack(l+i,l+i+1,l+1)}this._gridBuffer=e.createVertexBuffer(t,Ld.members),this._gridIndexBuffer=e.createIndexBuffer(n,!0),this._gridSegments=cs.simpleSegment(0,0,4225,8192)}},{key:"_createPoles",value:function(e){for(var t=new no,n=0;n<=64;n++)t.emplaceBack(0,n+1,n+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);var i=new oo,r=new oo;this._poleSegments=[];for(var a=0,o=0;a<5;a++){var s=1<<a,l=512*s/Math.PI/2,u=360/s;i.emplaceBack(0,-l,0,0,0,.5,0),r.emplaceBack(0,-l,0,0,0,.5,1);for(var c=0;c<=64;c++){var d=c/64,p=yn(0,u,d),f=Zd($d,Qd,p,l),m=h(f,3),v=m[0],y=m[1],g=m[2];i.emplaceBack(v,y,g,0,0,d,0),r.emplaceBack(v,y,g,0,0,d,1)}this._poleSegments.push(cs.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(i,Dd,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(r,Dd,!1)}},{key:"_createAtmosphere",value:function(e){var t=new so;t.emplaceBack(-1,1,1,0,0),t.emplaceBack(1,1,1,1,0),t.emplaceBack(1,-1,1,1,1),t.emplaceBack(-1,-1,1,0,1);var n=new no;n.emplaceBack(0,1,2),n.emplaceBack(2,3,0),this.atmosphereVertexBuffer=e.createVertexBuffer(t,Ad.members),this.atmosphereIndexBuffer=e.createIndexBuffer(n),this.atmosphereSegments=cs.simpleSegment(0,0,4,2)}},{key:"getGridBuffers",value:function(){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments]}},{key:"getPoleBuffers",value:function(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},{key:"getWirefameBuffers",value:function(e){if(!this._wireframeSegments){for(var t=new uo,n=64,i=n+1,r=0;r<n;r++)for(var a=0;a<n;a++){var o=r*i+a;t.emplaceBack(o,o+1),t.emplaceBack(o,o+i),t.emplaceBack(o,o+i+1)}this._wireframeIndexBuffer=e.createIndexBuffer(t),this._wireframeSegments=cs.simpleSegment(0,0,n*n,t.length)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments]}}]),e}(),e.GlyphManager=zh,e.ImagePosition=rh,e.LineAtlas=Sd,e.LngLat=fs,e.LngLatBounds=ds,e.LocalGlyphMode=Oh,e.MAX_MERCATOR_LATITUDE=ks,e.MercatorCoordinate=Ss,e.ONE_EM=wc,e.OverscaledTileID=np,e.Properties=Oa,e.RGBAImage=Gl,e.Ray=function(){function e(t,n){v(this,e),this.pos=t,this.dir=n}return y(e,[{key:"intersectsPlane",value:function(e,t,n){var i=bl(t,this.dir);if(Math.abs(i)<1e-6)return!1;var r=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/i;return n[0]=this.pos[0]+this.dir[0]*r,n[1]=this.pos[1]+this.dir[1]*r,n[2]=this.pos[2]+this.dir[2]*r,!0}},{key:"closestPointOnSphere",value:function(e,t,n){if(function(e,t){var n=e[0],i=e[1],r=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=Js*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=Js*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-s)<=Js*Math.max(1,Math.abs(r),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;var i=h(this.dir,3),r=i[0],a=i[1],o=i[2],s=this.pos[0]-e[0],l=this.pos[1]-e[1],u=this.pos[2]-e[2],c=r*r+a*a+o*o,d=2*(s*r+l*a+u*o),p=d*d-4*c*(s*s+l*l+u*u-t*t);if(p<0){var f=Math.max(-d/2,0),m=s+r*f,v=l+a*f,y=u+o*f,g=Math.hypot(m,v,y);return n[0]=m*t/g,n[1]=v*t/g,n[2]=y*t/g,!1}var _=(-d-Math.sqrt(p))/(2*c);if(_<0){var x=Math.hypot(s,l,u);return n[0]=s*t/x,n[1]=l*t/x,n[2]=u*t/x,!1}return n[0]=s+r*_,n[1]=l+a*_,n[2]=u+o*_,!0}}]),e}(),e.RequestManager=function(){function e(t,n,i){v(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._silenceAuthErrors=!!i,this._createSkuToken()}return y(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",pe,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!me(e))return e;var n=ge(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!me(e))return e;var n=ge(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t){if(!me(e))return e;var n=ge(e);return n.path="/v4/".concat(n.authority,".json"),n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,i){var r=ge(e);return me(e)?(r.path="/styles/v1".concat(r.path,"/sprite").concat(t).concat(n),this._makeAPIURL(r,this._customAccessToken||i)):(r.path+="".concat(t).concat(n),_e(r))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!me(e))return e;var i=ge(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==i.authority&&512===n?"@2x":"").concat(ue.supported?".webp":"$1")),"raster"===i.authority?i.path="/".concat(le.RASTER_URL_PREFIX).concat(i.path):(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/".concat(le.TILE_URL_VERSION).concat(i.path));var r=this._customAccessToken||function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value.match(/^access_token=(.*)$/);if(i)return i[1]}}catch(r){n.e(r)}finally{n.f()}return null}(i.params)||le.ACCESS_TOKEN;return le.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(i,r)}},{key:"canonicalizeTileURL",value:function(e,t){var n=ge(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var i="mapbox://";n.path.match(/^\/raster\/v1\//)?i+="raster/".concat(n.path.replace("/".concat(le.RASTER_URL_PREFIX,"/"),"")):i+="tiles/".concat(n.path.replace("/".concat(le.TILE_URL_VERSION,"/"),""));var r=n.params;return t&&(r=r.filter((function(e){return!e.match(/^access_token=/)}))),r.length&&(i+="?".concat(r.join("&"))),i}},{key:"canonicalizeTileset",value:function(e,t){var n,i=!!t&&me(t),r=[],a=d(e.tiles||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;ve(o)?r.push(this.canonicalizeTileURL(o,i)):r.push(o)}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"_makeAPIURL",value:function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=ge(le.API_URL);if(e.protocol=i.protocol,e.authority=i.authority,"http"===e.protocol){var r=e.params.indexOf("secure");r>=0&&e.params.splice(r,1)}if("/"!==i.path&&(e.path="".concat(i.path).concat(e.path)),!le.REQUIRE_ACCESS_TOKEN)return _e(e);if(t=t||le.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),_e(e)}}]),e}(),e.ResourceType=Be,e.SegmentVector=cs,e.SourceCache=Xp,e.StencilMode=Zp,e.StructArrayLayout1ui2=co,e.StructArrayLayout2f1f2i16=eo,e.StructArrayLayout2i4=Ua,e.StructArrayLayout2ui4=uo,e.StructArrayLayout3f12=Ka,e.StructArrayLayout3ui6=no,e.StructArrayLayout4i8=Za,e.Texture=kd,e.Tile=Mp,e.Transitionable=ka,e.Uniform1f=Uo,e.Uniform1i=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=0,r}return y(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}}]),n}(jo),e.Uniform2f=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=[0,0],r}return y(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}}]),n}(jo),e.Uniform3f=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=[0,0,0],r}return y(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}}]),n}(jo),e.Uniform4f=Vo,e.UniformColor=Zo,e.UniformMatrix2f=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=Yo,r}return y(n,[{key:"set",value:function(e){for(var t=0;t<4;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix2fv(this.location,!1,e);break}}}]),n}(jo),e.UniformMatrix3f=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=Go,r}return y(n,[{key:"set",value:function(e){for(var t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}}]),n}(jo),e.UniformMatrix4f=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e,i)).current=Wo,r}return y(n,[{key:"set",value:function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}}]),n}(jo),e.UnwrappedTileID=tp,e.ValidationError=Ai,e.VectorTileWorkerSource=function(e){f(n,e);var t=m(n);function n(e,i,r,a,o){var s;return v(this,n),(s=t.call(this)).actor=e,s.layerIndex=i,s.availableImages=r,s.loadVectorData=o||of,s.loading={},s.loaded={},s.deduped=new af(e.scheduler),s.isSpriteLoaded=a,s.scheduler=e.scheduler,s}return y(n,[{key:"loadTile",value:function(e,t){var n=this,i=e.uid,r=e&&e.request,a=r&&r.collectResourceTiming,o=this.loading[i]=new nf(e);o.abort=this.loadVectorData(e,(function(s,l){var u=!n.loading[i];if(delete n.loading[i],u||s||!l)return o.status="done",u||(n.loaded[i]=o),t(s);var c=l.rawData,h={};l.expires&&(h.expires=l.expires),l.cacheControl&&(h.cacheControl=l.cacheControl),o.vectorTile=l.vectorTile||new Hu.VectorTile(new Oc(c));var d=function(){o.parse(o.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return t(e);var i={};if(a){var o=Ed(r);o.length>0&&(i.resourceTiming=JSON.parse(JSON.stringify(o)))}t(null,O({rawTileData:c.slice(0)},n,h,i))}))};n.isSpriteLoaded?d():n.once("isSpriteLoaded",(function(){n.scheduler?n.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()})),n.loaded=n.loaded||{},n.loaded[i]=o}))}},{key:"reloadTile",value:function(e,t){var n=this,i=this.loaded,r=e.uid,a=this;if(i&&i[r]){var o=i[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=rp(e.tileID.canonical,e.projection);var s=function(e,i){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,n.availableImages,a.actor,r)),t(e,i)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var n=e.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),t()}},{key:"removeTile",value:function(e,t){var n=this.loaded,i=e.uid;n&&n[i]&&delete n[i],t()}}]),n}(Je),e.WritingMode=oh,e.ZoomHistory=Cr,e.add=pl,e.addDynamicAttributes=ld,e.adjoint=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=r*u-i*c,e[2]=i*s-r*o,e[3]=s*l-a*c,e[4]=n*c-r*l,e[5]=r*a-n*s,e[6]=a*u-o*l,e[7]=i*l-n*u,e[8]=n*o-i*a,e},e.asyncAll=I,e.bezier=E,e.bindAll=j,e.boundsAttributes=Cp,e.bufferConvexPolygon=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=D(i-1,-1,e.length-1),a=D(i+1,-1,e.length-1),o=e[i],s=e[a],l=e[r].sub(o).unit(),u=s.sub(o).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*t/Math.sin(c/2));n.push(o.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){++Re>Le&&(e.getActor().send("enforceCacheSizeLimit",Ie),Re=0)},e.calculateGlobeLabelMatrix=function(e,t){var n=e._center,i=n.lng,r=n.lat,a=Xd(0,0,e.worldSize/e._projectionScaler,i,r);return il(a,a,function(e){var t=nl(new Float64Array(16)),n=1/Yd(e);return rl(t,t,e.min),al(t,t,[n,n,n]),t}(jd(t)))},e.calculateGlobeMatrix=qd,e.calculateGlobeMercatorMatrix=function(e){var t=e.worldSize,n=e.point,i=_s(1,e.center.lat)*t,r=e.pixelsPerMeter,a=t/(i/e.pixelsPerMeter),o=nl(new Float64Array(16));return rl(o,o,[n.x,n.y,0]),al(o,o,[a,a,r]),Float32Array.from(o)},e.circumferenceAtLatitude=vs,e.clamp=P,e.clearTileCache=function(e){var t=x.caches.delete(De);e&&t.catch(e).then((function(){return e()}))},e.clipLine=Ah,e.clone=function(e){var t=new el(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=W,e.collisionCircleLayout=bc,e.config=le,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new el(16);return el!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=tl,e.createExpression=Si,e.createLayout=Na,e.createStyleLayer=function(e){return"custom"===e.type?new _d(e):new wd[e.type](e)},e.cross=wl,e.degToRad=k,e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=bl,e.earthRadius=ps,e.ease=M,e.easeCubicInOut=C,e.emitValidationErrors=vr,e.endsWith=U,e.enforceCacheSizeLimit=function(e){Oe(),be&&be.then((function(t){t.keys().then((function(n){for(var i=0;i<n.length-e;i++)t.delete(n[i])}))}))},e.evaluateSizeForFeature=Tc,e.evaluateSizeForZoom=Cc,e.evaluateVariableOffset=qh,e.evented=va,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=se,e.exported$1=ue,e.extend=O,e.extend$1=tt,e.filterObject=Z,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n+n,s=i+i,l=r+r,u=n*o,c=i*o,h=i*s,d=r*o,p=r*s,f=r*l,m=a*o,v=a*s,y=a*l;return e[0]=1-h-f,e[1]=c+y,e[2]=d-v,e[3]=0,e[4]=c-y,e[5]=1-u-f,e[6]=p+m,e[7]=0,e[8]=d+v,e[9]=p-m,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.furthestTileCorner=function(e){var t=Math.round((e+45+360)%360/90)%4;return T[t]},e.getAABBPointSquareDist=function(e,t,n){for(var i=0,r=0;r<2;++r){var a=n?n[r]:0;e[r]>a&&(i+=(e[r]-a)*(e[r]-a)),t[r]<a&&(i+=(a-t[r])*(a-t[r]))}return i},e.getAnchorAlignment=gh,e.getAnchorJustification=$h,e.getBounds=function(e){var t,n=1/0,i=1/0,r=-1/0,a=-1/0,o=d(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),a=Math.max(a,s.y)}}catch(l){o.e(l)}finally{o.f()}return{min:new g(n,i),max:new g(r,a)}},e.getColumn=function(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]},e.getGridMatrix=function(e,t){var n=h(t,2),i=n[0],r=n[1],a=.015625;return[0,(r[1]-i[1])*a,1<<e.z,(r[0]-i[0])*a,0,e.y,i[0],i[1],a]},e.getImage=Xe,e.getJSON=function(e,t){return je(O(e,{type:"json"}),t)},e.getMapSessionAPI=Pe,e.getPerformanceMeasurement=Ed,e.getProjection=function(e){var t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new uf(e);case"equirectangular":return new yf(e);case"naturalEarth":return new wf(e);case"equalEarth":return new vf(e);case"winkelTripel":return new Sf(e);case"albers":return n?new Tf(e):new cf(e);case"lambertConformalConic":return n?new Tf(e):new xf(e)}throw new Error("Invalid projection name: ".concat(e.name))},e.getRTLTextPluginStatus=ya,e.getReferrer=Ne,e.getTilePoint=function(e,t){var n=t.x,i=t.y;return new g(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*hs,(i*e.scale-e.y)*hs)},e.getTileVec3=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return dl(((t.x-n)*e.scale-e.x)*hs,(t.y*e.scale-e.y)*hs,ws(t.z,t.y))},e.getVideo=function(e,t){var n=x.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var i=0;i<e.length;i++){var r=x.document.createElement("source");We(e[i])||(n.crossOrigin="Anonymous"),r.src=e[i],n.appendChild(r)}return{cancel:function(){}}},e.globeECEFOrigin=function(e,t){var n=[0,0,0];return kl(n,n,Hd(jd(t.canonical))),kl(n,n,e),n},e.globePixelsToTileUnits=function(e,t){return hs/(512*Math.pow(2,e))*Yd(jd(t))},e.globePoleMatrixForTile=function(e,t,n){var i=nl(new Float64Array(16)),r=1<<e,a=360*(t/r-.5),o=n.point,s=n.worldSize/(n.tileSize*r);return rl(i,i,[o.x,o.y,-n.worldSize/Math.PI/2]),al(i,i,[s,s,s]),ol(i,i,k(-n._center.lat)),sl(i,i,k(-n._center.lng+a)),Float32Array.from(i)},e.globeTileLatLngCorners=Vd,e.globeToMercatorTransition=function(e){return A(5,6,e)},e.identity=nl,e.identity$1=Dl,e.invert=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],v=t[14],y=t[15],g=n*s-i*o,_=n*l-r*o,x=n*u-a*o,b=i*l-r*s,w=i*u-a*s,k=r*u-a*l,S=c*m-h*f,T=c*v-d*f,C=c*y-p*f,E=h*v-d*m,M=h*y-p*m,P=d*y-p*v,A=g*P-_*M+x*E+b*C-w*T+k*S;return A?(e[0]=(s*P-l*M+u*E)*(A=1/A),e[1]=(r*M-i*P-a*E)*A,e[2]=(m*k-v*w+y*b)*A,e[3]=(d*w-h*k-p*b)*A,e[4]=(l*C-o*P-u*T)*A,e[5]=(n*P-r*C+a*T)*A,e[6]=(v*x-f*k-y*_)*A,e[7]=(c*k-d*x+p*_)*A,e[8]=(o*M-s*C+u*S)*A,e[9]=(i*C-n*M-a*S)*A,e[10]=(f*w-m*x+y*g)*A,e[11]=(h*x-c*w-p*g)*A,e[12]=(s*T-o*E-l*S)*A,e[13]=(n*E-i*T+r*S)*A,e[14]=(m*_-f*b-v*g)*A,e[15]=(c*b-h*_+d*g)*A,e):null},e.isMapAuthenticated=function(e){return Ae.has(e)},e.isMapboxURL=me,e.isSafariWithAntialiasingBug=function(e){var t=e.navigator?e.navigator.userAgent:null;return!!ne(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=bs,e.len=Ml,e.length=hl,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=of,e.makeRequest=je,e.mercatorXfromLng=ys,e.mercatorYfromLat=gs,e.mercatorZfromAltitude=_s,e.mul=ll,e.mul$1=El,e.multiply=function(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=n[0],p=n[1],f=n[2],m=n[3],v=n[4],y=n[5],g=n[6],_=n[7],x=n[8];return e[0]=d*i+p*o+f*u,e[1]=d*r+p*s+f*c,e[2]=d*a+p*l+f*h,e[3]=m*i+v*o+y*u,e[4]=m*r+v*s+y*c,e[5]=m*a+v*l+y*h,e[6]=g*i+_*o+x*u,e[7]=g*r+_*s+x*c,e[8]=g*a+_*l+x*h,e},e.multiply$1=il,e.multiply$2=ml,e.nextPowerOfTwo=F,e.normalize=xl,e.normalize$1=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n*n+i*i+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=a*o,e},e.number=yn,e.ortho=function(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(o+a)*u,e[15]=1,e},e.pbf=Oc,e.perspective=function(e,t,n,i,r){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+i)*(a=1/(i-r)),e[14]=2*r*i*a):(e[10]=-1,e[14]=-2*i),e},e.pick=function(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i];r in e&&(n[r]=e[r])}return n},e.plugin=_a,e.pointGeometry=g,e.polygonIntersectsBox=Gs,e.polygonIntersectsPolygon=zs,e.polygonizeBounds=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=new g(n,n),a=e.sub(r),o=t.add(r),s=[a,new g(o.x,a.y),o,new g(a.x,o.y)];return i&&s.push(a),s},e.posAttributes=Ld,e.postMapLoadEvent=Ee,e.postTurnstileEvent=Te,e.potpack=ih,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=S,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:da,pluginURL:pa}),va.on("pluginStateChange",e),e},e.removeAuthState=function(e){Ae.delete(e)},e.renderColorRamp=Hl,e.rotateX=ol,e.rotateX$1=Il,e.rotateY=sl,e.rotateZ=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+u*i,e[1]=o*r+c*i,e[2]=s*r+h*i,e[3]=l*r+d*i,e[4]=u*r-a*i,e[5]=c*r-o*i,e[6]=h*r-s*i,e[7]=d*r-l*i,e},e.rotateZ$1=function(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+r*s,e[1]=r*l-i*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},e.scale=al,e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=gl,e.scaleAndAdd=_l,e.setCacheLimits=function(e,t){Ie=e,Le=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(da===la||da===ua||da===ca)throw new Error("setRTLTextPlugin cannot be called multiple times.");pa=se.resolveURL(e),da=la,ha=t,ma(),n||ga()},e.smoothstep=A,e.spec=et,e.storeAuthState=function(e,t){t?Ae.add(e):Ae.delete(e)},e.sub=Cl,e.subtract=fl,e.symbolSize=Ec,e.tileAABB=function(e,t,n,i,r,a,o,s,l){if("globe"===l.name)return Ud(e,t,new ep(n,i,r));var u=rp({z:n,x:i,y:r},l);return new Ol([(a+u.x/u.scale)*t,t*(u.y/u.scale),o],[(a+u.x2/u.scale)*t,t*(u.y2/u.scale),s])},e.tileTransform=rp,e.transformMat3=function(e,t,n){var i=t[0],r=t[1],a=t[2];return e[0]=i*n[0]+r*n[3]+a*n[6],e[1]=i*n[1]+r*n[4]+a*n[7],e[2]=i*n[2]+r*n[5]+a*n[8],e},e.transformMat4=kl,e.transformMat4$1=Pl,e.transformQuat=Sl,e.translate=rl,e.transpose=function(e,t){if(e===t){var n=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=fa,e.uniqueId=R,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=function(e){return mr($i(e))},e.validateFog=function(e){return mr(lr(e))},e.validateLayer=function(e){return mr(nr(e))},e.validateLight=function(e){return mr(or(e))},e.validateSource=function(e){return mr(ar(e))},e.validateStyle=dr,e.validateTerrain=function(e){return mr(sr(e))},e.values=L,e.vectorTile=Hu,e.version=t,e.warnOnce=Y,e.window=x,e.wrap=D})),g(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){var n,i="[",r=d(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;i+="".concat(t(a),",")}}catch(c){r.e(c)}finally{r.f()}return"".concat(i,"]")}var o,s="{",l=d(Object.keys(e).sort());try{for(l.s();!(o=l.n()).done;){var u=o.value;s+="".concat(u,":").concat(t(e[u]),",")}}catch(c){l.e(c)}finally{l.f()}return"".concat(s,"}")}function n(n){var i,r="",a=d(e.refProperties);try{for(a.s();!(i=a.n()).done;){var o=i.value;r+="/".concat(t(n[o]))}}catch(s){a.e(s)}finally{a.f()}return r}var i=function(){function t(e){v(this,t),this.keyCache={},e&&this.replace(e)}return y(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,i){var r,a=this,o=d(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;this._layerConfigs[s.id]=s,(this._layers[s.id]=e.createStyleLayer(s)).compileFilter(),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(b){o.e(b)}finally{o.f()}var l,u=d(i);try{for(u.s();!(l=u.n()).done;){var c=l.value;delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}}catch(b){u.e(b)}finally{u.f()}this.familiesBySource={};var h,p=function(e,t){for(var i={},r=0;r<e.length;r++){var a=t&&t[e[r].id]||n(e[r]);t&&(t[e[r].id]=a);var o=i[a];o||(o=i[a]=[]),o.push(e[r])}var s=[];for(var l in i)s.push(i[l]);return s}(e.values(this._layerConfigs),this.keyCache),f=d(p);try{for(f.s();!(h=f.n()).done;){var m=h.value.map((function(e){return a._layers[e.id]})),v=m[0];if("none"!==v.visibility){var y=v.source||"",g=this.familiesBySource[y];g||(g=this.familiesBySource[y]={});var _=v.sourceLayer||"_geojsonTileLayer",x=g[_];x||(x=g[_]=[]),x.push(m)}}}catch(b){f.e(b)}finally{f.f()}}}]),t}(),r=function(){function t(){v(this,t)}return y(t,[{key:"loadTile",value:function(t,n){var i=t.uid,r=t.encoding,a=t.rawImageData,o=t.padding,s=t.buildQuadTree,l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,o):a;n(null,new e.DEMData(i,l,r,o<1,s))}},{key:"getImageData",value:function(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}]),t}(),a=function e(t,n){var i,r=t&&t.type;if("FeatureCollection"===r)for(i=0;i<t.features.length;i++)e(t.features[i],n);else if("GeometryCollection"===r)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],n);else if("Feature"===r)e(t.geometry,n);else if("Polygon"===r)l(t.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<t.coordinates.length;i++)l(t.coordinates[i],n);return t};function l(e,t){if(0!==e.length){u(e[0],t);for(var n=1;n<e.length;n++)u(e[n],!t)}}function u(e,t){for(var n=0,i=0,r=0,a=e.length,o=a-1;r<a;o=r++){var s=(e[r][0]-e[o][0])*(e[o][1]+e[r][1]),l=n+s;i+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+i>=0!=!!t&&e.reverse()}var c=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(){function t(n){v(this,t),this._feature=n,this.extent=e.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return y(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,n=[],i=d(this._feature.geometry);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.push([new e.pointGeometry(r[0],r[1])])}}catch(f){i.e(f)}finally{i.f()}return n}var a,o=[],s=d(this._feature.geometry);try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=[],h=d(u);try{for(h.s();!(l=h.n()).done;){var p=l.value;c.push(new e.pointGeometry(p[0],p[1]))}}catch(f){h.e(f)}finally{h.f()}o.push(c)}}catch(f){s.e(f)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(e,t,n){return c.call(this,e,t,n)}}]),t}(),g=function(){function t(n){v(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=n.length,this._features=n}return y(t,[{key:"feature",value:function(e){return new p(this._features[e])}}]),t}(),_=e.vectorTile.VectorTileFeature,x=b;function b(e,t){this.options=t||{},this.features=e,this.length=e.length}function w(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}b.prototype.feature=function(e){return new w(this.features[e],this.options.extent)},w.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var i=t[n],r=[],a=0;a<i.length;a++)r.push(new e.pointGeometry(i[a][0],i[a][1]));this.geometry.push(r)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,i=1/0,r=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[t,i,n,r]},w.prototype.toGeoJSON=_.prototype.toGeoJSON;var k=T,S=x;function T(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,C,e.layers[n])}(t,n),n.finish()}function C(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)i.feature=e.feature(n),t.writeMessage(2,E,i);var r=i.keys;for(n=0;n<r.length;n++)t.writeStringField(3,r[n]);var a=i.values;for(n=0;n<a.length;n++)t.writeMessage(4,I,a[n])}function E(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,M,e),t.writeVarintField(3,n.type),t.writeMessage(4,D,n)}function M(e,t){var n=e.feature,i=e.keys,r=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var l=n.properties[s],u=a[s];if(null!==l){void 0===u&&(i.push(s),a[s]=u=i.length-1),t.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,d=o[h];void 0===d&&(r.push(l),o[h]=d=r.length-1),t.writeVarint(d)}}}function P(e,t){return(t<<3)+(7&e)}function A(e){return e<<1^e>>31}function D(e,t){for(var n=e.loadGeometry(),i=e.type,r=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],u=1;1===i&&(u=l.length),t.writeVarint(P(1,u));for(var c=3===i?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==i&&t.writeVarint(P(2,c-1));var d=l[h].x-r,p=l[h].y-a;t.writeVarint(A(d)),t.writeVarint(A(p)),r+=d,a+=p}3===i&&t.writeVarint(P(7,1))}}function I(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function L(e,t,n,i,r,a){if(!(r-i<=n)){var o=i+r>>1;O(e,t,o,i,r,a%2),L(e,t,n,i,o-1,a+1),L(e,t,n,o+1,r,a+1)}}function O(e,t,n,i,r,a){for(;r>i;){if(r-i>600){var o=r-i+1,s=n-i+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);O(e,t,n,Math.max(i,Math.floor(n-s*u/o+c)),Math.min(r,Math.floor(n+(o-s)*u/o+c)),a)}var h=t[2*n+a],d=i,p=r;for(z(e,t,i,n),t[2*r+a]>h&&z(e,t,i,r);d<p;){for(z(e,t,d,p),d++,p--;t[2*d+a]<h;)d++;for(;t[2*p+a]>h;)p--}t[2*i+a]===h?z(e,t,i,p):z(e,t,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}function z(e,t,n,i){R(e,n,i),R(t,2*n,2*i),R(t,2*n+1,2*i+1)}function R(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function B(e,t,n,i){var r=e-n,a=t-i;return r*r+a*a}k.fromVectorTileJs=T,k.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var i in e)n[i]=new x(e[i].features,t),n[i].name=i,n[i].version=t.version,n[i].extent=t.extent;return T({layers:n})},k.GeoJSONWrapper=S;var F,N=function(e){return e[0]},j=function(e){return e[1]},U=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;v(this,e),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),l=this.coords=new a(2*t.length),u=0;u<t.length;u++)s[u]=u,l[2*u]=n(t[u]),l[2*u+1]=i(t[u]);L(s,l,r,0,s.length-1,0)}return y(e,[{key:"range",value:function(e,t,n,i){return function(e,t,n,i,r,a,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var h=u.pop(),d=u.pop(),p=u.pop();if(d-p<=o)for(var f=p;f<=d;f++)s=t[2*f],l=t[2*f+1],s>=n&&s<=r&&l>=i&&l<=a&&c.push(e[f]);else{var m=Math.floor((p+d)/2);s=t[2*m],l=t[2*m+1],s>=n&&s<=r&&l>=i&&l<=a&&c.push(e[m]);var v=(h+1)%2;(0===h?n<=s:i<=l)&&(u.push(p),u.push(m-1),u.push(v)),(0===h?r>=s:a>=l)&&(u.push(m+1),u.push(d),u.push(v))}}return c}(this.ids,this.coords,e,t,n,i,this.nodeSize)}},{key:"within",value:function(e,t,n){return function(e,t,n,i,r,a){for(var o=[0,e.length-1,0],s=[],l=r*r;o.length;){var u=o.pop(),c=o.pop(),h=o.pop();if(c-h<=a)for(var d=h;d<=c;d++)B(t[2*d],t[2*d+1],n,i)<=l&&s.push(e[d]);else{var p=Math.floor((h+c)/2),f=t[2*p],m=t[2*p+1];B(f,m,n,i)<=l&&s.push(e[p]);var v=(u+1)%2;(0===u?n-r<=f:i-r<=m)&&(o.push(h),o.push(p-1),o.push(v)),(0===u?n+r>=f:i+r>=m)&&(o.push(p+1),o.push(c),o.push(v))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}]),e}(),V={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},Z=Math.fround||(F=new Float32Array(1),function(e){return F[0]=+e,F[0]}),W=function(){function e(t){v(this,e),this.options=Q(Object.create(V),t),this.trees=new Array(this.options.maxZoom+1)}return y(e,[{key:"load",value:function(e){var t=this.options,n=t.log,i=t.minZoom,r=t.maxZoom,a=t.nodeSize;n&&console.time("total time");var o="prepare ".concat(e.length," points");n&&console.time(o),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(Y(e[l],l));this.trees[r+1]=new U(s,J,ee,a,Float32Array),n&&console.timeEnd(o);for(var u=r;u>=i;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new U(s,J,ee,a,Float32Array),n&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),r=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,r=180;else if(n>r){var o=this.getClusters([n,i,180,a],t),s=this.getClusters([-180,i,r,a],t);return o.concat(s)}var l,u=this.trees[this._limitZoom(t)],c=u.range(q(n),K(a),q(r),K(i)),h=[],p=d(c);try{for(p.s();!(l=p.n()).done;){var f=l.value,m=u.points[f];h.push(m.numPoints?H(m):this.points[m.index])}}catch(v){p.e(v)}finally{p.f()}return h}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var a=r.points[t];if(!a)throw new Error(i);var o,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=r.within(a.x,a.y,s),u=[],c=d(l);try{for(c.s();!(o=c.n()).done;){var h=o.value,p=r.points[h];p.parentId===e&&u.push(p.numPoints?H(p):this.points[p.index])}}catch(f){c.e(f)}finally{c.f()}if(0===u.length)throw new Error(i);return u}},{key:"getLeaves",value:function(e,t,n){var i=[];return this._appendLeaves(i,e,t=t||10,n=n||0,0),i}},{key:"getTile",value:function(e,t,n){var i=this.trees[this._limitZoom(e)],r=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,l=(n-s)/r,u=(n+1+s)/r,c={features:[]};return this._addTileFeatures(i.range((t-s)/r,l,(t+1+s)/r,u),i.points,t,n,r,c),0===t&&this._addTileFeatures(i.range(1-s/r,l,1,u),i.points,r,n,r,c),t===r-1&&this._addTileFeatures(i.range(0,l,s/r,u),i.points,-1,n,r,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,i,r){var a,o=this.getChildren(t),s=d(o);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.properties;if(u&&u.cluster?r+u.point_count<=i?r+=u.point_count:r=this._appendLeaves(e,u.cluster_id,n,i,r):r<i?r++:e.push(l),e.length===n)break}}catch(c){s.e(c)}finally{s.f()}return r}},{key:"_addTileFeatures",value:function(e,t,n,i,r,a){var o,s=d(e);try{for(s.s();!(o=s.n()).done;){var l=t[o.value],u=l.numPoints,c=void 0,h=void 0,p=void 0;if(u)c=X(l),h=l.x,p=l.y;else{var f=this.points[l.index];c=f.properties,h=q(f.geometry.coordinates[0]),p=K(f.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(h*r-n)),Math.round(this.options.extent*(p*r-i))]],tags:c},v=void 0;u?v=l.id:this.options.generateId?v=l.index:this.points[l.index].id&&(v=this.points[l.index].id),void 0!==v&&(m.id=v),a.features.push(m)}}catch(y){s.e(y)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],i=this.options,r=i.radius,a=i.extent,o=i.reduce,s=i.minPoints,l=r/(a*Math.pow(2,t)),u=0;u<e.length;u++){var c=e[u];if(!(c.zoom<=t)){c.zoom=t;var h,p=this.trees[t+1],f=p.within(c.x,c.y,l),m=c.numPoints||1,v=m,y=d(f);try{for(y.s();!(h=y.n()).done;){var g=h.value,_=p.points[g];_.zoom>t&&(v+=_.numPoints||1)}}catch(L){y.e(L)}finally{y.f()}if(v>m&&v>=s){var x,b=c.x*m,w=c.y*m,k=o&&m>1?this._map(c,!0):null,S=(u<<5)+(t+1)+this.points.length,T=d(f);try{for(T.s();!(x=T.n()).done;){var C=x.value,E=p.points[C];if(!(E.zoom<=t)){E.zoom=t;var M=E.numPoints||1;b+=E.x*M,w+=E.y*M,E.parentId=S,o&&(k||(k=this._map(c,!0)),o(k,this._map(E)))}}}catch(L){T.e(L)}finally{T.f()}c.parentId=S,n.push(G(b/v,w/v,S,v,k))}else if(n.push(c),v>1){var P,A=d(f);try{for(A.s();!(P=A.n()).done;){var D=P.value,I=p.points[D];I.zoom<=t||(I.zoom=t,n.push(I))}}catch(L){A.e(L)}finally{A.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?Q({},e.properties):e.properties;var n=this.points[e.index].properties,i=this.options.map(n);return t&&i===n?Q({},i):i}}]),e}();function G(e,t,n,i,r){return{x:Z(e),y:Z(t),zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function Y(e,t){var n=h(e.geometry.coordinates,2),i=n[0],r=n[1];return{x:Z(q(i)),y:Z(K(r)),zoom:1/0,index:t,parentId:-1}}function H(e){return{type:"Feature",id:e.id,properties:X(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),$(e.y)]}};var t}function X(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return Q(Q({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function q(e){return e/360+.5}function K(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function $(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Q(e,t){for(var n in t)e[n]=t[n];return e}function J(e){return e.x}function ee(e){return e.y}function te(e,t,n,i){for(var r,a=i,o=n-t>>1,s=n-t,l=e[t],u=e[t+1],c=e[n],h=e[n+1],d=t+3;d<n;d+=3){var p=ne(e[d],e[d+1],l,u,c,h);if(p>a)r=d,a=p;else if(p===a){var f=Math.abs(d-o);f<s&&(r=d,s=f)}}a>i&&(r-t>3&&te(e,t,r,i),e[r+2]=a,n-r>3&&te(e,r,n,i))}function ne(e,t,n,i,r,a){var o=r-n,s=a-i;if(0!==o||0!==s){var l=((e-n)*o+(t-i)*s)/(o*o+s*s);l>1?(n=r,i=a):l>0&&(n+=o*l,i+=s*l)}return(o=e-n)*o+(s=t-i)*s}function ie(e,t,n,i){var r={id:void 0===e?null:e,type:t,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)re(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<t.length;i++)re(e,t[i]);else if("MultiPolygon"===n)for(i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++)re(e,t[i][r])}(r),r}function re(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ae(e,t,n,i){if(t.geometry){var r=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===a)oe(r,s);else if("MultiPoint"===a)for(var u=0;u<r.length;u++)oe(r[u],s);else if("LineString"===a)se(r,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(u=0;u<r.length;u++)se(r[u],s=[],o,!1),e.push(ie(l,"LineString",s,t.properties));return}le(r,s,o,!1)}else if("Polygon"===a)le(r,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<t.geometry.geometries.length;u++)ae(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];le(r[u],c,o,!0),s.push(c)}}e.push(ie(l,a,s,t.properties))}}function oe(e,t){t.push(ue(e[0])),t.push(ce(e[1])),t.push(0)}function se(e,t,n,i){for(var r,a,o=0,s=0;s<e.length;s++){var l=ue(e[s][0]),u=ce(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=i?(r*u-l*a)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-a,2))),r=l,a=u}var c=t.length-3;t[2]=1,te(t,0,c,n),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function le(e,t,n,i){for(var r=0;r<e.length;r++){var a=[];se(e[r],a,n,i),t.push(a)}}function ue(e){return e/360+.5}function ce(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function he(e,t,n,i,r,a,o,s){if(i/=t,a>=(n/=t)&&o<i)return e;if(o<n||a>=i)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],h=c.geometry,d=c.type,p=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(p>=n&&f<i)l.push(c);else if(!(f<n||p>=i)){var m=[];if("Point"===d||"MultiPoint"===d)de(h,m,n,i,r);else if("LineString"===d)pe(h,m,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===d)me(h,m,n,i,r,!1);else if("Polygon"===d)me(h,m,n,i,r,!0);else if("MultiPolygon"===d)for(var v=0;v<h.length;v++){var y=[];me(h[v],y,n,i,r,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(v=0;v<m.length;v++)l.push(ie(c.id,d,m[v],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(ie(c.id,d,m,c.tags))}}}return l.length?l:null}function de(e,t,n,i,r){for(var a=0;a<e.length;a+=3){var o=e[a+r];o>=n&&o<=i&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function pe(e,t,n,i,r,a,o){for(var s,l,u=fe(e),c=0===r?ye:ge,h=e.start,d=0;d<e.length-3;d+=3){var p=e[d],f=e[d+1],m=e[d+2],v=e[d+3],y=e[d+4],g=0===r?p:f,_=0===r?v:y,x=!1;o&&(s=Math.sqrt(Math.pow(p-v,2)+Math.pow(f-y,2))),g<n?_>n&&(l=c(u,p,f,v,y,n),o&&(u.start=h+s*l)):g>i?_<i&&(l=c(u,p,f,v,y,i),o&&(u.start=h+s*l)):ve(u,p,f,m),_<n&&g>=n&&(l=c(u,p,f,v,y,n),x=!0),_>i&&g<=i&&(l=c(u,p,f,v,y,i),x=!0),!a&&x&&(o&&(u.end=h+s*l),t.push(u),u=fe(e)),o&&(h+=s)}var b=e.length-3;p=e[b],f=e[b+1],m=e[b+2],(g=0===r?p:f)>=n&&g<=i&&ve(u,p,f,m),b=u.length-3,a&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&ve(u,u[0],u[1],u[2]),u.length&&t.push(u)}function fe(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function me(e,t,n,i,r,a){for(var o=0;o<e.length;o++)pe(e[o],t,n,i,r,a,!1)}function ve(e,t,n,i){e.push(t),e.push(n),e.push(i)}function ye(e,t,n,i,r,a){var o=(a-t)/(i-t);return e.push(a),e.push(n+(r-n)*o),e.push(1),o}function ge(e,t,n,i,r,a){var o=(a-n)/(r-n);return e.push(t+(i-t)*o),e.push(a),e.push(1),o}function _e(e,t){for(var n=[],i=0;i<e.length;i++){var r,a=e[i],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)r=xe(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){r=[];for(var s=0;s<a.geometry.length;s++)r.push(xe(a.geometry[s],t))}else if("MultiPolygon"===o)for(r=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(xe(a.geometry[s][u],t));r.push(l)}n.push(ie(a.id,o,r,a.tags))}return n}function xe(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var i=0;i<e.length;i+=3)n.push(e[i]+t,e[i+1],e[i+2]);return n}function be(e,t){if(e.transformed)return e;var n,i,r,a=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<u.length;i+=2)l.geometry.push(we(u[i],u[i+1],t,a,o,s));else for(i=0;i<u.length;i++){var h=[];for(r=0;r<u[i].length;r+=2)h.push(we(u[i][r],u[i][r+1],t,a,o,s));l.geometry.push(h)}}return e.transformed=!0,e}function we(e,t,n,i,r,a){return[Math.round(n*(e*i-r)),Math.round(n*(t*i-a))]}function ke(e,t,n,i,r){for(var a=t===r.maxZoom?0:r.tolerance/((1<<t)*r.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Se(o,e[s],a,r);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,h=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function Se(e,t,n,i){var r=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<r.length;s+=3)o.push(r[s]),o.push(r[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)Te(o,r,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<r.length;s++)Te(o,r[s],e,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)Te(o,u[s],e,n,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&i.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var d={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(d.id=t.id),e.features.push(d)}}function Te(e,t,n,i,r,a){var o=i*i;if(i>0&&t.size<(r?o:i))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===i||t[l+2]>o)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;r&&function(e,t){for(var n=0,i=0,r=e.length,a=r-2;i<r;a=i,i+=2)n+=(e[i]-e[a])*(e[i+1]+e[a+1]);if(n>0===t)for(i=0,r=e.length;i<r/2;i+=2){var o=e[i],s=e[i+1];e[i]=e[r-2-i],e[i+1]=e[r-1-i],e[r-2-i]=o,e[r-1-i]=s}}(s,a),e.push(s)}}function Ce(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var i=0;i<e.features.length;i++)ae(n,e.features[i],t,i);else ae(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(e,t){var n=t.buffer/t.extent,i=e,r=he(e,1,-1-n,n,0,-1,2,t),a=he(e,1,1-n,2+n,0,-1,2,t);return(r||a)&&(i=he(e,1,-n,1+n,0,-1,2,t)||[],r&&(i=_e(r,1).concat(i)),a&&(i=i.concat(_e(a,-1)))),i}(i,t)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ee(e,t,n){return 32*((1<<e)*n+t)+e}function Me(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return t(null,null);var r=new g(i.features),a=k(r);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:r,rawData:a.buffer})}Ce.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ce.prototype.splitTile=function(e,t,n,i,r,a,o){for(var s=[e,t,n,i],l=this.options,u=l.debug;s.length;){i=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,h=Ee(t,n,i),d=this.tiles[h];if(!d&&(u>1&&console.time("creation"),d=this.tiles[h]=ke(e,t,n,i,l),this.tileCoords.push({z:t,x:n,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=e,r){if(t===l.maxZoom||t===r)continue;var f=1<<r-t;if(n!==Math.floor(a/f)||i!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){u>1&&console.time("clipping");var m,v,y,g,_,x,b=.5*l.buffer/l.extent,w=.5-b,k=.5+b,S=1+b;m=v=y=g=null,_=he(e,c,n-b,n+k,0,d.minX,d.maxX,l),x=he(e,c,n+w,n+S,0,d.minX,d.maxX,l),e=null,_&&(m=he(_,c,i-b,i+k,1,d.minY,d.maxY,l),v=he(_,c,i+w,i+S,1,d.minY,d.maxY,l),_=null),x&&(y=he(x,c,i-b,i+k,1,d.minY,d.maxY,l),g=he(x,c,i+w,i+S,1,d.minY,d.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*i),s.push(v||[],t+1,2*n,2*i+1),s.push(y||[],t+1,2*n+1,2*i),s.push(g||[],t+1,2*n+1,2*i+1)}}},Ce.prototype.getTile=function(e,t,n){var i=this.options,r=i.extent,a=i.debug;if(e<0||e>24)return null;var o=1<<e,s=Ee(e,t=(t%o+o)%o,n);if(this.tiles[s])return be(this.tiles[s],r);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,u=e,c=t,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Ee(u,c,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,h),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?be(this.tiles[s],r):null):null};var Pe=function(t){f(i,t);var n=m(i);function i(e,t,r,a,o){var s;return v(this,i),s=n.call(this,e,t,r,a,Me),o&&(s.loadGeoJSON=o),s}return y(i,[{key:"loadData",value:function(t,n){var i=this,r=t&&t.request,o=r&&r.collectResourceTiming;this.loadGeoJSON(t,(function(s,l){if(s||!l)return n(s);if("object"!=typeof l)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));a(l,!0);try{if(t.filter){var u=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===u.result)throw new Error(u.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var c=l.features.filter((function(e){return u.value.evaluate({zoom:0},e)}));l={type:"FeatureCollection",features:c}}i._geoJSONIndex=t.cluster?new W(function(t){var n=t.superclusterOptions,i=t.clusterProperties;if(!i||!n)return n;for(var r={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i),u=0,c=l;u<c.length;u++){var p=c[u],f=h(i[p],2),m=f[0],v=f[1],y=e.createExpression(v),g=e.createExpression("string"==typeof m?[m,["accumulated"],["get",p]]:m);r[p]=y.value,a[p]=g.value}return n.map=function(e){s.properties=e;var t,n={},i=d(l);try{for(i.s();!(t=i.n()).done;){var a=t.value;n[a]=r[a].evaluate(o,s)}}catch(u){i.e(u)}finally{i.f()}return n},n.reduce=function(e,t){s.properties=t;var n,i=d(l);try{for(i.s();!(n=i.n()).done;){var r=n.value;o.accumulated=e[r],e[r]=a[r].evaluate(o,s)}}catch(u){i.e(u)}finally{i.f()}},n}(t)).load(l.features):function(e,t){return new Ce(e,t)}(l,t.geojsonVtOptions)}catch(s){return n(s)}i.loaded={};var p={};if(o){var f=e.getPerformanceMeasurement(r);f&&(p.resourceTiming={},p.resourceTiming[t.source]=JSON.parse(JSON.stringify(f)))}n(null,p)}))}},{key:"reloadTile",value:function(e,t){var n=this.loaded;return n&&n[e.uid]?o(s(i.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),i}(e.VectorTileWorkerSource),Ae=function(){function t(n){var i=this;v(this,t),this.self=n,this.actor=new e.Actor(n,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Pe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(i.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));i.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return y(t,[{key:"clearCaches",value:function(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}},{key:"checkIfReady",value:function(e,t,n){n()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"spriteLoaded",value:function(t,n){for(var i in this.isSpriteLoaded[t]=n,this.workerSources[t]){var r=this.workerSources[t][i];for(var a in r)r[a]instanceof e.VectorTileWorkerSource&&(r[a].isSpriteLoaded=n,r[a].fire(new e.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(e,t,n){for(var i in this.availableImages[e]=t,this.workerSources[e]){var r=this.workerSources[e][i];for(var a in r)r[a].availableImages=t}n()}},{key:"enableTerrain",value:function(e,t,n){this.terrain=t,n()}},{key:"setProjection",value:function(t,n){this.projections[t]=e.getProjection(n)}},{key:"setLayers",value:function(e,t,n){this.getLayerIndex(e).replace(t),n()}},{key:"updateLayers",value:function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}},{key:"loadTile",value:function(t,n,i){var r=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(r,i)}},{key:"loadDEMTile",value:function(t,n,i){var r=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(r,i)}},{key:"reloadTile",value:function(t,n,i){var r=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(r,i)}},{key:"abortTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}},{key:"removeTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}},{key:"removeSource",value:function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var i=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==i.removeSource?i.removeSource(t,n):n()}}},{key:"loadWorkerSource",value:function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}},{key:"syncRTLPluginState",value:function(t,n,i){try{e.plugin.setState(n);var r=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=r){this.self.importScripts(r);var a=e.plugin.isParsed();i(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(r)),a)}}catch(e){i(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t}},{key:"getWorkerSource",value:function(e,t,n){var i=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:function(t,n,r,a,o,s){i.actor.send(t,n,r,e,o,s)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])),this.workerSources[e][t][n]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new r),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,n){e.enforceCacheSizeLimit(n)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,n){n(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ae(self)),Ae})),g(["./shared"],(function(e){var t=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{t=new Worker(i),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(i),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===u[t=e&&e.failIfMajorPerformanceCaveat]&&(u[t]=function(e){var t,i=function(e){var t=document.createElement("canvas"),i=Object.create(n.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=e,t.getContext("webgl",i)||t.getContext("experimental-webgl",i)}(e);if(!i)return!1;try{t=i.createShader(i.VERTEX_SHADER)}catch(e){return!1}return!(!t||i.isContextLost())&&(i.shaderSource(t,"void main() {}"),i.compileShader(t),!0===i.getShaderParameter(t,i.COMPILE_STATUS))}(t)),u[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var u={};function p(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!p(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!p(e[i],t[i]))return!1;return!0}return e===t}function g(t,n,i){var r=e.window.document.createElement(t);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r}function _(t,n,i){for(var r=e.window.document.createElementNS("http://www.w3.org/2000/svg",t),a=0,o=Object.keys(n);a<o.length;a++){var s=o[a];r.setAttributeNS(null,s,n[s])}return i&&i.appendChild(r),r}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var x,b=e.window.document&&e.window.document.documentElement.style,w=b&&void 0!==b.userSelect?"userSelect":"WebkitUserSelect";function k(){b&&w&&(x=b[w],b[w]="none")}function S(){b&&w&&(b[w]=x)}function T(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",T,!0)}function C(){e.window.addEventListener("click",T,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",T,!0)}),0)}function E(e,t){var n=e.getBoundingClientRect();return A(e,n,t)}function M(e,t){for(var n=e.getBoundingClientRect(),i=[],r=0;r<t.length;r++)i.push(A(e,n,t[r]));return i}function P(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function A(t,n,i){var r=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((i.clientX-n.left)*r,(i.clientY-n.top)*r)}function D(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n*a-r*i;return o?(e[0]=a*(o=1/o),e[1]=-i*o,e[2]=-r*o,e[3]=n*o,e):null}function I(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var L=function(t){f(i,t);var n=m(i);function i(){var t;return v(this,i),(t=n.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return y(i,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=d(this.requestors);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.ids,a=i.callback;this._notify(r,a)}}catch(o){n.e(o)}finally{n.f()}this.requestors=[]}}},{key:"hasImage",value:function(e){return!!this.getImage(e)}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,n){var i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),i=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),i=!1),i}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,i=0,r=d(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a[0]<i||a[1]<a[0]||t<a[1])return!1;i=a[1]}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var i,r=d(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.images[a]||(n=!1)}}catch(o){r.e(o)}finally{r.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,n){var i,r={},a=d(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){a.e(l)}finally{a.f()}n(null,r)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var n=this.patterns[t],i=this.getImage(t);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},a=new e.ImagePosition(r,i);this.patterns[t]={bin:r,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var i=e.potpack(t),r=i.w,a=i.h,o=this.atlasImage;for(var s in o.resize({width:r||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,d=h.width,p=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c},{width:d,height:p}),e.RGBAImage.copy(h,o,{x:0,y:p-1},{x:u,y:c-1},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c+p},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:d-1,y:0},{x:u-1,y:c},{width:1,height:p}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u+d,y:c},{width:1,height:p})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var r=this.images[i];I(r)&&this.updateImage(i,r)}}}catch(a){n.e(a)}finally{n.f()}}}]),i}(e.Evented),O=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){v(this,t),this.specification=e.spec.light.position}return y(t,[{key:"possiblyEvaluate",value:function(t,n){return function(t){var n=h(t,3),i=n[0],r=n[1],a=n[2],o=e.degToRad(r+90),s=e.degToRad(a);return{x:i*Math.cos(o)*Math.sin(s),y:i*Math.sin(o)*Math.sin(s),z:i*Math.cos(s),azimuthal:r,polar:a}}(t.expression.evaluate(n))}},{key:"interpolate",value:function(t,n,i){return{x:e.number(t.x,n.x,i),y:e.number(t.y,n.y,i),z:e.number(t.z,n.z,i),azimuthal:e.number(t.azimuthal,n.azimuthal,i),polar:e.number(t.polar,n.polar,i)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),z="-transition",R=function(t){f(i,t);var n=m(i);function i(t){var r;return v(this,i),(r=n.call(this))._transitionable=new e.Transitionable(O),r.setLight(t),r._transitioning=r._transitionable.untransitioned(),r}return y(i,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,n))for(var i in t){var r=t[i];e.endsWith(i,z)?this._transitionable.setTransition(i.slice(0,-z.length),r):this._transitionable.setValue(i,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,i){return(!i||!1!==i.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),i}(e.Evented),B=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),F="-transition",N=function(t){f(i,t);var n=m(i);function i(t,r){var a;return v(this,i),(a=n.call(this))._transitionable=new e.Transitionable(B),a.set(t),a._transitioning=a._transitionable.untransitioned(),a.drapeRenderMode=r,a}return y(i,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var n in t){var i=t[n];e.endsWith(n,F)?this._transitionable.setTransition(n.slice(0,-F.length),i):this._transitionable.setValue(n,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),i}(e.Evented);function j(t,n,i,r){var a=e.smoothstep(45,65,i),o=U(t,r),s=h(o,2),l=s[0],u=s[1],c=e.length(n),d=1-Math.min(1,Math.exp((c-l)/(u-l)*-6));return d*=d*d,(d=Math.min(1,1.00747*d))*a*t.alpha}function U(e,t){var n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}var V=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"])}),Z="-transition",W=function(t){f(i,t);var n=m(i);function i(t,r){var a;return v(this,i),(a=n.call(this))._transitionable=new e.Transitionable(V),a.set(t),a._transitioning=a._transitionable.untransitioned(),a._transform=r,a}return y(i,[{key:"state",get:function(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,n))for(var i in t){var r=t[i];e.endsWith(i,Z)?this._transitionable.setTransition(i.slice(0,-Z.length),r):this._transitionable.setValue(i,r)}}},{key:"getOpacity",value:function(t){if(!this._transform.projection.supportsFog)return 0;var n=this.properties&&this.properties.get("color")||1;return e.smoothstep(45,65,t)*n.a}},{key:"getOpacityAtLatLng",value:function(t,n){return this._transform.projection.supportsFog?function(t,n,i){var r=e.MercatorCoordinate.fromLngLat(n),a=i.elevation?i.elevation.getAtPointOrZero(r):0,o=[r.x,r.y,a];return e.transformMat4(o,o,i.mercatorFogMatrix),j(t,o,i.pitch,i._fov)}(this.state,t,n):0}},{key:"getFovAdjustedRange",value:function(e){return this._transform.projection.supportsFog?U(this.state,e):[0,1]}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,i){return(!i||!1!==i.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),i}(e.Evented),G=function(){function t(n,i){var r=this;v(this,t),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var s=new t.Actor(a[o],i,this.id);s.name="Worker ".concat(o),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){r.ready=!0}))}return y(t,[{key:"broadcast",value:function(t,n,i){e.asyncAll(this.actors,(function(e,i){e.send(t,n,i)}),i=i||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function Y(t,n,i){return n*(e.EXTENT/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}G.Actor=e.Actor;var H=function(){function t(e,n,i,r){v(this,t),this.screenBounds=e,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((function(e){return r.pointCoordinate3D(e)})),this.cameraGeometry=this.bufferedCameraGeometry(0)}return y(t,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],r=e.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?r[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(r[3]=this.cameraPoint)),e.bufferConvexPolygon(r,t)}},{key:"containsTile",value:function(t,n,i){var r,a=t.queryPadding+1,o=t.tileID.wrap,s=i?this._bufferedCameraMercator(a,n).map((function(n){return e.getTilePoint(t.tileTransform,n,o)})):this._bufferedScreenMercator(a,n).map((function(n){return e.getTilePoint(t.tileTransform,n,o)})),l=this.screenGeometryMercator.map((function(n){return e.getTileVec3(t.tileTransform,n,o)})),u=l.map((function(t){return new e.pointGeometry(t[0],t[1])})),c=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,c,o),d=l.map((function(t){var n=e.sub(t,t,h);return e.normalize(n,n),new e.Ray(h,n)})),p=Y(t,1,n.zoom);if(e.polygonIntersectsBox(s,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:d,bufferedTilespaceGeometry:s,bufferedTilespaceBounds:(r=e.getBounds(s),r.min.x=e.clamp(r.min.x,0,e.EXTENT),r.min.y=e.clamp(r.min.y,0,e.EXTENT),r.max.x=e.clamp(r.max.x,0,e.EXTENT),r.max.y=e.clamp(r.max.y,0,e.EXTENT),r),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:p}}},{key:"_bufferedScreenMercator",value:function(e,t){var n=X(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];var i=this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._screenRaycastCache[n]=i,i}},{key:"_bufferedCameraMercator",value:function(e,t){var n=X(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];var i=this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._cameraRaycastCache[n]=i,i}}],[{key:"createFromScreenPoints",value:function(n,i){var r,a;if(n instanceof e.pointGeometry||"number"==typeof n[0]){var o=e.pointGeometry.convert(n);r=[e.pointGeometry.convert(n)],a=i.isPointAboveHorizon(o)}else{var s=e.pointGeometry.convert(n[0]),l=e.pointGeometry.convert(n[1]);r=[s,l],a=e.polygonizeBounds(s,l).every((function(e){return i.isPointAboveHorizon(e)}))}return new t(r,i.getCameraPoint(),a,i)}}]),t}();function X(e){return 100*e|0}function q(t,n,i){var r=function(r,a){if(r)return i(r);if(a){var o=e.pick(e.extend(a,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(o.vectorLayers=a.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=n.canonicalizeTileset(o,t.url),i(null,o)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),r):e.exported.frame((function(){return r(null,t)}))}var K,$=function(){function t(n,i,r){v(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=i||0,this.maxzoom=r||24}return y(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var n=Math.pow(2,t.z),i=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=i&&t.x<a&&t.y>=r&&t.y<o}}]),t}(),Q=function(){function e(t,n,i){v(this,e),this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||n.destroy()}return y(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),J={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ee=function(){function e(t,n,i,r){v(this,e),this.length=n.length,this.attributes=i,this.itemSize=n.bytesPerElement,this.dynamicDraw=r,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n.destroy()}return y(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var i=t.attributes[this.attributes[n].name];void 0!==i&&e.enableVertexAttribArray(i)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],a=t.attributes[r.name];void 0!==a&&e.vertexAttribPointer(a,r.components,e[J[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),te=function(){function e(t){v(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return y(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),ne=function(t){f(i,t);var n=m(i);function i(){return v(this,i),n.apply(this,arguments)}return y(i,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),i}(te),ie=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}(te),re=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}(te),ae=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(te),oe=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}(te),se=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}(te),le=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}(te),ue=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}(te),ce=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}(te),he=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(te),de=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}(te),pe=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}(te),fe=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}(te),me=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(te),ve=function(t){f(i,t);var n=m(i);function i(){return v(this,i),n.apply(this,arguments)}return y(i,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),i}(te),ye=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}(te),ge=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}(te),_e=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}(te),xe=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}(te),be=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}(te),we=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}(te),ke=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(te),Se=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(te),Te=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(te),Ce=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}(te),Ee=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}(te),Me=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}(te),Pe=function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this,e)).vao=e.extVertexArrayObject,i}return y(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}(te),Ae=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}(te),De=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(te),Ie=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(te),Le=function(e){f(n,e);var t=m(n);function n(e,i){var r;return v(this,n),(r=t.call(this,e)).context=e,r.parent=i,r}return y(n,[{key:"getDefault",value:function(){return null}}]),n}(te),Oe=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(Le),ze=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(Le),Re=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(ze),Be=function(){function e(t,n,i,r){v(this,e),this.context=t,this.width=n,this.height=i;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Oe(t,a),r&&(this.depthAttachment=new ze(t,a))}return y(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Fe=function(){function t(e){v(this,t),this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ne(this),this.clearDepth=new ie(this),this.clearStencil=new re(this),this.colorMask=new ae(this),this.depthMask=new oe(this),this.stencilMask=new se(this),this.stencilFunc=new le(this),this.stencilOp=new ue(this),this.stencilTest=new ce(this),this.depthRange=new he(this),this.depthTest=new de(this),this.depthFunc=new pe(this),this.blend=new fe(this),this.blendFunc=new me(this),this.blendColor=new ve(this),this.blendEquation=new ye(this),this.cullFace=new ge(this),this.cullFaceSide=new _e(this),this.frontFace=new xe(this),this.program=new be(this),this.activeTexture=new we(this),this.viewport=new ke(this),this.bindFramebuffer=new Se(this),this.bindRenderbuffer=new Te(this),this.bindTexture=new Ce(this),this.bindVertexBuffer=new Ee(this),this.bindElementBuffer=new Me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Pe(this),this.pixelStoreUnpack=new Ae(this),this.pixelStoreUnpackPremultiplyAlpha=new De(this),this.pixelStoreUnpackFlipY=new Ie(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return y(t,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new Q(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new ee(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),r}},{key:"createFramebuffer",value:function(e,t,n){return new Be(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,i=e.stencil,r=this.gl,a=0;t&&(a|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==i&&(a|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(t){p(t.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),t}(),Ne=function(t){f(i,t);var n=m(i);function i(t,a,o,s){var l;return v(this,i),(l=n.call(this)).id=t,l.dispatcher=o,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=e.extend({type:"raster"},a),e.extend(r(l),e.pick(a,["url","scheme","tileSize"])),l}return y(i,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=q(this._options,this.map._requestManager,(function(n,i){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):i&&(e.extend(t,i),i.bounds&&(t.tileBounds=new $(i.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(i.tiles),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var i=this,r=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(r,a,o,s){return delete t.request,t.aborted?(t.state="unloaded",n(null)):r?(t.state="errored",n(r)):a?(i.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s}),t.setTexture(a,i.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(i.dispatcher),void n(null)):n(null)}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}],[{key:"loadTileData",value:function(e,t,n){e.setTexture(t,n)}},{key:"unloadTileData",value:function(e,t){e.texture&&t.saveTileTexture(e.texture)}}]),i}(e.Evented);function je(t,n,i,r,a,o,s,l){var u=[t,i,a,n,r,o,1,1,1],c=[s,l,1],d=e.adjoint([],u),p=e.transformMat3(c,c,e.transpose(d,d)),f=h(p,3),m=f[0],v=f[1],y=f[2];return e.multiply(u,[m,0,0,0,v,0,0,0,y],u)}var Ue=function(t){f(i,t);var n=m(i);function i(e,t,r,a){var o;return v(this,i),(o=n.call(this)).id=e,o.dispatcher=r,o.coordinates=t.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=t,o}return y(i,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(i,r){if(n._loaded=!0,i)n.fire(new e.ErrorEvent(i));else if(r){var a=e.window.HTMLImageElement;n.image=r instanceof a?e.exported.getImageData(r):r,n.width=n.image.width,n.height=n.image.height,t&&(n.coordinates=t),n._finishLoading()}}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this.texture&&this.texture.destroy()}},{key:"setCoordinates",value:function(t){this.coordinates=t,this._boundsArray=void 0;var n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){var n,i=1/0,r=1/0,a=-1/0,o=-1/0,s=d(t);try{for(s.s();!(n=s.n()).done;){var l=n.value;i=Math.min(i,l.x),r=Math.min(r,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}}catch(p){s.e(p)}finally{s.f()}var u=Math.max(a-i,o-r),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((i+a)/2*h),Math.floor((r+o)/2*h))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){this._boundsArray=void 0}},{key:"_prepareData",value:function(t){for(var n in this.tiles){var i=this.tiles[n];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}if(!this._boundsArray){var r=e.tileTransform(this.tileID,this.map.transform.projection),a=this.coordinates.map((function(t){var n=r.projection.project(t[0],t[1]);return e.getTilePoint(r,n)._round()})),o=h(a,4),s=o[0],l=o[1],u=o[2],c=o[3];this.perspectiveTransform=function(t,n,i,r,a,o,s,l,u,c){var h=je(0,0,t,0,0,n,t,n),d=je(i,r,a,o,s,l,u,c);return e.multiply(d,e.adjoint(h,h),d),[d[6]/d[8]*t/e.EXTENT,d[7]/d[8]*n/e.EXTENT]}(this.width,this.height,s.x,s.y,l.x,l.y,c.x,c.y,u.x,u.y);var d=this._boundsArray=new e.StructArrayLayout4i8;d.emplaceBack(s.x,s.y,0,0),d.emplaceBack(l.x,l.y,e.EXTENT,0),d.emplaceBack(c.x,c.y,0,e.EXTENT),d.emplaceBack(u.x,u.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(d,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._prepareData(t)}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),i}(e.Evented),Ve={vector:function(t){f(i,t);var n=m(i);function i(t,a,o,s){var u;if(v(this,i),(u=n.call(this)).id=t,u.dispatcher=o,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,e.extend(r(u),e.pick(a,["url","scheme","tileSize","promoteId"])),u._options=e.extend({type:"vector"},a),u._collectResourceTiming=a.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(s),u._tileWorkers={},u._deduped=new e.DedupedRequest,l(u)}return y(i,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=q(this._options,this.map._requestManager,(function(n,i){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):i&&(e.extend(t,i),i.bounds&&(t.tileBounds=new $(i.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(i.tiles,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setSourceProperty",value:function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();var t,n=this.map.style._getSourceCaches(this.id),i=d(n);try{for(i.s();!(t=i.n()).done;)t.value.clearTiles()}catch(r){i.e(r)}finally{i.f()}this.load()}},{key:"setTiles",value:function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this}},{key:"setUrl",value:function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,n){var i=this,r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",a,s.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,s.bind(this),void 0,!0);else{var o=e.loadVectorTile.call({deduped:this._deduped},a,(function(e,n){e||!n?s.call(i,e):(a.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,s.bind(i),void 0,!0))}),!0);t.request={cancel:o}}function s(i,r){return delete t.request,t.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}}]),i}(e.Evented),raster:Ne,"raster-dem":function(t){f(i,t);var n=m(i);function i(t,r,a,o){var s;return v(this,i),(s=n.call(this,t,r,a,o)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},r),s.encoding=r.encoding||"mapbox",s}return y(i,[{key:"loadTile",value:function(t,n){var i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(e,i){e&&(t.state="errored",n(e)),i&&(t.dem=i,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),function(i,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(i)t.state="errored",n(i);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});var l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==K&&(K=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),K),u=1-(a.width-e.prevPowerOfTwo(a.width))/2;u<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var c=l?a:e.exported.getImageData(a,u),h={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:u};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",h,r.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var n=t.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,a=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+i)%i,s=n.x+1===i?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,n.z,r,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,r,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,r,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),i}(Ne),geojson:function(t){f(i,t);var n=m(i);function i(t,r,a,o){var s;v(this,i),(s=n.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._loaded=!1,s.actor=a.getActor(),s.setEventedParent(o),s._data=r.data,s._options=e.extend({},r),s._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(s.maxzoom=r.maxzoom),r.type&&(s.type=r.type),r.attribution&&(s.attribution=r.attribution),s.promoteId=r.promoteId;var l=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*l,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*l,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*l,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),s}return y(i,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},i),this}},{key:"_updateWorkerData",value:function(){var t=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;var n=e.extend({},this.workerOptions),i=this._data;"string"==typeof i?(n.request=this.map._requestManager.transformRequest(e.exported.resolveURL(i),e.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),n,(function(n,i){if(t._loaded=!0,t._pendingLoad=null,n)t.fire(new e.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:t._metadataFired?"content":"metadata"};t._collectResourceTiming&&i&&i.resourceTiming&&i.resourceTiming[t.id]&&(r.resourceTiming=i.resourceTiming[t.id]),t.fire(new e.Event("data",r)),t._metadataFired=!0}t._coalesce&&(t._updateWorkerData(),t._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,n){var i=this,r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(a,i.map.painter,"reloadTile"===r),n(null))}),void 0,"loadTile"===r)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),i}(e.Evented),video:function(t){f(i,t);var n=m(i);function i(e,t,r,a){var o;return v(this,i),(o=n.call(this,e,t,r,a)).roundZoom=!0,o.type="video",o.options=t,o}return y(i,[{key:"load",value:function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];var i,r=d(n.urls);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url)}}catch(o){r.e(o)}finally{r.f()}e.getVideo(this.urls,(function(n,i){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):i&&(t.video=i,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),i}(Ue),image:Ue,canvas:function(t){f(i,t);var n=m(i);function i(t,r,a,o){var s;return v(this,i),s=n.call(this,t,r,a,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=r,s.animate=void 0===r.animate||r.animate,s}return y(i,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),i}(Ue),custom:function(t){f(i,t);var n=m(i);function i(t,a,o,s){var l;return v(this,i),(l=n.call(this)).id=t,l.type="custom",l._dataType="raster",l._dispatcher=o,l._implementation=a,l.setEventedParent(s),l.scheme="xyz",l.minzoom=0,l.maxzoom=22,l.tileSize=512,l._loaded=!1,l.roundZoom=!0,l._implementation||l.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(l.id," custom source")))),l._implementation.loadTile||l.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(l.id," custom source")))),l._implementation.bounds&&(l.tileBounds=new $(l._implementation.bounds,l.minzoom,l.maxzoom)),a.update=l._update.bind(r(l)),a.coveringTiles=l._coveringTiles.bind(r(l)),e.extend(r(l),e.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"])),l}return y(i,[{key:"serialize",value:function(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}},{key:"load",value:function(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}},{key:"onRemove",value:function(e){this._implementation.onRemove&&this._implementation.onRemove(e)}},{key:"hasTile",value:function(e){if(this._implementation.hasTile){var t=e.canonical,n=t.x,i=t.y,r=t.z;return this._implementation.hasTile({x:n,y:i,z:r})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var i=t.tileID.canonical,r=i.x,a=i.y,o=i.z,s=new e.window.AbortController,l=this._implementation.loadTile({x:r,y:a,z:o},{signal:s.signal});if(!l)return this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null);l.cancel=function(){return s.abort()},t.request=l.then(function(i){return delete t.request,t.aborted?(t.state="unloaded",n(null)):i?function(t){return t instanceof e.window.ImageData||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLCanvasElement}(i)?(this.loadTileData(t,i),t.state="loaded",void n(null)):(t.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment")))):(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null))}.bind(this)).catch((function(e){20!==e.code&&(t.state="errored",n(e))}))}},{key:"loadTileData",value:function(e,t){Ne.loadTileData(e,t,this._map.painter)}},{key:"unloadTileData",value:function(e){Ne.unloadTileData(e,this._map.painter)}},{key:"prepareTile",value:function(e){if(!this._implementation.prepareTile)return null;var t=e.tileID.canonical,n=t.x,i=t.y,r=t.z,a=this._implementation.prepareTile({x:n,y:i,z:r});return a?(this.loadTileData(e,a),e.state="loaded",a):null}},{key:"unloadTile",value:function(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){var n=e.tileID.canonical,i=n.x,r=n.y,a=n.z;this._implementation.unloadTile({x:i,y:r,z:a})}t()}},{key:"abortTile",value:function(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}},{key:"hasTransition",value:function(){return!1}},{key:"_coveringTiles",value:function(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((function(e){return{x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}}))}},{key:"_update",value:function(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}]),i}(e.Evented)},Ze=function(t,n,i,r){var a=new Ve[n.type](t,n,i,r);if(a.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(a.id));return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function We(t,n){var i=e.identity([]);return e.scale(i,i,[.5*t.width,.5*-t.height,1]),e.translate(i,i,[1,-1,0]),e.multiply$1(i,i,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(i)}function Ge(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=e.tilesIn(i,o,s);l.sort(He);var u,c=[],h=d(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;c.push({wrappedTileID:p.tile.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(t,n,e._state,p,r,a,We(e.transform,p.tile.tileID),s)})}}catch(v){h.e(v)}finally{h.f()}var f=function(e){var t,n={},i={},r=d(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,l=i[s]=i[s]||{};for(var u in o){var c,h=o[u],p=l[u]=l[u]||{},f=n[u]=n[u]||[],m=d(h);try{for(m.s();!(c=m.n()).done;){var y=c.value;p[y.featureIndex]||(p[y.featureIndex]=!0,f.push(y))}}catch(v){m.e(v)}finally{m.f()}}}}catch(v){r.e(v)}finally{r.f()}return n}(c);for(var m in f)f[m].forEach((function(t){var n=t.feature,i=n.layer;i&&"background"!==i.type&&"sky"!==i.type&&(n.source=i.source,i["source-layer"]&&(n.sourceLayer=i["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(i["source-layer"],n.id):{})}));return f}function Ye(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),i=[],r={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;r[s]||(r[s]=!0,o.querySourceFeatures(i,t))}return i}function He(e,t){var n=e.tileID,i=t.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function Xe(){return null!=_a.workerClass?new _a.workerClass:new e.window.Worker(_a.workerUrl)}var qe,Ke="mapboxgl_preloaded_worker_pool",$e=function(){function e(){v(this,e),this.active={}}return y(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Xe);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[Ke]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function Qe(){return qe||(qe=new $e),qe}function Je(t,n){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return e.refProperties.forEach((function(e){e in n&&(i[e]=n[e])})),i}function et(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=Je(e[i],t[e[i].ref]));return e}$e.workerCount=2;var tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function nt(e,t,n){n.push({command:tt.addSource,args:[e,t[e]]})}function it(e,t,n){t.push({command:tt.removeSource,args:[e]}),n[e]=!0}function rt(e,t,n,i){it(e,n,i),nt(e,t,n)}function at(e,t,n){var i;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!p(e[n][i],t[n][i]))return!1;for(i in t[n])if(t[n].hasOwnProperty(i)&&"data"!==i&&!p(e[n][i],t[n][i]))return!1;return!0}function ot(e,t,n,i,r,a){var o;for(o in t=t||{},e=e||{})e.hasOwnProperty(o)&&(p(e[o],t[o])||n.push({command:a,args:[i,o,t[o],r]}));for(o in t)t.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(p(e[o],t[o])||n.push({command:a,args:[i,o,t[o],r]}))}function st(e){return e.id}function lt(e,t){return e[t.id]=t,e}var ut=function(){function t(e,n){v(this,t),this.reset(e,n)}return y(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,i=this._distances[n],r=t*this.paddedLength+this.padding;i<r&&n<this._distances.length;)i=this._distances[++n];var a=n-1,o=this._distances[a],s=i-o,l=s>0?(r-o)/s:0;return this.points[a].mult(1-l).add(this.points[n].mult(l))}}]),t}(),ct=function(){function e(t,n,i){v(this,e);var r=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(n/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return y(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}},{key:"insertCircle",value:function(e,t,n,i){this._forEachCell(t-i,n-i,t+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(i)}},{key:"_insertBoxCell",value:function(e,t,n,i,r,a){this.boxCells[r].push(a)}},{key:"_insertCircleCell",value:function(e,t,n,i,r,a){this.circleCells[r].push(a)}},{key:"_query",value:function(e,t,n,i,r,a){if(n<0||e>this.width||i<0||t>this.height)return!r&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return a?o.filter(a):o}return this._forEachCell(e,t,n,i,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?o.length>0:o}},{key:"_queryCircle",value:function(e,t,n,i,r){var a=e-n,o=e+n,s=t-n,l=t+n;if(o<0||a>this.width||l<0||s>this.height)return!i&&[];var u=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,u,{hitTest:i,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},r),i?u.length>0:u}},{key:"query",value:function(e,t,n,i,r){return this._query(e,t,n,i,!1,r)}},{key:"hitTest",value:function(e,t,n,i,r){return this._query(e,t,n,i,!0,r)}},{key:"hitTestCircle",value:function(e,t,n,i){return this._queryCircle(e,t,n,!0,i)}},{key:"_queryCell",value:function(e,t,n,i,r,a,o,s){var l=o.seenUids,u=this.boxCells[r];if(null!==u){var c,h=this.bboxes,p=d(u);try{for(p.s();!(c=p.n()).done;){var f=c.value;if(!l.box[f]){l.box[f]=!0;var m=4*f;if(e<=h[m+2]&&t<=h[m+3]&&n>=h[m+0]&&i>=h[m+1]&&(!s||s(this.boxKeys[f]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[f],x1:h[m],y1:h[m+1],x2:h[m+2],y2:h[m+3]})}}}}catch(T){p.e(T)}finally{p.f()}}var v=this.circleCells[r];if(null!==v){var y,g=this.circles,_=d(v);try{for(_.s();!(y=_.n()).done;){var x=y.value;if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],e,t,n,i)&&(!s||s(this.circleKeys[x]))){if(o.hitTest)return a.push(!0),!0;var w=g[b],k=g[b+1],S=g[b+2];a.push({key:this.circleKeys[x],x1:w-S,y1:k-S,x2:w+S,y2:k+S})}}}}catch(T){_.e(T)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,i,r,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[r];if(null!==c){var h,p=this.bboxes,f=d(c);try{for(f.s();!(h=f.n()).done;){var m=h.value;if(!u.box[m]){u.box[m]=!0;var v=4*m;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[v+0],p[v+1],p[v+2],p[v+3])&&(!s||s(this.boxKeys[m])))return a.push(!0),!0}}}catch(k){f.e(k)}finally{f.f()}}var y=this.circleCells[r];if(null!==y){var g,_=this.circles,x=d(y);try{for(x.s();!(g=x.n()).done;){var b=g.value;if(!u.circle[b]){u.circle[b]=!0;var w=3*b;if(this._circlesCollide(_[w],_[w+1],_[w+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return a.push(!0),!0}}}catch(k){x.e(k)}finally{x.f()}}}},{key:"_forEachCell",value:function(e,t,n,i,r,a,o,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i),d=l;d<=c;d++)for(var p=u;p<=h;p++)if(r.call(this,e,t,n,i,this.xCellCount*p+d,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,i,r,a){var o=i-e,s=r-t,l=n+a;return l*l>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,n,i,r,a,o){var s=(a-i)/2,l=Math.abs(e-(i+s));if(l>s+n)return!1;var u=(o-r)/2,c=Math.abs(t-(r+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var h=l-s,d=c-u;return h*h+d*d<=n*n}}]),e}(),ht=Math.tan(85*Math.PI/180);function dt(t,n,i,r,a,o){var s=e.create();if(i){if("globe"===a.projection.name)e.multiply$1(s,s,e.calculateGlobeLabelMatrix(a,n));else{var l=D([],o);s[0]=l[0],s[1]=l[1],s[4]=l[2],s[5]=l[3]}r||e.rotateZ(s,s,a.angle)}else e.multiply$1(s,a.labelPlaneMatrix,t);return s}function pt(t,n,i,r,a,o){if(i){if("globe"===a.projection.name){var s=dt(t,n,i,r,a,o);return e.invert(s,s),e.multiply$1(s,t,s),s}var l=e.clone(t),u=e.identity([]);return u[0]=o[0],u[1]=o[1],u[4]=o[2],u[5]=o[3],e.multiply$1(l,l,u),r||e.rotateZ(l,l,-a.angle),l}return a.glCoordMatrix}function ft(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x,t.y,i,1];i?e.transformMat4$1(r,r,n):Et(r,r,n);var a=r[3];return{point:new e.pointGeometry(r[0]/a,r[1]/a),signedDistanceFromCamera:a}}function mt(t,n){var i=[t[0],t[1],t[2],1];e.transformMat4$1(i,i,n);var r=i[3];return{point:new e.pointGeometry(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function vt(e,t){return Math.min(.5+e/t*.5,1.5)}function yt(e,t){var n=e[0]/e[3],i=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&i>=-t[1]&&i<=t[1]}function gt(t,n,i,r,a,o,s,l,u,c){var h=i.transform,d=r?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(d,i.transform.zoom),f=[256/i.width*2+1,256/i.height*2+1],m=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();for(var v=t.lineVertexArray,y=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,g=i.transform.width/i.transform.height,_=!1,x=0;x<y.length;x++){var b=y.get(x);if(b.writingMode!==e.WritingMode.vertical||_||0!==x&&y.get(x-1).writingMode===e.WritingMode.horizontal||(_=!0),!b.hidden&&b.writingMode!==e.WritingMode.vertical||_){_=!1;var w=new e.pointGeometry(b.tileAnchorX,b.tileAnchorY),k=u?u(w):[0,0,0],S=h.projection.projectTilePoint(w.x,w.y,c.canonical),T=[S.x+k[0],S.y+k[1],S.z+k[2]],C=[].concat(T,[1]);if(e.transformMat4$1(C,C,n),yt(C,f)){var E=vt(i.transform.cameraToCenterDistance,C[3]),M=e.evaluateSizeForFeature(d,p,b),P=s?M/E:M*E,A=ft(new e.pointGeometry(T[0],T[1]),a,T[2]);if(A.signedDistanceFromCamera<=0)Ct(b.numGlyphs,m);else{var D={},I=s?null:u,L=bt(b,P,!1,l,n,a,o,t.glyphOffsetArray,v,m,A.point,w,D,g,I,h.projection,c);_=L.useVertical,I&&L.needsFlipping&&(D={}),(L.notEnoughRoom||_||L.needsFlipping&&bt(b,P,!0,l,n,a,o,t.glyphOffsetArray,v,m,A.point,w,D,g,I,h.projection,c).notEnoughRoom)&&Ct(b.numGlyphs,m)}}else Ct(b.numGlyphs,m)}else Ct(b.numGlyphs,m)}r?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)}function _t(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f){var m=s.glyphStartIndex+s.numGlyphs,v=s.lineStartIndex,y=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),_=t.getoffsetX(m-1),x=St(e*g,n,i,r,a,o,s.segment,v,y,l,u,c,h,d,!0,p,f);if(!x)return null;var b=St(e*_,n,i,r,a,o,s.segment,v,y,l,u,c,h,d,!0,p,f);return b?{first:x,last:b}:null}function xt(t,n,i,r){return t.writingMode===e.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?n.y<i.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,n){var i=(t.x-e.x)*n;return 0===i||Math.abs((t.y-e.y)/i)>ht}(n,i,r)?1===t.flipState?{needsFlipping:!0}:null:n.x>i.x?{needsFlipping:!0}:null}function bt(t,n,i,r,a,o,s,l,u,c,h,p,f,m,v,y,g){var _,x=n/24,b=t.lineOffsetX*x,w=t.lineOffsetY*x;if(t.numGlyphs>1){var k=t.glyphStartIndex+t.numGlyphs,S=t.lineStartIndex,T=t.lineStartIndex+t.lineLength,C=_t(x,l,b,w,i,h,p,t,u,o,f,v,!1,y,g);if(!C)return{notEnoughRoom:!0};var E=ft(C.first.point,s).point,M=ft(C.last.point,s).point;if(r&&!i){var P=xt(t,E,M,m);if(t.flipState=P&&P.needsFlipping?1:2,P)return P}_=[C.first];for(var A=t.glyphStartIndex+1;A<k-1;A++)_.push(St(x*l.getoffsetX(A),b,w,i,h,p,t.segment,S,T,u,o,f,v,!1,!1,y,g));_.push(C.last)}else{if(r&&!i){var D=ft(p,a).point,I=t.lineStartIndex+t.segment+1,L=new e.pointGeometry(u.getx(I),u.gety(I)),O=ft(L,a),z=xt(t,D,O.signedDistanceFromCamera>0?O.point:kt(p,L,D,1,a,void 0,y,g.canonical),m);if(t.flipState=z&&z.needsFlipping?1:2,z)return z}var R=St(x*l.getoffsetX(t.glyphStartIndex),b,w,i,h,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,f,v,!1,!1,y,g);if(!R)return{notEnoughRoom:!0};_=[R]}var B,F=d(_);try{for(F.s();!(B=F.n()).done;){var N=B.value;e.addDynamicAttributes(c,N.point,N.angle)}}catch(j){F.e(j)}finally{F.f()}return{}}function wt(t,n,i,r,a){var o=r.projectTilePoint(t.x,t.y,n);if(!a)return ft(o,i,o.z);var s=a(t);return ft(new e.pointGeometry(o.x+s[0],o.y+s[1]),i,o.z+s[2])}function kt(e,t,n,i,r,a,o,s){var l=wt(e.add(e.sub(t)._unit()),s,r,o,a).point,u=n.sub(l);return n.add(u._mult(i/u.mag()))}function St(t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y){var g=r?t-n:t+n,_=g>0?1:-1,x=0;r&&(_*=-1,x=Math.PI),_<0&&(x+=Math.PI);for(var b=_>0?l+s:l+s+1,w=a,k=a,S=0,T=0,C=Math.abs(g),E=[],M=[],P=o,A=function(){var t=b-_;return 0===S?o:new e.pointGeometry(c.getx(t),c.gety(t))},D=function(){return kt(A(),P,k,C-S+1,h,p,v,y.canonical)};S+T<=C;){if((b+=_)<l||b>=u)return null;if(k=w,E.push(w),f&&M.push(P||A()),void 0===(w=d[b])){var I=wt(P=new e.pointGeometry(c.getx(b),c.gety(b)),y.canonical,h,v,p);w=I.signedDistanceFromCamera>0?d[b]=I.point:D()}else P=null;S+=T,T=k.dist(w)}m&&p&&(P=P||new e.pointGeometry(c.getx(b),c.gety(b)),d[b]=w=void 0===d[b]?w:D(),T=k.dist(w));var L=(C-S)/T,O=w.sub(k),z=O.mult(L)._add(k);i&&z._add(O._unit()._perp()._mult(i*_));var R=x+Math.atan2(w.y-k.y,w.x-k.x);return E.push(z),f&&(P=P||new e.pointGeometry(c.getx(b),c.gety(b)),M.push(function(t,n,i){var r=1-i;return new e.pointGeometry(t.x*r+n.x*i,t.y*r+n.y*i)}(M.length>0?M[M.length-1]:P,P,L))),{point:z,angle:R,path:E,tilePath:M}}var Tt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ct(e,t){for(var n=0;n<e;n++){var i=t.length;t.resize(i+4),t.float32.set(Tt,3*i)}}function Et(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e[3]=n[3]*i+n[7]*r+n[15],e}var Mt=100,Pt=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ct(e.width+200,e.height+200,25),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ct(e.width+200,e.height+200,25);v(this,t),this.transform=e,this.grid=i,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Mt,this.screenBottomBoundary=e.height+Mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=n}return y(t,[{key:"placeCollisionBox",value:function(e,t,n,i,r,a,o){var s=t.projectedAnchorX,l=t.projectedAnchorY,u=t.projectedAnchorZ,c=t.elevation,h=t.tileID;if(c&&h){var d=this.transform.projection.upVector(h.canonical,t.tileAnchorX,t.tileAnchorY),p=this.transform.projection.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;s+=d[0]*c*p,l+=d[1]*c*p,u+=d[2]*c*p}var f=this.projectAndGetPerspectiveRatio(a,[s,l,u],t.tileID,"globe"===this.transform.projection.name||!!c||this.transform.pitch>0),m=r*f.perspectiveRatio,v=(t.x1*e+n.x-t.padding)*m+f.point.x,y=(t.y1*e+n.y-t.padding)*m+f.point.y,g=(t.x2*e+n.x+t.padding)*m+f.point.x,_=(t.y2*e+n.y+t.padding)*m+f.point.y,x=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(v,y,g,_)||!i&&this.grid.hitTest(v,y,g,_,o)||x?{box:[],offscreen:!1,occluded:f.occluded}:{box:[v,y,g,_],offscreen:this.isOffscreen(v,y,g,_),occluded:!1}}},{key:"placeCollisionCircles",value:function(t,n,i,r,a,o,s,l,u,c,h,p,f,m){var v=[],y=this.transform.elevation,g=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,this.transform.projection):function(e){return[0,0,0]},_=new e.pointGeometry(n.tileAnchorX,n.tileAnchorY),x=this.transform.projection.projectTilePoint(n.tileAnchorX,n.tileAnchorY,m.canonical),b=g(_),w=[x.x+b[0],x.y+b[1],x.z+b[2]],k=this.projectAndGetPerspectiveRatio(o,[w[0],w[1],w[2]],m,"globe"===this.transform.projection.name||!!y||this.transform.pitch>0),S=k.perspectiveRatio,T=(c?a/S:a*S)/e.ONE_EM,C=ft(new e.pointGeometry(w[0],w[1]),s,w[2]).point,E=k.signedDistanceFromCamera>0?_t(T,r,n.lineOffsetX*T,n.lineOffsetY*T,!1,C,_,n,i,s,{},y&&!c?g:null,c&&!!y,this.transform.projection,m):null,M=!1,P=!1,A=!0;if(E&&!k.occluded){for(var D=.5*p*S+f,I=new e.pointGeometry(-100,-100),L=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),O=new ut,z=E.first,R=E.last,B=[],F=z.path.length-1;F>=1;F--)B.push(z.path[F]);for(var N=1;N<R.path.length;N++)B.push(R.path[N]);var j=2.5*D;if(l){var U=B.map(y?function(e,t){var n=g(t<z.path.length-1?z.tilePath[z.path.length-1-t]:R.tilePath[t-z.path.length+2]);return ft(e,l,n[2])}:function(e){return ft(e,l)});B=U.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:U.map((function(e){return e.point}))}var V=[];if(B.length>0){for(var Z=B[0].clone(),W=B[0].clone(),G=1;G<B.length;G++)Z.x=Math.min(Z.x,B[G].x),Z.y=Math.min(Z.y,B[G].y),W.x=Math.max(W.x,B[G].x),W.y=Math.max(W.y,B[G].y);V=Z.x>=I.x&&W.x<=L.x&&Z.y>=I.y&&W.y<=L.y?[B]:W.x<I.x||Z.x>L.x||W.y<I.y||Z.y>L.y?[]:e.clipLine([B],I.x,I.y,L.x,L.y)}var Y,H=d(V);try{for(H.s();!(Y=H.n()).done;){var X=Y.value;O.reset(X,.25*D);var q=0;q=O.length<=.5*D?1:Math.ceil(O.paddedLength/j)+1;for(var K=0;K<q;K++){var $=K/Math.max(q-1,1),Q=O.lerp($),J=Q.x+Mt,ee=Q.y+Mt;v.push(J,ee,D,0);var te=J-D,ne=ee-D,ie=J+D,re=ee+D;if(A=A&&this.isOffscreen(te,ne,ie,re),P=P||this.isInsideGrid(te,ne,ie,re),!t&&this.grid.hitTestCircle(J,ee,D,h)&&(M=!0,!u))return{circles:[],offscreen:!1,collisionDetected:M,occluded:!1}}}}catch(ae){H.e(ae)}finally{H.f()}}return{circles:!u&&M||!P?[]:v,offscreen:A,collisionDetected:M,occluded:k.occluded}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,i=[],r=1/0,a=1/0,o=-1/0,s=-1/0,l=d(t);try{for(l.s();!(n=l.n()).done;){var u=n.value,c=new e.pointGeometry(u.x+Mt,u.y+Mt);r=Math.min(r,c.x),a=Math.min(a,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y),i.push(c)}}catch(x){l.e(x)}finally{l.f()}var h,p=this.grid.query(r,a,o,s).concat(this.ignoredGrid.query(r,a,o,s)),f={},m={},v=d(p);try{for(v.s();!(h=v.n()).done;){var y=h.value,g=y.key;if(void 0===f[g.bucketInstanceId]&&(f[g.bucketInstanceId]={}),!f[g.bucketInstanceId][g.featureIndex]){var _=[new e.pointGeometry(y.x1,y.y1),new e.pointGeometry(y.x2,y.y1),new e.pointGeometry(y.x2,y.y2),new e.pointGeometry(y.x1,y.y2)];e.polygonIntersectsPolygon(i,_)&&(f[g.bucketInstanceId][g.featureIndex]=!0,void 0===m[g.bucketInstanceId]&&(m[g.bucketInstanceId]=[]),m[g.bucketInstanceId].push(g.featureIndex))}}}catch(x){v.e(x)}finally{v.f()}return m}},{key:"insertCollisionBox",value:function(e,t,n,i,r){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,i,r){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,n,i,r){var a=[n[0],n[1],n[2],1],o=!1;return n[2]||this.transform.pitch>0?(e.transformMat4$1(a,a,t),this.fogState&&i&&(o=function(t,n,i,r,a,o){var s=o.calculateFogTileMatrix(a),l=[n,i,r];return e.transformMat4(l,l,s),j(t,l,o.pitch,o._fov)}(this.fogState,n[0],n[1],n[2],i.toUnwrapped(),this.transform)>.9)):Et(a,a,t),{point:new e.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+Mt,(-a[1]/a[3]+1)/2*this.transform.height+Mt),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5),signedDistanceFromCamera:a[3],occluded:r&&a[2]>a[3]||o}}},{key:"isOffscreen",value:function(e,t,n,i){return n<Mt||e>=this.screenRightBoundary||i<Mt||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,i){return n>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}(),At=function(){function e(t,n,i,r){v(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):r&&i?1:0,this.placed=i}return y(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Dt=function(){function e(t,n,i,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];v(this,e),this.text=new At(t?t.text:null,n,i,a),this.icon=new At(t?t.icon:null,n,r,a),this.clipped=o}return y(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),It=y((function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];v(this,e),this.text=t,this.icon=n,this.skipFade=i,this.clipped=r})),Lt=y((function t(){v(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),Ot=y((function e(t,n,i,r,a){v(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=a})),zt=function(){function e(t){v(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return y(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Rt(t,n,i,r,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*n,l=-(o.verticalAlign-.5)*i,u=e.evaluateVariableOffset(t,r);return new e.pointGeometry(s+u[0]*a,l+u[1]*a)}function Bt(t,n,i,r,a){var o=new e.pointGeometry(t,n);return i&&o._rotate(r?a:-a),o}var Ft=function(){function t(e,n,i,r,a){v(this,t),this.transform=e.clone(),this.collisionIndex=new Pt(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new zt(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}return y(t,[{key:"getBucketParts",value:function(t,n,i,r){var a=i.getBucket(n),o=i.latestFeatureIndex;if(a&&o&&n.id===a.layerIds[0]){var s=a.layers[0].layout,l=i.collisionBoxArray,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/e.EXTENT,h=i.tileID.toUnwrapped(),p=this.transform.calculateProjMatrix(h),f="map"===s.get("text-pitch-alignment"),m="map"===s.get("text-rotation-alignment");n.compileFilter();var v=n.dynamicFilter(),y=n.dynamicFilterNeedsFeature(),g=this.transform.calculatePixelsToTileUnitsMatrix(i),_=dt(p,i.tileID.canonical,f,m,this.transform,g),x=null;if(f){var b=pt(p,i.tileID.canonical,f,m,this.transform,g);x=e.multiply$1([],this.transform.labelPlaneMatrix,b)}var w=null;v&&i.latestFeatureIndex&&(w={unwrappedTileID:h,dynamicFilter:v,dynamicFilterNeedsFeature:y,featureIndex:i.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new Ot(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,i.tileID);var k={bucket:a,layout:s,posMatrix:p,textLabelPlaneMatrix:_,labelToScreenMatrix:x,clippingData:w,scale:u,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(r){var S,T=d(a.sortKeyRanges);try{for(T.s();!(S=T.n()).done;){var C=S.value,E=C.sortKey,M=C.symbolInstanceStart,P=C.symbolInstanceEnd;t.push({sortKey:E,symbolInstanceStart:M,symbolInstanceEnd:P,parameters:k})}}catch(A){T.e(A)}finally{T.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:k})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,i,r,a,o,s,l,u,c,h,d,p,f,m,v,y){var g,_=[h.textOffset0,h.textOffset1],x=Rt(e,n,i,_,r),b=this.collisionIndex.placeCollisionBox(r,t,Bt(x.x,x.y,a,o,this.transform.angle),c,s,l,u.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(y,this.transform.zoom,d),m,Bt(x.x,x.y,a,o,this.transform.angle),c,s,l,u.predicate).box.length)&&b.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(g=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:n,height:i,anchor:e,textScale:r,prevAnchor:g},this.markUsedJustification(p,e,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[h.crossTileID]=f),{shift:x,placedGlyphBoxes:b}}},{key:"placeLayerBucketPart",value:function(t,n,i,r){var a=this,o=t.parameters,s=o.bucket,l=o.layout,u=o.posMatrix,c=o.textLabelPlaneMatrix,h=o.labelToScreenMatrix,p=o.clippingData,f=o.textPixelRatio,m=o.holdingForFade,v=o.collisionBoxArray,y=o.partiallyEvaluatedTextSize,g=o.partiallyEvaluatedIconSize,_=o.collisionGroup,x=l.get("text-optional"),b=l.get("icon-optional"),w=l.get("text-allow-overlap"),k=l.get("icon-allow-overlap"),S="map"===l.get("text-rotation-alignment"),T="map"===l.get("text-pitch-alignment"),C="none"!==l.get("icon-text-fit"),E="viewport-y"===l.get("symbol-z-order"),M=w&&(k||!s.hasIconData()||b),P=k&&(w||!s.hasTextData()||x);!s.collisionArrays&&v&&s.deserializeCollisionBoxes(v),i&&r&&s.updateCollisionDebugBuffers(this.transform.zoom,v);var A=function(t,r,o){if(p){var v={zoom:a.transform.zoom,pitch:a.transform.pitch},E=null;if(p.dynamicFilterNeedsFeature){var A=a.retainedQueryData[s.bucketInstanceId];E=p.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:A.bucketIndex,sourceLayerIndex:A.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,p.dynamicFilter)(v,E,a.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),a.transform.calculateDistanceTileData(p.unwrappedTileID)))return a.placements[t.crossTileID]=new It(!1,!1,!1,!0),void(n[t.crossTileID]=!0)}if(!n[t.crossTileID])if(m)a.placements[t.crossTileID]=new It(!1,!1,!1);else{var D=!1,I=!1,L=!0,O=!1,z=!1,R=null,B={box:null,offscreen:null,occluded:null},F={box:null,offscreen:null,occluded:null},N=null,j=null,U=null,V=0,Z=0,W=0;o.textFeatureIndex?V=o.textFeatureIndex:t.useRuntimeCollisionCircles&&(V=t.featureIndex),o.verticalTextFeatureIndex&&(Z=o.verticalTextFeatureIndex);var G=function(e){e.tileID=a.retainedQueryData[s.bucketInstanceId].tileID,(a.transform.elevation||e.elevation)&&(e.elevation=a.transform.elevation?a.transform.elevation.getAtTileOffset(a.retainedQueryData[s.bucketInstanceId].tileID,e.tileAnchorX,e.tileAnchorY):0)},Y=o.textBox;if(Y){G(Y);var H=function(n){var i=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&a.prevPlacement){var r=a.prevPlacement.placedOrientations[t.crossTileID];r&&(a.placedOrientations[t.crossTileID]=r,i=r,a.markUsedOrientation(s,i,t))}return i},X=function(n,i){if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&o.verticalTextBox){var r,a=d(s.writingModes);try{for(a.s();!(r=a.n()).done&&(r.value===e.WritingMode.vertical?(B=i(),F=B):B=n(),!(B&&B.box&&B.box.length)););}catch(l){a.e(l)}finally{a.f()}}else B=n()};if(l.get("text-variable-anchor")){var q=l.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[t.crossTileID]){var K=a.prevPlacement.variableOffsets[t.crossTileID];q.indexOf(K.anchor)>0&&(q=q.filter((function(e){return e!==K.anchor})),q.unshift(K.anchor))}var $=function(e,n,i){var o=s.getSymbolInstanceTextSize(y,t,a.transform.zoom,r),l=(e.x2-e.x1)*o+2*e.padding,c=(e.y2-e.y1)*o+2*e.padding,h=C&&!k?n:null;h&&G(h);for(var d={box:[],offscreen:!1,occluded:!1},p=w?2*q.length:q.length,m=0;m<p;++m){var v=a.attemptAnchorPlacement(q[m%q.length],e,l,c,o,S,T,f,u,_,m>=q.length,t,r,s,i,h,y,g);if(v&&(d=v.placedGlyphBoxes)&&d.box&&d.box.length){D=!0,R=v.shift;break}}return d};X((function(){return $(Y,o.iconBox,e.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return n&&G(n),s.allowVerticalPlacement&&!(B&&B.box&&B.box.length)&&t.numVerticalGlyphVertices>0&&n?$(n,o.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),B&&(D=B.box,L=B.offscreen,O=B.occluded);var Q=H(B&&B.box);if(!D&&a.prevPlacement){var J=a.prevPlacement.variableOffsets[t.crossTileID];J&&(a.variableOffsets[t.crossTileID]=J,a.markUsedJustification(s,J.anchor,t,Q))}}else{var ee=function(n,i){var o=s.getSymbolInstanceTextSize(y,t,a.transform.zoom,r),l=a.collisionIndex.placeCollisionBox(o,n,new e.pointGeometry(0,0),w,f,u,_.predicate);return l&&l.box&&l.box.length&&(a.markUsedOrientation(s,i,t),a.placedOrientations[t.crossTileID]=i),l};X((function(){return ee(Y,e.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?(G(n),ee(n,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),H(B&&B.box&&B.box.length)}}if(D=(N=B)&&N.box&&N.box.length>0,L=N&&N.offscreen,O=N&&N.occluded,t.useRuntimeCollisionCircles){var te=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),ne=e.evaluateSizeForFeature(s.textSizeData,y,te),ie=l.get("text-padding");j=a.collisionIndex.placeCollisionCircles(w,te,s.lineVertexArray,s.glyphOffsetArray,ne,u,c,h,i,T,_.predicate,t.collisionCircleDiameter*ne/e.ONE_EM,ie,a.retainedQueryData[s.bucketInstanceId].tileID),D=w||j.circles.length>0&&!j.collisionDetected,L=L&&j.offscreen,O=j.occluded}if(o.iconFeatureIndex&&(W=o.iconFeatureIndex),o.iconBox){var re=function(t){G(t);var n=C&&R?Bt(R.x,R.y,S,T,a.transform.angle):new e.pointGeometry(0,0),i=s.getSymbolInstanceIconSize(g,a.transform.zoom,r);return a.collisionIndex.placeCollisionBox(i,t,n,k,f,u,_.predicate)};I=F&&F.box&&F.box.length&&o.verticalIconBox?(U=re(o.verticalIconBox)).box.length>0:(U=re(o.iconBox)).box.length>0,L=L&&U.offscreen,z=U.occluded}var ae=x||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,oe=b||0===t.numIconVertices;if(ae||oe?oe?ae||(I=I&&D):D=I&&D:I=D=I&&D,D&&N&&N.box&&a.collisionIndex.insertCollisionBox(N.box,l.get("text-ignore-placement"),s.bucketInstanceId,F&&F.box&&Z?Z:V,_.ID),I&&U&&a.collisionIndex.insertCollisionBox(U.box,l.get("icon-ignore-placement"),s.bucketInstanceId,W,_.ID),j&&(D&&a.collisionIndex.insertCollisionCircles(j.circles,l.get("text-ignore-placement"),s.bucketInstanceId,V,_.ID),i)){var se=s.bucketInstanceId,le=a.collisionCircleArrays[se];void 0===le&&(le=a.collisionCircleArrays[se]=new Lt);for(var ue=0;ue<j.circles.length;ue+=4)le.circles.push(j.circles[ue+0]),le.circles.push(j.circles[ue+1]),le.circles.push(j.circles[ue+2]),le.circles.push(j.collisionDetected?1:0)}var ce="globe"!==a.transform.projection.name;M=M&&(ce||!O),P=P&&(ce||!z),a.placements[t.crossTileID]=new It(D||M,I||P,L||s.justReloaded),n[t.crossTileID]=!0}};if(E)for(var D=s.getSortedSymbolIndexes(this.transform.angle),I=D.length-1;I>=0;--I){var L=D[I];A(s.symbolInstances.get(L),L,s.collisionArrays[L])}else for(var O=t.symbolInstanceStart;O<t.symbolInstanceEnd;O++)A(s.symbolInstances.get(O),O,s.collisionArrays[O]);if(i&&s.bucketInstanceId in this.collisionCircleArrays){var z=this.collisionCircleArrays[s.bucketInstanceId];e.invert(z.invProjMatrix,u),z.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}},{key:"markUsedJustification",value:function(t,n,i,r){var a;a=r===e.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];for(var o=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];o<s.length;o++){var l=s[o];l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=a>=0&&l!==a?0:i.crossTileID)}}},{key:"markUsedOrientation",value:function(t,n,i){for(var r=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,a=n===e.WritingMode.vertical?n:0,o=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];o<s.length;o++){var l=s[o];t.text.placedSymbolArray.get(l).placedOrientation=r}i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=a)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var i=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=r[s];u?(this.opacities[s]=new Dt(u,i,l.text,l.icon,null,l.clipped),n=n||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new Dt(null,i,l.text,l.icon,l.skipFade,l.clipped),n=n||l.text||l.icon)}for(var c in r){var h=r[c];if(!this.opacities[c]){var d=new Dt(h,i,!1,!1);d.isHidden()||(this.opacities[c]=d,n=n||h.text.placed||h.icon.placed)}}for(var p in a)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=a[p]);for(var f in o)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=o[f]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,i={},r=d(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,i,a.collisionBoxArray)}}catch(s){r.e(s)}finally{r.f()}}},{key:"updateBucketOpacities",value:function(t,n,i){var r=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var a=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),s=new Dt(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),u=a.get("icon-allow-overlap"),c=a.get("text-variable-anchor"),h="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),f=new Dt(null,0,l&&(u||!t.hasIconData()||a.get("icon-optional")),u&&(l||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&i&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(i);for(var m=function(e,t,n){for(var i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(n)},v=0,y=function(i){var a=t.symbolInstances.get(i),l=a.numHorizontalGlyphVertices,u=a.numVerticalGlyphVertices,y=a.crossTileID,g=r.opacities[y];n[y]?g=s:g||(g=f,r.opacities[y]=g),n[y]=!0;var _=l>0||u>0,x=a.numIconVertices>0,b=r.placedOrientations[a.crossTileID],w=b===e.WritingMode.vertical,k=b===e.WritingMode.horizontal||b===e.WritingMode.horizontalOnly;if(!_&&!x||g.isHidden()||v++,_){var S=Ht(g.text);m(t.text,l,w?Xt:S),m(t.text,u,k?Xt:S);var T=g.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=T||w?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=T||k?1:0);var C=r.variableOffsets[a.crossTileID];C&&r.markUsedJustification(t,C.anchor,a,b);var E=r.placedOrientations[a.crossTileID];E&&(r.markUsedJustification(t,"left",a,E),r.markUsedOrientation(t,E,a))}if(x){var M=Ht(g.icon);a.placedIconSymbolIndex>=0&&(m(t.icon,a.numIconVertices,w?Xt:M),t.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=g.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(m(t.icon,a.numVerticalIconVertices,k?Xt:M),t.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var P=t.collisionArrays[i];if(P){var A=new e.pointGeometry(0,0),D=!0;if(P.textBox||P.verticalTextBox){if(c){var I=r.variableOffsets[y];I?(A=Rt(I.anchor,I.width,I.height,I.textOffset,I.textScale),h&&A._rotate(d?r.transform.angle:-r.transform.angle)):D=!1}o&&(D=!g.clipped),P.textBox&&Nt(t.textCollisionBox.collisionVertexArray,g.text.placed,!D||w,A.x,A.y),P.verticalTextBox&&Nt(t.textCollisionBox.collisionVertexArray,g.text.placed,!D||k,A.x,A.y)}var L=D&&Boolean(!k&&P.verticalIconBox);P.iconBox&&Nt(t.iconCollisionBox.collisionVertexArray,g.icon.placed,L,p?A.x:0,p?A.y:0),P.verticalIconBox&&Nt(t.iconCollisionBox.collisionVertexArray,g.icon.placed,!L,p?A.x:0,p?A.y:0)}}},g=0;g<t.symbolInstances.length;g++)y(g);if(t.fullyClipped=0===v,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var _=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=_.invProjMatrix,t.placementViewportMatrix=_.viewportMatrix,t.collisionCircleArray=_.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function Nt(e,t,n,i,r){e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0)}var jt=Math.pow(2,25),Ut=Math.pow(2,24),Vt=Math.pow(2,17),Zt=Math.pow(2,16),Wt=Math.pow(2,9),Gt=Math.pow(2,8),Yt=Math.pow(2,1);function Ht(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*jt+t*Ut+n*Vt+t*Zt+n*Wt+t*Gt+n*Yt+t}var Xt=0,qt=function(){function e(t){v(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return y(e,[{key:"continuePlacement",value:function(e,t,n,i,r){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;){var o=a[this._currentPartIndex];if(t.placeLayerBucketPart(o,this._seenCrossTileIDs,n,0===o.symbolInstanceStart),this._currentPartIndex++,r())return!0}return!1}}]),e}(),Kt=function(){function t(e,n,i,r,a,o,s,l){v(this,t),this.placement=new Ft(e,a,o,s,l),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}return y(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,n,i){for(var r=this,a=e.exported.now(),o=function(){var t=e.exported.now()-a;return!r._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new qt(s)),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),$t=512/e.EXTENT/2,Qt=function(){function t(e,n,i){v(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<n.length;r++){var a=n.get(r),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}}return y(t,[{key:"getScaledCoordinates",value:function(t,n){var i=$t/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*i),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*i)}}},{key:"findMatches",value:function(e,t,n){for(var i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),r=0;r<e.length;r++){var a=e.get(r);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o){var s,l=this.getScaledCoordinates(a,t),u=d(o);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(Math.abs(c.coord.x-l.x)<=i&&Math.abs(c.coord.y-l.y)<=i&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}catch(h){u.e(h)}finally{u.f()}}}}}}]),t}(),Jt=function(){function e(){v(this,e),this.maxCrossTileID=0}return y(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),en=function(){function e(){v(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return y(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var i=this.indexes[n],r={};for(var a in i){var o=i[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),r[o.tileID.key]=o}this.indexes[n]=r}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var r=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,r)}else{var u=o[e.scaledTo(Number(a)).key];u&&u.findMatches(t.symbolInstances,e,r)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Qt(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var n in t.indexedSymbolInstances){var i,r=d(t.indexedSymbolInstances[n]);try{for(r.s();!(i=r.n()).done;){var a=i.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(o){r.e(o)}finally{r.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var i=this.indexes[n];for(var r in i)e[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],t=!0)}return t}}]),e}(),tn=function(){function e(){v(this,e),this.layerIndexes={},this.crossTileIDs=new Jt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return y(e,[{key:"addLayer",value:function(e,t,n,i){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new en);var a=!1,o={};"globe"!==i.name&&r.handleWrapJump(n);var s,l=d(t);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,c,this.crossTileIDs)&&(a=!0),o[c.bucketInstanceId]=!0)}}catch(h){l.e(h)}finally{l.f()}return r.removeStaleBuckets(o)&&(a=!0),a}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),nn=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},rn=e.pick(tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),an=e.pick(tt,["setCenter","setZoom","setBearing","setPitch"]),on={version:8,layers:[],sources:{}},sn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},ln=function(t){f(i,t);var n=m(i);function i(t){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,i),(a=n.call(this)).map=t,a.dispatcher=new G(Qe(),r(a)),a.imageManager=new L,a.imageManager.setEventedParent(r(a)),a.glyphManager=new e.GlyphManager(t._requestManager,o.localFontFamily?e.LocalGlyphMode.all:o.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,o.localFontFamily||o.localIdeographFontFamily),a.lineAtlas=new e.LineAtlas(256,512),a.crossTileSymbolIndex=new tn,a._layers={},a._num3DLayers=0,a._numSymbolLayers=0,a._numCircleLayers=0,a._serializedLayers={},a._sourceCaches={},a._otherSourceCaches={},a._symbolSourceCaches={},a.zoomHistory=new e.ZoomHistory,a._loaded=!1,a._availableImages=[],a._order=[],a._drapedFirstOrder=[],a._markersNeedUpdate=!1,a._resetUpdates(),a.dispatcher.broadcast("setReferrer",e.getReferrer());var s=r(a);return a._rtlTextPluginCallback=i.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var i in s._sourceCaches){var r=s._sourceCaches[i],a=r.getSource().type;"vector"!==a&&"geojson"!==a||r.reload()}}))})),a.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=a.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var n in a._layers){var i=a._layers[n];i.source===t.id&&a._validateLayer(i)}}})),a}return y(i,[{key:"loadURL",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof i.validate?i.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,i.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,i){n._request=null,t?n.fire(new e.ErrorEvent(t)):i&&n._load(i,r)}))}},{key:"loadJSON",value:function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){n._request=null,n._load(t,!1!==i.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(on,!1)}},{key:"_updateLayerCount",value:function(e,t){var n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(t,n){if(!n||!nn(this,e.validateStyle(t))){for(var i in this._loaded=!0,this.stylesheet=t,this._updateMapProjection(),t.sources)this.addSource(i,t.sources[i],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);var r=et(this.stylesheet.layers);this._order=r.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var a,o=d(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}}catch(l){o.e(l)}finally{o.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new R(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return!!this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}},{key:"_updateMapProjection",value:function(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}},{key:"applyProjectionUpdate",value:function(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}},{key:"_loadSprite",value:function(t){var n=this;this._spriteRequest=function(t,n,i){var r,a,o,s=e.exported.devicePixelRatio>1?"@2x":"",l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,o||(o=e,r=t,c())})),u=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,o||(o=e,a=t,c())}));function c(){if(o)i(o);else if(r&&a){var t=e.exported.getImageData(a),n={};for(var s in r){var l=r[s],u=l.width,c=l.height,h=l.x,d=l.y,p=l.sdf,f=l.pixelRatio,m=l.stretchX,v=l.stretchY,y=l.content,g=new e.RGBAImage({width:u,height:c});e.RGBAImage.copy(t,g,{x:h,y:d},{x:0,y:0},{width:u,height:c}),n[s]={data:g,pixelRatio:f,sdf:p,stretchX:m,stretchY:v,content:y}}i(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,i){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(i)for(var r in i)n.imageManager.addImage(r,i[r]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.dispatcher.broadcast("spriteLoaded",!0),n.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var n=this.getSource(t.source);if(n){var i=t.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(i,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],i=d(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=this._layers[r];"custom"!==a.type&&n.push(a.serialize())}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&sn[e.type]}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var n=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var a in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}var l={};for(var u in this._sourceCaches){var c=this._sourceCaches[u];l[u]=c.used,c.used=!1}var h,p=d(this._order);try{for(p.s();!(h=p.n()).done;){var f=h.value,m=this._layers[f];if(m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)){var v=this._getLayerSourceCache(m);v&&(v.used=!0)}var y=this.map.painter;if(y){var g=m.getProgramIds();if(!g)continue;var _,x=m.getProgramConfiguration(t.zoom),b=d(g);try{for(b.s();!(_=b.n()).done;){var w=_.value;y.useProgram(w,x)}}catch(T){b.e(T)}finally{b.f()}}}}catch(T){p.e(T)}finally{p.f()}for(var k in l){var S=this._sourceCaches[k];l[k]!==S.used&&S.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(t){var n=this;if(this._checkLoaded(),nn(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=et(t.layers);var i=function(e,t){if(!e)return[{command:tt.setStyle,args:[t]}];var n=[];try{if(!p(e.version,t.version))return[{command:tt.setStyle,args:[t]}];p(e.center,t.center)||n.push({command:tt.setCenter,args:[t.center]}),p(e.zoom,t.zoom)||n.push({command:tt.setZoom,args:[t.zoom]}),p(e.bearing,t.bearing)||n.push({command:tt.setBearing,args:[t.bearing]}),p(e.pitch,t.pitch)||n.push({command:tt.setPitch,args:[t.pitch]}),p(e.sprite,t.sprite)||n.push({command:tt.setSprite,args:[t.sprite]}),p(e.glyphs,t.glyphs)||n.push({command:tt.setGlyphs,args:[t.glyphs]}),p(e.transition,t.transition)||n.push({command:tt.setTransition,args:[t.transition]}),p(e.light,t.light)||n.push({command:tt.setLight,args:[t.light]}),p(e.fog,t.fog)||n.push({command:tt.setFog,args:[t.fog]}),p(e.projection,t.projection)||n.push({command:tt.setProjection,args:[t.projection]});var i={},r=[];!function(e,t,n,i){var r;for(r in t=t||{},e=e||{})e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||it(r,n,i));for(r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)?p(e[r],t[r])||("geojson"===e[r].type&&"geojson"===t[r].type&&at(e,t,r)?n.push({command:tt.setGeoJSONSourceData,args:[r,t[r].data]}):rt(r,t,n,i)):nt(r,t,n))}(e.sources,t.sources,r,i);var a=[];e.layers&&e.layers.forEach((function(e){e.source&&i[e.source]?n.push({command:tt.removeLayer,args:[e.id]}):a.push(e)}));var o=e.terrain;o&&i[o.source]&&(n.push({command:tt.setTerrain,args:[void 0]}),o=void 0),n=n.concat(r),p(o,t.terrain)||n.push({command:tt.setTerrain,args:[t.terrain]}),function(e,t,n){t=t||[];var i,r,a,o,s,l,u,c=(e=e||[]).map(st),h=t.map(st),d=e.reduce(lt,{}),f=t.reduce(lt,{}),m=c.slice(),v=Object.create(null);for(i=0,r=0;i<c.length;i++)a=c[i],f.hasOwnProperty(a)?r++:(n.push({command:tt.removeLayer,args:[a]}),m.splice(m.indexOf(a,r),1));for(i=0,r=0;i<h.length;i++)a=h[h.length-1-i],m[m.length-1-i]!==a&&(d.hasOwnProperty(a)?(n.push({command:tt.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-r),1)):r++,l=m[m.length-i],n.push({command:tt.addLayer,args:[f[a],l]}),m.splice(m.length-i,0,a),v[a]=!0);for(i=0;i<h.length;i++)if(o=d[a=h[i]],s=f[a],!v[a]&&!p(o,s))if(p(o.source,s.source)&&p(o["source-layer"],s["source-layer"])&&p(o.type,s.type)){for(u in ot(o.layout,s.layout,n,a,null,tt.setLayoutProperty),ot(o.paint,s.paint,n,a,null,tt.setPaintProperty),p(o.filter,s.filter)||n.push({command:tt.setFilter,args:[a,s.filter]}),p(o.minzoom,s.minzoom)&&p(o.maxzoom,s.maxzoom)||n.push({command:tt.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),o)o.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?ot(o[u],s[u],n,a,u.slice(6),tt.setPaintProperty):p(o[u],s[u])||n.push({command:tt.setLayerProperty,args:[a,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?ot(o[u],s[u],n,a,u.slice(6),tt.setPaintProperty):p(o[u],s[u])||n.push({command:tt.setLayerProperty,args:[a,u,s[u]]}))}else n.push({command:tt.removeLayer,args:[a]}),l=m[m.lastIndexOf(a)+1],n.push({command:tt.addLayer,args:[s,l]})}(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:tt.setStyle,args:[t]}]}return n}(this.serialize(),t).filter((function(e){return!(e.command in an)}));if(0===i.length)return!1;var r=i.filter((function(e){return!(e.command in rn)}));if(r.length>0)throw new Error("Unimplemented: ".concat(r.map((function(e){return e.command})).join(", "),"."));return i.forEach((function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)})),this.stylesheet=t,this._updateMapProjection(),!0}},{key:"addImage",value:function(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=Ze(t,n,this.dispatcher,this);a.setEventedParent(this,(function(){return{isSourceLoaded:i._isSourceCacheLoaded(t),source:a.serialize(),sourceId:t}}));var o=function(n){var r=(n?"symbol:":"other:")+t,o=i._sourceCaches[r]=new e.SourceCache(r,a,n);(n?i._symbolSourceCaches:i._otherSourceCaches)[t]=o,o.style=i,o.onAdd(i.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(i,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var r,a=this._getSourceCaches(t),o=d(a);try{for(o.s();!(r=o.n()).done;){var s=r.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(l){o.e(l)}finally{o.f()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"addLayer",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var r=t.id;if(this.getLayer(r))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(r,'" already exists on this map'))));else{var a;if("custom"===t.type){if(nn(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(r,t.source),t=e.clone$1(t),t=e.extend(t,{source:r})),this._validate(e.validateLayer,"layers.".concat(r),t,{arrayIndex:-1},i))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));else{this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=a;var s=this._getLayerSourceCache(a);if(this._removedLayers[r]&&a.source&&s&&"custom"!==a.type){var l=this._removedLayers[r];delete this._removedLayers[r],l.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var i=this._order.indexOf(t);this._order.splice(i,1);var r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(r,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null),this._updateLayerCount(n,!1);var i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(t,n,i){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var r=this.getLayer(t);if(r){if(!p(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(e.validateFilter,"layers.".concat(r.id,".filter"),n,{layerType:r.type},i)||(r.filter=e.clone$1(n),this._updateLayer(r)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){var n=this.getLayer(t);return n&&e.clone$1(n.filter)}},{key:"setLayoutProperty",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(t);a?p(a.getLayoutProperty(n),i)||(a.setLayoutProperty(n,i,r),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,n){var i=this.getLayer(t);if(i)return i.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(t);a?p(a.getPaintProperty(n),i)||(a.setPaintProperty(n,i,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){var n=this.getLayer(e);return n&&n.getPaintProperty(t)}},{key:"setFeatureState",value:function(t,n){this._checkLoaded();var i=t.source,r=t.sourceLayer,a=this.getSource(i);if(a){var o=a.type;if("geojson"===o&&r)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==o||r){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,l=this._getSourceCaches(i),u=d(l);try{for(u.s();!(s=u.n()).done;)s.value.setFeatureState(r,t.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,n){this._checkLoaded();var i=t.source,r=this.getSource(i);if(r){var a=r.type,o="vector"===a?t.sourceLayer:void 0;if("vector"!==a||o)if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,l=this._getSourceCaches(i),u=d(l);try{for(u.s();!(s=u.n()).done;)s.value.removeFeatureState(o,t.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var n=t.source,i=t.sourceLayer,r=this.getSource(n);if(r){if("vector"!==r.type||i)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var n in this._sourceCaches){var i=this._sourceCaches[n].getSource();t[i.id]||(t[i.id]=i.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},i={},r=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){i[o]=a;var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var u=s.value[o];if(u){var c,h=d(u);try{for(h.s();!(c=h.n()).done;){var p=c.value;r.push(p)}}catch(T){h.e(T)}finally{h.f()}}}}catch(T){l.e(T)}finally{l.f()}}}r.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var f=[],m=this._order.length-1;m>=0;m--){var v=this._order[m];if(n(v))for(var y=r.length-1;y>=0;y--){var g=r[y].feature;if(i[g.layer.id]<m)break;f.push(g),r.pop()}else{var _,x=d(e);try{for(x.s();!(_=x.n()).done;){var b=_.value[v];if(b){var w,k=d(b);try{for(k.s();!(w=k.n()).done;){var S=w.value;f.push(S.feature)}}catch(T){k.e(T)}finally{k.f()}}}}catch(T){x.e(T)}finally{x.f()}}}return f}},{key:"queryRenderedFeatures",value:function(t,n,i){var r=this;n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);var a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var o,s=d(n.layers);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=this._layers[l];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(l,"' does not exist in the map's style and cannot be queried for features.")))),[];a[u.source]=!0}}catch(v){s.e(v)}finally{s.f()}}var c=[];n.availableImages=this._availableImages;var h=n&&n.layers?n.layers.some((function(e){var t=r.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),p=H.createFromScreenPoints(t,i);for(var f in this._sourceCaches){var m=this._sourceCaches[f].getSource().id;n.layers&&!a[m]||c.push(Ge(this._sourceCaches[f],this._layers,this._serializedLayers,p,n,i,h,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,n,i,r,a,o){var s,l={},u=a.queryRenderedSymbols(i),c=[],h=d(Object.keys(u).map(Number));try{for(h.s();!(s=h.n()).done;){var p=s.value;c.push(o[p])}}catch(v){h.e(v)}finally{h.f()}c.sort(He);for(var f=function(){var n=y[m],i=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(var a in i){var o=l[a]=l[a]||[],s=i[a];s.sort((function(e,t){var i=n.featureSortOrder;if(i){var r=i.indexOf(e.featureIndex);return i.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));var c,h=d(s);try{for(h.s();!(c=h.n()).done;){var p=c.value;o.push(p)}}catch(v){h.e(v)}finally{h.f()}}},m=0,y=c;m<y.length;m++)f();var g=function(t){l[t].forEach((function(i){var r=i.feature,a=n(e[t]).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}))};for(var _ in l)g(_);return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),p.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);var i,r=this._getSourceCaches(t),a=[],o=d(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;a=a.concat(Ye(s,n))}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"addSourceType",value:function(e,t,n){return i.getSourceType(e)?n(new Error('A source type called "'.concat(e,'" already exists.'))):(i.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var i=this.light.getLight(),r=!1;for(var a in t)if(!p(t[a],i[a])){r=!0;break}if(r){var o={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(o)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===n){if("object"==typeof t.source){var i="terrain-dem-src";this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})}if(this._validate(e.validateTerrain,"terrain",t))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode)this._createTerrain(t,n);else{var r=this.terrain,a=r.get();for(var o in t)if(!p(t[o],a[o])){r.set(t),this.stylesheet.terrain=t;var s={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(s);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(t){var n=this.fog=new W(t,this.map.transform);this.stylesheet.fog=t;var i={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i)}},{key:"_updateMarkersOpacity",value:function(){var e=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var t,n=d(e.map._markers);try{for(n.s();!(t=n.n()).done;)t.value._evaluateOpacity()}catch(i){n.e(i)}finally{n.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var n=this.fog,i=n.get();for(var r in t)if(!p(t[r],i[r])){n.set(t),this.stylesheet.fog=t;var a={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(a);break}}else this._createFog(t);this._markersNeedUpdate=!0}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,n=this;if(this.map._optimizeForTerrain&&this.terrain){var i=this._order.filter((function(e){return n.isLayerDraped(n._layers[e])})),r=this._order.filter((function(e){return!n.isLayerDraped(n._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,c(i)),(t=this._drapedFirstOrder).push.apply(t,c(r))}}},{key:"_createTerrain",value:function(t,n){var i=this.terrain=new N(t,n);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();var r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&nn(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:i,styleSpec:e.spec},r)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),i=d(n);try{for(i.s();!(t=i.n()).done;)t.value.clearTiles()}catch(r){i.e(r)}finally{i.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),i=d(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.resume(),r.reload()}}catch(a){i.e(a)}finally{i.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,n,i,r){var a,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,u=!1,c={},h=d(this._order);try{for(h.s();!(a=h.n()).done;){var p=a.value,f=this._layers[p];if("symbol"===f.type){if(!c[f.source]){var m=function(){var e=o._getLayerSourceCache(f);if(!e)return"continue";c[f.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}();if("continue"===m)continue}var v=this.crossTileSymbolIndex.addLayer(f,c[f.source],t.center.lng,t.projection);l=l||v}}}catch(b){h.e(b)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Kt(t,this._order,s,n,i,r,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l){var y,g=d(this._order);try{for(g.s();!(y=g.n()).done;){var _=y.value,x=this._layers[_];"symbol"===x.type&&this.placement.updateLayerOpacities(x,c[x.source])}}catch(b){g.e(b)}finally{g.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var i=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};i(this._otherSourceCaches[t.source]),i(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(t,n,i){return e.makeRequest(n,i)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"_isSourceCacheLoaded",value:function(t){var n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):n.every((function(e){return e.loaded()}))}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),i}(e.Evented);ln.getSourceType=function(e){return Ve[e]},ln.setSourceType=function(e,t){Ve[e]=t},ln.registerForPluginStateChange=e.registerForPluginStateChange;var un="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",cn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",hn={},dn={};hn=vn("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),dn=vn("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);var pn=vn("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),fn=un,mn={background:vn("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:vn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:vn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\n#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)\nview_scale*=a_scale;\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:vn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:vn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nextrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:vn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:vn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:vn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:vn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:vn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:vn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:vn("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:vn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:vn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:vn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nvec4 out_color=texture2D(u_gradient_image,v_uv);\n#else\nvec4 out_color=color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#ifdef RENDER_LINE_GRADIENT\nattribute vec3 a_packed;\n#else\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:vn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:vn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:vn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);\n#else\nvec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);\n#endif\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:vn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);\n#else\nvec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);\n#endif\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:vn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);\n#else\nvec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);\n#endif\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:vn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:vn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:vn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",cn),skyboxGradient:vn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",cn),skyboxCapture:vn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:vn("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nvec4 globe=u_globe_matrix*vec4(globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}"),globeAtmosphere:vn("uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;varying highp vec3 v_ray_dir;void main() {highp vec3 dir=normalize(v_ray_dir);highp vec3 closest_point=abs(dot(u_globe_pos,dir))*dir;float norm_dist_from_center=length(closest_point-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 1.0)\ndiscard;float t=clamp(1.0-sqrt(norm_dist_from_center-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;varying highp vec3 v_ray_dir;void main() {v_ray_dir=mix(mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);gl_Position=vec4(a_pos,1.0);}")};function vn(e,t,n){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,a=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),o=e.match(r),s=t.match(r),l=un.match(r),u=s?s.concat(o):o;n||(hn.staticUniforms&&(u=hn.staticUniforms.concat(u)),dn.staticUniforms&&(u=dn.staticUniforms.concat(u))),u&&(u=u.concat(l));var c={};return{fragmentSource:e=e.replace(i,(function(e,t,n,i,r){return c[r]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")})),vertexSource:t=t.replace(i,(function(e,t,n,i,r){var a="float"===i?"vec2":"vec4",o=r.match(/color/)?"color":a;return c[r]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(r,";\nvarying ").concat(n," ").concat(i," ").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = unpack_mix_").concat(o,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(r,";\n#else\nuniform ").concat(n," ").concat(i," u_").concat(r,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = a_").concat(r,";\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(n," ").concat(i," ").concat(r," = unpack_mix_").concat(o,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(n," ").concat(i," ").concat(r," = u_").concat(r,";\n#endif\n")})),staticAttributes:a,staticUniforms:u}}var yn=function(){function e(){v(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return y(e,[{key:"bind",value:function(e,t,n,i,r,a,o,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==i.length,u=0;!l&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(t,n,i,r,a,o,s)}},{key:"freshBind",value:function(e,t,n,i,r,a,o){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}t.enableAttributes(c,e);var p,f=d(n);try{for(f.s();!(p=f.n()).done;)p.value.enableAttributes(c,e)}catch(g){f.e(g)}finally{f.f()}a&&a.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);var m,v=d(n);try{for(v.s();!(m=v.n()).done;){var y=m.value;y.bind(),y.setVertexAttribPointers(c,e,r)}}catch(g){v.e(g)}finally{v.f()}a&&(a.bind(),a.setVertexAttribPointers(c,e,r)),i&&i.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,r)),u.currentNumAttributes=l}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function gn(t,n){var i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new e.MercatorCoordinate(0,r/i).toLngLat().lat,new e.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}function _n(t,n,i,r,a,o,s){var l=t.context,u=l.gl,c=i.fbo;if(c){t.prepareDrawTile();var h=t.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var d=function(e,t,n,i){var r=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l=!e.options.moving;return{u_matrix:i||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:gn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:a,u_accent:o}}(t,i,r,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,h,n.toUnwrapped());var p=t.getTileBoundsBuffers(i),f=p.tileBoundsBuffer,m=p.tileBoundsIndexBuffer,v=p.tileBoundsSegments;h.draw(l,u.TRIANGLES,a,o,s,e.CullFaceMode.disabled,d,r.id,f,m,v)}}function xn(t,n,i){if(n.needsDEMTextureUpload){var r=t.context,a=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(i.stride);var o=i.getPixels();n.demTexture?n.demTexture.update(o,{premultiply:!1}):n.demTexture=new e.Texture(r,o,a.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}}function bn(t,n,i,r,a,o){var s=t.context,l=s.gl;if(n.dem){var u=n.dem;if(s.activeTexture.set(l.TEXTURE1),xn(t,n,u),n.demTexture){n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);var c=u.dim;s.activeTexture.set(l.TEXTURE0);var h=n.fbo;if(!h){var d=new e.Texture(s,{width:c,height:c,data:null},l.RGBA);d.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=n.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(d.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,c,c]);var p=t.getMercatorTileBoundsBuffers(),f=p.tileBoundsBuffer,m=p.tileBoundsIndexBuffer,v=p.tileBoundsSegments;t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,a,o,e.CullFaceMode.disabled,function(t,n){var i=n.stride,r=e.create();return e.ortho(r,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(r,r,[0,-e.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}}(n.tileID,u),i.id,f,m,v),n.needsHillshadePrepare=!1}}}var wn=function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image0:new e.Uniform1i(t,n.u_image0),u_skirt_height:new e.Uniform1f(t,n.u_skirt_height)}},kn=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Sn=function(e,t,n,i,r,a){return{u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_merc_matrix:n,u_zoom_transition:i,u_merc_center:r,u_image0:0,u_grid_matrix:a?Float32Array.from(a):new Float32Array(9)}};function Tn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}var Cn=new(function(){function e(){v(this,e),this.operations={}}return y(e,[{key:"newMorphing",value:function(e,t,n,i,r){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==n.tileID.key&&(a.queued=n)}else this.operations[e]={startTime:i,phase:0,duration:r,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),En={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Mn(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var Pn=function(e){return{u_matrix:e}};function An(t,n,i,r,a){if(a>0){var o=e.exported.now(),s=(o-t.timeAdded)/a,l=n?(o-n.timeAdded)/a:-1,u=i.getSource(),c=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),d=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var Dn=2*e.mercatorZfromAltitude(1,0)*e.GLOBE_RADIUS*Math.PI,In=function(e){f(n,e);var t=m(n);function n(e){var i;v(this,n);var a={type:"raster-dem",maxzoom:e.transform.maxZoom},o=new G(Qe(),null),s=Ze("mock-dem",a,o,e.style);return i=t.call(this,"mock-dem",s,!1),s.setEventedParent(r(i)),i._sourceLoaded=!0,i}return y(n,[{key:"_loadTile",value:function(e,t){e.state="loaded",t(null)}}]),n}(e.SourceCache),Ln=function(t){f(i,t);var n=m(i);function i(e){var t;v(this,i);var a=Ze("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new G(Qe(),null),e.style);return t=n.call(this,"proxy",a,!1),a.setEventedParent(r(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return y(i,[{key:"update",value:function(t,n,i){var r=this;if(!t.freezeTileCoverage){this.transform=t;var a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(n,i){if(n[i.key]="",!r._tiles[i.key]){var a=new e.Tile(i,r._source.tileSize*i.overscaleFactor(),t.tileZoom);a.state="loaded",r._tiles[i.key]=a}return n}),{});for(var o in this._tiles)o in a||(this.freeFBO(o),this._tiles[o].unloadVectorData(),delete this._tiles[o])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var n,i=Object.values(t);(n=this.renderCachePool).push.apply(n,c(i)),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),i}(e.SourceCache),On=function(e){f(n,e);var t=m(n);function n(e,i,r){var a;return v(this,n),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=i,a.projMatrix=r,a}return y(n)}(e.OverscaledTileID),zn=function(t){f(i,t);var n=m(i);function i(t,r){var a;v(this,i),(a=n.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var o=function(t){var n=new e.StructArrayLayout4i8,i=new e.StructArrayLayout3ui6,r=131;n.reserve(17161),i.reserve(33800);for(var a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a,l=-a;l<s;l+=a)for(var u=-a;u<s;u+=a){var c=u<0||u>o||l<0||l>o?24575:0,h=e.clamp(Math.round(u),0,e.EXTENT),d=e.clamp(Math.round(l),0,e.EXTENT);n.emplaceBack(h+c,d,h,d)}for(var p=function(e,t){var n=t*r+e;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)},f=1;f<129;f++)for(var m=1;m<129;m++)p(m,f);return[0,129].forEach((function(e){for(var t=0;t<130;t++)p(t,e),p(e,t)})),[n,i,32768]}(),s=h(o,3),l=s[0],u=s[1],c=s[2],d=t.context;a.gridBuffer=d.createVertexBuffer(l,e.boundsAttributes.members),a.gridIndexBuffer=d.createIndexBuffer(u),a.gridSegments=e.SegmentVector.simpleSegment(0,0,l.length,u.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,l.length,c),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._drapedRenderBatches=[],a._sourceTilesOverlap={},a.proxySourceCache=new Ln(r.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);var p=d.gl;return a._overlapStencilMode=new e.StencilMode({func:p.GEQUAL,mask:255},0,255,p.KEEP,p.KEEP,p.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=r,a._useVertexMorphing=!0,a._exaggeration=1,a._mockSourceCache=new In(r.map),a}return y(i,[{key:"style",set:function(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}},{key:"update",value:function(t,n,i){var r=this;if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;var a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");var o=function(){r.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(r.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var t=r.getScaledDemTileSize();r.sourceCache.update(n,t,!0),r.resetTileLookupCache(r.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!i),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(e){this._findCoveringTileCache[e]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(t){var n=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var i=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);var a=this.proxyCoords=i.getIds().map((function(e){var t=i.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){var i=n.transform.pointCoordinate(n.transform.getCameraPoint()),r=new e.pointGeometry(i.x,i.y);t.sort((function(t,n){if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;var i=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),o=r.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(i)-o.distSqr(a)}))}(a,this.painter),this._previousZoom=r.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){n.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var l in s){var u=s[l];if(u.used&&(u!==this.sourceCache&&this.resetTileLookupCache(u.id),this._setupProxiedCoordsForOrtho(u,t[l],o),!u.usedForTerrain)){var c=t[l];u.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[i.id]=a.map((function(e){return new On(e,e.key,n.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();var h={};this._visibleDemTiles=[];var p,f=d(this.proxyCoords);try{for(f.s();!(p=f.n()).done;){var m=p.value,v=this.terrainTileForTile[m.key];if(v){var y=v.tileID.key;y in h||(this._visibleDemTiles.push(v),h[y]=y)}}}catch(g){f.e(g)}finally{f.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),xn(this.painter,i,r))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,i){if(!t||null==t.demTexture)return!1;var r=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-r.z),o=i||"";return n["u_dem_tl".concat(o)]=[r.x*a%1,r.y*a%1],n["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){var i=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var i=n.dem.tree.minimums[0];return i>0&&e++,t+i}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);var i=this._getLoadedAreaMinimum(),r=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(i,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;var a=this._emptyDEMTexture;return a?a.update(r,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1}),a}},{key:"setupElevationDraw",value:function(t,n,i){var r,a=this.painter.context,o=a.gl,s=(r=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(r),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var l=this.painter.transform,u=l.projection,c=t.tileID.canonical;s.u_tile_tl_up=u.upVector(c,0,0),s.u_tile_tr_up=u.upVector(c,e.EXTENT,0),s.u_tile_br_up=u.upVector(c,e.EXTENT,e.EXTENT),s.u_tile_bl_up=u.upVector(c,0,e.EXTENT),s.u_tile_up_scale=i&&i.useDenormalizedUpVectorScale?Dn:u.upVectorScale(c,l.center.lat,l.worldSize).metersToTile;var h=null,d=null,p=1;if(i&&i.morphing&&this._useVertexMorphing){var f=i.morphing.srcDemTile,m=i.morphing.dstDemTile;p=i.morphing.phase,f&&m&&(this._prepareDemTileUniforms(t,f,s,"_prev")&&(d=f),this._prepareDemTileUniforms(t,m,s)&&(h=m))}if(d&&h?(a.activeTexture.set(o.TEXTURE2),h.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.activeTexture.set(o.TEXTURE4),d.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=p):(h=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,h,s)?h.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),a.activeTexture.set(o.TEXTURE3),i&&i.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),i&&i.useMeterToDem&&h){var v=(1<<h.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=v}i&&i.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(a,s)}},{key:"renderToBackBuffer",value:function(t){var n=this.painter,i=this.painter.context;0!==t.length&&(i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),this.renderingToTexture=!1,function(t,n,i,r,a){if("globe"===t.transform.projection.name)!function(t,n,i,r,a){var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,p=function(e,n){if(s!==e){var i=[En[e],"PROJECTION_GLOBE_VIEW"];n&&i.push(En[c]),o=t.useProgram("globeRaster",null,i),s=e}},f=t.colorModeForRenderPass(),m=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Cn.update(a);var v=t.transform,y=e.calculateGlobeMercatorMatrix(v),g=[e.mercatorXfromLng(v.center.lng),e.mercatorYfromLat(v.center.lat)],_=t.globeSharedBuffers;if((c?[!1,!0]:[!1]).forEach((function(c){s=-1;var x,b=c?u.LINES:u.TRIANGLES,w=d(r);try{for(w.s();!(x=w.n()).done;){var k=x.value,S=i.getTile(k),T=e.StencilMode.disabled,C=n.prevTerrainTileForTile[k.key],E=n.terrainTileForTile[k.key];Tn(C,E)&&Cn.newMorphing(k.key,C,E,a,250),l.activeTexture.set(u.TEXTURE0),S.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var M=Cn.getMorphValuesForProxy(k.key),P=M?1:0,A={useDenormalizedUpVectorScale:!0};M&&e.extend$1(A,{morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:e.easeCubicInOut(M.phase)}});var D=Float32Array.from(v.globeMatrix),I=e.globeTileLatLngCorners(k.canonical),L=e.getGridMatrix(k.canonical,I),O=Sn(v.projMatrix,D,y,e.globeToMercatorTransition(v.zoom),g,L);if(p(P,c),n.setupElevationDraw(S,o,A),t.prepareDrawProgram(l,o,k.toUnwrapped()),_){var z=c?_.getWirefameBuffers(t.context):_.getGridBuffers(),R=h(z,3),B=R[0],F=R[1],N=R[2];o.draw(l,b,m,T,f,e.CullFaceMode.backCCW,O,"globe_raster",B,F,N)}}}catch(j){w.e(j)}finally{w.f()}})),_){o=t.useProgram("globeRaster",null,["GLOBE_POLES","PROJECTION_GLOBE_VIEW"]);var x,b=d(r);try{var w=function(){var r=x.value,a=r.canonical,s=a.x,c=a.y,d=a.z,p=0===c,y=c===(1<<d)-1,b=_.getPoleBuffers(d),w=h(b,4),k=w[0],S=w[1],T=w[2],C=w[3];if(C&&(p||y)){var E=i.getTile(r);l.activeTexture.set(u.TEXTURE0),E.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var M=e.globePoleMatrixForTile(d,s,v),P=function(t,n){return t.draw(l,u.TRIANGLES,m,e.StencilMode.disabled,f,e.CullFaceMode.disabled,Sn(v.projMatrix,M,M,0,g),"globe_pole_raster",n,T,C)};n.setupElevationDraw(E,o,{}),t.prepareDrawProgram(l,o,r.toUnwrapped()),p&&P(o,k),y&&(M=e.scale(e.create(),M,[1,-1,1]),P(o,S))}};for(b.s();!(x=b.n()).done;)w()}catch(k){b.e(k)}finally{b.f()}}}(t,n,i,r,a);else{var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,p=function(e,n){if(s!==e){var i=[En[e]];n&&i.push(En[c]),o=t.useProgram("terrainRaster",null,i),s=e}},f=t.colorModeForRenderPass(),m=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Cn.update(a);var v=t.transform,y=6*Math.pow(1.5,22-v.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((function(c){s=-1;var g,_=c?u.LINES:u.TRIANGLES,x=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments],b=h(x,2),w=b[0],k=b[1],S=d(r);try{for(S.s();!(g=S.n()).done;){var T=g.value,C=i.getTile(T),E=e.StencilMode.disabled,M=n.prevTerrainTileForTile[T.key],P=n.terrainTileForTile[T.key];Tn(M,P)&&Cn.newMorphing(T.key,M,P,a,250),l.activeTexture.set(u.TEXTURE0),C.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var A=Cn.getMorphValuesForProxy(T.key),D=A?1:0,I=void 0;A&&(I={morphing:{srcDemTile:A.from,dstDemTile:A.to,phase:e.easeCubicInOut(A.phase)}});var L=kn(T.projMatrix,Mn(T.canonical,v.renderWorldCopies)?y/10:y);p(D,c),n.setupElevationDraw(C,o,I),t.prepareDrawProgram(l,o,T.toUnwrapped()),o.draw(l,_,m,E,f,e.CullFaceMode.backCCW,L,"terrain_raster",n.gridBuffer,w,k)}}catch(O){S.e(O)}finally{S.f()}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,t.splice(0,t.length))}},{key:"renderBatch",value:function(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;var n,i=this.painter,r=this.painter.context,a=this.proxySourceCache,o=this.proxiedCoords[a.id],s=this._drapedRenderBatches.shift(),l=[],u=i.style.order,c=0,h=d(o);try{for(h.s();!(n=h.n()).done;){var p=n.value,f=a.getTileByID(p.proxyTileKey),m=a.proxyCachedFBO[p.key]?a.proxyCachedFBO[p.key][t]:void 0,v=void 0!==m?a.renderCache[m]:this.pool[c++],y=void 0!==m;if(f.texture=v.tex,!y||v.dirty){var g=void 0;r.bindFramebuffer.set(v.fb.framebuffer),this.renderedToTile=!1,v.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),v.dirty=!1);for(var _=s.start;_<=s.end;++_){var x=i.style._layers[u[_]];if(!x.isHidden(i.transform.zoom)){var b=i.style._getLayerSourceCache(x),w=b?this.proxyToSource[p.key][b.id]:[p];if(w){var k=w;r.viewport.set([0,0,v.fb.width,v.fb.height]),g!==(b?b.id:null)&&(this._setupStencil(v,w,x,b),g=b?b.id:null),i.renderLayer(i,b,x,k)}}}this.renderedToTile?(v.dirty=!0,l.push(f.tileID)):y||--c,5===c&&(c=0,this.renderToBackBuffer(l))}else l.push(f.tileID)}}catch(S){h.e(S)}finally{h.f()}return this.renderToBackBuffer(l),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,i.width,i.height]),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var n,i=0,r=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++i,++r):a||(a=!0,n=s.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var i=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(i){var r=i.tileID,a=Math.pow(2,r.overscaledZ),o=r.canonical,s=o.x,l=o.y,u=s/a,c=(s+1)/a,h=l/a,d=(l+1)/a;return{minx:u,miny:h,maxx:c,maxy:d,t:i.dem.tree.raycastRoot(u,h,c,d,e,t,n),tile:i}}));i.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var r,a=d(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,n);if(null!=s)return s}}catch(l){a.e(l)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,n=t.gl,i=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);var r=new e.Texture(t,{width:i[0],height:i[1],data:null},n.RGBA);r.bind(n.LINEAR,n.CLAMP_TO_EDGE);var a=t.createFramebuffer(i[0],i[1],!1);return a.colorAttachment.set(r.texture),a.depthAttachment=new Re(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:r,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((function(t){var n=e._style._layers[t],i=n.isHidden(e.painter.transform.zoom),r=n.getCrossfadeParameters(),a=!!r&&1!==r.t,o=n.hasTransition();return"custom"!==n.type&&!i&&(a||o)}))}},{key:"_clearRasterFadeFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Ne){e=!0;break}if(e)for(var n=0;n<this._style.order.length;++n){var i=this._style._layers[this._style.order[n]],r=i.isHidden(this.painter.transform.zoom),a=this._style._getLayerSourceCache(i);if("raster"===i.type&&!r&&a){var o,s=i.paint.get("raster-fade-duration"),l=d(this.proxyCoords);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=this.proxyToSource[u.key][a.id];if(c){var h,p=d(c);try{for(p.s();!(h=p.n()).done;){var f=h.value,m=An(a.getTile(f),a.findLoadedParent(f,0),a,this.painter.transform,s);(1!==m.opacity||0!==m.mix)&&this._clearRenderCacheForTile(a.id,f)}}catch(v){p.e(v)}finally{p.f()}}}}catch(v){l.e(v)}finally{l.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var n,i=[],r=0,a=this._style._layers[e[r]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++r<t;)a=this._style._layers[e[r]];for(;r<t;++r){var o=this._style._layers[e[r]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===n&&(n=r):void 0!==n&&(i.push({start:n,end:r-1}),n=void 0))}void 0!==n&&i.push({start:n,end:r-1}),this._drapedRenderBatches=i}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var i=0;i<n.length;++i){var r,a=Object.values(n[i]);(r=t.renderCachePool).push.apply(r,c(a))}}}else{this._clearRasterFadeFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,l=o.length-1;l>=0;l--){var u=o[l];if(t.getTileByID(u.key),void 0!==t.proxyCachedFBO[u.key]){var h=e[u.key],p=this.proxyToSource[u.key],f=0,m=function(e){var t=p[e],n=h[e];if(!n||n.length!==t.length||t.some((function(t,i){return t!==n[i]||s[e]&&s[e].hasOwnProperty(t.key)})))return f=-1,"break";++f};for(var v in p)if("break"===m(v))break;for(var y in t.proxyCachedFBO[u.key])t.renderCache[t.proxyCachedFBO[u.key][y]].dirty=f<0||f!==Object.values(h).length}}var g=c(this._drapedRenderBatches);g.sort((function(e,t){return t.end-t.start-(e.end-e.start)}));var _,x=d(g);try{for(x.s();!(_=x.n()).done;){var b,w=_.value,k=d(o);try{for(k.s();!(b=k.n()).done;){var S=b.value;if(!t.proxyCachedFBO[S.key]){var T=t.renderCachePool.pop();void 0===T&&t.renderCache.length<50&&(T=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==T&&(t.proxyCachedFBO[S.key]={},t.proxyCachedFBO[S.key][w.start]=T,t.renderCache[T].dirty=!0)}}}catch(C){k.e(C)}finally{k.f()}}}catch(C){x.e(C)}finally{x.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,n,i){if(i&&this._sourceTilesOverlap[i.id]){var r=this.painter.context,a=r.gl;if(t.length<=1)this._overlapStencilType=!1;else{var o;if(n.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs.get(t.key)||0),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,n){var i=this.painter,r=this.painter.context,a=r.gl;i._tileClippingMaskIDs.clear(),r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);var o,s=i.useProgram("clippingMask"),l=d(t);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=--n;i._tileClippingMaskIDs.set(u.key,c),s.draw(r,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},c,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Pn(u.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}catch(h){l.e(h)}finally{l.f()}}},{key:"pointCoordinate",value:function(t){var n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;var i=[t.x,t.y,1,1];e.transformMat4$1(i,i,n.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;var r=n._camera.position,a=e.mercatorZfromAltitude(1,n.center.lat),o=[r[0],r[1],r[2]/a,0],s=e.subtract([],i.slice(0,3),o);e.normalize(s,s);var l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=a,o):null}},{key:"drawDepth",value:function(){var t=this.painter,n=t.context,i=this.proxySourceCache,r=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){var o=n.gl,s=n.createFramebuffer(r,a,!0);n.activeTexture.set(o.TEXTURE0);var l=new e.Texture(n,{width:r,height:a,data:null},o.RGBA);l.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.colorAttachment.set(l.texture);var u=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,r,a);s.depthAttachment.set(u),this._depthFBO=s,this._depthTexture=l}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,r,a]),function(t,n,i,r){if("globe"!==t.transform.projection.name){var a=t.context,o=a.gl;a.clear({depth:1});var s,l=t.useProgram("terrainDepth"),u=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),c=d(r);try{for(c.s();!(s=c.n()).done;){var h=s.value,p=i.getTile(h),f=kn(h.projMatrix,0);n.setupElevationDraw(p,l),l.draw(a,o.TRIANGLES,u,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,f,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}catch(m){c.e(m)}finally{c.f()}}}(t,this,i,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof Ue)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var i=this.proxiedCoords[e.id]=[],r=this.proxyCoords,a=0;a<r.length;a++){var o=r[a],s=this._findTileCoveringTileID(o,e);if(s){var l=this._createProxiedId(o,s,n[o.key]&&n[o.key][e.id]);i.push(l),this.proxyToSource[o.key][e.id]=[l]}}for(var u=!1,c=0;c<t.length;c++){var h=e.getTile(t[c]);if(h&&h.hasData()){var d=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(d&&d.tileID.canonical.z!==h.tileID.canonical.z){var p=this.proxyToSource[d.tileID.key][e.id],f=this._createProxiedId(d.tileID,h,n[d.tileID.key]&&n[d.tileID.key][e.id]);p?p.splice(p.length-1,0,f):this.proxyToSource[d.tileID.key][e.id]=[f],i.push(f),u=!0}}}this._sourceTilesOverlap[e.id]=u}},{key:"_setupProxiedCoordsForImageSource",value:function(t,n,i){if(t.getSource().loaded())for(var r=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.pointGeometry(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e}),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=function(t,n){var i=t.wrap+t.canonical.x/(1<<t.canonical.z),r=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return i+a<o+l.min.x||i>o+l.max.x||r+a<s+l.min.y||r>s+l.max.y},c=0;c<a.length;c++)for(var h=a[c],d=0;d<n.length;d++){var p=t.getTile(n[d]);if(p&&p.hasData()&&!u(h,p.tileID)){var f=this._createProxiedId(h,p,i[h.key]&&i[h.key][t.id]),m=this.proxyToSource[h.key][t.id];m?m.push(f):this.proxyToSource[h.key][t.id]=[f],r.push(f)}}}},{key:"_createProxiedId",value:function(t,n,i){var r=this.orthoMatrix;if(i){var a=i.find((function(e){return e.key===n.tileID.key}));if(a)return a}if(n.tileID.key!==t.key){var o,s,l,u=t.canonical.z-n.tileID.canonical.z;r=e.create();var c=n.tileID.wrap-t.wrap<<t.overscaledZ;u>0?(s=(o=e.EXTENT>>u)*((n.tileID.canonical.x<<u)-t.canonical.x+c),l=o*((n.tileID.canonical.y<<u)-t.canonical.y)):(o=e.EXTENT<<-u,s=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+c<<-u)),l=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-u))),e.ortho(r,0,o,0,o,0,1),e.translate(r,r,[s,l,0])}return new On(n.tileID,t.key,r)}},{key:"_findTileCoveringTileID",value:function(t,n){var i=n.getTile(t);if(i&&i.hasData())return i;var r=this._findCoveringTileCache[n.id],a=r[t.key];if((i=a?n.getTileByID(a):null)&&i.hasData()||null===a)return i;var o=i?i.tileID:t,s=o.overscaledZ,l=n.getSource().minzoom,u=[];if(!a){var c=n.getSource().maxzoom;if(t.canonical.z>=c){var h=t.canonical.z-c;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h)):0!==h&&(s=c,o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h))}o.key!==t.key&&(u.push(o.key),i=n.getTile(o))}var d=function(e){u.forEach((function(t){r[t]=e})),u.length=0};for(s-=1;s>=l&&(!i||!i.hasData());s--){i&&d(i.tileID.key);var p=o.calculateScaledKey(s);if((i=n.getTileByID(p))&&i.hasData())break;var f=r[p];if(null===f)break;void 0===f?u.push(p):i=n.getTileByID(f)}return d(i?i.tileID.key:null),i&&i.hasData()?i:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var t=function(t){for(var n=0,i=new e.StructArrayLayout2ui4,r=131,a=1;a<129;a++){for(var o=1;o<129;o++)n=a*r+o,i.emplaceBack(n,n+1),i.emplaceBack(n,n+r),i.emplaceBack(n+1,n+r),128===a&&i.emplaceBack(n+r,n+r+1);i.emplaceBack(n+1,n+1+r)}return i}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),i}(e.Elevation);function Rn(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var i=e[n].split(" ");t.push(i.pop())}return t}var Bn=function(){function t(n,i,r,a,o,s){v(this,t);var l=n.gl;this.program=l.createProgram();var u,c=Rn(r.staticAttributes),h=a?a.getBinderAttributes():[],p=c.concat(h),f=r.staticUniforms?Rn(r.staticUniforms):[],m=a?a.getBinderUniforms():[],y=f.concat(m),g=[],_=d(y);try{for(_.s();!(u=_.n()).done;){var x=u.value;g.indexOf(x)<0&&g.push(x)}}catch(D){_.e(D)}finally{_.f()}var b=a?a.defines():[];b=b.concat(s.map((function(e){return"#define ".concat(e)})));var w=b.concat("\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",fn,pn.fragmentSource,dn.fragmentSource,r.fragmentSource).join("\n"),k=b.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",fn,pn.vertexSource,dn.vertexSource,hn.vertexSource,r.vertexSource).join("\n"),S=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(S,w),l.compileShader(S),l.attachShader(this.program,S);var T=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(T,k),l.compileShader(T),l.attachShader(this.program,T),this.attributes={};var C={};this.numAttributes=p.length;for(var E=0;E<this.numAttributes;E++)p[E]&&(l.bindAttribLocation(this.program,E,p[E]),this.attributes[p[E]]=E);l.linkProgram(this.program),l.deleteShader(T),l.deleteShader(S);for(var M=0;M<g.length;M++){var P=g[M];if(P&&!C[P]){var A=l.getUniformLocation(this.program,P);A&&(C[P]=A)}}this.fixedUniforms=o(n,C),this.binderUniforms=a?a.getUniforms(n,C):[],-1!==s.indexOf("TERRAIN")&&(this.terrainUniforms=function(t,n){return{u_dem:new e.Uniform1i(t,n.u_dem),u_dem_prev:new e.Uniform1i(t,n.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,n.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,n.u_dem_tl),u_dem_scale:new e.Uniform1f(t,n.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,n.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,n.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,n.u_dem_size),u_dem_lerp:new e.Uniform1f(t,n.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,n.u_exaggeration),u_depth:new e.Uniform1i(t,n.u_depth),u_depth_size_inv:new e.Uniform2f(t,n.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,n.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,n.u_label_plane_matrix_inv),u_tile_tl_up:new e.Uniform3f(t,n.u_tile_tl_up),u_tile_tr_up:new e.Uniform3f(t,n.u_tile_tr_up),u_tile_br_up:new e.Uniform3f(t,n.u_tile_br_up),u_tile_bl_up:new e.Uniform3f(t,n.u_tile_bl_up),u_tile_up_scale:new e.Uniform1f(t,n.u_tile_up_scale)}}(n,C)),-1!==s.indexOf("FOG")&&(this.fogUniforms=function(t,n){return{u_fog_matrix:new e.UniformMatrix4f(t,n.u_fog_matrix),u_fog_range:new e.Uniform2f(t,n.u_fog_range),u_fog_color:new e.Uniform4f(t,n.u_fog_color),u_fog_horizon_blend:new e.Uniform1f(t,n.u_fog_horizon_blend),u_fog_temporal_offset:new e.Uniform1f(t,n.u_fog_temporal_offset)}}(n,C))}}}return y(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var i in e.program.set(this.program),t)n[i].set(t[i])}}},{key:"setFogUniformValues",value:function(e,t){if(this.fogUniforms){var n=this.fogUniforms;if(!this.failedToCreate)for(var i in e.program.set(this.program),t)n[i].location&&n[i].set(t[i])}}},{key:"draw",value:function(e,t,n,r,a,o,s,l,u,c,h,p,f,m,v,y){var g,_=e.gl;if(!this.failedToCreate){e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(a),e.setCullFace(o);for(var x=0,b=Object.keys(this.fixedUniforms);x<b.length;x++){var w=b[x];this.fixedUniforms[w].set(s[w])}m&&m.setUniforms(e,this.binderUniforms,p,{zoom:f});var k,S=(g={},i(g,_.LINES,2),i(g,_.TRIANGLES,3),i(g,_.LINE_STRIP,1),g)[t],T=d(h.get());try{for(T.s();!(k=T.n()).done;){var C=k.value,E=C.vaos||(C.vaos={});(E[l]||(E[l]=new yn)).bind(e,this,u,m?m.getPaintVertexBuffers():[],c,C.vertexOffset,v,y),_.drawElements(t,C.primitiveLength*S,_.UNSIGNED_SHORT,C.primitiveOffset*S*2)}}catch(M){T.e(M)}finally{T.f()}}}}],[{key:"cacheKey",value:function(e,t,n){var i,r="".concat(e).concat(n?n.cacheKey:""),a=d(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;r+="/".concat(o)}}catch(s){a.e(s)}finally{a.f()}return r}}]),t}();function Fn(e,t,n){var i=1/Y(n,1,t.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,t.transform.tileZoom)/r,o=a*(n.tileID.canonical.x+n.tileID.wrap*r),s=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var Nn=e.create(),jn=function(t,n,i,r,a,o,s,l,u){var c=n.style.light,h=c.properties.get("position"),d=[h.x,h.y,h.z],p=e.create$1();"viewport"===c.properties.get("anchor")&&(e.fromRotation(p,-n.transform.angle),e.transformMat3(d,d,p));var f=c.properties.get("color"),m=n.transform,v={u_matrix:t,u_lightpos:d,u_lightintensity:c.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+i,u_opacity:r,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Nn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return"globe"===m.projection.name&&(v.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],v.u_zoom_transition=s,v.u_inv_rot_matrix=u,v.u_merc_center=l,v.u_up_dir=m.projection.upVector(new e.CanonicalTileID(0,0,0),l[0]*e.EXTENT,l[1]*e.EXTENT),v.u_height_lift=o),v},Un=function(t,n,i,r,a,o,s,l,u,c,h){var d=jn(t,n,i,r,a,l,u,c,h),p={u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8};return e.extend(d,Fn(o,n,s),p)},Vn=function(e){return{u_matrix:e}},Zn=function(t,n,i,r){return e.extend(Vn(t),Fn(i,n,r))},Wn=function(e,t){return{u_matrix:e,u_world:t}},Gn=function(t,n,i,r,a){return e.extend(Zn(t,n,i,r),{u_world:a})},Yn=e.create(),Hn=function(t,n,i,r,a,o){var s,l=t.transform,u="globe"===l.projection.name;if("map"===o.paint.get("circle-pitch-alignment"))if(u){var c=e.globePixelsToTileUnits(l.zoom,n.canonical);s=Float32Array.from([c,0,0,c])}else s=l.calculatePixelsToTileUnitsMatrix(i);else s=new Float32Array([l.pixelsToGLUnits[0],0,0,l.pixelsToGLUnits[1]]);var h={u_camera_to_center_distance:l.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:s,u_inv_rot_matrix:Yn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return u&&(h.u_inv_rot_matrix=r,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom),h.u_up_dir=l.projection.upVector(n.canonical,a[0],a[1])),h},Xn=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},qn=function(t,n,i){var r=e.EXTENT/i.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/r,n.pixelsToGLUnits[1]/r]}},Kn=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},$n=e.create(),Qn=function(t,n,i,r,a,o,s){var l=t.transform,u="globe"===l.projection.name,c=u?e.globePixelsToTileUnits(l.zoom,n.canonical):Y(i,1,o),h={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:s,u_inv_rot_matrix:$n,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return u&&(h.u_inv_rot_matrix=r,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom),h.u_up_dir=l.projection.upVector(n.canonical,a[0],a[1])),h},Jn=function(e,t,n,i,r,a,o){var s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t),u={u_matrix:ni(e,t,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(ii(n)){var c=ti(t,e.transform);u.u_texsize=t.lineAtlasTexture.size,u.u_scale=[c,i.fromScale,i.toScale],u.u_mix=i.t}return u},ei=function(e,t,n,i,r,a){var o=e.transform,s=ti(t,o);return{u_matrix:ni(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:a,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ti(e,t){return 1/Y(e,1,t.tileZoom)}function ni(e,t,n,i){return e.translatePosMatrix(i||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function ii(e){var t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}var ri=function(e,t,n,i,r,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:ai(r.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function ai(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var oi,si=e.create(),li=function(t,n,i,r,a,o,s,l,u,c,h,d,p,f){var m=a.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:m.cameraToCenterDistance,u_rotate_symbol:+i,u_aspect_ratio:m.width/m.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+r,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:si,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:si};return"globe"===m.projection.name&&(v.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],v.u_zoom_transition=d,v.u_inv_rot_matrix=f,v.u_merc_center=p,v.u_camera_forward=m._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(m.globeMatrix,h.toUnwrapped()),v.u_tile_matrix=Float32Array.from(m.globeMatrix)),v},ui=function(t,n,i,r,a,o,s,l,u,c,h,d,p,f,m){var v=a.transform,y=v.cameraToCenterDistance,g=v._pitch;return e.extend(li(t,n,i,r,a,o,s,l,u,c,d,p,f,m),{u_gamma_scale:r?y*Math.cos(a.terrain?0:g):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},ci=function(t,n,i,r,a,o,s,l,u,c,h,d,p,f){return e.extend(ui(t,n,i,r,a,o,s,l,!0,u,!0,h,d,p,f),{u_texsize_icon:c,u_texture_icon:1})},hi=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},di=function(t,n,i,r,a,o){return e.extend(function(e,t,n,i){var r=n.imageManager.getPattern(e.from.toString()),a=n.imageManager.getPattern(e.to.toString()),o=n.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/u,h=c*(i.tileID.canonical.x+i.tileID.wrap*u),d=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Y(i,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(r,o,i,a),{u_matrix:t,u_opacity:n})},pi={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_up_dir:new e.Uniform3f(t,n.u_up_dir),u_height_lift:new e.Uniform1f(t,n.u_height_lift)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_up_dir:new e.Uniform3f(t,n.u_up_dir),u_height_lift:new e.Uniform1f(t,n.u_height_lift),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.UniformMatrix2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_up_dir:new e.Uniform3f(t,n.u_up_dir)}},collisionBox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale)}},collisionCircle:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}},debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_up_dir:new e.Uniform3f(t,n.u_up_dir)}},heatmapTexture:function(t,n){return{u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_pixels_to_tile_units:new e.UniformMatrix2f(t,n.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_dash_image:new e.Uniform1i(t,n.u_dash_image),u_gradient_image:new e.Uniform1i(t,n.u_gradient_image),u_image_height:new e.Uniform1f(t,n.u_image_height),u_texsize:new e.Uniform2f(t,n.u_texsize),u_scale:new e.Uniform3f(t,n.u_scale),u_mix:new e.Uniform1f(t,n.u_mix),u_alpha_discard_threshold:new e.Uniform1f(t,n.u_alpha_discard_threshold)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixels_to_tile_units:new e.UniformMatrix2f(t,n.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_alpha_discard_threshold:new e.Uniform1f(t,n.u_alpha_discard_threshold)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights),u_perspective_transform:new e.Uniform2f(t,n.u_perspective_transform)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_camera_forward:new e.Uniform3f(t,n.u_camera_forward),u_tile_matrix:new e.UniformMatrix4f(t,n.u_tile_matrix),u_ecef_origin:new e.Uniform3f(t,n.u_ecef_origin),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_tile_id:new e.Uniform3f(t,n.u_tile_id),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,n.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_camera_forward:new e.Uniform3f(t,n.u_camera_forward),u_tile_matrix:new e.UniformMatrix4f(t,n.u_tile_matrix),u_ecef_origin:new e.Uniform3f(t,n.u_ecef_origin),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},symbolTextAndIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}},terrainRaster:wn,terrainDepth:wn,skybox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_cubemap:new e.Uniform1i(t,n.u_cubemap),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}},skyboxGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_center_direction:new e.Uniform3f(t,n.u_center_direction),u_radius:new e.Uniform1f(t,n.u_radius),u_opacity:new e.Uniform1f(t,n.u_opacity),u_temporal_offset:new e.Uniform1f(t,n.u_temporal_offset)}},skyboxCapture:function(t,n){return{u_matrix_3f:new e.UniformMatrix3f(t,n.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,n.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,n.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,n.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,n.u_color_tint_m),u_luminance:new e.Uniform1f(t,n.u_luminance)}},globeRaster:function(t,n){return{u_proj_matrix:new e.UniformMatrix4f(t,n.u_proj_matrix),u_globe_matrix:new e.UniformMatrix4f(t,n.u_globe_matrix),u_merc_matrix:new e.UniformMatrix4f(t,n.u_merc_matrix),u_zoom_transition:new e.Uniform1f(t,n.u_zoom_transition),u_merc_center:new e.Uniform2f(t,n.u_merc_center),u_image0:new e.Uniform1i(t,n.u_image0),u_grid_matrix:new e.UniformMatrix3f(t,n.u_grid_matrix)}},globeAtmosphere:function(t,n){return{u_frustum_tl:new e.Uniform3f(t,n.u_frustum_tl),u_frustum_tr:new e.Uniform3f(t,n.u_frustum_tr),u_frustum_br:new e.Uniform3f(t,n.u_frustum_br),u_frustum_bl:new e.Uniform3f(t,n.u_frustum_bl),u_globe_pos:new e.Uniform3f(t,n.u_globe_pos),u_globe_radius:new e.Uniform1f(t,n.u_globe_radius),u_opacity:new e.Uniform1f(t,n.u_opacity),u_fadeout_range:new e.Uniform1f(t,n.u_fadeout_range),u_start_color:new e.Uniform3f(t,n.u_start_color),u_end_color:new e.Uniform3f(t,n.u_end_color)}}};function fi(t,n,i,r,a,o,s){for(var l=t.context,u=l.gl,c=t.useProgram("collisionBox"),h=[],d=0,p=0,f=0;f<r.length;f++){var m=r[f],v=n.getTile(m),y=v.getBucket(i);if(y){var g=m.projMatrix;0===a[0]&&0===a[1]||(g=t.translatePosMatrix(m.projMatrix,v,a,o));var _=s?y.textCollisionBox:y.iconCollisionBox,x=y.collisionCircleArray;if(x.length>0){var b=e.create(),w=g;e.mul(b,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(b,b,y.placementViewportMatrix),h.push({circleArray:x,circleOffset:p,transform:w,invTransform:b}),p=d+=x.length/4}_&&(t.terrain&&t.terrain.setupElevationDraw(v,c),c.draw(l,u.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,qn(g,t.transform,v),i.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,t.transform.zoom,null,_.collisionVertexBuffer,_.collisionVertexBufferExt))}}if(s&&h.length){var k=t.useProgram("collisionCircle"),S=new e.StructArrayLayout2f1f2i16;S.resize(4*d),S._trim();for(var T=0,C=0,E=h;C<E.length;C++)for(var M=E[C],P=0;P<M.circleArray.length/4;P++){var A=4*P,D=M.circleArray[A+0],I=M.circleArray[A+1],L=M.circleArray[A+2],O=M.circleArray[A+3];S.emplace(T++,D,I,L,O,0),S.emplace(T++,D,I,L,O,1),S.emplace(T++,D,I,L,O,2),S.emplace(T++,D,I,L,O,3)}(!oi||oi.length<2*d)&&(oi=function(t){var n=2*t,i=new e.StructArrayLayout3ui6;i.resize(n),i._trim();for(var r=0;r<n;r++){var a=6*r;i.uint16[a+0]=4*r+0,i.uint16[a+1]=4*r+1,i.uint16[a+2]=4*r+2,i.uint16[a+3]=4*r+2,i.uint16[a+4]=4*r+3,i.uint16[a+5]=4*r+0}return i}(d));for(var z,R=l.createIndexBuffer(oi,!0),B=l.createVertexBuffer(S,e.collisionCircleLayout.members,!0),F=0,N=h;F<N.length;F++){var j=N[F],U={u_matrix:j.transform,u_inv_matrix:j.invTransform,u_camera_to_center_distance:(z=t.transform).cameraToCenterDistance,u_viewport_size:[z.width,z.height]};k.draw(l,u.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,U,i.id,B,R,e.SegmentVector.simpleSegment(0,2*j.circleOffset,j.circleArray.length,j.circleArray.length/2),null,t.transform.zoom,null,null,null)}B.destroy(),R.destroy()}}var mi=e.create();function vi(t,n,i,r,a,o){var s=e.getAnchorAlignment(t),l=-(s.horizontalAlign-.5)*n,u=-(s.verticalAlign-.5)*i,c=e.evaluateVariableOffset(t,r);return new e.pointGeometry((l/a+c[0])*o,(u/a+c[1])*o)}function yi(t,n,i,r,a,o,s,l,u,c,h,d){var p=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,v={},y=l.projMatrix,g=o.elevation,_=d.upVectorScale(l.canonical,o.center.lat,o.worldSize);f.clear();for(var x=0;x<p.length;x++){var b=p.get(x),w=t.allowVerticalPlacement&&!b.placedOrientation,k=b.hidden||!b.crossTileID||w?null:r[b.crossTileID];if(k){var S=new e.pointGeometry(b.tileAnchorX,b.tileAnchorY),T=d.upVector(l.canonical,S.x,S.y),C=g?g.getAtTileOffset(l,S.x,S.y):0,E=mt([b.projectedAnchorX+C*T[0]*_.metersToTile,b.projectedAnchorY+C*T[1]*_.metersToTile,b.projectedAnchorZ+C*T[2]*_.metersToTile],i?y:s),M=vt(o.cameraToCenterDistance,E.signedDistanceFromCamera),P=a.evaluateSizeForFeature(t.textSizeData,c,b)*M/e.ONE_EM;i&&(P*=t.tilePixelRatio/u);for(var A=k.width,D=k.height,I=vi(k.anchor,A,D,k.textOffset,k.textScale,P),L=i?ft(S.add(I),s,C*_.metersToLabelSpace).point:E.point.add(n?I.rotate(-o.angle):I),O=t.allowVerticalPlacement&&b.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,z=0;z<b.numGlyphs;z++)e.addDynamicAttributes(f,L,O);h&&b.associatedIconIndex>=0&&(v[b.associatedIconIndex]={shiftedAnchor:L,angle:O})}else Ct(b.numGlyphs,f)}if(h){m.clear();for(var R=t.icon.placedSymbolArray,B=0;B<R.length;B++){var F=R.get(B);if(F.hidden)Ct(F.numGlyphs,m);else{var N=v[B];if(N)for(var j=0;j<F.numGlyphs;j++)e.addDynamicAttributes(m,N.shiftedAnchor,N.angle);else Ct(F.numGlyphs,m)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function gi(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function _i(t,n,i,r,a,o,s,l,u,c,h,p){var f=t.context,m=f.gl,v=t.transform,y="map"===l,g="map"===u,_=y&&"point"!==i.layout.get("symbol-placement"),x=y&&!g&&!_,b=void 0!==i.layout.get("symbol-sort-key").constantOr(1),w=!1,k=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),S=[e.mercatorXfromLng(v.center.lng),e.mercatorYfromLat(v.center.lat)],T=i.layout.get("text-variable-anchor"),C="globe"===v.projection.name,E=C?e.globeToMercatorTransition(v.zoom):0,M=[],P=[];t.terrain&&g&&P.push("PITCH_WITH_MAP_TERRAIN"),C&&P.push("PROJECTION_GLOBE_VIEW");var A,D=d(r);try{for(D.s();!(A=D.n()).done;){var I=A.value,L=n.getTile(I),O=L.getBucket(i);if(O&&O.projection===v.projection.name){var z=a?O.text:O.icon;if(z&&!O.fullyClipped&&z.segments.get().length){var R=z.programConfigurations.get(i.id),B=a||O.sdfIcons,F=a?O.textSizeData:O.iconSizeData,N=g||0!==v.pitch,j=e.evaluateSizeForZoom(F,v.zoom),U=void 0,V=void 0,Z=void 0,W=void 0,G=[0,0],Y=null;if(a){if(V=L.glyphAtlasTexture,Z=m.LINEAR,U=L.glyphAtlasTexture.size,O.iconsInText){G=L.imageAtlasTexture.size,Y=L.imageAtlasTexture;var H="composite"===F.kind||"camera"===F.kind;W=N||t.options.rotating||t.options.zooming||H?m.LINEAR:m.NEAREST}}else{var X=1!==i.layout.get("icon-size").constantOr(0)||O.iconsNeedLinear;V=L.imageAtlasTexture,Z=B||t.options.rotating||t.options.zooming||X||N?m.LINEAR:m.NEAREST,U=L.imageAtlasTexture.size}var q=t.transform.calculatePixelsToTileUnitsMatrix(L),K=dt(I.projMatrix,L.tileID.canonical,g,y,t.transform,q),$=t.terrain&&g&&_?e.invert(e.create(),K):mi,Q=pt(I.projMatrix,L.tileID.canonical,g,y,t.transform,q),J=T&&O.hasTextData(),ee="none"!==i.layout.get("icon-text-fit")&&J&&O.hasIconData();if(_){var te=v.elevation,ne=te?te.getAtTileOffsetFunc(I,v.center.lat,v.worldSize,v.projection):function(e){return[0,0,0]};gt(O,I.projMatrix,t,a,K,Q,g,c,ne,I)}var ie=_||a&&T||ee,re=t.translatePosMatrix(I.projMatrix,L,o,s),ae=ie?mi:K,oe=t.translatePosMatrix(Q,L,o,s,!0),se=v.projection.createInversionMatrix(v,I.canonical),le=ie?P.concat(["PROJECTED_POS_ON_VIEWPORT"]):P,ue=B&&0!==i.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),ce=void 0;ce=B?O.iconsInText?ci(F.kind,j,x,g,t,re,ae,oe,U,G,I,E,S,se):ui(F.kind,j,x,g,t,re,ae,oe,a,U,!0,I,E,S,se):li(F.kind,j,x,g,t,re,ae,oe,a,U,I,E,S,se);var he={program:t.useProgram(gi(B,a,O),R,le),buffers:z,uniformValues:ce,atlasTexture:V,atlasTextureIcon:Y,atlasInterpolation:Z,atlasInterpolationIcon:W,isSDF:B,hasHalo:ue,tile:L,labelPlaneMatrixInv:$};if(b&&O.canOverlap){w=!0;var de,pe=z.segments.get(),fe=d(pe);try{for(fe.s();!(de=fe.n()).done;){var me=de.value;M.push({segments:new e.SegmentVector([me]),sortKey:me.sortKey,state:he})}}catch(be){fe.e(be)}finally{fe.f()}}else M.push({segments:z.segments,sortKey:0,state:he})}}}}catch(be){D.e(be)}finally{D.f()}w&&M.sort((function(e,t){return e.sortKey-t.sortKey}));for(var ve=0,ye=M;ve<ye.length;ve++){var ge=ye[ve],_e=ge.state;if(t.terrain&&t.terrain.setupElevationDraw(_e.tile,_e.program,{useDepthForOcclusion:!C,labelPlaneMatrixInv:_e.labelPlaneMatrixInv}),f.activeTexture.set(m.TEXTURE0),_e.atlasTexture.bind(_e.atlasInterpolation,m.CLAMP_TO_EDGE),_e.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),_e.atlasTextureIcon&&_e.atlasTextureIcon.bind(_e.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),_e.isSDF){var xe=_e.uniformValues;_e.hasHalo&&(xe.u_is_halo=1,xi(_e.buffers,ge.segments,i,t,_e.program,k,h,p,xe)),xe.u_is_halo=0}xi(_e.buffers,ge.segments,i,t,_e.program,k,h,p,_e.uniformValues)}}function xi(t,n,i,r,a,o,s,l,u){var c=r.context;a.draw(c,c.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,u,i.id,t.layoutVertexBuffer,t.indexBuffer,n,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function bi(t,n,i,r,a,o,s){var l,u,c,h,p,f=t.context.gl,m=i.paint.get("fill-pattern"),v=m&&m.constantOr(1),y=i.getCrossfadeParameters();s?(u=v&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=f.LINES):(u=v?"fillPattern":"fill",l=f.TRIANGLES);var g,_=d(r);try{for(_.s();!(g=_.n()).done;){var x=g.value,b=n.getTile(x);if(!v||b.patternsLoaded()){var w=b.getBucket(i);if(w){t.prepareDrawTile();var k=w.programConfigurations.get(i.id),S=t.useProgram(u,k);v&&(t.context.activeTexture.set(f.TEXTURE0),b.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),k.updatePaintBuffers(y));var T=m.constantOr(null);if(T&&b.imageAtlas){var C=b.imageAtlas,E=C.patternPositions[T.to.toString()],M=C.patternPositions[T.from.toString()];E&&M&&k.setConstantPatternPositions(E,M)}var P=t.translatePosMatrix(x.projMatrix,b,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){h=w.indexBuffer2,p=w.segments2;var A=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[f.drawingBufferWidth,f.drawingBufferHeight];c="fillOutlinePattern"===u&&v?Gn(P,t,y,b,A):Wn(P,A)}else h=w.indexBuffer,p=w.segments,c=v?Zn(P,t,y,b):Vn(P);t.prepareDrawProgram(t.context,S,x.toUnwrapped()),S.draw(t.context,l,a,t.stencilModeForClipping(x),o,e.CullFaceMode.disabled,c,i.id,w.layoutVertexBuffer,h,p,i.paint,t.transform.zoom,k)}}}}catch(D){_.e(D)}finally{_.f()}}function wi(t,n,i,r,a,o,s){var l=t.context,u=l.gl,c=t.transform,h=i.paint.get("fill-extrusion-pattern"),p=h.constantOr(1),f=i.getCrossfadeParameters(),m=i.paint.get("fill-extrusion-opacity"),v=function(t){if("globe"!==t.projection.name)return 0;var n=Math.PI/32,i=Math.tan(n),r=e.earthRadius;return r*Math.sqrt(1+2*i*i)-r}(c),y="globe"===c.projection.name,g=y?e.globeToMercatorTransition(c.zoom):0,_=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)],x=[];y&&x.push("PROJECTION_GLOBE_VIEW");var b,w=d(r);try{for(w.s();!(b=w.n()).done;){var k=b.value,S=n.getTile(k),T=S.getBucket(i);if(T&&T.projection===c.projection.name){var C=T.programConfigurations.get(i.id),E=t.useProgram(p?"fillExtrusionPattern":"fillExtrusion",C,x);if(t.terrain){var M=t.terrain;if(t.style.terrainSetForDrapingOnly())M.setupElevationDraw(S,E,{useMeterToDem:!0});else{if(!T.enableTerrain)continue;if(M.setupElevationDraw(S,E,{useMeterToDem:!0}),ki(l,n,k,T,i,M),!T.centroidVertexBuffer){var P=E.attributes.a_centroid_pos;void 0!==P&&u.vertexAttrib2f(P,0,0)}}}p&&(t.context.activeTexture.set(u.TEXTURE0),S.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),C.updatePaintBuffers(f));var A=h.constantOr(null);if(A&&S.imageAtlas){var D=S.imageAtlas,I=D.patternPositions[A.to.toString()],L=D.patternPositions[A.from.toString()];I&&L&&C.setConstantPatternPositions(I,L)}var O=t.translatePosMatrix(k.projMatrix,S,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),z=c.projection.createInversionMatrix(c,k.canonical),R=i.paint.get("fill-extrusion-vertical-gradient"),B=p?Un(O,t,R,m,k,f,S,v,g,_,z):jn(O,t,R,m,k,v,g,_,z);t.prepareDrawProgram(l,E,k.toUnwrapped()),E.draw(l,l.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,B,i.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,i.paint,t.transform.zoom,C,t.terrain?T.centroidVertexBuffer:null,y?T.layoutVertexExtBuffer:null)}}}catch(F){w.e(F)}finally{w.f()}}function ki(t,n,i,r,a,o){for(var s,l,u,c=[function(t){var n=t.canonical.x-1,i=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,i--),new e.OverscaledTileID(t.overscaledZ,i,t.canonical.z,n,t.canonical.y)},function(t){var n=t.canonical.x+1,i=t.wrap;return n===1<<t.canonical.z&&(n=0,i++),new e.OverscaledTileID(t.overscaledZ,i,t.canonical.z,n,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],h=function(e){for(var t=n.getSource().minzoom,i=function(e){var t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},r=0,o=[0,-1,1];r<o.length;r++){var s=o[r];if(!(e.overscaledZ+s<t)){var l=i(e.calculateScaledKey(e.overscaledZ+s));if(l)return l}}},p=[0,0,0],f=function(t,n){return p[0]=Math.min(t.min.y,n.min.y),p[1]=Math.max(t.max.y,n.max.y),p[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,p},m=function(t,n){return p[0]=Math.min(t.min.x,n.min.x),p[1]=Math.max(t.max.x,n.max.x),p[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,p},v=[function(e,t){return f(e,t)},function(e,t){return f(t,e)},function(e,t){return m(e,t)},function(e,t){return m(t,e)}],y=new e.pointGeometry(0,0),g=function(t,n,r,a,c){var h=[[a?r:t,a?t:r,0],[a?r:n,a?n:r,0]],d=c<0?e.EXTENT+c:c,p=[a?d:(t+n)/2,a?(t+n)/2:d,0];return 0===r&&c<0||0!==r&&c>0?o.getForTilePoints(u,[p],!0,l):h.push(p),o.getForTilePoints(i,h,!0,s),Math.max(h[0][2],h[1][2],p[2])/o.exaggeration()},_=0;_<4;_++){var x=(_<2?1:5)-_,b=r.borders[_];if(0!==b.length){var w=u=c[_](i),k=h(w);if(k&&k instanceof e.FillExtrusionBucket&&k.enableTerrain&&(r.borderDoneWithNeighborZ[_]!==k.canonical.z||k.borderDoneWithNeighborZ[x]!==r.canonical.z)&&(l=o.findDEMTileFor(w))&&l.dem){if(!s){var S=o.findDEMTileFor(i);if(!S||!S.dem)return;s=S}var T=k.borders[x],C=0,E=k.borderDoneWithNeighborZ[x]!==r.canonical.z;if(r.canonical.z===k.canonical.z){for(var M=0;M<b.length;M++){for(var P=r.featuresOnBorder[b[M]],A=P.borders[_],D=void 0;C<T.length&&!((D=k.featuresOnBorder[T[C]]).borders[x][1]>A[0]+3);)E&&k.encodeCentroid(void 0,D,!1),C++;if(D&&C<T.length){for(var I=C,L=0;!(D.borders[x][0]>A[1]-3)&&(L++,++C!==T.length);)D=k.featuresOnBorder[T[C]];if(D=k.featuresOnBorder[T[I]],P.intersectsCount()>1||D.intersectsCount()>1||1!==L){1!==L&&(C=I),r.encodeCentroid(void 0,P,!1),E&&k.encodeCentroid(void 0,D,!1);continue}var O=v[_](P,D),z=_%2?e.EXTENT-1:0;y.x=g(O[0],Math.min(e.EXTENT-1,O[1]),z,_<2,O[2]),y.y=0,r.encodeCentroid(y,P,!1),E&&k.encodeCentroid(y,D,!1)}else r.encodeCentroid(void 0,P,!1)}r.borderDoneWithNeighborZ[_]=k.canonical.z,r.needsCentroidUpdate=!0,E&&(k.borderDoneWithNeighborZ[x]=r.canonical.z,k.needsCentroidUpdate=!0)}else{var R,B=d(b);try{for(B.s();!(R=B.n()).done;){var F=R.value;r.encodeCentroid(void 0,r.featuresOnBorder[F],!1)}}catch(V){B.e(V)}finally{B.f()}if(E){var N,j=d(T);try{for(j.s();!(N=j.n()).done;){var U=N.value;k.encodeCentroid(void 0,k.featuresOnBorder[U],!1)}}catch(V){j.e(V)}finally{j.f()}k.borderDoneWithNeighborZ[x]=r.canonical.z,k.needsCentroidUpdate=!0}r.borderDoneWithNeighborZ[_]=k.canonical.z,r.needsCentroidUpdate=!0}}}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(t)}var Si=new e.Color(1,0,0,1),Ti=new e.Color(0,1,0,1),Ci=new e.Color(0,0,1,1),Ei=new e.Color(1,0,1,1),Mi=new e.Color(0,1,1,1);function Pi(e,t,n,i){Di(e,0,t+n/2,e.transform.width,n,i)}function Ai(e,t,n,i){Di(e,t-n/2,0,n,e.transform.height,i)}function Di(t,n,i,r,a,o){var s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}function Ii(t,n,i){var r=t.context,a=r.gl,o="globe"===t.transform.projection.name,s=i.projMatrix,l=t.useProgram("debug",null,o?["PROJECTION_GLOBE_VIEW"]:null),u=n.getTileByID(i.key);t.terrain&&t.terrain.setupElevationDraw(u,l);var c=e.DepthMode.disabled,h=e.StencilMode.disabled,d=t.colorModeForRenderPass(),p="$debug";r.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),o?u._makeGlobeTileDebugBuffers(t.context,t.transform.projection):u._makeDebugTileBoundsBuffers(t.context,t.transform.projection);var f=u._tileDebugBuffer||t.debugBuffer,m=u._tileDebugIndexBuffer||t.debugIndexBuffer,v=u._tileDebugSegments||t.debugSegments;l.draw(r,a.LINE_STRIP,c,h,d,e.CullFaceMode.disabled,Kn(s,e.Color.red),p,f,m,v,null,null,null,u._globeTileDebugBorderBuffer);var y=u.latestRawTileData,g=Math.floor((y&&y.byteLength||0)/1024),_=n.getTile(i).tileSize,x=512/Math.min(_,512)*(i.overscaledZ/t.transform.zoom)*.5,b=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(b+=" => ".concat(i.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,i=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(t,"".concat(b," ").concat(g,"kb"));var w=u._tileDebugTextBuffer||t.debugBuffer,k=u._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,S=u._tileDebugTextSegments||t.debugSegments;l.draw(r,a.TRIANGLES,c,h,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Kn(s,e.Color.transparent,x),p,w,k,S,null,null,null,u._globeTileDebugTextBuffer)}var Li=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Oi(e,t,n,i){e.emplaceBack(t,n,i)}var zi=y((function t(n){v(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Oi(this.vertexArray,-1,-1,1),Oi(this.vertexArray,1,-1,1),Oi(this.vertexArray,-1,1,1),Oi(this.vertexArray,1,1,1),Oi(this.vertexArray,-1,-1,-1),Oi(this.vertexArray,1,-1,-1),Oi(this.vertexArray,-1,1,-1),Oi(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,Li),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}));function Ri(t,n,i,r,a,o){var s=t.gl,l=n.paint.get("sky-atmosphere-color"),u=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),h=function(e,t,n,i,r){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}}(e.fromMat4(e.create$1(),r),a,c,l,u);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,n.skyboxTexture,0),i.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}function Bi(t,n){return e.transformMat4(t,t,n)}var Fi={symbol:function(t,n,i,r,a){if("translucent"===t.renderPass){var o=e.StencilMode.disabled,s=t.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(t,n,i,r,a,o,s){var l,u=n.transform,c="map"===a,h="map"===o,p=d(t);try{for(p.s();!(l=p.n()).done;){var f=l.value,m=r.getTile(f),v=m.getBucket(i);if(v&&v.projection===u.projection.name&&v.text&&v.text.segments.get().length){var y=e.evaluateSizeForZoom(v.textSizeData,u.zoom),g=n.transform.calculatePixelsToTileUnitsMatrix(m),_=dt(f.projMatrix,m.tileID.canonical,h,c,n.transform,g),x="none"!==i.layout.get("icon-text-fit")&&v.hasIconData();if(y){var b=Math.pow(2,u.zoom-m.tileID.overscaledZ);yi(v,c,h,s,e.symbolSize,u,_,f,b,y,x,u.projection)}}}}catch(w){p.e(w)}finally{p.f()}}(r,t,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),a),0!==i.paint.get("icon-opacity").constantOr(1)&&_i(t,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,s),0!==i.paint.get("text-opacity").constantOr(1)&&_i(t,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(fi(t,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),fi(t,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,i,r){if("translucent"===t.renderPass){var a=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=t.context,c=u.gl,h=t.transform,p=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),f=e.StencilMode.disabled,m=t.colorModeForRenderPass(),v="globe"===h.projection.name,y=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],g=[],_=0;_<r.length;_++){var x=r[_],b=n.getTile(x),w=b.getBucket(i);if(w){var k=w.programConfigurations.get(i.id),S=Xn(i);v&&S.push("PROJECTION_GLOBE_VIEW");var T=t.useProgram("circle",k,S),C=w.layoutVertexBuffer,E=w.globeExtVertexBuffer,M=w.indexBuffer,P=h.projection.createInversionMatrix(h,x.canonical),A={programConfiguration:k,program:T,layoutVertexBuffer:C,globeExtVertexBuffer:E,indexBuffer:M,uniformValues:Hn(t,x,b,P,y,i),tile:b};if(l){var D,I=w.segments.get(),L=d(I);try{for(L.s();!(D=L.n()).done;){var O=D.value;g.push({segments:new e.SegmentVector([O]),sortKey:O.sortKey,state:A})}}catch(X){L.e(X)}finally{L.f()}}else g.push({segments:w.segments,sortKey:0,state:A})}}l&&g.sort((function(e,t){return e.sortKey-t.sortKey}));for(var z={useDepthForOcclusion:!v},R=0,B=g;R<B.length;R++){var F=B[R],N=F.state,j=N.programConfiguration,U=N.program,V=N.layoutVertexBuffer,Z=N.globeExtVertexBuffer,W=N.indexBuffer,G=N.uniformValues,Y=N.tile,H=F.segments;t.terrain&&t.terrain.setupElevationDraw(Y,U,z),t.prepareDrawProgram(u,U,Y.tileID.toUnwrapped()),U.draw(u,c.TRIANGLES,p,f,m,e.CullFaceMode.disabled,G,i.id,V,W,H,i.paint,h.zoom,j,v?Z:null)}}}},heatmap:function(t,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var i=e.gl;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),e.bindFramebuffer.set(r.framebuffer);else{var a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,i){var r=e.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width/4,t.height/4,0,r.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(e,t,a,r)}}(a,t,i),a.clear({color:e.Color.transparent});for(var u=t.transform,c="globe"===u.projection.name,h=c?["PROJECTION_GLOBE_VIEW"]:null,d=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],p=0;p<r.length;p++){var f=r[p];if(!n.hasRenderableParent(f)){var m=n.getTile(f),v=m.getBucket(i);if(v){var y=v.programConfigurations.get(i.id),g=t.useProgram("heatmap",y,h),_=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(m,g),t.prepareDrawProgram(a,g,f.toUnwrapped());var x=u.projection.createInversionMatrix(u,f.canonical);g.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,l,e.CullFaceMode.disabled,Qn(t,f,m,x,d,_,i.paint.get("heatmap-intensity")),i.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,i.paint,t.transform.zoom,y,c?v.globeExtVertexBuffer:null)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var i=t.context,r=i.gl,a=n.heatmapFbo;if(a){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new e.Texture(i,n.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,r.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(e,t,n,i){return{u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,i))},line:function(t,n,i,r){if("translucent"===t.renderPass){var a=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,c=i.paint.get("line-dasharray"),h=c.constantOr(1),p=i.layout.get("line-cap"),f=i.paint.get("line-pattern"),m=f.constantOr(1),v=i.paint.get("line-gradient"),y=i.getCrossfadeParameters(),g=m?"linePattern":"line",_=t.context,x=_.gl,b=function(e){var t=[];ii(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");var n=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!n&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t}(i),w=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(w=!1);var k,S=d(r);try{var T=function(){var r=k.value,a=n.getTile(r);if(m&&!a.patternsLoaded())return"continue";var o=a.getBucket(i);if(!o)return"continue";t.prepareDrawTile();var d=o.programConfigurations.get(i.id),S=t.useProgram(g,d,b),T=f.constantOr(null);if(T&&a.imageAtlas){var C=a.imageAtlas,E=C.patternPositions[T.to.toString()],M=C.patternPositions[T.from.toString()];E&&M&&d.setConstantPatternPositions(E,M)}var P=c.constantOr(null),A=p.constantOr(null);if(!m&&P&&A&&a.lineAtlas){var D=a.lineAtlas,I=D.getDash(P.to,A),L=D.getDash(P.from,A);I&&L&&d.setConstantPatternPositions(I,L)}var O=t.terrain?r.projMatrix:null,z=m?ei(t,a,i,y,O,u):Jn(t,a,i,y,O,o.lineClipsArray.length,u);if(v){var R=o.gradients[i.id],B=R.texture;if(i.gradientVersion!==R.version){var F=256;if(i.stepInterpolant){var N=n.getSource().maxzoom,j=r.canonical.z===N?Math.ceil(1<<t.transform.maxZoom-r.canonical.z):1;F=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*j),256,_.maxTextureSize)}R.gradient=e.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:F,image:R.gradient||void 0,clips:o.lineClipsArray}),R.texture?R.texture.update(R.gradient):R.texture=new e.Texture(_,R.gradient,x.RGBA),R.version=i.gradientVersion,B=R.texture}_.activeTexture.set(x.TEXTURE1),B.bind(i.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE)}h&&(_.activeTexture.set(x.TEXTURE0),a.lineAtlasTexture.bind(x.LINEAR,x.REPEAT),d.updatePaintBuffers(y)),m&&(_.activeTexture.set(x.TEXTURE0),a.imageAtlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),d.updatePaintBuffers(y)),t.prepareDrawProgram(_,S,r.toUnwrapped());var U=function(n){S.draw(_,x.TRIANGLES,s,n,l,e.CullFaceMode.disabled,z,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,i.paint,t.transform.zoom,d,o.layoutVertexBuffer2)};if(w){var V=t.stencilModeForClipping(r).ref;0===V&&t.terrain&&_.clear({stencil:0});var Z={func:x.EQUAL,mask:255};z.u_alpha_discard_threshold=.8,U(new e.StencilMode(Z,V,255,x.KEEP,x.KEEP,x.INVERT)),z.u_alpha_discard_threshold=0,U(new e.StencilMode(Z,V,255,x.KEEP,x.KEEP,x.KEEP))}else U(t.stencilModeForClipping(r))};for(S.s();!(k=S.n()).done;)T()}catch(C){S.e(C)}finally{S.f()}w&&(t.resetStencilClippingMasks(),t.terrain&&_.clear({stencil:0}))}}},fill:function(t,n,i,r){var a=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);bi(t,n,i,r,c,s,!1)}if("translucent"===t.renderPass&&i.paint.get("fill-antialias")){var h=t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);bi(t,n,i,r,h,s,!0)}}},"fill-extrusion":function(t,n,i,r){var a=i.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||i.paint.get("fill-extrusion-pattern").constantOr(1))wi(t,n,i,r,o,e.StencilMode.disabled,e.ColorMode.disabled),wi(t,n,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{var s=t.colorModeForRenderPass();wi(t,n,i,r,o,e.StencilMode.disabled,s)}}},hillshade:function(t,n,i,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a,o=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture,c="translucent"!==t.renderPass||u?[{},r]:t.stencilConfigForOverlap(r),p=h(c,2),f=p[0],m=p[1],v=d(m);try{for(v.s();!(a=v.n()).done;){var y=a.value,g=n.getTile(y);if(g.needsHillshadePrepare&&"offscreen"===t.renderPass)bn(t,g,i,s,e.StencilMode.disabled,l);else if("translucent"===t.renderPass){var _=u&&t.terrain?t.terrain.stencilModeForRTTOverlap(y):f[y.overscaledZ];_n(t,y,g,i,s,_,l)}}}catch(x){v.e(x)}finally{v.f()}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()}},raster:function(t,n,i,r,a,o){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&r.length){var s,l=t.context,u=l.gl,c=n.getSource(),p=t.useProgram("raster"),f=t.colorModeForRenderPass(),m=t.terrain&&t.terrain.renderingToTexture,v=c instanceof Ue||m?[{},r]:t.stencilConfigForOverlap(r),y=h(v,2),g=y[0],_=y[1],x=_[_.length-1].overscaledZ,b=!t.options.moving,w=d(_);try{for(w.s();!(s=w.n()).done;){var k=s.value,S=m?e.DepthMode.disabled:t.depthModeForSublayer(k.overscaledZ-x,1===i.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,u.LESS),T=k.toUnwrapped(),C=n.getTile(k);if(!m||C&&C.hasData()){var E=m?k.projMatrix:t.transform.calculateProjMatrix(T,b),M=t.terrain&&m?t.terrain.stencilModeForRTTOverlap(k):g[k.overscaledZ],P=o?0:i.paint.get("raster-fade-duration");C.registerFadeDuration(P);var A=n.findLoadedParent(k,0),D=An(C,A,n,t.transform,P),I=void 0,L=void 0;t.terrain&&t.terrain.prepareDrawTile();var O="nearest"===i.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;l.activeTexture.set(u.TEXTURE0),C.texture.bind(O,u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE1),A?(A.texture.bind(O,u.CLAMP_TO_EDGE),I=Math.pow(2,A.tileID.overscaledZ-C.tileID.overscaledZ),L=[C.tileID.canonical.x*I%1,C.tileID.canonical.y*I%1]):C.texture.bind(O,u.CLAMP_TO_EDGE);var z=ri(E,L||[0,0],I||1,D,i,c instanceof Ue?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(l,p,T),c instanceof Ue)c.boundsBuffer&&c.boundsSegments&&p.draw(l,u.TRIANGLES,S,e.StencilMode.disabled,f,e.CullFaceMode.disabled,z,i.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{var R=t.getTileBoundsBuffers(C),B=R.tileBoundsBuffer,F=R.tileBoundsIndexBuffer,N=R.tileBoundsSegments;p.draw(l,u.TRIANGLES,S,M,f,e.CullFaceMode.disabled,z,i.id,B,F,N)}}}}catch(j){w.e(j)}finally{w.f()}t.resetStencilClippingMasks()}},background:function(t,n,i,r){var a=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0!==o){var s=t.context,l=s.gl,u=t.transform,c=u.tileSize,h=i.paint.get("background-pattern");if(!t.isPatternMissing(h)){var p=!h&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===p){var f,m=e.StencilMode.disabled,v=t.depthModeForSublayer(0,"opaque"===p?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),y=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background"),_=r;_||(f=t.getBackgroundTiles(),_=Object.values(f).map((function(e){return e.tileID}))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));var x,b=i.getCrossfadeParameters(),w=d(_);try{for(w.s();!(x=w.n()).done;){var k=x.value,S=k.toUnwrapped(),T=r?k.projMatrix:t.transform.calculateProjMatrix(S);t.prepareDrawTile();var C=n?n.getTile(k):f?f[k.key]:new e.Tile(k,c,u.zoom,t),E=h?di(T,o,t,h,{tileID:k,tileSize:c},b):hi(T,o,a);t.prepareDrawProgram(s,g,S);var M=t.getTileBoundsBuffers(C),P=M.tileBoundsBuffer,A=M.tileBoundsIndexBuffer,D=M.tileBoundsSegments;g.draw(s,l.TRIANGLES,v,m,y,e.CullFaceMode.disabled,E,i.id,P,A,D)}}catch(I){w.e(I)}finally{w.f()}}}}},sky:function(t,n,i){var r=t.transform,a="mercator"===r.projection.name||"globe"===r.projection.name?1:e.smoothstep(7,8,r.zoom),o=i.paint.get("sky-opacity")*a;if(0!==o){var s=t.context,l=i.paint.get("sky-type"),u=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?i.needsSkyboxCapture(t)&&(function(t,n,i,r){var a=t.context,o=a.gl,s=n.skyboxFbo;if(!s){s=n.skyboxFbo=a.createFramebuffer(32,32,!1),n.skyboxGeometry=new zi(a),n.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(var l=0;l<6;++l)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);var u=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),Ri(a,n,c,h,u,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),Ri(a,n,c,h,u,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),Ri(a,n,c,h,u,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),Ri(a,n,c,h,u,3),e.identity(h),Ri(a,n,c,h,u,4),e.identity(h),e.rotateY(h,h,Math.PI),Ri(a,n,c,h,u,5),a.viewport.set([0,0,t.width,t.height])}(t,i),i.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,i,r,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);var c=function(e,t,n,i,r){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:i,u_temporal_offset:r}}(l.skyboxMatrix,n.getCenter(t,!1),0,r,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,i,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,i,u,o,c):"gradient"===l&&"sky"===t.renderPass&&function(t,n,i,r,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new zi(o)),o.activeTexture.set(s.TEXTURE0);var c=n.colorRampTexture;c||(c=n.colorRampTexture=new e.Texture(o,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);var h=function(t,n,i,r,a){return{u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(i),u_opacity:r,u_temporal_offset:a}}(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),r,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,i,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,i,u,o,c)}},debug:function(e,t,n){for(var i=0;i<n.length;i++)Ii(e,t,n[i])},custom:function(t,n,i){var r=t.context,a=i.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes("custom"))e.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===t.renderPass){var o=a.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(a,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(e.StencilMode.disabled);var s="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);r.setDepthMode(s),a.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},Ni=function(){function t(n,i){v(this,t),this.context=new Fe(n),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tn,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this._tileClippingMaskIDs=new Map,this._skippedStencilTileIDs=new Set}return y(t,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new zn(this,e));var i=this._terrain;this.transform.elevation=n?i:null,i.update(e,this.transform,t)}}},{key:"_updateFog",value:function(e){var t=e.fog;if(!t||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var n=t.getFovAdjustedRange(this.transform._fov),i=h(n,2),r=i[0],a=i[1];if(r>a)this.transform.fogCullDistSq=null;else{var o=r+.78*(a-r);this.transform.fogCullDistSq=o*o}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var i,r=d(this.style.order);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.style._layers[a].resize()}}catch(o){r.e(o)}finally{r.f()}}}},{key:"setup",value:function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var r=new e.StructArrayLayout2i4;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(-1,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);for(var s=new e.StructArrayLayout1ui2,l=0,u=[0,1,3,2,0];l<u.length;l++){var c=u[l];s.emplaceBack(c)}this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();var h=this.context.gl;this.stencilClearMode=new e.StencilMode({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO),this.loadTimeStamps.push(e.window.performance.now())}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear(),this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Pn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear())}},{key:"_renderTileClippingMasks",value:function(t,n,i){var r=this;if(n&&this.currentStencilSource!==n.id&&t.isTileClipped()&&i&&0!==i.length){var a=[],o=!1;if(this._tileClippingMaskIDs&&!this.terrain){var s,l=d(i);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(this._tileClippingMaskIDs.has(u.key)||(o=!0),this._skippedStencilTileIDs.has(u.key)){if(!n.getTile(u).getBucket(t))continue;this._skippedStencilTileIDs.delete(u.key),a.push(u)}}}catch(x){l.e(x)}finally{l.f()}if(!o&&0===a.length)return}var c=this.context,h=c.gl;c.setColorMode(e.ColorMode.disabled),c.setDepthMode(e.DepthMode.disabled);var p=this.useProgram("clippingMask"),f=function(t){var i=n.getTile(t),a=r.getTileBoundsBuffers(i),o=a.tileBoundsBuffer,s=a.tileBoundsIndexBuffer,l=a.tileBoundsSegments;p.draw(c,h.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:h.GREATER,mask:255},r._tileClippingMaskIDs.get(t.key)||0,255,h.KEEP,h.KEEP,h.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Pn(t.projMatrix),"$clipping",o,s,l)};if(!o&&a.length>0){var m,v=d(a);try{for(v.s();!(m=v.n()).done;)f(m.value)}catch(x){v.e(x)}finally{v.f()}}else{(0===this._tileClippingMaskIDs.size||this.nextStencilID+i.length>256)&&this.clearStencil(),this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear();var y,g=d(i);try{for(g.s();!(y=g.n()).done;){var _=y.value;this._tileClippingMaskIDs.set(_.key,this.nextStencilID++),n.getTile(_).getBucket(t)?f(_):this._skippedStencilTileIDs.add(_.key)}}catch(x){g.e(x)}finally{g.f()}}0===this._skippedStencilTileIDs.size&&(this.currentStencilSource=n.id)}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs.get(t.key)||0,0,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var n=this.context.gl,r=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=r[r.length-1].overscaledZ,o=r[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var s={},l=0;l<o;l++)s[l+a]=new e.StencilMode({func:n.GEQUAL,mask:255},l+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[s,r]}return[i({},a,e.StencilMode.disabled),r]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,n,i){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(i||this.context.gl.LEQUAL,n,[r,r])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,n){var i=this;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var r=this.style.order,a=this.style._sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var l={},u={},c={};for(var h in a){var p=a[h];l[h]=p.getVisibleCoordinates(),u[h]=l[h].slice().reverse(),c[h]=p.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var f=0;f<r.length;f++)if(this.style._layers[r[f]].is3D()){this.opaquePassCutoff=f;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var m,v=d(r);try{for(v.s();!(m=v.n()).done;){var y=m.value,g=this.style._layers[y],_=t._getLayerSourceCache(g);if(g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var x=_?u[_.id]:void 0;("custom"===g.type||g.isSky()||x&&x.length)&&this.renderLayer(this,_,g,x)}}}catch(D){v.e(D)}finally{v.f()}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);var b=e.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(b=this.style.fog.properties.get("color")),this.context.clear({color:n.showOverdrawInspector?e.Color.black:b,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var w=this.style._layers[r[this.currentLayer]],k=t._getLayerSourceCache(w);if(!w.isSky()){var S=k?u[k.id]:void 0;this._renderTileClippingMasks(w,k,S),this.renderLayer(this,k,w,S)}}if(this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var T=this.style._layers[r[this.currentLayer]],C=t._getLayerSourceCache(T);T.isSky()&&this.renderLayer(this,C,T,C?u[C.id]:void 0)}for("globe"===this.transform.projection.name&&function(t){var n=t.context,i=n.gl,r=t.transform,a=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),o=t.useProgram("globeAtmosphere"),s=r.centerOffset,l=r._camera.getCameraToClipPerspective(r._fov,r.width/r.height,r._nearZ,r._farZ);l[8]=2*-s.x/r.width,l[9]=2*s.y/r.height;var u=e.invert([],l),c=e.mul([],u,r.projMatrix),h={u_frustum_tl:Bi([-1,1,1],u),u_frustum_tr:Bi([1,1,1],u),u_frustum_br:Bi([1,-1,1],u),u_frustum_bl:Bi([-1,-1,1],u),u_globe_pos:Bi([r.globeMatrix[12],r.globeMatrix[13],r.globeMatrix[14]],c),u_globe_radius:r.worldSize/2/Math.PI-1,u_opacity:1-e.globeToMercatorTransition(r.zoom),u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};t.prepareDrawProgram(n,o);var d=t.globeSharedBuffers;d&&o.draw(n,i.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,h,"skybox",d.atmosphereVertexBuffer,d.atmosphereIndexBuffer,d.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){var E=this.style._layers[r[this.currentLayer]],M=t._getLayerSourceCache(E);if(E.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(E)){if(E.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var P=M?("symbol"===E.type?c:u)[M.id]:void 0;this._renderTileClippingMasks(E,M,M?l[M.id]:void 0),this.renderLayer(this,M,E,P),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){var A=null;e.values(this.style._layers).forEach((function(e){var n=t._getLayerSourceCache(e);n&&!e.isHidden(i.transform.zoom)&&(!A||A.getSource().maxzoom<n.getSource().maxzoom)&&(A=n)})),A&&this.options.showTileBoundaries&&Fi.debug(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Pi(e,e.transform.height-(t.top||0),3,Si),Pi(e,t.bottom||0,3,Ti),Ai(e,t.left||0,3,Ci),Ai(e,e.transform.width-(t.right||0),3,Ei);var n=e.transform.centerPoint;!function(e,t,n,i){Di(e,t-1,n-10,2,20,i),Di(e,t-10,n-1,20,2,i)}(e,n.x,e.transform.height-n.y,Mi)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(n.type)||Fi[n.type](e,t,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var i=e[n],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),t[n]=a}return t}},{key:"translatePosMatrix",value:function(t,n,i,r,a){if(!i[0]&&!i[1])return t;var o=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);i=[i[0]*l-i[1]*s,i[0]*s+i[1]*l]}var u=[a?i[0]:Y(n,i[0],this.transform.zoom),a?i[1]:Y(n,i[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,u),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,n=[];return this.terrain&&!this.terrain.renderingToTexture&&n.push("TERRAIN"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&n.push("FOG"),e&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var i=n||[],r=this.currentGlobalDefines().concat(i),a=Bn.cacheKey(e,r,t);return this.cache[a]||(this.cache[a]=new Bn(this.context,e,mn[e],t,pi[e],r)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}},{key:"prepareDrawTile",value:function(){this.terrain&&this.terrain.prepareDrawTile()}},{key:"prepareDrawProgram",value:function(e,t,n){if(!this.terrain||!this.terrain.renderingToTexture){var i=this.style.fog;if(i){var r=i.getOpacity(this.transform.pitch);0!==r&&t.setFogUniformValues(e,function(e,t,n,i){var r=t.properties.get("color"),a=e.frameCounter/1e3%1,o=[r.r/r.a,r.g/r.a,r.b/r.a,i];return{u_fog_matrix:n?e.transform.calculateFogTileMatrix(n):e.identityMat,u_fog_range:t.getFovAdjustedRange(e.transform._fov),u_fog_color:o,u_fog_horizon_blend:t.properties.get("horizon-blend"),u_fog_temporal_offset:a}}(this,i,n,r))}}}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var t,n=this._backgroundTiles,i=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512}),a=d(r);try{for(a.s();!(t=a.n()).done;){var o=t.value;i[o.key]=n[o.key]||new e.Tile(o,512,this.transform.tileZoom,this)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),t}(),ji=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(v(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=i,this.right=r}return y(t,[{key:"interpolate",value:function(t,n,i){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,i)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,i)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,i)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,i)),this}},{key:"getCenter",value:function(t,n){var i=e.clamp((this.left+t-this.right)/2,0,t),r=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(i,r)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function Ui(t,n){var i=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,i)}function Vi(t,n){var i=e.identity$1([]);return e.rotateZ$1(i,i,-n),e.rotateX$1(i,i,-t),i}function Zi(t,n){var i=[t[0],t[1],0],r=[n[0],n[1],0];if(e.length(i)>=1e-15){var a=e.normalize([],i);e.scale$2(r,a,e.dot(r,a)),n[0]=r[0],n[1]=r[1]}var o=e.cross([],n,t);if(e.len(o)<1e-15)return null;var s=Math.atan2(-o[1],o[0]);return Vi(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}var Wi=function(){function t(e,n){v(this,t),this.position=e,this.orientation=n}return y(t,[{key:"position",get:function(){return this._position},set:function(t){if(t){var n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}},{key:"lookAtPoint",value:function(t,n){if(this.orientation=null,this.position){var i=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,r=this.position,a=e.MercatorCoordinate.fromLngLat(t,i),o=[a.x-r.x,a.y-r.y,a.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Zi(o,n)}}},{key:"setPitchBearing",value:function(t,n){this.orientation=Vi(e.degToRad(t),e.degToRad(-n))}}]),t}(),Gi=function(){function t(n,i){v(this,t),this._transform=e.identity([]),this.orientation=i,this.position=n}return y(t,[{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]},set:function(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t||e.identity$1([]),t&&Ui(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=Vi(e,t),Ui(this._transform,this._orientation)}},{key:"forward",value:function(){var t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}},{key:"up",value:function(){var t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}},{key:"right",value:function(){var t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}},{key:"getCameraToWorld",value:function(t,n){var i=new Float64Array(16);return e.invert(i,this.getWorldToCamera(t,n)),i}},{key:"getWorldToCameraPosition",value:function(t,n,i){var r=this.position;e.scale$2(r,r,-t);var a=new Float64Array(16);return e.fromScaling(a,[i,i,i]),e.translate(a,a,r),a[10]*=n,a}},{key:"getWorldToCamera",value:function(t,n){var i=new Float64Array(16),r=new Float64Array(4),a=this.position;return e.conjugate(r,this._orientation),e.scale$2(a,a,-t),e.fromQuat(i,r),e.translate(i,i,a),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}},{key:"getCameraToClipPerspective",value:function(t,n,i,r){var a=new Float64Array(16);return e.perspective(a,t,n,i,r),a}},{key:"getDistanceToElevation",value:function(t){var n=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),i=this.forward();return(n-this.position[2])/i[2]}},{key:"clone",value:function(){return new t(c(this.position),c(this.orientation))}}]),t}();function Yi(t,n){var i=Xi(t),r=function(t,n,i,r,a){var o=new e.LngLat(i.lng-180*qi,i.lat),s=new e.LngLat(i.lng+180*qi,i.lat),l=t.project(o.lng,o.lat),u=t.project(s.lng,s.lat),c=-Math.atan2(u.y-l.y,u.x-l.x),h=e.MercatorCoordinate.fromLngLat(i);h.y=e.clamp(h.y,-.999975,.999975);var d=h.toLngLat(),p=t.project(d.lng,d.lat),f=e.MercatorCoordinate.fromLngLat(d);f.x+=qi;var m=f.toLngLat(),v=t.project(m.lng,m.lat),y=$i(v.x-p.x,v.y-p.y,c),g=e.MercatorCoordinate.fromLngLat(d);g.y+=qi;var _=g.toLngLat(),x=t.project(_.lng,_.lat),b=$i(x.x-p.x,x.y-p.y,c),w=Math.abs(y.x)/Math.abs(b.y),k=e.identity([]);e.rotateZ(k,k,-c*(1-(a?0:r)));var S=e.identity([]);return e.scale(S,S,[1,1-(1-w)*r,1]),S[4]=-b.x/b.y*r,e.rotateZ(S,S,c),e.multiply$1(S,k,S),S}(t.projection,0,t.center,i,n),a=Hi(t);return e.scale(r,r,[a,a,1]),r}function Hi(t){var n=t.projection,i=Xi(t),r=Ki(n,t.center),a=Ki(n,e.LngLat.convert(n.center));return Math.pow(2,r*i+(1-i)*a)}function Xi(t){var n=t.projection.range;if(!n)return 0;var i=Math.max(t.width,t.height),r=Math.log(i/1024)/Math.LN2;return e.smoothstep(n[0]+r,n[1]+r,t.zoom)}var qi=1/4e4;function Ki(t,n){var i=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=new e.LngLat(n.lng-180*qi,i),a=new e.LngLat(n.lng+180*qi,i),o=t.project(r.lng,i),s=t.project(a.lng,i),l=e.MercatorCoordinate.fromLngLat(r),u=e.MercatorCoordinate.fromLngLat(a),c=s.x-o.x,h=s.y-o.y,d=u.x-l.x,p=u.y-l.y,f=Math.sqrt((d*d+p*p)/(c*c+h*h));return Math.log(f)/Math.LN2}function $i(e,t,n){var i=Math.cos(n),r=Math.sin(n);return{x:e*i-t*r,y:e*r+t*i}}var Qi=function(){function t(n,i,r,a,o,s,l){v(this,t),this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=n||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==a?60:a,this.setProjection(s),this.setMaxBounds(l),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ji,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Gi,this._centerAltitude=0,this._centerAltitudeValidForExaggeration=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}return y(t,[{key:"clone",value:function(){var e=new t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}},{key:"updateElevation",value:function(e){var t=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||t)&&this._updateCameraOnTerrain(),(e||t)&&this._constrainCameraAltitude(),this._calcMatrices()}},{key:"getProjection",value:function(){return e.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(t){null==t&&(t={name:"mercator"}),this.projectionOptions=t;var n=this.projection?this.getProjection():void 0;this.projection=e.getProjection(t);var i=this.getProjection();return p(n,i)?null:(this._calcMatrices(),i)}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSize",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return e.wrap(this.rotation,-180,180)},set:function(e){this.rotation=e}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(t){var n,i=-t*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l+a*s,e[1]=r*l+o*s,e[2]=i*-s+a*l,e[3]=r*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCameraOnTerrain",value:function(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=0);var e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}},{key:"_updateSeaLevelZoom",value:function(){0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop(),r=0,a=0,o=0;o<n.length;o++){var s=new e.pointGeometry(n[o][0]*this.width,i+n[o][1]*(this.height-i)),l=t.pointCoordinate(s);if(l){var u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*u,a+=u}}return 0===a?NaN:r/a}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._seaLevelZoom&&this._elevation){var e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,i=this._mercatorZfromZoom(e),r=this._mercatorZfromZoom(this._maxZoom),a=Math.max(i-n,r);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(t){var n,i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));n=t.z<this._camera.position[2]?[i.x,i.y,i.z]:[t.x,t.y,t.z];var r=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){var i=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,n=new Wi;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var n=e.transformQuat([],[0,0,-1],t),i=e.transformQuat([],[0,-1,0],t);if(i[2]<0)return!1;var r=Zi(n,i);return!!r&&(this._camera.orientation=r,!0)}},{key:"_setCameraPosition",value:function(t){var n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;t[2]=e.clamp(t[2],r/i,r/n),this._camera.position=t}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies)for(var i=this.pointCoordinate(new e.pointGeometry(0,0)),r=this.pointCoordinate(new e.pointGeometry(this.width,0)),a=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(i.x,r.x,a.x,o.x)),l=Math.floor(Math.max(i.x,r.x,a.x,o.x)),u=1,c=s-u;c<=l+u;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t));return n}},{key:"coveringTiles",value:function(t){var n=this,i=this.coveringZoomLevel(t),r=i,a=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&i<t.minzoom)return[];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);var s=this.locationCoordinate(this.center),l=this.center.lat,u=1<<i,c=[u*s.x,u*s.y,0],h="globe"===this.projection.name,d=!h,p=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,d),f=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),m=u*e.mercatorZfromAltitude(1,this.center.lat),v=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),y=[u*f.x,u*f.y,v*(d?1:m)],g=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?i:0,x=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=t.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?Hi(this):1,k=function(t){var i=1/4e4,r=new e.MercatorCoordinate(t.x+i,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+i,t.z),o=t.toLngLat(),s=r.toLngLat(),l=a.toLngLat(),u=n.locationCoordinate(o),c=n.locationCoordinate(s),h=n.locationCoordinate(l),d=Math.hypot(c.x-u.x,c.y-u.y),p=Math.hypot(h.x-u.x,h.y-u.y);return Math.sqrt(d*p)*w/i},S=function(t){var i=x,r=b;return{aabb:e.tileAABB(n,u,0,0,0,t,r,i,n.projection),zoom:0,x:0,y:0,minZ:r,maxZ:i,wrap:t,fullyVisible:!1}},T=[],C=[],E=i,M=t.reparseOverscaled?r:i,P=function(e){return e*e},A=P((v-this._centerAltitude)*m),D=function(e){if(n._elevation&&e.tileID&&o){var t=n._elevation.getMinMaxForTile(e.tileID),i=e.aabb;t?(i.min[2]=t.min,i.max[2]=t.max,i.center[2]=(i.min[2]+i.max[2])/2):(e.shouldSplit=I(e),e.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=n._centerAltitude))}},I=function(t){if(t.zoom<_)return!0;if(t.zoom===E)return!1;if(null!=t.shouldSplit)return t.shouldSplit;var i=t.aabb.distanceX(y),o=t.aabb.distanceY(y),s=A,u=1;if(h){s=P(t.aabb.distanceZ(y));var c=Math.pow(2,t.zoom),d=e.latFromMercatorY((t.y+1)/c),p=e.latFromMercatorY(t.y/c),f=Math.min(Math.max(l,d),p),v=e.circumferenceAtLatitude(f)/e.circumferenceAtLatitude(l);u=Math.min(v,1)}else if(a&&(s=P(t.aabb.distanceZ(y)*m)),n.projection.isReprojectedInTileSpace&&r<=5){var x=Math.pow(2,t.zoom),b=k(new e.MercatorCoordinate((t.x+.5)/x,(t.y+.5)/x));u=b>.85?1:b}var w=i*i+o*o+s;return w<P((1<<E-t.zoom)*g*u*function(e,t){if(t*P(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(s,A),w))};if(this.renderWorldCopies)for(var L=1;L<=3;L++)T.push(S(-L)),T.push(S(L));for(T.push(S(0));T.length>0;){var O=T.pop(),z=O.x,R=O.y,B=O.fullyVisible;if(!B){var F=O.aabb.intersects(p);if(0===F)continue;B=2===F}if(O.zoom!==E&&I(O))for(var N=0;N<4;N++){var j=(z<<1)+N%2,U=(R<<1)+(N>>1),V={aabb:o?O.aabb.quadrant(N):e.tileAABB(this,u,O.zoom+1,j,U,O.wrap,O.minZ,O.maxZ,this.projection),zoom:O.zoom+1,x:j,y:U,wrap:O.wrap,fullyVisible:B,tileID:void 0,shouldSplit:void 0,minZ:O.minZ,maxZ:O.maxZ};a&&!h&&(V.tileID=new e.OverscaledTileID(O.zoom+1===E?M:O.zoom+1,O.wrap,O.zoom+1,j,U),D(V)),T.push(V)}else{var Z=O.zoom===E?M:O.zoom;if(t.minzoom&&t.minzoom>Z)continue;var W=c[0]-(.5+z+(O.wrap<<O.zoom))*(1<<i-O.zoom),G=c[1]-.5-R,Y=O.tileID?O.tileID:new e.OverscaledTileID(Z,O.wrap,O.zoom,z,R);C.push({tileID:Y,distanceSq:W*W+G*G})}}if(this.fogCullDistSq){var H=this.fogCullDistSq,X=this.horizonLineFromTop();C=C.filter((function(i){var r=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],o=n.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(r,r,o),e.transformMat4$1(a,a,o);var s=e.getAABBPointSquareDist(r,a);if(0===s)return!0;var l=!1,u=n._elevation;if(u&&s>H&&0!==X){var c,h=n.calculateProjMatrix(i.tileID.toUnwrapped());t.isTerrainDEM||(c=u.getMinMaxForTile(i.tileID)),c||(c={min:b,max:x});var d=e.furthestTileCorner(n.rotation),p=[d[0]*e.EXTENT,d[1]*e.EXTENT,c.max];e.transformMat4(p,p,h),l=(1-p[1])*n.height*.5<X}return s<H||l}))}return C.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=this.projection.project(t.lng,n);return new e.pointGeometry(i.x*this.worldSize,i.y*this.worldSize)}},{key:"unproject",value:function(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"setLocationAtPoint",value:function(t,n){var i,r,a=this.centerPoint;if("globe"===this.projection.name){var o=this.worldSize;i=(n.x-a.x)/o,r=(n.y-a.y)/o}else{var s=this.pointCoordinate(n),l=this.pointCoordinate(a);i=s.x-l.x,r=s.y-l.y}var u=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(u.x-i,u.y-r))}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this.projection.locationPoint(this,e)}},{key:"locationPoint3D",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t,n){var i=n?e.mercatorZfromAltitude(n,t.lat):void 0,r=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(r.x,r.y,i)}},{key:"coordinateLocation",value:function(e){return this.projection.unproject(e.x,e.y)}},{key:"pointRayIntersection",value:function(t,n){var i=null!=n?n:this._centerAltitude,r=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);var o=a[3];e.scale$1(r,r,1/r[3]),e.scale$1(a,a,1/o);var s=r[2],l=a[2];return{p0:r,p1:a,t:s===l?0:(i-s)/(l-s)}}},{key:"screenPointToMercatorRay",value:function(t){var n=[t.x,t.y,0,1],i=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(i,i,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(i,i,1/i[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(i,i,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],i,n)))}},{key:"rayIntersectionCoordinate",value:function(t){var n=t.p0,i=t.p1,r=t.t,a=e.mercatorZfromAltitude(n[2],this._center.lat),o=e.mercatorZfromAltitude(i[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],i[0],r)/this.worldSize,e.number(n[1],i[1],r)/this.worldSize,e.number(a,o,r))}},{key:"pointCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var n=this.elevation,i=this.elevation.pointCoordinate(t);if(i)return new e.MercatorCoordinate(i[0],i[1],i[2]);var r=0,a=this.horizonLineFromTop();if(t.y>a)return this.pointCoordinate(t);for(var o=.02*a,s=t.clone(),l=0;l<10&&a-r>o;l++){s.y=e.number(r,a,.66);var u=n.pointCoordinate(s);u?(a=s.y,i=u):r=s.y}return i?new e.MercatorCoordinate(i[0],i[1],i[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){if(this.elevation)return!this.elevation.pointCoordinate(e);var t=this.horizonLineFromTop();return e.y<t}},{key:"_coordinatePoint",value:function(t,n){var i=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,r=[t.x*this.worldSize,t.y*this.worldSize,i+t.toAltitude(),1];return e.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new e.pointGeometry(r[0]/r[3],r[1]/r[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getBounds",value:function(t,n){var i=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),r=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),a=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),o=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom),s=this.pointCoordinate(i,t),l=this.pointCoordinate(r,t),u=this.pointCoordinate(a,n),c=this.pointCoordinate(o,n),h=function(e,t){return(t.y-e.y)/(t.x-e.x)};return s.y>1&&l.y>=0?s=new e.MercatorCoordinate((1-c.y)/h(c,s)+c.x,1):s.y<0&&l.y<=1&&(s=new e.MercatorCoordinate(-c.y/h(c,s)+c.x,0)),l.y>1&&s.y>=0?l=new e.MercatorCoordinate((1-u.y)/h(u,l)+u.x,1):l.y<0&&s.y<=1&&(l=new e.MercatorCoordinate(-u.y/h(u,l)+u.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(c)).extend(this.coordinateLocation(u))}},{key:"_getBounds3D",value:function(){var e=this.elevation;if(!e.visibleDemTiles.length)return this._getBounds(0,0);var t=e.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}},{key:"getBounds",value:function(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(e,t){return this.projection.createTileMatrix(this,t,e)}},{key:"calculateDistanceTileData",value:function(t){var n=t.key,i=this._distanceTileDataCache;if(i[n])return i[n];var r=t.canonical,a=1/this.height,o=this.cameraWorldSize/this.zoomScale(r.z),s=(r.x+Math.pow(2,r.z)*t.wrap)*o,l=r.y*o,u=this.point,c=this.angle,h=Math.sin(-c),d=-Math.cos(-c);return i[n]={bearing:[h,d],center:[(u.x-s)*a,(u.y-l)*a],scale:o/e.EXTENT*a},i[n]}},{key:"calculateFogTileMatrix",value:function(t){var n=t.key,i=this._fogTileMatrixCache;if(i[n])return i[n];var r=this.calculatePosMatrix(t,this.cameraWorldSize);return e.multiply$1(r,this.worldToFogMatrix,r),i[n]=new Float32Array(r),i[n]}},{key:"calculateProjMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.key,r=n?this._alignedProjMatrixCache:this._projMatrixCache;if(r[i])return r[i];var a=this.calculatePosMatrix(t,this.worldSize);return e.multiply$1(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,a),r[i]=new Float32Array(a),r[i]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(t){var n=t.tileID.key,i=this._pixelsToTileUnitsCache;if(i[n])return i[n];var r=function(t,n){var i,r,a,o,s,l,u,c,h=t.tileTransform.scale*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return i=new Float32Array(4),o=(r=n.inverseAdjustmentMatrix)[1],s=r[2],l=r[3],c=(a=[h,h])[1],i[0]=r[0]*(u=a[0]),i[1]=o*u,i[2]=s*c,i[3]=l*c,i}(t,this);return i[n]=r,i[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"recenterOnTerrain",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(n),r=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);i[2]/=a,r[2]/=a,e.normalize(r,r);var o=t.raycast(i,r,t.exaggeration());if(o){var s=e.scaleAndAdd([],i,r,o),l=new e.MercatorCoordinate(s[0],s[1],e.mercatorZfromAltitude(s[2],e.latFromMercatorY(s[1]))),u=(l.z+e.length([l.x-i[0],l.y-i[1],l.z-i[2]*a]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(u),this._centerAltitude=l.toAltitude(),this._center=this.coordinateLocation(l),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCameraAltitude",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(n),r=t.getAtPointOrZero(a(e.MercatorCoordinate,c(i))),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),s=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*r;if(s<o){var l=this.locationCoordinate(this._center,this._centerAltitude),u=[l.x-i[0],l.y-i[1],l.z-i[2]],h=e.length(u);u[2]-=(o-s)/this._projectionScaler;var d=e.length(u);if(0===d)return;e.scale$2(u,u,h/d*this._projectionScaler),this._camera.position=[l.x-u[0],l.y-u[1],l.z*this._projectionScaler-u[2]],this._camera.orientation=Zi(u,this._camera.up()),this._updateStateFromCamera()}}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){if(this._constraining=!0,this.projection.isReprojectedInTileSpace){var t=this.center;return t.lat=e.clamp(t.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(t.lng=e.clamp(t.lng,this.minLng,this.maxLng)),this.center=t,void(this._constraining=!1)}var n=this._unmodified,i=this.point,r=i.x,a=i.y,o=0,s=r,l=a,u=this.width/2,c=this.height/2,h=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(a-c<h&&(l=h+c),a+c>d&&(l=d-c),d-h<this.height&&(o=Math.max(o,this.height/(d-h)),l=(d+h)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var p=this.worldMinX*this.scale,f=this.worldMaxX*this.scale,m=this.worldSize/2-(p+f)/2;(s=(r+m+this.worldSize)%this.worldSize-m)-u<p&&(s=p+u),s+u>f&&(s=f-u),f-p<this.width&&(o=Math.max(o,this.width/(f-p)),s=(f+p)/2)}s===r&&l===a||(this.center=this.unproject(new e.pointGeometry(s,l))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCameraAltitude(),this._unmodified=n,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this._fov/2,n=this.centerOffset,i=this.pixelsPerMeter;this._projectionScaler=i/(e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(t)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var r=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?i:1),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-n.x/this.width,a[9]=2*n.y/this.height;var o=e.mul([],a,r);if(this.projection.isReprojectedInTileSpace){var s=this.locationCoordinate(this.center),l=e.identity([]);e.translate(l,l,[s.x*this.worldSize,s.y*this.worldSize,0]),e.multiply$1(l,l,Yi(this)),e.translate(l,l,[-s.x*this.worldSize,-s.y*this.worldSize,0]),e.multiply$1(o,o,l),this.inverseAdjustmentMatrix=function(e){var t=Yi(e,!0);return D([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],o,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=o,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var u=new Float32Array(16);e.identity(u),e.scale(u,u,[1,-1,1]),e.rotateX(u,u,this._pitch),e.rotateZ(u,u,this.angle);var c=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;c[8]=2*-n.x/this.width,c[9]=2*(n.y+h)/this.height,this.skyboxMatrix=e.multiply$1(u,c,u);var d=this.point,p=d.x,f=d.y,m=this.width%2/2,v=this.height%2/2,y=Math.cos(this.angle),g=Math.sin(this.angle),_=p-Math.round(p)+y*m+g*v,x=f-Math.round(f)+y*v+g*m,b=new Float64Array(o);if(e.translate(b,b,[_>.5?_-1:_,x>.5?x-1:x,0]),this.alignedProjMatrix=b,o=e.create(),e.scale(o,o,[this.width/2,-this.height/2,1]),e.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=e.create(),e.scale(o,o,[1,-1,1]),e.translate(o,o,[-1,-1,0]),e.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o,this.pixelMatrix=e.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(o=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=o,this.globeMatrix="globe"===this.projection.name?e.calculateGlobeMatrix(this):o,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var t=this.cameraWorldSize,n=this.cameraPixelsPerMeter,i=this._camera.position,r=1/this.height,a=[t,t,n];e.scale$2(a,a,r),e.scale$2(i,i,-1),e.multiply$2(i,i,a);var o=e.create();e.translate(o,o,i),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,r)}},{key:"_computeCameraPosition",value:function(e){var t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),i=this.point,r=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[i.x/this.worldSize-n[0]*r,i.y/this.worldSize-n[1]*r,e/this.worldSize*this._centerAltitude-n[2]*r]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(t){var n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=t[2],r=1;i>0&&(r=Math.min((n-this._camera.position[2])/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,r),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,n=this._camera.forward(),i=this._camera.getPitchBearing(),r=i.pitch,a=i.bearing,o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),l=Math.max((t[2]-o)/Math.cos(r),s),u=this._zoomFromMercatorZ(l);e.scaleAndAdd(t,t,n,l),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(u,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(t,n){var i=Math.min(t.x,n.x),r=Math.max(t.x,n.x),a=Math.min(t.y,n.y),o=Math.max(t.y,n.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var s=[new e.pointGeometry(i,a),new e.pointGeometry(r,o),new e.pointGeometry(i,o),new e.pointGeometry(r,a)],l=this.renderWorldCopies?-3:0,u=this.renderWorldCopies?4:1,c=0,h=s;c<h.length;c++){var d=h[c],p=this.pointRayIntersection(d);if(p.t<0)return!0;var f=this.rayIntersectionCoordinate(p);if(f.x<l||f.y<0||f.x>u||f.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,n){var i=e.length(e.sub([],this._camera.position,t)),r=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(r)}},{key:"getCameraPoint",value:function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}]),t}();function Ji(e,t){var n=!1,i=null,r=function r(){i=null,n&&(e(),i=setTimeout(r,t),n=!1)};return function(){return n=!0,i||r(),i}}var er=function(){function t(n){v(this,t),this._hashName=n&&encodeURIComponent(n),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ji(this._updateHashUnthrottled.bind(this),300)}return y(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}},{key:"getHashString",value:function(t){var n=this._map;if(!n)return"";var i=n.getCenter(),r=Math.round(100*n.getZoom())/100,a=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,a),s=Math.round(i.lng*o)/o,l=Math.round(i.lat*o)/o,u=n.getBearing(),c=n.getPitch(),h="";if(h+=t?"/".concat(s,"/").concat(l,"/").concat(r):"".concat(r,"/").concat(l,"/").concat(s),(u||c)&&(h+="/"+Math.round(10*u)/10),c&&(h+="/".concat(Math.round(c))),this._hashName){var d=this._hashName,p=!1,f=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===d?(p=!0,"".concat(t,"=").concat(h)):e})).filter((function(e){return e}));return p||f.push("".concat(d,"=").concat(h)),"#".concat(f.join("&"))}return"#".concat(h)}},{key:"_getCurrentHash",value:function(){var t,n=this,i=e.window.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):i.split("/")}},{key:"_onHashChange",value:function(){var e=this._map;if(!e)return!1;var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(e){return isNaN(e)}))){var n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}]),t}(),tr={linearity:.3,easing:e.bezier(0,0,.3,1)},nr=e.extend({deceleration:2500,maxSpeed:1400},tr),ir=e.extend({deceleration:20,maxSpeed:1400},tr),rr=e.extend({deceleration:1e3,maxSpeed:360},tr),ar=e.extend({deceleration:1e3,maxSpeed:90},tr),or=function(){function t(e){v(this,t),this._map=e,this.clear()}return y(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,n=e.exported.now();t.length>0&&n-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var n,i={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0},r=d(this._inertiaBuffer);try{for(r.s();!(n=r.n()).done;){var a=n.value.settings;i.zoom+=a.zoomDelta||0,i.bearing+=a.bearingDelta||0,i.pitch+=a.pitchDelta||0,a.panDelta&&i.pan._add(a.panDelta),a.around&&(i.around=a.around),a.pinchAround&&(i.pinchAround=a.pinchAround)}}catch(f){r.e(f)}finally{r.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var l=lr(i.pan.mag(),o,e.extend({},nr,t||{}));s.offset=i.pan.mult(l.amount/i.pan.mag()),s.center=this._map.transform.center,sr(s,l)}if(i.zoom){var u=lr(i.zoom,o,ir);s.zoom=this._map.transform.zoom+u.amount,sr(s,u)}if(i.bearing){var c=lr(i.bearing,o,rr);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),sr(s,c)}if(i.pitch){var h=lr(i.pitch,o,ar);s.pitch=this._map.transform.pitch+h.amount,sr(s,h)}if(s.zoom||s.bearing){var p=void 0===i.pinchAround?i.around:i.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),s.noMoveStart=!0,s}}}]),t}();function sr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function lr(t,n,i){var r=i.maxSpeed,a=i.linearity,o=i.deceleration,s=e.clamp(t*a/(n/1e3),-r,r),l=Math.abs(s)/(o*a);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}var ur=function(t){f(i,t);var n=m(i);function i(t,r,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};v(this,i);var l=E(r.getCanvasContainer(),a),u=r.unproject(l);return(o=n.call(this,t,e.extend({point:l,lngLat:u,originalEvent:a},s)))._defaultPrevented=!1,o.target=r,o}return y(i,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),i}(e.Event),cr=function(t){f(i,t);var n=m(i);function i(t,r,a){var o;v(this,i);var s="touchend"===t?a.changedTouches:a.touches,l=M(r.getCanvasContainer(),s),u=l.map((function(e){return r.unproject(e)})),c=l.reduce((function(e,t,n,i){return e.add(t.div(i.length))}),new e.pointGeometry(0,0));return(o=n.call(this,t,{points:l,point:c,lngLats:u,lngLat:r.unproject(c),originalEvent:a}))._defaultPrevented=!1,o}return y(i,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),i}(e.Event),hr=function(e){f(n,e);var t=m(n);function n(e,i,r){var a;return v(this,n),(a=t.call(this,e,{originalEvent:r}))._defaultPrevented=!1,a}return y(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),dr=function(){function t(e,n){v(this,t),this._map=e,this._clickTolerance=n.clickTolerance}return y(t,[{key:"reset",value:function(){this._mousedownPos=void 0}},{key:"wheel",value:function(e){return this._firePreventable(new hr(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new ur(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new ur(e.type,this._map,e))}},{key:"preclick",value:function(t){var n=e.extend({},t);n.type="preclick",this._map.fire(new ur(n.type,this._map,n))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ur(e.type,this._map,e)))}},{key:"dblclick",value:function(e){return this._firePreventable(new ur(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new ur(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new ur(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new cr(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new cr(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new cr(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new cr(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),pr=function(){function e(t){v(this,e),this._map=t}return y(e,[{key:"reset",value:function(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}},{key:"mousemove",value:function(e){this._map.fire(new ur(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ur("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ur(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),fr=function(){function t(e,n){v(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}return y(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(k(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){var n=this;if(this._active){var i=t;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=i,this._box||(this._box=g("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var a=Math.min(r.x,i.x),o=Math.max(r.x,i.x),s=Math.min(r.y,i.y),l=Math.max(r.y,i.y);this._map._requestDomTask((function(){n._box&&(n._box.style.transform="translate(".concat(a,"px,").concat(s,"px)"),n._box.style.width=o-a+"px",n._box.style.height=l-s+"px")}))}}}},{key:"mouseupWindow",value:function(t,n){var i=this;if(this._active&&0===t.button){var r=this._startPos,a=n;if(this.reset(),C(),r.x!==a.x||r.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(r,a,i._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),S(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}]),t}();function mr(e,t){for(var n={},i=0;i<e.length;i++)n[e[i].identifier]=t[i];return n}var vr=function(){function t(e){v(this,t),this.reset(),this.numTouches=e.numTouches}return y(t,[{key:"reset",value:function(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}},{key:"touchstart",value:function(t,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){var n,i=new e.pointGeometry(0,0),r=d(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;i._add(a)}}catch(o){r.e(o)}finally{r.f()}return i.div(t.length)}(n),this.touches=mr(i,n)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var i=mr(n,t);for(var r in this.touches){var a=this.touches[r],o=i[r];(!o||o.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var i=!this.aborted&&this.centroid;if(this.reset(),i)return i}}}]),t}(),yr=function(){function e(t){v(this,e),this.singleTap=new vr(t),this.numTaps=t.numTaps,this.reset()}return y(e,[{key:"reset",value:function(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var i=this.singleTap.touchend(e,t,n);if(i){var r=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(i)<30;if(r&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}]),e}(),gr=function(){function e(){v(this,e),this._zoomIn=new yr({numTouches:1,numTaps:2}),this._zoomOut=new yr({numTouches:2,numTaps:1}),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var i=this,r=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),_r={0:1,2:2},xr=function(){function e(t){v(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return y(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var n=P(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){var n=_r[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&P(e)===this._eventButton&&(this._moved&&C(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),br=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"mousedown",value:function(e,t){o(s(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(xr),wr=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(xr),kr=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(xr),Sr=function(){function t(n,i){v(this,t),this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return y(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(e,t,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length)return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.preventDefault(),this._calculateTransform(e,t,n)}}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,n,i){i.length>0&&(this._active=!0);var r=mr(i,n),a=new e.pointGeometry(0,0),o=new e.pointGeometry(0,0),s=0;for(var l in r){var u=r[l],c=this._touches[l];c&&(a._add(u),o._add(u.sub(c)),s++,r[l]=u)}if(this._touches=r,!(s<this._minTouches)&&o.mag()){var h=o.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=g("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var e=this;"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")}),500)}}]),t}(),Tr=function(){function e(){v(this,e),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1,this._firstTwoTouches=void 0}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){var i=this._firstTwoTouches;if(i){e.preventDefault();var r=h(i,2),a=r[0],o=r[1],s=Cr(n,t,a),l=Cr(n,t,o);if(s&&l){var u=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],u,e)}}}},{key:"touchend",value:function(e,t,n){if(this._firstTwoTouches){var i=h(this._firstTwoTouches,2),r=i[0],a=i[1],o=Cr(n,t,r),s=Cr(n,t,a);o&&s||(this._active&&C(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function Cr(e,t,n){for(var i=0;i<e.length;i++)if(e[i].identifier===n)return t[i]}function Er(e,t){return Math.log(e/t)/Math.LN2}var Mr=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._distance=0,this._startDistance=0}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Er(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Er(this._distance,n),pinchAround:t}}}]),n}(Tr);function Pr(e,t){return 180*e.angleWith(t)/Math.PI}var Ar=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Pr(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=Pr(e,this._startVector);return Math.abs(n)<t}}]),n}(Tr);function Dr(e){return Math.abs(e.y)>Math.abs(e.x)}var Ir=function(e){f(n,e);var t=m(n);function n(e){var i;return v(this,n),(i=t.call(this))._map=e,i}return y(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}},{key:"_start",value:function(e){this._lastPoints=e,Dr(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,t,n){var i=this._lastPoints;if(i){var r=e[0].sub(i[0]),a=e[1].sub(i[1]);return this._map._cooperativeGestures&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(r,a,n.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+a.y)/2*-.5})}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var i=e.mag()>=2,r=t.mag()>=2;if(i||r){if(!i||!r)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return Dr(e)&&Dr(t)&&a}}}]),n}(Tr),Lr={panStep:100,bearingStep:15,pitchStep:10},Or=function(){function e(){v(this,e);var t=Lr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return y(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,i=0,r=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:zr,zoom:n?Math.round(l)+n*(e.shiftKey?2:1):l,bearing:s.getBearing()+i*t._bearingStep,pitch:s.getPitch()+r*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function zr(e){return e*(2-e)}var Rr=4.000244140625,Br=function(){function t(n,i){v(this,t),this._map=n,this._el=n.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}return y(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,i=e.exported.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%Rr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=E(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform,i=function(){return n._terrainEnabled()&&t._aroundCoord?n.computeZoomRelativeTo(t._aroundCoord):n.zoom};if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>Rr?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==a&&(a=1/a);var o=i(),s=Math.pow(2,o),l="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(l*a))),"wheel"===this._type&&(this._startZoom=i(),this._easing=this._smoothOutEasing(200)),this._delta=0}var u,c="number"==typeof this._targetZoom?this._targetZoom:i(),h=this._startZoom,d=this._easing,p=!1;if("wheel"===this._type&&h&&d){var f=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),m=d(f);u=e.number(h,c,m),f<1?this._frameId||(this._frameId=!0):p=!0}else u=c,p=!0;return this._active=!0,p&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!p,zoomDelta:u-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var n=e.ease;if(this._prevEase){var i=this._prevEase,r=(e.exported.now()-i.start)/i.duration,a=i.easing(r+.01)-i.easing(r),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=e.bezier(o,s,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=g("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_isFullscreen",value:function(){return!!e.window.document.fullscreenElement||!!e.window.document.webkitFullscreenElement}},{key:"_showBlockerAlert",value:function(){var e=this;"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")}),200)}}]),t}(),Fr=function(){function e(t,n){v(this,e),this._clickZoom=t,this._tapZoom=n}return y(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Nr=function(){function e(){v(this,e),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),jr=function(){function e(){v(this,e),this._tap=new yr({numTouches:1,numTaps:1}),this.reset()}return y(e,[{key:"reset",value:function(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var i=t[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ur=function(){function e(t,n,i){v(this,e),this._el=t,this._mousePan=n,this._touchPan=i}return y(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),Vr=function(){function e(t,n,i){v(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=i}return y(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),Zr=function(){function e(t,n,i,r){v(this,e),this._el=t,this._touchZoom=n,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}return y(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),Wr=function(e){return e.zoom||e.drag||e.pitch||e.rotate},Gr=function(e){f(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n)}(e.Event),Yr=function(){function t(){v(this,t),this.constants=[1,1,.01],this.radius=0}return y(t,[{key:"setup",value:function(t,n){var i=e.sub([],n,t);this.radius=e.length(i[2]<0?e.div([],i,this.constants):[i[0],i[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var n=e.scale$2([],t,this.radius);if(n[2]>0){var i=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),a=e.add([],n,e.scale$2([],e.sub([],e.add([],r,i),n),2));n[0]=a[0],n[1]=a[1]}return n}}]),t}();function Hr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var Xr=function(){function t(n,i){v(this,t),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new or(n),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Yr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),e.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];var a,o=d(this._listeners);try{for(o.s();!(a=o.n()).done;){var s=h(a.value,3),l=s[0],u=s[1],c=s[2];l.addEventListener(u,l===e.window.document?this.handleWindowEvent:this.handleEvent,c)}}catch(p){o.e(p)}finally{o.f()}}return y(t,[{key:"destroy",value:function(){var t,n=d(this._listeners);try{for(n.s();!(t=n.n()).done;){var i=h(t.value,3),r=i[0],a=i[1],o=i[2];r.removeEventListener(a,r===e.window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new dr(t,e));var i=t.boxZoom=new fr(t,e);this._add("boxZoom",i);var r=new gr,a=new Nr;t.doubleClickZoom=new Fr(a,r),this._add("tapZoom",r),this._add("clickZoom",a);var o=new jr;this._add("tapDragZoom",o);var s=t.touchPitch=new Ir(t);this._add("touchPitch",s);var l=new wr(e),u=new kr(e);t.dragRotate=new Vr(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new br(e),h=new Sr(t,e);t.dragPan=new Ur(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var d=new Ar,p=new Mr;t.touchZoomRotate=new Zr(n,p,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new pr(t));var f=t.scrollZoom=new Br(t,this);this._add("scrollZoom",f,["mousePan"]);var m=t.keyboard=new Or;this._add("keyboard",m);for(var v=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];v<y.length;v++){var g=y[v];e.interactive&&e[g]&&t[g].enable(e[g])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=d(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(i){n.e(i)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=d(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!Wr(this._eventsInProgress)||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,n){for(var i in e)if(i!==n&&(!t||t.indexOf(i)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],i=d(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;this._el.contains(r.target)&&n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"handleEvent",value:function(e,t){this._updatingCamera=!0;var n,i="renderFrame"===e.type,r=i?void 0:e,a={needsRenderFrame:!1},o={},s={},l=e.touches?this._getMapTouches(e.touches):void 0,u=l?M(this._el,l):i?void 0:E(this._el,e),c=d(this._handlers);try{for(c.s();!(n=c.n()).done;){var h=n.value,p=h.handlerName,f=h.handler,m=h.allowed;if(f.isEnabled()){var v=void 0;this._blockedByActive(s,m,p)?f.reset():f[t||e.type]&&(v=f[t||e.type](e,u,l),this.mergeHandlerResult(a,o,v,p,r),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||f.isActive())&&(s[p]=f)}}}catch(x){c.e(x)}finally{c.f()}var y={};for(var g in this._previousActiveHandlers)s[g]||(y[g]=r);this._previousActiveHandlers=s,(Object.keys(y).length||Hr(a))&&(this._changes.push([a,o,y]),this._triggerRenderFrame()),(Object.keys(s).length||Hr(a))&&this._map._stop(!0),this._updatingCamera=!1;var _=a.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}},{key:"mergeHandlerResult",value:function(t,n,i,r,a){if(i){e.extend(t,i);var o={handlerName:r,originalEvent:i.originalEvent||a};void 0!==i.zoomDelta&&(n.zoom=o),void 0!==i.panDelta&&(n.drag=o),void 0!==i.pitchDelta&&(n.pitch=o),void 0!==i.bearingDelta&&(n.rotate=o)}}},{key:"_applyChanges",value:function(){var t,n={},i={},r={},a=d(this._changes);try{for(a.s();!(t=a.n()).done;){var o=h(t.value,3),s=o[0],l=o[1],u=o[2];s.panDelta&&(n.panDelta=(n.panDelta||new e.pointGeometry(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.aroundCoord&&(n.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),e.extend(i,l),e.extend(r,u)}}catch(c){a.e(c)}finally{a.f()}this._updateMapTransform(n,i,r),this._changes=[]}},{key:"_updateMapTransform",value:function(t,n,i){var r=this,a=this._map,o=a.transform,s=function(e){return[e.x,e.y,e.z]};if(function(e){var t=r._eventsInProgress.drag;return t&&!r._handlersById[t.handlerName].isActive()}()&&!Hr(t)){var l=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",l!==o.zoom&&this._map._update(!0)}if(Hr(t)){var u=t.panDelta,c=t.zoomDelta,h=t.bearingDelta,d=t.pitchDelta,p=t.around,f=t.aroundCoord,m=t.pinchAround;void 0!==m&&(p=m),n.drag&&!r._eventsInProgress.drag&&p&&(this._dragOrigin=s(o.pointCoordinate3D(p)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",a._stop(!0),p=p||a.transform.centerPoint,h&&(o.bearing+=h),d&&(o.pitch+=d),o._updateCameraState();var v=[0,0,0];if(u){var y=o.pointCoordinate(p);if("globe"===o.projection.name){var g=e.latFromMercatorY(y.y),_=o.center.lat,x=Math.min(e.mercatorZfromAltitude(1,g)/e.mercatorZfromAltitude(1,_),2);u=u.rotate(-o.angle),v[0]=-u.x/o.worldSize*x,v[1]=-u.y/o.worldSize*x}else{var b=o.pointCoordinate(p.sub(u));y&&b&&(v[0]=b.x-y.x,v[1]=b.y-y.y)}}var w=o.zoom,k=[0,0,0];if(c){var S=s(f||o.pointCoordinate3D(p)),T={dir:e.normalize([],e.sub([],S,o._camera.position))};if(T.dir[2]<0){var C=o.zoomDeltaToMovement(S,c);e.scale$2(k,T.dir,C)}}var E=e.add(v,v,k);o._translateCameraConstrained(E),c&&Math.abs(o.zoom-w)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,i,!0)}else this._fireEvents(n,i,!0)}},{key:"_fireEvents",value:function(t,n,i){var r=this,a=Wr(this._eventsInProgress),o=Wr(t),s={};for(var l in t){var u=t[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=u),this._eventsInProgress[l]=t[l]}for(var c in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(c,s[c]);for(var h in o&&this._fireEvent("move",o.originalEvent),t){var d=t[h].originalEvent;this._fireEvent(h,d)}var p,f={};for(var m in this._eventsInProgress){var v=this._eventsInProgress[m],y=v.handlerName,g=v.originalEvent;this._handlersById[y].isActive()||(delete this._eventsInProgress[m],p=n[y]||g,f["".concat(m,"end")]=p)}for(var _ in f)this._fireEvent(_,f[_]);var x=Wr(this._eventsInProgress);if(i&&(a||o)&&!x){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-r._bearingSnap<e&&e<r._bearingSnap};b?(w(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:p})):(this._map.fire(new e.Event("moveend",{originalEvent:p})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){e._frameId=void 0,e.handleEvent(new Gr("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),qr="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",Kr=function(t){f(i,t);var n=m(i);function i(t,a){var o;return v(this,i),(o=n.call(this))._moving=!1,o._zooming=!1,o.transform=t,o._bearingSnap=a.bearingSnap,e.bindAll(["_renderFrameCallback"],r(o)),o}return y(i,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,n,i){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),i)}},{key:"panTo",value:function(t,n,i){return this.easeTo(e.extend({center:t},n),i)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,n,i){return this.easeTo(e.extend({zoom:t},n),i)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,n,i){return this.easeTo(e.extend({bearing:t},n),i)}},{key:"resetNorth",value:function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}},{key:"resetNorthPitch",value:function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,n){t=e.LngLatBounds.convert(t);var i=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),i,n)}},{key:"_extendCameraOptions",value:function(t){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var i=t.padding;t.padding={top:i,bottom:i,right:i,left:i}}return t.padding=e.extend(n,t.padding),t}},{key:"_cameraForBoxAndBearing",value:function(t,n,i,r){var a=this._extendCameraOptions(r),o=this.transform,s=o.padding,l=o.project(e.LngLat.convert(t)),u=o.project(e.LngLat.convert(n)),c=new e.pointGeometry(l.x,u.y),h=new e.pointGeometry(u.x,l.y),d=-e.degToRad(i),p=l.rotate(d),f=u.rotate(d),m=c.rotate(d),v=h.rotate(d),y=new e.pointGeometry(Math.max(p.x,f.x,m.x,v.x),Math.max(p.y,f.y,m.y,v.y)),g=new e.pointGeometry(Math.min(p.x,f.x,m.x,v.x),Math.min(p.y,f.y,m.y,v.y)),_=y.sub(g),x=(o.width-((s.left||0)+(s.right||0)+a.padding.left+a.padding.right))/_.x,b=(o.height-((s.top||0)+(s.bottom||0)+a.padding.top+a.padding.bottom))/_.y;if(!(b<0||x<0)){var w=Math.min(o.scaleZoom(o.scale*Math.min(x,b)),a.maxZoom),k="number"==typeof a.offset.x&&"number"==typeof a.offset.y?new e.pointGeometry(a.offset.x,a.offset.y):e.pointGeometry.convert(a.offset),S=new e.pointGeometry((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(i*Math.PI/180),T=k.add(S).mult(o.scale/o.zoomScale(w));return{center:o.unproject(l.add(u).div(2).sub(T)),zoom:w,bearing:i}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"_cameraForBox",value:function(t,n,i,r,a){var o=this._extendCameraOptions(a);i=i||0,r=r||0,t=e.LngLat.convert(t),n=e.LngLat.convert(n);var s=this.transform.clone();s.padding=o.padding;var l=this.getFreeCameraOptions(),u=new e.LngLat(.5*(t.lng+n.lng),.5*(t.lat+n.lat)),c=.5*(i+r);if(!(s._camera.position[2]<e.mercatorZfromAltitude(c,u.lat))){l.lookAtPoint(u),s.setFreeCameraOptions(l);var h,d,p=e.MercatorCoordinate.fromLngLat(t),f=e.MercatorCoordinate.fromLngLat(n),m=s.pointRayIntersection(s.centerPoint,c),v=[(h=s.rayIntersectionCoordinate(m)).x,h.y,h.z],y=s.screenPointToMercatorRay(s.centerPoint),g="globe"!==s.projection.name,_=0;do{var x=Math.floor(s.zoom),b=1<<x,w=Math.min(b*p.x,b*f.x),k=Math.min(b*p.y,b*f.y),S=Math.max(b*p.x,b*f.x),T=Math.max(b*p.y,b*f.y),C=new e.Aabb([w,k,i],[S,T,r]),E=e.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,x,g);if(2!==C.intersects(E)){d&&(s._camera.position=e.scaleAndAdd([],s._camera.position,y.dir,-d),s._updateStateFromCamera());break}var M=e.sub([],s._camera.position,v);d=.5*e.length(M),s._camera.position=e.scaleAndAdd([],s._camera.position,y.dir,d);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}},{key:"_raycastElevationBox",value:function(t,n){var i=this.transform.elevation;if(i){var r=new e.pointGeometry(t.x,n.y),a=new e.pointGeometry(n.x,t.y),o=i.pointCoordinate(t);if(o){var s=i.pointCoordinate(n);if(s){var l=i.pointCoordinate(r);if(l){var u=i.pointCoordinate(a);if(u){var c=new e.MercatorCoordinate(o[0],o[1]).toLngLat(),h=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new e.MercatorCoordinate(u[0],u[1]).toLngLat(),f=Math.min(c.lng,Math.min(h.lng,Math.min(d.lng,p.lng))),m=Math.min(c.lat,Math.min(h.lat,Math.min(d.lat,p.lat))),v=Math.max(c.lng,Math.max(h.lng,Math.max(d.lng,p.lng))),y=Math.max(c.lat,Math.max(h.lat,Math.max(d.lat,p.lat))),g=Math.min(o[3],Math.min(s[3],Math.min(l[3],u[3]))),_=Math.max(o[3],Math.max(s[3],Math.max(l[3],u[3])));return{minLngLat:new e.LngLat(f,m),maxLngLat:new e.LngLat(v,y),minAltitude:g,maxAltitude:_}}}}}}}},{key:"fitScreenCoordinates",value:function(t,n,i,r,a){var o,s,l,u,c=e.pointGeometry.convert(t),h=e.pointGeometry.convert(n),d=this._raycastElevationBox(c,h);if(d)o=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,u=d.maxAltitude;else{if(this.transform.anyCornerOffEdge(c,h))return this;o=this.transform.pointLocation(c),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(n)),i,r):this._cameraForBox(o,s,l,u,r),r,a)}},{key:"_fitInternal",value:function(t,n,i){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}},{key:"jumpTo",value:function(t,n){this.stop();var i=t.preloadOnly?this.transform.clone():this.transform,r=!1,a=!1,o=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(r=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=e.LngLat.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(a=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),t.preloadOnly?(this._preloadTiles(i),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),r&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),a&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||e.warnOnce(qr),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,n){var i=this.transform;if(!i.projection.supportsFreeCamera)return e.warnOnce(qr),this;this.stop();var r=i.zoom,a=i.pitch,o=i.bearing;i.setFreeCameraOptions(t);var s=r!==i.zoom,l=a!==i.pitch,u=o!==i.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),u&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}},{key:"easeTo",value:function(t,n){var i=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);var r,a,o,s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h=this.getPadding(),d="zoom"in t?+t.zoom:l,p="bearing"in t?this._normalizeBearing(t.bearing,u):u,f="pitch"in t?+t.pitch:c,m="padding"in t?t.padding:s.padding,v=e.pointGeometry.convert(t.offset);if("globe"===s.projection.name){var y=e.MercatorCoordinate.fromLngLat(s.center),g=v.rotate(-s.angle);y.x+=g.x/s.worldSize,y.y+=g.y/s.worldSize;var _=y.toLngLat(),x=e.LngLat.convert(t.center||_);this._normalizeCenter(x),r=s.centerPoint.add(g),a=new e.pointGeometry(y.x,y.y).mult(s.worldSize),o=new e.pointGeometry(e.mercatorXfromLng(x.lng),e.mercatorYfromLat(x.lat)).mult(s.worldSize).sub(a)}else{r=s.centerPoint.add(v);var b=s.pointLocation(r),w=e.LngLat.convert(t.center||b);this._normalizeCenter(w),a=s.project(b),o=s.project(w).sub(a)}var k,S,T=s.zoomScale(d-l);t.around&&(k=e.LngLat.convert(t.around),S=s.locationPoint(k));var C=this._zooming||d!==l,E=this._rotating||u!==p,M=this._pitching||f!==c,P=!s.isPaddingEqual(m),A=function(s){return function(y){if(C&&(s.zoom=e.number(l,d,y)),E&&(s.bearing=e.number(u,p,y)),M&&(s.pitch=e.number(c,f,y)),P&&(s.interpolatePadding(h,m,y),r=s.centerPoint.add(v)),k)s.setLocationAtPoint(k,S);else{var g=s.zoomScale(s.zoom-l),_=d>l?Math.min(2,T):Math.max(.5,T),x=Math.pow(_,1-y),b=s.unproject(a.add(o.mult(y*x)).mult(g));s.setLocationAtPoint(s.renderWorldCopies?b.wrap():b,r)}return t.preloadOnly||i._fireMoveEvents(n),s}};if(t.preloadOnly){var D=this._emulate(A,t.duration,s);return this._preloadTiles(D),this}var I={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=C,this._rotating=E,this._pitching=M,this._padding=P,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,I),this._ease(A(s),(function(e){s.recenterOnTerrain(),i._afterEase(n,e)}),t),this}},{key:"_prepareEase",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!i.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!i.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!i.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,n){if(!this._easeId||!n||this._easeId!==n){this._easeId=void 0,this.transform.cameraElevationReference="ground";var i=this._zooming,r=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new e.Event("zoomend",t)),r&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,n){var i=this;if(!t.essential&&e.exported.prefersReducedMotion){var r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):o,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:l,p="padding"in t?t.padding:a.padding,f=a.zoomScale(c-o),m=e.pointGeometry.convert(t.offset),v=a.centerPoint.add(m),y=a.pointLocation(v),g=e.LngLat.convert(t.center||y);this._normalizeCenter(g);var _=a.project(y),x=a.project(g).sub(_),b=t.curve,w=Math.max(a.width,a.height),k=w/f,S=x.mag();if("minZoom"in t){var T=e.clamp(Math.min(t.minZoom,o,c),a.minZoom,a.maxZoom),C=w/a.zoomScale(T-o);b=Math.sqrt(C/S*2)}var E=b*b;function M(e){var t=(k*k-w*w+(e?-1:1)*E*E*S*S)/(2*(e?k:w)*E*S);return Math.log(Math.sqrt(t*t+1)-t)}function P(e){return(Math.exp(e)-Math.exp(-e))/2}function A(e){return(Math.exp(e)+Math.exp(-e))/2}var D=M(0),I=function(e){return A(D)/A(D+b*e)},L=function(e){return w*((A(D)*(P(t=D+b*e)/A(t))-P(D))/E)/S;var t},O=(M(1)-D)/b;if(Math.abs(S)<1e-6||!isFinite(O)){if(Math.abs(w-k)<1e-6)return this.easeTo(t,n);var z=k<w?-1:1;O=Math.abs(Math.log(k/w))/b,L=function(){return 0},I=function(e){return Math.exp(z*b*e)}}t.duration="duration"in t?+t.duration:1e3*O/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);var R=s!==h,B=d!==l,F=!a.isPaddingEqual(p),N=function(r){return function(a){var f=a*O,y=1/I(f);r.zoom=1===a?c:o+r.scaleZoom(y),R&&(r.bearing=e.number(s,h,a)),B&&(r.pitch=e.number(l,d,a)),F&&(r.interpolatePadding(u,p,a),v=r.centerPoint.add(m));var b=1===a?g:r.unproject(_.add(x.mult(L(f))).mult(y));return r.setLocationAtPoint(r.renderWorldCopies?b.wrap():b,v),r._updateCameraOnTerrain(),t.preloadOnly||i._fireMoveEvents(n),r}};if(t.preloadOnly){var j=this._emulate(N,t.duration,a);return this._preloadTiles(j),this}return this._zooming=!0,this._rotating=R,this._pitching=B,this._padding=F,this._prepareEase(n,!1),this._ease(N(a),(function(){return i._afterEase(n)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){var n=this._onEaseEnd;this._onEaseEnd=void 0,n.call(this,t)}if(!e){var i=this.handlers;i&&i.stop(!1)}return this}},{key:"_ease",value:function(t,n,i){!1===i.animate||0===i.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,n){t=e.wrap(t,-180,180);var i=Math.abs(t-n);return Math.abs(t-360-n)<i&&(t-=360),Math.abs(t+360-n)<i&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.maxBounds){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}},{key:"_emulate",value:function(e,t,n){for(var i=Math.ceil(15*t/1e3),r=[],a=e(n.clone()),o=0;o<=i;o++){var s=a(o/i);r.push(s.clone())}return r}}]),i}(e.Evented),$r=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t),this.options=n,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return y(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=g("button","mapboxgl-ctrl-attrib-button",this._container),g("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var i=n.reduce((function(e,t,i){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(i<n.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(i).concat(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var i in n){var r=n[i];if(r.used){var a=r.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),e=e.filter((function(t,n){for(var i=n+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[].concat(c(this.options.customAttribution),c(e)):e.unshift(this.options.customAttribution));var o=e.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),Qr=function(){function t(){v(this,t),e.bindAll(["_updateLogo","_updateCompact"],this)}return y(t,[{key:"onAdd",value:function(e){this._map=e,this._container=g("div","mapboxgl-ctrl");var t=g("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),Jr=function(){function e(){v(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return y(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,i=n?this._queue.concat(n):this._queue,r=d(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){r.e(o)}finally{r.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,i=d(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!r.cancelled&&(r.callback(e),this._cleared))break}}catch(a){i.e(a)}finally{i.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}();function ea(t,n,i){if(t=new e.LngLat(t.lng,t.lat),n){var r=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-i.center.lng)/360),s=i.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(r).distSqr(n)<s&&(l||Math.abs(r.lng-i.center.lng)<o)?t=r:i.locationPoint(a).distSqr(n)<s&&(l||Math.abs(a.lng-i.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-i.center.lng)>180;){var u=i.locationPoint(t);if(u.x>=0&&u.y>=0&&u.x<=i.width&&u.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}var ta={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},na=function(t){f(i,t);var n=m(i);function i(t,a){var o;if(v(this,i),o=n.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],r(o)),o._anchor=t&&t.anchor||"center",o._color=t&&t.color||"#3FB1CE",o._scale=t&&t.scale||1,o._draggable=t&&t.draggable||!1,o._clickTolerance=t&&t.clickTolerance||0,o._isDragging=!1,o._state="inactive",o._rotation=t&&t.rotation||0,o._rotationAlignment=t&&t.rotationAlignment||"auto",o._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:o._rotationAlignment,o._updateMoving=function(){return o._update(!0)},t&&t.element)o._element=t.element,o._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{o._defaultMarker=!0,o._element=g("div");var s=41,u=27,c=_("svg",{display:"block",height:s*o._scale+"px",width:u*o._scale+"px",viewBox:"0 0 ".concat(u," ").concat(s)},o._element),h=_("radialGradient",{id:"shadowGradient"},_("defs",{},c));_("stop",{offset:"10%","stop-opacity":.4},h),_("stop",{offset:"100%","stop-opacity":.05},h),_("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c),_("path",{fill:o._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),_("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),_("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}o._element.hasAttribute("aria-label")||o._element.setAttribute("aria-label","Map marker"),o._element.classList.add("mapboxgl-marker"),o._element.addEventListener("dragstart",(function(e){e.preventDefault()})),o._element.addEventListener("mousedown",(function(e){e.preventDefault()}));var d=o._element.classList;for(var p in ta)d.remove("mapboxgl-marker-anchor-".concat(p));return d.add("mapboxgl-marker-anchor-".concat(o._anchor)),o._popup=null,l(o)}return y(i,[{key:"addTo",value:function(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}},{key:"remove",value:function(){var e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-n+i)],"bottom-right":[-i,-1*(t-n+i)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_evaluateOpacity",value:function(){var e=this._map;if(e){var t=this._pos;if(!t||t.x<0||t.x>e.transform.width||t.y<0||t.y>e.transform.height)this._clearFadeTimer();else{var n=e.unproject(t),i=!1;if(e.transform._terrainEnabled()&&e.getTerrain()){var r=e.getFreeCameraOptions();if(r.position){var a=r.position.toLngLat();i=a.distanceTo(n)<.9*a.distanceTo(this._lngLat)}}var o=(1-e._queryFogOpacity(n))*(i?.2:1);this._element.style.opacity="".concat(o),this._popup&&this._popup._setOpacity("".concat(o)),this._fadeTimer=null}}}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_updateDOM",value:function(){var e=this._pos;if(e){var t=this._offset.mult(this._scale),n=this._calculatePitch(),i=this._calculateRotation();this._element.style.transform="\n            translate(".concat(e.x,"px, ").concat(e.y,"px) ").concat(ta[this._anchor],"\n            rotateX(").concat(n,"deg) rotateZ(").concat(i,"deg)\n            translate(").concat(t.x,"px, ").concat(t.y,"px)\n        ")}}},{key:"_calculatePitch",value:function(){return"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?0:this._map&&"map"===this._pitchAlignment?this._map.getPitch():0}},{key:"_calculateRotation",value:function(){return"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?this._rotation:this._map&&"map"===this._rotationAlignment?this._rotation-this._map.getBearing():0}},{key:"_update",value:function(t){var n=this;e.window.cancelAnimationFrame(this._updateFrameId);var i=this._map;i&&(i.transform.renderWorldCopies&&(this._lngLat=ea(this._lngLat,this._pos,i.transform)),this._pos=i.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((function(){n._element&&n._pos&&n._anchor&&(n._pos=n._pos.round(),n._updateDOM())})):this._pos=this._pos.round(),i._requestDomTask((function(){n._map&&(n._element&&n._pos&&n._anchor&&n._updateDOM(),!i.getTerrain()&&!i.getFog()||n._fadeTimer||(n._fadeTimer=setTimeout(n._evaluateOpacity.bind(n),60)))})))}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}},{key:"_onMove",value:function(t){var n=this._map;if(n){if(!this._isDragging){var i=this._clickTolerance||n._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=i}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;var t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){var t=this._map;t&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){this._draggable=!!e;var t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}]),i}(e.Evented),ia=function(){function t(e){v(this,t),this.jumpTo(e)}return y(t,[{key:"getValue",value:function(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;var n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}},{key:"isEasing",value:function(e){return e>=this._startTime&&e<=this._endTime}},{key:"jumpTo",value:function(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}},{key:"easeTo",value:function(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}]),t}(),ra={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},aa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function oa(e){e.parentNode&&e.parentNode.removeChild(e)}var sa,la={showCompass:!0,showZoom:!0,visualizePitch:!1},ua=function(){function t(n,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v(this,t),this._clickTolerance=10,this.element=i,this.mouseRotate=new wr({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,r&&(this.mousePitch=new kr({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener("mousedown",this.mousedown),i.addEventListener("touchstart",this.touchstart,{passive:!1}),i.addEventListener("touchmove",this.touchmove),i.addEventListener("touchend",this.touchend),i.addEventListener("touchcancel",this.reset)}return y(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),k()}},{key:"move",value:function(e,t){var n=this.map,i=this.mouseRotate.mousemoveWindow(e,t),r=i&&i.bearingDelta;if(r&&n.setBearing(n.getBearing()+r),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t),o=a&&a.pitchDelta;o&&n.setPitch(n.getPitch()+o)}}},{key:"off",value:function(){var e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){S(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),E(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,E(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=M(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=M(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}(),ca={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ha=0,da=!1,pa={maxWidth:100,unit:"metric"};function fa(e,t,n){var i=n&&n.maxWidth||100,r=e._containerHeight/2,a=e._containerWidth/2-i/2,o=e.unproject([a,r]),s=e.unproject([a+i,r]),l=o.distanceTo(s);if(n&&"imperial"===n.unit){var u=3.2808*l;u>5280?ma(t,i,u/5280,e._getUIString("ScaleControl.Miles"),e):ma(t,i,u,e._getUIString("ScaleControl.Feet"),e)}else n&&"nautical"===n.unit?ma(t,i,l/1852,e._getUIString("ScaleControl.NauticalMiles"),e):l>=1e3?ma(t,i,l/1e3,e._getUIString("ScaleControl.Kilometers"),e):ma(t,i,l,e._getUIString("ScaleControl.Meters"),e)}function ma(e,t,n,i,r){var a=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n),o=a/n;r._requestDomTask((function(){e.style.width=t*o+"px",e.innerHTML="".concat(a,"&nbsp;").concat(i)}))}var va={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ya=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ga(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.pointGeometry(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){var i=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(i,i);case"top-right":return new e.pointGeometry(-i,i);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(i,-i);case"bottom-right":return new e.pointGeometry(-i,-i);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[n]||[0,0])}var _a={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(n){f(c,n);var a=m(c);function c(t){var n;if(v(this,c),null!=(t=e.extend({},aa,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),(n=a.call(this,new Qi(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,n._minTileCacheSize=t.minTileCacheSize,n._maxTileCacheSize=t.maxTileCacheSize,n._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=t.preserveDrawingBuffer,n._antialias=t.antialias,n._trackResize=t.trackResize,n._bearingSnap=t.bearingSnap,n._refreshExpiredTiles=t.refreshExpiredTiles,n._fadeDuration=t.fadeDuration,n._isInitialLoad=!0,n._crossSourceCollisions=t.crossSourceCollisions,n._crossFadingFactor=1,n._collectResourceTiming=t.collectResourceTiming,n._optimizeForTerrain=t.optimizeForTerrain,n._renderTaskQueue=new Jr,n._domRenderTaskQueue=new Jr,n._controls=[],n._markers=[],n._mapId=e.uniqueId(),n._locale=e.extend({},ra,t.locale),n._clickTolerance=t.clickTolerance,n._cooperativeGestures=t.cooperativeGestures,n._containerWidth=0,n._containerHeight=0,n._averageElevationLastSampledAt=-1/0,n._averageElevationExaggeration=0,n._averageElevation=new ia(0),n._explicitProjection=null,n._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),n._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(n._container=e.window.document.getElementById(t.container),!n._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=t.container}if(n._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&n.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],r(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",n._onWindowOnline,!1),e.window.addEventListener("resize",n._onWindowResize,!1),e.window.addEventListener("orientationchange",n._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",n._onWindowResize,!1)),n.handlers=new Xr(r(n),t),n._localFontFamily=t.localFontFamily,n._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&n.setStyle(t.style,{localFontFamily:n._localFontFamily,localIdeographFontFamily:n._localIdeographFontFamily}),t.projection&&n.setProjection(t.projection),n._hash=t.hash&&new er("string"==typeof t.hash&&t.hash||void 0).addTo(r(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(n.resize(),n.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),n.resize(),t.attributionControl&&n.addControl(new $r({customAttribution:t.customAttribution})),n._logoControl=new Qr,n.addControl(n._logoControl,t.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event("".concat(t.dataType,"data"),t))})),n.on("dataloading",(function(t){n.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),l(n)}return y(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=t.onAdd(this);this._controls.push(t);var r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this._update()}},{key:"getProjection",value:function(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}},{key:"setProjection",value:function(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._updateProjection(e)}},{key:"_updateProjection",value:function(e){null===e&&(this._explicitProjection=null);var t=e||this.getProjection(),n=this.transform.setProjection(t);if(e&&(this._explicitProjection=this.transform.getProjection()),n){for(var i in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[i].clearTiles();this.style.applyProjectionUpdate(),this._update(!0)}return this}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}},{key:"_createDelegatedListener",value:function(e,t,n){var r=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(i){var o=t.filter((function(e){return r.getLayer(e)})),s=o.length?r.queryRenderedFeatures(i.point,{layers:o}):[];s.length?a||(a=!0,n.call(r,new ur(e,r,i.originalEvent,{features:s}))):a=!1},s=function(){a=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:o,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){var l=!1,u=function(i){var a=t.filter((function(e){return r.getLayer(e)}));(a.length?r.queryRenderedFeatures(i.point,{layers:a}):[]).length?l=!0:l&&(l=!1,n.call(r,new ur(e,r,i.originalEvent)))},c=function(t){l&&(l=!1,n.call(r,new ur(e,r,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:u,mouseout:c}}}var h=function(e){var i=t.filter((function(e){return r.getLayer(e)})),a=i.length?r.queryRenderedFeatures(e.point,{layers:i}):[];a.length&&(e.features=a,n.call(r,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:i({},e,h)}}},{key:"on",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"on",this).call(this,e,t);Array.isArray(t)||(t=[t]);var i=this._createDelegatedListener(e,t,n);for(var r in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i),i.delegates)this.on(r,i.delegates[r]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"once",this).call(this,e,t);Array.isArray(t)||(t=[t]);var i=this._createDelegatedListener(e,t,n);for(var r in i.delegates)this.once(r,i.delegates[r]);return this}},{key:"off",value:function(e,t,n){var i=this;if(void 0===n)return o(s(c.prototype),"off",this).call(this,e,t);t=new Set(Array.isArray(t)?t:[t]);var r=function(e,t){if(e.size!==t.size)return!1;var n,i=d(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!t.has(r))return!1}}catch(a){i.e(a)}finally{i.f()}return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&function(e){for(var a=0;a<e.length;a++){var o=e[a];if(o.listener===n&&r(o.layers,t)){for(var s in o.delegates)i.off(s,o.delegates[s]);return e.splice(a,1),i}}}(a),this}},{key:"queryRenderedFeatures",value:function(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"queryTerrainElevation",value:function(t,n){var i=this.transform.elevation;return i?(n=e.extend({},{exaggerated:!0},n),i.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}},{key:"setStyle",value:function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new ln(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new ln(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,n){var i=this;if("string"==typeof t){var r=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(a,(function(t,r){t?i.fire(new e.ErrorEvent(t)):r&&i._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}},{key:"_updateDiff",value:function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(u){e.warnOnce("Unable to perform style diff: ".concat(u.message||u.error||u,".  Rebuilding the style from scratch.")),this._updateStyle(t,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.pixelRatio,a=void 0===r?1:r,o=i.sdf,s=void 0!==o&&o,l=i.stretchX,u=i.stretchY,c=i.content;if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){var h=e.exported.getImageData(n),d=h.width,p=h.height,f=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:d,height:p},f),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{var m=n.width,v=n.height,y=n;this.style.addImage(t,{data:new e.RGBAImage({width:m,height:v},new Uint8Array(y.data)),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:y}),y.onAdd&&y.onAdd(this,t)}}},{key:"updateImage",value:function(t,n){var i=this.style.getImage(t);if(i){var r=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,a=r.width,o=r.height;void 0!==a&&void 0!==o?a===i.data.width&&o===i.data.height?(i.data.replace(r.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,i)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(function(t,i){n(t,i instanceof e.window.HTMLImageElement?e.exported.getImageData(i):i)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,i),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,i),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var t,n,i,r=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300,o=this._container;o&&(!n||!i);){var s=e.window.getComputedStyle(o).transform;s&&"none"!==s&&((t=s.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==t[0]&&"1"!==t[0]&&(n=t[0]),t[3]&&"0"!==t[3]&&"1"!==t[3]&&(i=t[3])),o=o.parentElement}this._containerWidth=n?Math.abs(r/n):r,this._containerHeight=i?Math.abs(a/i):a}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=g("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=g("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=g("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var n=this._controlContainer=g("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){i[e]=g("div","mapboxgl-ctrl-".concat(e),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,n){var i=e.exported.devicePixelRatio||1;this._canvas.width=i*Math.ceil(t),this._canvas.height=i*Math.ceil(n),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")}},{key:"_addMarker",value:function(e){this._markers.push(e)}},{key:"_removeMarker",value:function(e){var t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}},{key:"_setupPainter",value:function(){var n=this,i=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(e.storeAuthState(r,!0),this.painter=new Ni(r,this.transform),this.on("data",(function(e){"source"===e.dataType&&n.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_requestDomTask",value:function(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}},{key:"_render",value:function(t){var n,i=this,r=this.painter.context.extTimerQuery,a=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),!this._removed){var o=!1,s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var l=this.transform.zoom,u=this.transform.pitch,c=e.exported.now();this.style.zoomHistory.update(l,c);var h=new e.EvaluationParameters(l,{now:c,fadeDuration:s,pitch:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),d=h.crossFadingFactor();1===d&&d===this._crossFadingFactor||(o=!0,this._crossFadingFactor=d),this.style.update(h)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);var p=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),p=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerUpdate()):p=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var f=e.exported.now()-a;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),i.fire(new e.Event("gpu-timing-frame",{cpuTime:f,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var m=this.painter.collectGpuTimers();setTimeout((function(){var t=i.painter.queryGpuTimers(m);i.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var v=this._sourcesDirty||this._styleDirty||this._placementDirty||p;if(v||this._repaint)this.triggerRepaint();else{var y=!this.isMoving()&&this.loaded();if(y&&(p=this._updateAverageElevation(a,!0)),p)this.triggerRepaint();else if(this._triggerFrame(!1),y&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var g=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:g})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,this._authenticate())}}},{key:"_forceMarkerUpdate",value:function(){var e,t=d(this._markers);try{for(t.s();!(e=t.n()).done;)e.value._update()}catch(n){t.e(n)}finally{t.f()}}},{key:"_updateAverageElevation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=function(e){return t.transform.averageElevation=e,t._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&i(0);if((n||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){var r=this.transform.averageElevation,a=this.transform.sampleAverageElevation(),o=!1;this.transform.elevation&&(o=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(a)?a=0:this._averageElevationLastSampledAt=e;var s=Math.abs(r-a);if(s>1){if(this._isInitialLoad||o)return this._averageElevation.jumpTo(a),i(a);this._averageElevation.easeTo(a,e,300)}else if(s>1e-4)return this._averageElevation.jumpTo(a),i(a)}return!!this._averageElevation.isEasing(e)&&i(this._averageElevation.getValue(e))}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(n){if(n&&(n.message===e.AUTH_ERR_MSG||401===n.status)){var i=t.painter.context.gl;e.storeAuthState(i,!1),t._logoControl instanceof Qr&&t._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),t._silenceAuthErrors||t.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,i=n.createFramebuffer();function r(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(e),t.canvasCopies.map(r),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var i=n[1]-n[0],r=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,l=0;l<o.length;l+=4)o[l]===e[l]&&o[l+1]===e[l+1]&&o[l+2]===e[l+2]&&o[l+3]===e[l+3]&&(s+=1);i+=(n[a+2]-n[a+1])*(1-s/r)}return i}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,n=d(this._controls);try{for(n.s();!(t=n.n()).done;)t.value.onRemove(this)}catch(r){n.e(r)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),oa(this._canvasContainer),oa(this._controlContainer),oa(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var n=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((function(e){var t=!!n._renderNextFrame;n._frame=null,n._renderNextFrame=null,t&&n._render(e)})))}},{key:"_preloadTiles",value:function(t){var n=this,i=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(i,(function(e,n){return e._preloadTiles(t,n)}),(function(){n.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"_setCacheLimits",value:function(t,n){e.setCacheLimits(t,n)}},{key:"version",get:function(){return e.version}}]),c}(Kr),NavigationControl:function(){function t(n){var i=this;v(this,t),this.options=e.extend({},la,n),this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){i._map&&i._map.zoomIn({},{originalEvent:e})})),g("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){i._map&&i._map.zoomOut({},{originalEvent:e})})),g("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){var t=i._map;t&&(i.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=g("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return y(t,[{key:"_updateZoomButtons",value:function(){var e=this._map;if(e){var t=e.getZoom(),n=t===e.getMaxZoom(),i=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}}},{key:"_rotateCompassArrow",value:function(){var e=this,t=this._map;if(t){var n=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((function(){e._compassIcon&&(e._compassIcon.style.transform=n)}))}}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ua(e,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){var e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}},{key:"_createButton",value:function(e,t){var n=g("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},{key:"_setButtonTitle",value:function(e,t){if(this._map){var n=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}}}]),t}(),GeolocateControl:function(t){f(i,t);var n=m(i);function i(t){var a;return v(this,i),(a=n.call(this)).options=e.extend({},ca,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],r(a)),a._updateMarkerRotationThrottled=Ji(a._updateMarkerRotation,20),a}return y(i,[{key:"onAdd",value:function(t){var n;return this._map=t,this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==sa?n(sa):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){sa="denied"!==e.state,n(sa)})):(sa=!!e.window.navigator.geolocation,n(sa)),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,ha=0,da=!1}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,r=this._map.getBearing(),a=e.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),a,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var e=this._map._containerHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([100,e]),i=t.distanceTo(n)/100,r=Math.ceil(2*this._accuracy/i);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&da)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var n=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=g("button","mapboxgl-ctrl-geolocate",this._container),g("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{var r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g("div","mapboxgl-user-location"),this._dotElement.appendChild(g("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(g("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new na({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=g("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new na({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==n._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new e.Event("trackuserlocationend")))}))}},{key:"_onDeviceOrientation",value:function(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ha--,da=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ha>1?(t={maximumAge:6e5,timeout:0},da=!0):(t=this.options.positionOptions,da=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var t=this,n=function(){e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",t._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&n()})).catch(console.error):n()}},{key:"_clearWatch",value:function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),i}(e.Evented),AttributionControl:$r,ScaleControl:function(){function t(n){v(this,t),this.options=e.extend({},pa,n),e.bindAll(["_onMove","setUnit"],this)}return y(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_onMove",value:function(){fa(this._map,this._container,this.options)}},{key:"onAdd",value:function(e){return this._map=e,this._container=g("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}},{key:"setUnit",value:function(e){this.options.unit=e,fa(this._map,this._container,this.options)}}]),t}(),FullscreenControl:function(){function t(n){v(this,t),this._fullscreen=!1,n&&n.container&&(n.container instanceof e.window.HTMLElement?this._container=n.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return y(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=g("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=g("button","mapboxgl-ctrl-fullscreen",this._controlContainer);g("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){f(i,t);var n=m(i);function i(t){var a;return v(this,i),(a=n.call(this)).options=e.extend(Object.create(va),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],r(a)),a._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]),a}return y(i,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);var t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();var n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){this._trackPointer=!0,this._pos=null,this._update();var e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var n,i=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");for(r.innerHTML=t;n=r.firstChild;)i.appendChild(n);return this.setDOMContent(i)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){var t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=g("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){var n=this._closeButton=g("button","mapboxgl-popup-close-button",t);n.type="button",n.setAttribute("aria-label","Close popup"),n.setAttribute("aria-hidden","true"),n.innerHTML="&#215;",n.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){return this._classList.add(e),this._updateClassList(),this}},{key:"removeClassName",value:function(e){return this._classList.delete(e),this._updateClassList(),this}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){var t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}},{key:"_onMouseEvent",value:function(e){this._update(e.point)}},{key:"_getAnchor",value:function(e){if(this.options.anchor)return this.options.anchor;var t=this._map,n=this._container,i=this._pos;if(!t||!n||!i)return"bottom";var r=n.offsetWidth,a=n.offsetHeight,o=i.x<r/2,s=i.x>t.transform.width-r/2;if(i.y+e<a)return o?"top-left":s?"top-right":"top";if(i.y>t.transform.height-a){if(o)return"bottom-left";if(s)return"bottom-right"}return o?"left":s?"right":"bottom"}},{key:"_updateClassList",value:function(){var e=this._container;if(e){var t=c(this._classList);t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}}},{key:"_update",value:function(e){var t=this,n=this._map,i=this._content;if(n&&(this._lngLat||this._trackPointer)&&i){var r=this._container;if(r||(r=this._container=g("div","mapboxgl-popup",n.getContainer()),this._tip=g("div","mapboxgl-popup-tip",r),r.appendChild(i)),this.options.maxWidth&&r.style.maxWidth!==this.options.maxWidth&&(r.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ea(this._lngLat,this._pos,n.transform)),!this._trackPointer||e){var a=this._pos=this._trackPointer&&e?e:n.project(this._lngLat),o=ga(this.options.offset),s=this._anchor=this._getAnchor(o.y),l=ga(this.options.offset,s),u=a.add(l).round();n._requestDomTask((function(){t._container&&s&&(t._container.style.transform="".concat(ta[s]," translate(").concat(u.x,"px,").concat(u.y,"px)"))}))}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(ya);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(e){this._content&&(this._content.style.opacity=e),this._tip&&(this._tip.style.opacity=e)}}]),i}(e.Evented),Marker:na,Style:ln,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Wi,Evented:e.Evented,config:e.config,prewarm:function(){Qe().acquire(Ke)},clearPrewarmedResources:function(){var e=qe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Ke),qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return $e.workerCount},set workerCount(e){$e.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return _a})),n}()},2426:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function i(){return t.apply(null,arguments)}function r(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function u(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=[],r=e.length;for(n=0;n<r;++n)i.push(t(e[n],n));return i}function p(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,i){return Xn(e,t,n,i,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=m()),e._pf}function y(e){if(null==e._isValid){var t=v(e),i=n.call(t.parsedDateParts,(function(e){return null!=e})),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=f(NaN);return null!=e?p(v(t),e):v(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var _=i.momentProperties=[],x=!1;function b(e,t){var n,i,r,a=_.length;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=v(t)),u(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)u(r=t[i=_[n]])||(e[i]=r);return e}function w(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===x&&(x=!0,i.updateOffset(this),x=!1)}function k(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function S(e){!1===i.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function T(e,t){var n=!0;return p((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var r,a,o,l=[],u=arguments.length;for(a=0;a<u;a++){if(r="","object"===typeof arguments[a]){for(o in r+="\n["+a+"] ",arguments[0])s(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[a];l.push(r)}S(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var C,E={};function M(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),E[e]||(S(t),E[e]=!0)}function P(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function A(e){var t,n;for(n in e)s(e,n)&&(P(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(e,t){var n,i=p({},e);for(n in t)s(t,n)&&(o(e[n])&&o(t[n])?(i[n]={},p(i[n],e[n]),p(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)s(e,n)&&!s(t,n)&&o(e[n])&&(i[n]=p({},i[n]));return i}function I(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,C=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var L={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function O(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return P(i)?i.call(t,n):i}function z(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},N={};function j(e,t,n,i){var r=i;"string"===typeof i&&(r=function(){return this[i]()}),e&&(N[e]=r),t&&(N[t[0]]=function(){return z(r.apply(this,arguments),t[1],t[2])}),n&&(N[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,i=e.match(R);for(t=0,n=i.length;t<n;t++)N[i[t]]?i[t]=N[i[t]]:i[t]=U(i[t]);return function(t){var r,a="";for(r=0;r<n;r++)a+=P(i[r])?i[r].call(t,e):i[r];return a}}function Z(e,t){return e.isValid()?(t=W(t,e.localeData()),F[t]=F[t]||V(t),F[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(B.lastIndex=0;n>=0&&B.test(e);)e=e.replace(B,i),B.lastIndex=0,n-=1;return e}var G={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Y(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(R).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var H="Invalid date";function X(){return this._invalidDate}var q="%d",K=/\d{1,2}/;function $(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function J(e,t,n,i){var r=this._relativeTime[n];return P(r)?r(e,t,n,i):r.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return P(n)?n(t):n.replace(/%s/i,t)}var te={};function ne(e,t){var n=e.toLowerCase();te[n]=te[n+"s"]=te[t]=e}function ie(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,i={};for(n in e)s(e,n)&&(t=ie(n))&&(i[t]=e[n]);return i}var ae={};function oe(e,t){ae[e]=t}function se(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:ae[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function le(e){return e%4===0&&e%100!==0||e%400===0}function ue(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ce(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ue(t)),n}function he(e,t){return function(n){return null!=n?(pe(this,e,n),i.updateOffset(this,t),this):de(this,e)}}function de(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function pe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&le(e.year())&&1===e.month()&&29===e.date()?(n=ce(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Je(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function fe(e){return P(this[e=ie(e)])?this[e]():this}function me(e,t){if("object"===typeof e){var n,i=se(e=re(e)),r=i.length;for(n=0;n<r;n++)this[i[n].unit](e[i[n].unit])}else if(P(this[e=ie(e)]))return this[e](t);return this}var ve,ye=/\d/,ge=/\d\d/,_e=/\d{3}/,xe=/\d{4}/,be=/[+-]?\d{6}/,we=/\d\d?/,ke=/\d\d\d\d?/,Se=/\d\d\d\d\d\d?/,Te=/\d{1,3}/,Ce=/\d{1,4}/,Ee=/[+-]?\d{1,6}/,Me=/\d+/,Pe=/[+-]?\d+/,Ae=/Z|[+-]\d\d:?\d\d/gi,De=/Z|[+-]\d\d(?::?\d\d)?/gi,Ie=/[+-]?\d+(\.\d{1,3})?/,Le=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Oe(e,t,n){ve[e]=P(t)?t:function(e,i){return e&&n?n:t}}function ze(e,t){return s(ve,e)?ve[e](t._strict,t._locale):new RegExp(Re(e))}function Re(e){return Be(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,r){return t||n||i||r})))}function Be(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ve={};var Fe={};function Ne(e,t){var n,i,r=t;for("string"===typeof e&&(e=[e]),c(t)&&(r=function(e,n){n[t]=ce(e)}),i=e.length,n=0;n<i;n++)Fe[e[n]]=r}function je(e,t){Ne(e,(function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)}))}function Ue(e,t,n){null!=t&&s(Fe,e)&&Fe[e](t,n._a,n,e)}var Ve,Ze=0,We=1,Ge=2,Ye=3,He=4,Xe=5,qe=6,Ke=7,$e=8;function Qe(e,t){return(e%t+t)%t}function Je(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Qe(t,12);return e+=(t-n)/12,1===n?le(e)?29:28:31-n%7%2}Ve=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},j("M",["MM",2],"Mo",(function(){return this.month()+1})),j("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),j("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ne("month","M"),oe("month",8),Oe("M",we),Oe("MM",we,ge),Oe("MMM",(function(e,t){return t.monthsShortRegex(e)})),Oe("MMMM",(function(e,t){return t.monthsRegex(e)})),Ne(["M","MM"],(function(e,t){t[We]=ce(e)-1})),Ne(["MMM","MMMM"],(function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[We]=r:v(n).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,it=Le,rt=Le;function at(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}function ot(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function st(e,t,n){var i,r,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=f([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=Ve.call(this._shortMonthsParse,o))?r:null:-1!==(r=Ve.call(this._longMonthsParse,o))?r:null:"MMM"===t?-1!==(r=Ve.call(this._shortMonthsParse,o))||-1!==(r=Ve.call(this._longMonthsParse,o))?r:null:-1!==(r=Ve.call(this._longMonthsParse,o))||-1!==(r=Ve.call(this._shortMonthsParse,o))?r:null}function lt(e,t,n){var i,r,a;if(this._monthsParseExact)return st.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=f([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function ut(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=ce(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Je(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ct(e){return null!=e?(ut(this,e),i.updateOffset(this,!0),this):de(this,"Month")}function ht(){return Je(this.year(),this.month())}function dt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||ft.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=it),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function pt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||ft.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=rt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ft(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],a=[];for(t=0;t<12;t++)n=f([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),a.sort(e),t=0;t<12;t++)i[t]=Be(i[t]),r[t]=Be(r[t]);for(t=0;t<24;t++)a[t]=Be(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function mt(e){return le(e)?366:365}j("Y",0,0,(function(){var e=this.year();return e<=9999?z(e,4):"+"+e})),j(0,["YY",2],0,(function(){return this.year()%100})),j(0,["YYYY",4],0,"year"),j(0,["YYYYY",5],0,"year"),j(0,["YYYYYY",6,!0],0,"year"),ne("year","y"),oe("year",1),Oe("Y",Pe),Oe("YY",we,ge),Oe("YYYY",Ce,xe),Oe("YYYYY",Ee,be),Oe("YYYYYY",Ee,be),Ne(["YYYYY","YYYYYY"],Ze),Ne("YYYY",(function(e,t){t[Ze]=2===e.length?i.parseTwoDigitYear(e):ce(e)})),Ne("YY",(function(e,t){t[Ze]=i.parseTwoDigitYear(e)})),Ne("Y",(function(e,t){t[Ze]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return ce(e)+(ce(e)>68?1900:2e3)};var vt=he("FullYear",!0);function yt(){return le(this.year())}function gt(e,t,n,i,r,a,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,r,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,r,a,o),s}function _t(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function xt(e,t,n){var i=7+t-n;return-(7+_t(e,0,i).getUTCDay()-t)%7+i-1}function bt(e,t,n,i,r){var a,o,s=1+7*(t-1)+(7+n-i)%7+xt(e,i,r);return s<=0?o=mt(a=e-1)+s:s>mt(e)?(a=e+1,o=s-mt(e)):(a=e,o=s),{year:a,dayOfYear:o}}function wt(e,t,n){var i,r,a=xt(e.year(),t,n),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?i=o+kt(r=e.year()-1,t,n):o>kt(e.year(),t,n)?(i=o-kt(e.year(),t,n),r=e.year()+1):(r=e.year(),i=o),{week:i,year:r}}function kt(e,t,n){var i=xt(e,t,n),r=xt(e+1,t,n);return(mt(e)-i+r)/7}function St(e){return wt(e,this._week.dow,this._week.doy).week}j("w",["ww",2],"wo","week"),j("W",["WW",2],"Wo","isoWeek"),ne("week","w"),ne("isoWeek","W"),oe("week",5),oe("isoWeek",5),Oe("w",we),Oe("ww",we,ge),Oe("W",we),Oe("WW",we,ge),je(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=ce(e)}));var Tt={dow:0,doy:6};function Ct(){return this._week.dow}function Et(){return this._week.doy}function Mt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Pt(e){var t=wt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function At(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Dt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function It(e,t){return e.slice(t,7).concat(e.slice(0,t))}j("d",0,"do","day"),j("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),j("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),j("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),j("e",0,0,"weekday"),j("E",0,0,"isoWeekday"),ne("day","d"),ne("weekday","e"),ne("isoWeekday","E"),oe("day",11),oe("weekday",11),oe("isoWeekday",11),Oe("d",we),Oe("e",we),Oe("E",we),Oe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Oe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Oe("dddd",(function(e,t){return t.weekdaysRegex(e)})),je(["dd","ddd","dddd"],(function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:v(n).invalidWeekday=e})),je(["d","e","E"],(function(e,t,n,i){t[i]=ce(e)}));var Lt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ot="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),zt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Rt=Le,Bt=Le,Ft=Le;function Nt(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?It(n,this._week.dow):e?n[e.day()]:n}function jt(e){return!0===e?It(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ut(e){return!0===e?It(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Vt(e,t,n){var i,r,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=f([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=Ve.call(this._weekdaysParse,o))?r:null:"ddd"===t?-1!==(r=Ve.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=Ve.call(this._minWeekdaysParse,o))?r:null:"dddd"===t?-1!==(r=Ve.call(this._weekdaysParse,o))||-1!==(r=Ve.call(this._shortWeekdaysParse,o))||-1!==(r=Ve.call(this._minWeekdaysParse,o))?r:null:"ddd"===t?-1!==(r=Ve.call(this._shortWeekdaysParse,o))||-1!==(r=Ve.call(this._weekdaysParse,o))||-1!==(r=Ve.call(this._minWeekdaysParse,o))?r:null:-1!==(r=Ve.call(this._minWeekdaysParse,o))||-1!==(r=Ve.call(this._weekdaysParse,o))||-1!==(r=Ve.call(this._shortWeekdaysParse,o))?r:null}function Zt(e,t,n){var i,r,a;if(this._weekdaysParseExact)return Vt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=f([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=At(e,this.localeData()),this.add(e-t,"d")):t}function Gt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Yt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Dt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Ht(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Rt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Xt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kt(){function e(e,t){return t.length-e.length}var t,n,i,r,a,o=[],s=[],l=[],u=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),i=Be(this.weekdaysMin(n,"")),r=Be(this.weekdaysShort(n,"")),a=Be(this.weekdays(n,"")),o.push(i),s.push(r),l.push(a),u.push(i),u.push(r),u.push(a);o.sort(e),s.sort(e),l.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function $t(){return this.hours()%12||12}function Qt(){return this.hours()||24}function Jt(e,t){j(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}j("H",["HH",2],0,"hour"),j("h",["hh",2],0,$t),j("k",["kk",2],0,Qt),j("hmm",0,0,(function(){return""+$t.apply(this)+z(this.minutes(),2)})),j("hmmss",0,0,(function(){return""+$t.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)})),j("Hmm",0,0,(function(){return""+this.hours()+z(this.minutes(),2)})),j("Hmmss",0,0,(function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)})),Jt("a",!0),Jt("A",!1),ne("hour","h"),oe("hour",13),Oe("a",en),Oe("A",en),Oe("H",we),Oe("h",we),Oe("k",we),Oe("HH",we,ge),Oe("hh",we,ge),Oe("kk",we,ge),Oe("hmm",ke),Oe("hmmss",Se),Oe("Hmm",ke),Oe("Hmmss",Se),Ne(["H","HH"],Ye),Ne(["k","kk"],(function(e,t,n){var i=ce(e);t[Ye]=24===i?0:i})),Ne(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ne(["h","hh"],(function(e,t,n){t[Ye]=ce(e),v(n).bigHour=!0})),Ne("hmm",(function(e,t,n){var i=e.length-2;t[Ye]=ce(e.substr(0,i)),t[He]=ce(e.substr(i)),v(n).bigHour=!0})),Ne("hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[Ye]=ce(e.substr(0,i)),t[He]=ce(e.substr(i,2)),t[Xe]=ce(e.substr(r)),v(n).bigHour=!0})),Ne("Hmm",(function(e,t,n){var i=e.length-2;t[Ye]=ce(e.substr(0,i)),t[He]=ce(e.substr(i))})),Ne("Hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[Ye]=ce(e.substr(0,i)),t[He]=ce(e.substr(i,2)),t[Xe]=ce(e.substr(r))}));var nn=/[ap]\.?m?\.?/i,rn=he("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var on,sn={calendar:L,longDateFormat:G,invalidDate:H,ordinal:q,dayOfMonthOrdinalParse:K,relativeTime:Q,months:et,monthsShort:tt,week:Tt,weekdays:Lt,weekdaysMin:zt,weekdaysShort:Ot,meridiemParse:nn},ln={},un={};function cn(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function dn(e){for(var t,n,i,r,a=0;a<e.length;){for(t=(r=hn(e[a]).split("-")).length,n=(n=hn(e[a+1]))?n.split("-"):null;t>0;){if(i=fn(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&cn(r,n)>=t-1)break;t--}a++}return on}function pn(e){return null!=e.match("^[^/\\\\]*$")}function fn(t){var n=null;if(void 0===ln[t]&&e&&e.exports&&pn(t))try{n=on._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(i){ln[t]=null}return ln[t]}function mn(e,t){var n;return e&&((n=u(t)?gn(e):vn(e,t))?on=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),on._abbr}function vn(e,t){if(null!==t){var n,i=sn;if(t.abbr=e,null!=ln[e])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ln[e]._config;else if(null!=t.parentLocale)if(null!=ln[t.parentLocale])i=ln[t.parentLocale]._config;else{if(null==(n=fn(t.parentLocale)))return un[t.parentLocale]||(un[t.parentLocale]=[]),un[t.parentLocale].push({name:e,config:t}),null;i=n._config}return ln[e]=new I(D(i,t)),un[e]&&un[e].forEach((function(e){vn(e.name,e.config)})),mn(e),ln[e]}return delete ln[e],null}function yn(e,t){if(null!=t){var n,i,r=sn;null!=ln[e]&&null!=ln[e].parentLocale?ln[e].set(D(ln[e]._config,t)):(null!=(i=fn(e))&&(r=i._config),t=D(r,t),null==i&&(t.abbr=e),(n=new I(t)).parentLocale=ln[e],ln[e]=n),mn(e)}else null!=ln[e]&&(null!=ln[e].parentLocale?(ln[e]=ln[e].parentLocale,e===mn()&&mn(e)):null!=ln[e]&&delete ln[e]);return ln[e]}function gn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return on;if(!a(e)){if(t=fn(e))return t;e=[e]}return dn(e)}function _n(){return C(ln)}function xn(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[We]<0||n[We]>11?We:n[Ge]<1||n[Ge]>Je(n[Ze],n[We])?Ge:n[Ye]<0||n[Ye]>24||24===n[Ye]&&(0!==n[He]||0!==n[Xe]||0!==n[qe])?Ye:n[He]<0||n[He]>59?He:n[Xe]<0||n[Xe]>59?Xe:n[qe]<0||n[qe]>999?qe:-1,v(e)._overflowDayOfYear&&(t<Ze||t>Ge)&&(t=Ge),v(e)._overflowWeeks&&-1===t&&(t=Ke),v(e)._overflowWeekday&&-1===t&&(t=$e),v(e).overflow=t),e}var bn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kn=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Tn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Cn=/^\/?Date\((-?\d+)/i,En=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Mn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Pn(e){var t,n,i,r,a,o,s=e._i,l=bn.exec(s)||wn.exec(s),u=Sn.length,c=Tn.length;if(l){for(v(e).iso=!0,t=0,n=u;t<n;t++)if(Sn[t][1].exec(l[1])){r=Sn[t][0],i=!1!==Sn[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=c;t<n;t++)if(Tn[t][1].exec(l[3])){a=(l[2]||" ")+Tn[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!kn.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=r+(a||"")+(o||""),Un(e)}else e._isValid=!1}function An(e,t,n,i,r,a){var o=[Dn(e),tt.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return a&&o.push(parseInt(a,10)),o}function Dn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function In(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ln(e,t,n){return!e||Ot.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function On(e,t,n){if(e)return Mn[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}function zn(e){var t,n=En.exec(In(e._i));if(n){if(t=An(n[4],n[3],n[2],n[5],n[6],n[7]),!Ln(n[1],t,e))return;e._a=t,e._tzm=On(n[8],n[9],n[10]),e._d=_t.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Rn(e){var t=Cn.exec(e._i);null===t?(Pn(e),!1===e._isValid&&(delete e._isValid,zn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Bn(e,t,n){return null!=e?e:null!=t?t:n}function Fn(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Nn(e){var t,n,i,r,a,o=[];if(!e._d){for(i=Fn(e),e._w&&null==e._a[Ge]&&null==e._a[We]&&jn(e),null!=e._dayOfYear&&(a=Bn(e._a[Ze],i[Ze]),(e._dayOfYear>mt(a)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=_t(a,0,e._dayOfYear),e._a[We]=n.getUTCMonth(),e._a[Ge]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ye]&&0===e._a[He]&&0===e._a[Xe]&&0===e._a[qe]&&(e._nextDay=!0,e._a[Ye]=0),e._d=(e._useUTC?_t:gt).apply(null,o),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ye]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==r&&(v(e).weekdayMismatch=!0)}}function jn(e){var t,n,i,r,a,o,s,l,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,o=4,n=Bn(t.GG,e._a[Ze],wt(qn(),1,4).year),i=Bn(t.W,1),((r=Bn(t.E,1))<1||r>7)&&(l=!0)):(a=e._locale._week.dow,o=e._locale._week.doy,u=wt(qn(),a,o),n=Bn(t.gg,e._a[Ze],u.year),i=Bn(t.w,u.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||t.e>6)&&(l=!0)):r=a),i<1||i>kt(n,a,o)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(s=bt(n,i,r,a,o),e._a[Ze]=s.year,e._dayOfYear=s.dayOfYear)}function Un(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],v(e).empty=!0;var t,n,r,a,o,s,l,u=""+e._i,c=u.length,h=0;for(l=(r=W(e._f,e._locale).match(R)||[]).length,t=0;t<l;t++)a=r[t],(n=(u.match(ze(a,e))||[])[0])&&((o=u.substr(0,u.indexOf(n))).length>0&&v(e).unusedInput.push(o),u=u.slice(u.indexOf(n)+n.length),h+=n.length),N[a]?(n?v(e).empty=!1:v(e).unusedTokens.push(a),Ue(a,n,e)):e._strict&&!n&&v(e).unusedTokens.push(a);v(e).charsLeftOver=c-h,u.length>0&&v(e).unusedInput.push(u),e._a[Ye]<=12&&!0===v(e).bigHour&&e._a[Ye]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[Ye]=Vn(e._locale,e._a[Ye],e._meridiem),null!==(s=v(e).era)&&(e._a[Ze]=e._locale.erasConvertYear(s,e._a[Ze])),Nn(e),xn(e)}else zn(e);else Pn(e)}function Vn(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Zn(e){var t,n,i,r,a,o,s=!1,l=e._f.length;if(0===l)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)a=0,o=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Un(t),y(t)&&(o=!0),a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,s?a<i&&(i=a,n=t):(null==i||a<i||o)&&(i=a,n=t,o&&(s=!0));p(e,n||t)}function Wn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Nn(e)}}function Gn(e){var t=new w(xn(Yn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Yn(e){var t=e._i,n=e._f;return e._locale=e._locale||gn(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new w(xn(t)):(h(t)?e._d=t:a(n)?Zn(e):n?Un(e):Hn(e),y(e)||(e._d=null),e))}function Hn(e){var t=e._i;u(t)?e._d=new Date(i.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Rn(e):a(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),Nn(e)):o(t)?Wn(e):c(t)?e._d=new Date(t):i.createFromInputFallback(e)}function Xn(e,t,n,i,r){var s={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(o(e)&&l(e)||a(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=e,s._f=t,s._strict=i,Gn(s)}function qn(e,t,n,i){return Xn(e,t,n,i,!1)}i.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Kn=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),$n=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Qn(e,t){var n,i;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return qn();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}function Jn(){return Qn("isBefore",[].slice.call(arguments,0))}function ei(){return Qn("isAfter",[].slice.call(arguments,0))}var ti=function(){return Date.now?Date.now():+new Date},ni=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ii(e){var t,n,i=!1,r=ni.length;for(t in e)if(s(e,t)&&(-1===Ve.call(ni,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<r;++n)if(e[ni[n]]){if(i)return!1;parseFloat(e[ni[n]])!==ce(e[ni[n]])&&(i=!0)}return!0}function ri(){return this._isValid}function ai(){return Mi(NaN)}function oi(e){var t=re(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=ii(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=gn(),this._bubble()}function si(e){return e instanceof oi}function li(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ui(e,t,n){var i,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&ce(e[i])!==ce(t[i]))&&o++;return o+a}function ci(e,t){j(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+z(~~(e/60),2)+t+z(~~e%60,2)}))}ci("Z",":"),ci("ZZ",""),Oe("Z",De),Oe("ZZ",De),Ne(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=di(De,e)}));var hi=/([\+\-]|\d\d)/gi;function di(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(hi)||["-",0,0])[1]+ce(n[2]))?0:"+"===n[0]?i:-i}function pi(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(k(e)||h(e)?e.valueOf():qn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):qn(e).local()}function fi(e){return-Math.round(e._d.getTimezoneOffset())}function mi(e,t,n){var r,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=di(De,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=fi(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==e&&(!t||this._changeInProgress?Li(this,Mi(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:fi(this)}function vi(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function yi(e){return this.utcOffset(0,e)}function gi(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(fi(this),"m")),this}function _i(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=di(Ae,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function xi(e){return!!this.isValid()&&(e=e?qn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function bi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wi(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=Yn(t))._a?(e=t._isUTC?f(t._a):qn(t._a),this._isDSTShifted=this.isValid()&&ui(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function ki(){return!!this.isValid()&&!this._isUTC}function Si(){return!!this.isValid()&&this._isUTC}function Ti(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Ci=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ei=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Mi(e,t){var n,i,r,a=e,o=null;return si(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(o=Ci.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:ce(o[Ge])*n,h:ce(o[Ye])*n,m:ce(o[He])*n,s:ce(o[Xe])*n,ms:ce(li(1e3*o[qe]))*n}):(o=Ei.exec(e))?(n="-"===o[1]?-1:1,a={y:Pi(o[2],n),M:Pi(o[3],n),w:Pi(o[4],n),d:Pi(o[5],n),h:Pi(o[6],n),m:Pi(o[7],n),s:Pi(o[8],n)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(r=Di(qn(a.from),qn(a.to)),(a={}).ms=r.milliseconds,a.M=r.months),i=new oi(a),si(e)&&s(e,"_locale")&&(i._locale=e._locale),si(e)&&s(e,"_isValid")&&(i._isValid=e._isValid),i}function Pi(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ai(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Di(e,t){var n;return e.isValid()&&t.isValid()?(t=pi(t,e),e.isBefore(t)?n=Ai(e,t):((n=Ai(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ii(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(M(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Li(this,Mi(n,i),e),this}}function Li(e,t,n,r){var a=t._milliseconds,o=li(t._days),s=li(t._months);e.isValid()&&(r=null==r||r,s&&ut(e,de(e,"Month")+s*n),o&&pe(e,"Date",de(e,"Date")+o*n),a&&e._d.setTime(e._d.valueOf()+a*n),r&&i.updateOffset(e,o||s))}Mi.fn=oi.prototype,Mi.invalid=ai;var Oi=Ii(1,"add"),zi=Ii(-1,"subtract");function Ri(e){return"string"===typeof e||e instanceof String}function Bi(e){return k(e)||h(e)||Ri(e)||c(e)||Ni(e)||Fi(e)||null===e||void 0===e}function Fi(e){var t,n,i=o(e)&&!l(e),r=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u=a.length;for(t=0;t<u;t+=1)n=a[t],r=r||s(e,n);return i&&r}function Ni(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!c(t)&&Ri(e)})).length),t&&n}function ji(e){var t,n,i=o(e)&&!l(e),r=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=a[t],r=r||s(e,n);return i&&r}function Ui(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Vi(e,t){1===arguments.length&&(arguments[0]?Bi(arguments[0])?(e=arguments[0],t=void 0):ji(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||qn(),r=pi(n,this).startOf("day"),a=i.calendarFormat(this,r)||"sameElse",o=t&&(P(t[a])?t[a].call(this,n):t[a]);return this.format(o||this.localeData().calendar(a,this,qn(n)))}function Zi(){return new w(this)}function Wi(e,t){var n=k(e)?e:qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Gi(e,t){var n=k(e)?e:qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Yi(e,t,n,i){var r=k(e)?e:qn(e),a=k(t)?t:qn(t);return!!(this.isValid()&&r.isValid()&&a.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(a,n):!this.isAfter(a,n))}function Hi(e,t){var n,i=k(e)?e:qn(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Xi(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function qi(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ki(e,t,n){var i,r,a;if(!this.isValid())return NaN;if(!(i=pi(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=ie(t)){case"year":a=$i(this,i)/12;break;case"month":a=$i(this,i);break;case"quarter":a=$i(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-r)/864e5;break;case"week":a=(this-i-r)/6048e5;break;default:a=this-i}return n?a:ue(a)}function $i(e,t){if(e.date()<t.date())return-$i(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function Qi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ji(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Z(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):P(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Z(n,"Z")):Z(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function er(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i,r="moment",a="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=a+'[")]',this.format(e+t+n+i)}function tr(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=Z(this,e);return this.localeData().postformat(t)}function nr(e,t){return this.isValid()&&(k(e)&&e.isValid()||qn(e).isValid())?Mi({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ir(e){return this.from(qn(),e)}function rr(e,t){return this.isValid()&&(k(e)&&e.isValid()||qn(e).isValid())?Mi({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ar(e){return this.to(qn(),e)}function or(e){var t;return void 0===e?this._locale._abbr:(null!=(t=gn(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sr=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function lr(){return this._locale}var ur=1e3,cr=60*ur,hr=60*cr,dr=3506328*hr;function pr(e,t){return(e%t+t)%t}function fr(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-dr:new Date(e,t,n).valueOf()}function mr(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-dr:Date.UTC(e,t,n)}function vr(e){var t,n;if(void 0===(e=ie(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mr:fr,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=pr(t+(this._isUTC?0:this.utcOffset()*cr),hr);break;case"minute":t=this._d.valueOf(),t-=pr(t,cr);break;case"second":t=this._d.valueOf(),t-=pr(t,ur)}return this._d.setTime(t),i.updateOffset(this,!0),this}function yr(e){var t,n;if(void 0===(e=ie(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mr:fr,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hr-pr(t+(this._isUTC?0:this.utcOffset()*cr),hr)-1;break;case"minute":t=this._d.valueOf(),t+=cr-pr(t,cr)-1;break;case"second":t=this._d.valueOf(),t+=ur-pr(t,ur)-1}return this._d.setTime(t),i.updateOffset(this,!0),this}function gr(){return this._d.valueOf()-6e4*(this._offset||0)}function _r(){return Math.floor(this.valueOf()/1e3)}function xr(){return new Date(this.valueOf())}function br(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function kr(){return this.isValid()?this.toISOString():null}function Sr(){return y(this)}function Tr(){return p({},v(this))}function Cr(){return v(this).overflow}function Er(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Mr(e,t){var n,r,a,o=this._eras||gn("en")._eras;for(n=0,r=o.length;n<r;++n)switch("string"===typeof o[n].since&&(a=i(o[n].since).startOf("day"),o[n].since=a.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=i(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf()}return o}function Pr(e,t,n){var i,r,a,o,s,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(a=l[i].name.toUpperCase(),o=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[i];break;case"NNNN":if(a===e)return l[i];break;case"NNNNN":if(s===e)return l[i]}else if([a,o,s].indexOf(e)>=0)return l[i]}function Ar(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n}function Dr(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""}function Ir(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""}function Lr(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""}function Or(){var e,t,n,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return(this.year()-i(a[e].since).year())*n+a[e].offset;return this.year()}function zr(e){return s(this,"_erasNameRegex")||Vr.call(this),e?this._erasNameRegex:this._erasRegex}function Rr(e){return s(this,"_erasAbbrRegex")||Vr.call(this),e?this._erasAbbrRegex:this._erasRegex}function Br(e){return s(this,"_erasNarrowRegex")||Vr.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fr(e,t){return t.erasAbbrRegex(e)}function Nr(e,t){return t.erasNameRegex(e)}function jr(e,t){return t.erasNarrowRegex(e)}function Ur(e,t){return t._eraYearOrdinalRegex||Me}function Vr(){var e,t,n=[],i=[],r=[],a=[],o=this.eras();for(e=0,t=o.length;e<t;++e)i.push(Be(o[e].name)),n.push(Be(o[e].abbr)),r.push(Be(o[e].narrow)),a.push(Be(o[e].name)),a.push(Be(o[e].abbr)),a.push(Be(o[e].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function Zr(e,t){j(0,[e,e.length],0,t)}function Wr(e){return Kr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Gr(e){return Kr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Yr(){return kt(this.year(),1,4)}function Hr(){return kt(this.isoWeekYear(),1,4)}function Xr(){var e=this.localeData()._week;return kt(this.year(),e.dow,e.doy)}function qr(){var e=this.localeData()._week;return kt(this.weekYear(),e.dow,e.doy)}function Kr(e,t,n,i,r){var a;return null==e?wt(this,i,r).year:(t>(a=kt(e,i,r))&&(t=a),$r.call(this,e,t,n,i,r))}function $r(e,t,n,i,r){var a=bt(e,t,n,i,r),o=_t(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Qr(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}j("N",0,0,"eraAbbr"),j("NN",0,0,"eraAbbr"),j("NNN",0,0,"eraAbbr"),j("NNNN",0,0,"eraName"),j("NNNNN",0,0,"eraNarrow"),j("y",["y",1],"yo","eraYear"),j("y",["yy",2],0,"eraYear"),j("y",["yyy",3],0,"eraYear"),j("y",["yyyy",4],0,"eraYear"),Oe("N",Fr),Oe("NN",Fr),Oe("NNN",Fr),Oe("NNNN",Nr),Oe("NNNNN",jr),Ne(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?v(n).era=r:v(n).invalidEra=e})),Oe("y",Me),Oe("yy",Me),Oe("yyy",Me),Oe("yyyy",Me),Oe("yo",Ur),Ne(["y","yy","yyy","yyyy"],Ze),Ne(["yo"],(function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ze]=n._locale.eraYearOrdinalParse(e,r):t[Ze]=parseInt(e,10)})),j(0,["gg",2],0,(function(){return this.weekYear()%100})),j(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Zr("gggg","weekYear"),Zr("ggggg","weekYear"),Zr("GGGG","isoWeekYear"),Zr("GGGGG","isoWeekYear"),ne("weekYear","gg"),ne("isoWeekYear","GG"),oe("weekYear",1),oe("isoWeekYear",1),Oe("G",Pe),Oe("g",Pe),Oe("GG",we,ge),Oe("gg",we,ge),Oe("GGGG",Ce,xe),Oe("gggg",Ce,xe),Oe("GGGGG",Ee,be),Oe("ggggg",Ee,be),je(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=ce(e)})),je(["gg","GG"],(function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)})),j("Q",0,"Qo","quarter"),ne("quarter","Q"),oe("quarter",7),Oe("Q",ye),Ne("Q",(function(e,t){t[We]=3*(ce(e)-1)})),j("D",["DD",2],"Do","date"),ne("date","D"),oe("date",9),Oe("D",we),Oe("DD",we,ge),Oe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ne(["D","DD"],Ge),Ne("Do",(function(e,t){t[Ge]=ce(e.match(we)[0])}));var Jr=he("Date",!0);function ea(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}j("DDD",["DDDD",3],"DDDo","dayOfYear"),ne("dayOfYear","DDD"),oe("dayOfYear",4),Oe("DDD",Te),Oe("DDDD",_e),Ne(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=ce(e)})),j("m",["mm",2],0,"minute"),ne("minute","m"),oe("minute",14),Oe("m",we),Oe("mm",we,ge),Ne(["m","mm"],He);var ta=he("Minutes",!1);j("s",["ss",2],0,"second"),ne("second","s"),oe("second",15),Oe("s",we),Oe("ss",we,ge),Ne(["s","ss"],Xe);var na,ia,ra=he("Seconds",!1);for(j("S",0,0,(function(){return~~(this.millisecond()/100)})),j(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),j(0,["SSS",3],0,"millisecond"),j(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),j(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),j(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),j(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),j(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),j(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ne("millisecond","ms"),oe("millisecond",16),Oe("S",Te,ye),Oe("SS",Te,ge),Oe("SSS",Te,_e),na="SSSS";na.length<=9;na+="S")Oe(na,Me);function aa(e,t){t[qe]=ce(1e3*("0."+e))}for(na="S";na.length<=9;na+="S")Ne(na,aa);function oa(){return this._isUTC?"UTC":""}function sa(){return this._isUTC?"Coordinated Universal Time":""}ia=he("Milliseconds",!1),j("z",0,0,"zoneAbbr"),j("zz",0,0,"zoneName");var la=w.prototype;function ua(e){return qn(1e3*e)}function ca(){return qn.apply(null,arguments).parseZone()}function ha(e){return e}la.add=Oi,la.calendar=Vi,la.clone=Zi,la.diff=Ki,la.endOf=yr,la.format=tr,la.from=nr,la.fromNow=ir,la.to=rr,la.toNow=ar,la.get=fe,la.invalidAt=Cr,la.isAfter=Wi,la.isBefore=Gi,la.isBetween=Yi,la.isSame=Hi,la.isSameOrAfter=Xi,la.isSameOrBefore=qi,la.isValid=Sr,la.lang=sr,la.locale=or,la.localeData=lr,la.max=$n,la.min=Kn,la.parsingFlags=Tr,la.set=me,la.startOf=vr,la.subtract=zi,la.toArray=br,la.toObject=wr,la.toDate=xr,la.toISOString=Ji,la.inspect=er,"undefined"!==typeof Symbol&&null!=Symbol.for&&(la[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),la.toJSON=kr,la.toString=Qi,la.unix=_r,la.valueOf=gr,la.creationData=Er,la.eraName=Dr,la.eraNarrow=Ir,la.eraAbbr=Lr,la.eraYear=Or,la.year=vt,la.isLeapYear=yt,la.weekYear=Wr,la.isoWeekYear=Gr,la.quarter=la.quarters=Qr,la.month=ct,la.daysInMonth=ht,la.week=la.weeks=Mt,la.isoWeek=la.isoWeeks=Pt,la.weeksInYear=Xr,la.weeksInWeekYear=qr,la.isoWeeksInYear=Yr,la.isoWeeksInISOWeekYear=Hr,la.date=Jr,la.day=la.days=Wt,la.weekday=Gt,la.isoWeekday=Yt,la.dayOfYear=ea,la.hour=la.hours=rn,la.minute=la.minutes=ta,la.second=la.seconds=ra,la.millisecond=la.milliseconds=ia,la.utcOffset=mi,la.utc=yi,la.local=gi,la.parseZone=_i,la.hasAlignedHourOffset=xi,la.isDST=bi,la.isLocal=ki,la.isUtcOffset=Si,la.isUtc=Ti,la.isUTC=Ti,la.zoneAbbr=oa,la.zoneName=sa,la.dates=T("dates accessor is deprecated. Use date instead.",Jr),la.months=T("months accessor is deprecated. Use month instead",ct),la.years=T("years accessor is deprecated. Use year instead",vt),la.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vi),la.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wi);var da=I.prototype;function pa(e,t,n,i){var r=gn(),a=f().set(i,t);return r[n](a,e)}function fa(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return pa(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=pa(e,i,n,"month");return r}function ma(e,t,n,i){"boolean"===typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var r,a=gn(),o=e?a._week.dow:0,s=[];if(null!=n)return pa(t,(n+o)%7,i,"day");for(r=0;r<7;r++)s[r]=pa(t,(r+o)%7,i,"day");return s}function va(e,t){return fa(e,t,"months")}function ya(e,t){return fa(e,t,"monthsShort")}function ga(e,t,n){return ma(e,t,n,"weekdays")}function _a(e,t,n){return ma(e,t,n,"weekdaysShort")}function xa(e,t,n){return ma(e,t,n,"weekdaysMin")}da.calendar=O,da.longDateFormat=Y,da.invalidDate=X,da.ordinal=$,da.preparse=ha,da.postformat=ha,da.relativeTime=J,da.pastFuture=ee,da.set=A,da.eras=Mr,da.erasParse=Pr,da.erasConvertYear=Ar,da.erasAbbrRegex=Rr,da.erasNameRegex=zr,da.erasNarrowRegex=Br,da.months=at,da.monthsShort=ot,da.monthsParse=lt,da.monthsRegex=pt,da.monthsShortRegex=dt,da.week=St,da.firstDayOfYear=Et,da.firstDayOfWeek=Ct,da.weekdays=Nt,da.weekdaysMin=Ut,da.weekdaysShort=jt,da.weekdaysParse=Zt,da.weekdaysRegex=Ht,da.weekdaysShortRegex=Xt,da.weekdaysMinRegex=qt,da.isPM=tn,da.meridiem=an,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ce(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=T("moment.lang is deprecated. Use moment.locale instead.",mn),i.langData=T("moment.langData is deprecated. Use moment.localeData instead.",gn);var ba=Math.abs;function wa(){var e=this._data;return this._milliseconds=ba(this._milliseconds),this._days=ba(this._days),this._months=ba(this._months),e.milliseconds=ba(e.milliseconds),e.seconds=ba(e.seconds),e.minutes=ba(e.minutes),e.hours=ba(e.hours),e.months=ba(e.months),e.years=ba(e.years),this}function ka(e,t,n,i){var r=Mi(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Sa(e,t){return ka(this,e,t,1)}function Ta(e,t){return ka(this,e,t,-1)}function Ca(e){return e<0?Math.floor(e):Math.ceil(e)}function Ea(){var e,t,n,i,r,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Ca(Pa(s)+o),o=0,s=0),l.milliseconds=a%1e3,e=ue(a/1e3),l.seconds=e%60,t=ue(e/60),l.minutes=t%60,n=ue(t/60),l.hours=n%24,o+=ue(n/24),s+=r=ue(Ma(o)),o-=Ca(Pa(r)),i=ue(s/12),s%=12,l.days=o,l.months=s,l.years=i,this}function Ma(e){return 4800*e/146097}function Pa(e){return 146097*e/4800}function Aa(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=ie(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Ma(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Pa(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Da(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ce(this._months/12):NaN}function Ia(e){return function(){return this.as(e)}}var La=Ia("ms"),Oa=Ia("s"),za=Ia("m"),Ra=Ia("h"),Ba=Ia("d"),Fa=Ia("w"),Na=Ia("M"),ja=Ia("Q"),Ua=Ia("y");function Va(){return Mi(this)}function Za(e){return e=ie(e),this.isValid()?this[e+"s"]():NaN}function Wa(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ga=Wa("milliseconds"),Ya=Wa("seconds"),Ha=Wa("minutes"),Xa=Wa("hours"),qa=Wa("days"),Ka=Wa("months"),$a=Wa("years");function Qa(){return ue(this.days()/7)}var Ja=Math.round,eo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function to(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function no(e,t,n,i){var r=Mi(e).abs(),a=Ja(r.as("s")),o=Ja(r.as("m")),s=Ja(r.as("h")),l=Ja(r.as("d")),u=Ja(r.as("M")),c=Ja(r.as("w")),h=Ja(r.as("y")),d=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(d=d||c<=1&&["w"]||c<n.w&&["ww",c]),(d=d||u<=1&&["M"]||u<n.M&&["MM",u]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=i,to.apply(null,d)}function io(e){return void 0===e?Ja:"function"===typeof e&&(Ja=e,!0)}function ro(e,t){return void 0!==eo[e]&&(void 0===t?eo[e]:(eo[e]=t,"s"===e&&(eo.ss=t-1),!0))}function ao(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,a=eo;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(r=e),"object"===typeof t&&(a=Object.assign({},eo,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),i=no(this,!r,a,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)}var oo=Math.abs;function so(e){return(e>0)-(e<0)||+e}function lo(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,a,o,s,l=oo(this._milliseconds)/1e3,u=oo(this._days),c=oo(this._months),h=this.asSeconds();return h?(e=ue(l/60),t=ue(e/60),l%=60,e%=60,n=ue(c/12),c%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=h<0?"-":"",a=so(this._months)!==so(h)?"-":"",o=so(this._days)!==so(h)?"-":"",s=so(this._milliseconds)!==so(h)?"-":"",r+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(u?o+u+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+i+"S":"")):"P0D"}var uo=oi.prototype;return uo.isValid=ri,uo.abs=wa,uo.add=Sa,uo.subtract=Ta,uo.as=Aa,uo.asMilliseconds=La,uo.asSeconds=Oa,uo.asMinutes=za,uo.asHours=Ra,uo.asDays=Ba,uo.asWeeks=Fa,uo.asMonths=Na,uo.asQuarters=ja,uo.asYears=Ua,uo.valueOf=Da,uo._bubble=Ea,uo.clone=Va,uo.get=Za,uo.milliseconds=Ga,uo.seconds=Ya,uo.minutes=Ha,uo.hours=Xa,uo.days=qa,uo.weeks=Qa,uo.months=Ka,uo.years=$a,uo.humanize=ao,uo.toISOString=lo,uo.toString=lo,uo.toJSON=lo,uo.locale=or,uo.localeData=lr,uo.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",lo),uo.lang=sr,j("X",0,0,"unix"),j("x",0,0,"valueOf"),Oe("x",Pe),Oe("X",Ie),Ne("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Ne("x",(function(e,t,n){n._d=new Date(ce(e))})),i.version="2.29.3",r(qn),i.fn=la,i.min=Jn,i.max=ei,i.now=ti,i.utc=f,i.unix=ua,i.months=va,i.isDate=h,i.locale=mn,i.invalid=g,i.duration=Mi,i.isMoment=k,i.weekdays=ga,i.parseZone=ca,i.localeData=gn,i.isDuration=si,i.monthsShort=ya,i.weekdaysMin=xa,i.defineLocale=vn,i.updateLocale=yn,i.locales=_n,i.weekdaysShort=_a,i.normalizeUnits=ie,i.relativeTimeRounding=io,i.relativeTimeThreshold=ro,i.calendarFormat=Ui,i.prototype=la,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},888:function(e,t,n){"use strict";var i=n(9047);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var i=n(2791),r=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function _(e,t,n,i){var r=v.hasOwnProperty(t)?v[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var R,B=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var N=!1;function j(e,t){if(!e||N)return"";N=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case T:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function Z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=G(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Te(e){if(e=_r(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=br(t),we(e.stateNode,e.type,t))}}function Ce(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Se;if(Se=ke=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Me(e,t){return e(t)}function Pe(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Me(e,t,n)}finally{Ae=!1,(null!==ke||null!==Se)&&(Pe(),Ee())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Le=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Le=!1}function ze(e,t,n,i,r,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Re=!1,Be=null,Fe=!1,Ne=null,je={onError:function(e){Re=!0,Be=e}};function Ue(e,t,n,i,r,a,o,s,l){Re=!1,Be=null,ze.apply(je,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return We(r),e;if(o===i)return We(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var He=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,qe=r.unstable_shouldYield,Ke=r.unstable_requestPaint,$e=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=ht(s):0!==(a&=o)&&(i=ht(a))}else 0!==(o=n&~r)?i=ht(o):0!==a&&(i=ht(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var _t=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,kt,St,Tt,Ct=!1,Et=[],Mt=null,Pt=null,At=null,Dt=new Map,It=new Map,Lt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Rt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=_r(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Bt(e){var t=gr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void Tt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_r(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function Nt(e,t,n){Ft(e)&&n.delete(t)}function jt(){Ct=!1,null!==Mt&&Ft(Mt)&&(Mt=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==At&&Ft(At)&&(At=null),Dt.forEach(Nt),It.forEach(Nt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var i=Et[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Mt&&Ut(Mt,e),null!==Pt&&Ut(Pt,e),null!==At&&Ut(At,e),Dt.forEach(t),It.forEach(t),n=0;n<Lt.length;n++)(i=Lt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Lt.shift()}var Zt=x.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,i){var r=_t,a=Zt.transition;Zt.transition=null;try{_t=1,Ht(e,t,n,i)}finally{_t=r,Zt.transition=a}}function Yt(e,t,n,i){var r=_t,a=Zt.transition;Zt.transition=null;try{_t=4,Ht(e,t,n,i)}finally{_t=r,Zt.transition=a}}function Ht(e,t,n,i){if(Wt){var r=qt(e,t,n,i);if(null===r)Wi(e,t,i,Xt,n),zt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Mt=Rt(Mt,e,t,n,i,r),!0;case"dragenter":return Pt=Rt(Pt,e,t,n,i,r),!0;case"mouseover":return At=Rt(At,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Dt.set(a,Rt(Dt.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,It.set(a,Rt(It.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(zt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var a=_r(r);if(null!==a&&bt(a),null===(a=qt(e,t,n,i))&&Wi(e,t,i,Xt,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Xt=null;function qt(e,t,n,i){if(Xt=null,null!==(e=gr(e=be(i))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,i=n.length,r="value"in $t?$t.value:$t.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=B({},un,{view:0,detail:0}),dn=an(hn),pn=B({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(B({},pn,{dataTransfer:0})),vn=an(B({},hn,{relatedTarget:0})),yn=an(B({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=B({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(gn),xn=an(B({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Tn(){return Sn}var Cn=B({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Cn),Mn=an(B({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an(B({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=an(B({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=B({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(Dn),Ln=[9,13,27,32],On=c&&"CompositionEvent"in window,zn=null;c&&"documentMode"in document&&(zn=document.documentMode);var Rn=c&&"TextEvent"in window&&!zn,Bn=c&&(!On||zn&&8<zn&&11>=zn),Fn=String.fromCharCode(32),Nn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zn[e.type]:"textarea"===t}function Gn(e,t,n,i){Ce(i),0<(t=Yi(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Yn=null,Hn=null;function Xn(e){Fi(e,0)}function qn(e){if(H(xr(e)))return e}function Kn(e,t){if("change"===e)return t}var $n=!1;if(c){var Qn;if(c){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}Qn=Jn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){Yn&&(Yn.detachEvent("onpropertychange",ni),Hn=Yn=null)}function ni(e){if("value"===e.propertyName&&qn(Hn)){var t=[];Gn(t,Hn,e,be(e)),De(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Hn=n,(Yn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Hn)}function ai(e,t){if("click"===e)return qn(t)}function oi(e,t){if("input"===e||"change"===e)return qn(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!si(e[r],t[r]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var n,i=ui(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ui(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=ci(n,a);var o=ci(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=c&&"documentMode"in document&&11>=document.documentMode,vi=null,yi=null,gi=null,_i=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==vi||vi!==X(i)||("selectionStart"in(i=vi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},gi&&li(gi,i)||(gi=i,0<(i=Yi(yi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=vi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},ki={},Si={};function Ti(e){if(ki[e])return ki[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}c&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ci=Ti("animationend"),Ei=Ti("animationiteration"),Mi=Ti("animationstart"),Pi=Ti("transitionend"),Ai=new Map,Di="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){Ai.set(e,t),l(t,[e])}for(var Li=0;Li<Di.length;Li++){var Oi=Di[Li];Ii(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ii(Ci,"onAnimationEnd"),Ii(Ei,"onAnimationIteration"),Ii(Mi,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Pi,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ri=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function Bi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,l,u){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(a(198));var c=Be;Re=!1,Be=null,Fe||(Fe=!0,Ne=c)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;Bi(r,s,u),a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;Bi(r,s,u),a=l}}}if(Fe)throw e=Ne,Fe=!1,Ne=null,e}function Ni(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Zi(t,e,2,!1),n.add(i))}function ji(e,t,n){var i=0;t&&(i|=4),Zi(n,e,i,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[Ui]){e[Ui]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ri.has(t)||ji(t,!1,e),ji(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,ji("selectionchange",!1,t))}}function Zi(e,t,n,i){switch(Kt(t)){case 1:var r=Gt;break;case 4:r=Yt;break;default:r=Ht}n=r.bind(null,t,n,e),r=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=gr(s)))return;if(5===(l=o.tag)||6===l){i=a=o;continue e}s=s.parentNode}}i=i.return}De((function(){var i=a,r=be(n),o=[];e:{var s=Ai.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ci:case Ei:case Mi:l=yn;break;case Pi:l=An;break;case"scroll":l=dn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Ie(f,d))&&c.push(Gi(f,m,p)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,r),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!gr(u)&&!u[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?gr(u):null)&&(u!==(h=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xr(l),p=null==u?s:xr(u),(s=new c(m,f+"leave",l,n,r)).target=h,s.relatedTarget=p,m=null,gr(r)===i&&((c=new c(d,f+"enter",u,n,r)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,f=0,p=c=l;p;p=Hi(p))f++;for(p=0,m=d;m;m=Hi(m))p++;for(;0<f-p;)c=Hi(c),f--;for(;0<p-f;)d=Hi(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Hi(c),d=Hi(d)}c=null}else c=null;null!==l&&Xi(o,s,l,c,!1),null!==u&&null!==h&&Xi(o,h,u,c,!0)}if("select"===(l=(s=i?xr(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Kn;else if(Wn(s))if($n)v=oi;else{v=ri;var y=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ai);switch(v&&(v=v(e,i))?Gn(o,v,n,r):(y&&y(e,s,i),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=i?xr(i):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(vi=y,yi=i,gi=null);break;case"focusout":gi=yi=vi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,xi(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(o,n,r)}var g;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vn?jn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Bn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(g=en()):(Qt="value"in($t=r)?$t.value:$t.textContent,Vn=!0)),0<(y=Yi(i,_)).length&&(_=new xn(_,e,null,n,r),o.push({event:_,listeners:y}),g?_.data=g:null!==(g=Un(n))&&(_.data=g))),(g=Rn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Nn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Jt=Qt=$t=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Yi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=g))}Fi(o,t)}))}function Gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Ie(e,n))&&i.unshift(Gi(e,a,r)),null!=(a=Ie(e,t))&&i.push(Gi(e,a,r))),e=e.return}return i}function Hi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==u&&(s=u,r?null!=(l=Ie(n,a))&&o.unshift(Gi(n,l,s)):r||null!=(l=Ie(n,a))&&o.push(Gi(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var qi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(qi,"\n").replace(Ki,"")}function Qi(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(a(425))}function Ji(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(sr)}:ir;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Vt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Vt(t)}function ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,mr="__reactEvents$"+hr,vr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function gr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cr(e);null!==e;){if(n=e[dr])return n;e=cr(e)}return t}n=(e=n).parentNode}return null}function _r(e){return!(e=e[dr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function br(e){return e[pr]||null}var wr=[],kr=-1;function Sr(e){return{current:e}}function Tr(e){0>kr||(e.current=wr[kr],wr[kr]=null,kr--)}function Cr(e,t){kr++,wr[kr]=e.current,e.current=t}var Er={},Mr=Sr(Er),Pr=Sr(!1),Ar=Er;function Dr(e,t){var n=e.type.contextTypes;if(!n)return Er;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lr(){Tr(Pr),Tr(Mr)}function Or(e,t,n){if(Mr.current!==Er)throw Error(a(168));Cr(Mr,t),Cr(Pr,n)}function zr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,Z(e)||"Unknown",r));return B({},n,i)}function Rr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Ar=Mr.current,Cr(Mr,e),Cr(Pr,Pr.current),!0}function Br(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=zr(e,t,Ar),i.__reactInternalMemoizedMergedChildContext=e,Tr(Pr),Tr(Mr),Cr(Mr,e)):Tr(Pr),Cr(Pr,n)}var Fr=null,Nr=!1,jr=!1;function Ur(e){null===Fr?Fr=[e]:Fr.push(e)}function Vr(){if(!jr&&null!==Fr){jr=!0;var e=0,t=_t;try{var n=Fr;for(_t=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,Nr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),He(Je,Vr),r}finally{_t=t,jr=!1}}return null}var Zr=[],Wr=0,Gr=null,Yr=0,Hr=[],Xr=0,qr=null,Kr=1,$r="";function Qr(e,t){Zr[Wr++]=Yr,Zr[Wr++]=Gr,Gr=e,Yr=t}function Jr(e,t,n){Hr[Xr++]=Kr,Hr[Xr++]=$r,Hr[Xr++]=qr,qr=e;var i=Kr;e=$r;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var a=32-ot(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Kr=1<<32-ot(t)+r|n<<r|i,$r=a+e}else Kr=1<<a|n<<r|i,$r=e}function ea(e){null!==e.return&&(Qr(e,1),Jr(e,1,0))}function ta(e){for(;e===Gr;)Gr=Zr[--Wr],Zr[Wr]=null,Yr=Zr[--Wr],Zr[Wr]=null;for(;e===qr;)qr=Hr[--Xr],Hr[Xr]=null,$r=Hr[--Xr],Hr[Xr]=null,Kr=Hr[--Xr],Hr[Xr]=null}var na=null,ia=null,ra=!1,aa=null;function oa(e,t){var n=Du(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ia=ur(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qr?{id:Kr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Du(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ia=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ra){var t=ia;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ur(n.nextSibling);var i=na;t&&sa(e,t)?oa(i,n):(e.flags=-4097&e.flags|2,ra=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ra)return ca(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ia)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ur(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=na?ur(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ia;e;)e=ur(e.nextSibling)}function pa(){ia=na=null,ra=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Sr(null),ga=null,_a=null,xa=null;function ba(){xa=_a=ga=null}function wa(e){var t=ya.current;Tr(ya),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,xa=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ga)throw Error(a(308));_a=e,ga.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ca=null;function Ea(e){null===Ca?Ca=[e]:Ca.push(e)}function Ma(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ea(t)):(n.next=r.next,r.next=n),t.interleaved=n,Pa(e,i)}function Pa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Ml)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Pa(e,n)}return null===(r=i.interleaved)?(t.next=t,Ea(i)):(t.next=r.next,r.next=t),i.interleaved=t,Pa(e,n)}function za(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ra(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,i){var r=e.updateQueue;Aa=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=r.baseState;for(o=0,c=u=l=null,s=a;;){var d=s.lane,p=s.eventTime;if((i&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=B({},h,d);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,o|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===c&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Rl|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Na=(new i.Component).refs;function ja(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=eu(),r=tu(e),a=La(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,r))&&(nu(t,e,r,i),za(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=eu(),r=tu(e),a=La(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,r))&&(nu(t,e,r,i),za(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),i=tu(e),r=La(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Oa(e,r,i))&&(nu(t,e,i,n),za(t,e,i))}};function Va(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,a))}function Za(e,t,n){var i=!1,r=Er,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(r=Ir(t)?Ar:Mr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Dr(e,r):Er),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Na,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Ta(a):(a=Ir(t)?Ar:Mr.current,r.context=Dr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Ua.enqueueReplaceState(r,r.state,null),Ba(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Ya(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Na&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Lu(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Bu(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){var a=n.type;return a===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&Xa(a)===t.type)?((i=r(t,n.props)).ref=Ya(e,t,n),i.return=e,i):((i=Ou(n.type,n.key,n.props,null,e.mode,i)).ref=Ya(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,a){return null===t||7!==t.tag?((t=zu(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=Ya(e,null,t),n.return=e,n;case w:return(t=Fu(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(te(t)||z(t))return(t=zu(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?u(e,t,n,i):null;case w:return n.key===r?c(e,t,n,i):null;case I:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||z(n))return null!==r?null:h(e,t,n,i,null);Ha(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case I:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||z(i))return h(t,e=e.get(n)||null,i,r,null);Ha(t,i)}return null}function m(r,a,s,l){for(var u=null,c=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var y=p(r,h,s[m],l);if(null===y){null===h&&(h=v);break}e&&h&&null===y.alternate&&t(r,h),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,h=v}if(m===s.length)return n(r,h),ra&&Qr(r,m),u;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return ra&&Qr(r,m),u}for(h=i(r,h);m<s.length;m++)null!==(v=f(h,r,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(r,e)})),ra&&Qr(r,m),u}function v(r,s,l,u){var c=z(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,v=s=0,y=null,g=l.next();null!==m&&!g.done;v++,g=l.next()){m.index>v?(y=m,m=null):y=m.sibling;var _=p(r,m,g.value,u);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(r,m),s=o(_,s,v),null===h?c=_:h.sibling=_,h=_,m=y}if(g.done)return n(r,m),ra&&Qr(r,v),c;if(null===m){for(;!g.done;v++,g=l.next())null!==(g=d(r,g.value,u))&&(s=o(g,s,v),null===h?c=g:h.sibling=g,h=g);return ra&&Qr(r,v),c}for(m=i(r,m);!g.done;v++,g=l.next())null!==(g=f(m,r,v,g.value,u))&&(e&&null!==g.alternate&&m.delete(null===g.key?v:g.key),s=o(g,s,v),null===h?c=g:h.sibling=g,h=g);return e&&m.forEach((function(e){return t(r,e)})),ra&&Qr(r,v),c}return function e(i,a,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){n(i,c.sibling),(a=r(c,o.props.children)).return=i,i=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===I&&Xa(u)===c.type){n(i,c.sibling),(a=r(c,o.props)).ref=Ya(i,c,o),a.return=i,i=a;break e}n(i,c);break}t(i,c),c=c.sibling}o.type===k?((a=zu(o.props.children,i.mode,l,o.key)).return=i,i=a):((l=Ou(o.type,o.key,o.props,null,i.mode,l)).ref=Ya(i,a,o),l.return=i,i=l)}return s(i);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Fu(o,i.mode,l)).return=i,i=a}return s(i);case I:return e(i,a,(c=o._init)(o._payload),l)}if(te(o))return m(i,a,o,l);if(z(o))return v(i,a,o,l);Ha(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=Bu(o,i.mode,l)).return=i,i=a),s(i)):n(i,a)}}var Ka=qa(!0),$a=qa(!1),Qa={},Ja=Sr(Qa),eo=Sr(Qa),to=Sr(Qa);function no(e){if(e===Qa)throw Error(a(174));return e}function io(e,t){switch(Cr(to,t),Cr(eo,e),Cr(Ja,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(Ja),Cr(Ja,t)}function ro(){Tr(Ja),Tr(eo),Tr(to)}function ao(e){no(to.current);var t=no(Ja.current),n=le(t,e.type);t!==n&&(Cr(eo,e),Cr(Ja,n))}function oo(e){eo.current===e&&(Tr(Ja),Tr(eo))}var so=Sr(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,fo=0,mo=null,vo=null,yo=null,go=!1,_o=!1,xo=0,bo=0;function wo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function So(e,t,n,i,r,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(i,r),_o){o=0;do{if(_o=!1,xo=0,25<=o)throw Error(a(301));o+=1,yo=vo=null,t.updateQueue=null,ho.current=us,e=n(i,r)}while(_o)}if(ho.current=os,t=null!==vo&&null!==vo.next,fo=0,yo=vo=mo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==xo;return xo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Eo(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Mo(e,t){return"function"===typeof t?t(e):t}function Po(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=vo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((fo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=i):u=u.next=d,mo.lanes|=h,Rl|=h}c=c.next}while(null!==c&&c!==o);null===u?s=i:u.next=l,si(i,t.memoizedState)||(xs=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=u,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,mo.lanes|=o,Rl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);si(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Do(){}function Io(e,t){var n=mo,i=Eo(),r=t(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,xs=!0),i=i.queue,Wo(zo.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,No(9,Oo.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&fo)||Lo(n,t,r)}return r}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,i){t.value=n,t.getSnapshot=i,Ro(t)&&Bo(e)}function zo(e,t,n){return n((function(){Ro(t)&&Bo(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(i){return!0}}function Bo(e){var t=Pa(e,1);null!==t&&nu(t,e,1,-1)}function Fo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function No(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function jo(){return Eo().memoizedState}function Uo(e,t,n,i){var r=Co();mo.flags|=e,r.memoizedState=No(1|t,n,void 0,void 0===i?null:i)}function Vo(e,t,n,i){var r=Eo();i=void 0===i?null:i;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==i&&ko(i,o.deps))return void(r.memoizedState=No(t,n,a,i))}mo.flags|=e,r.memoizedState=No(1|t,n,a,i)}function Zo(e,t){return Uo(8390656,8,e,t)}function Wo(e,t){return Vo(2048,8,e,t)}function Go(e,t){return Vo(4,2,e,t)}function Yo(e,t){return Vo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,Ho.bind(null,t,e),n)}function qo(){}function Ko(e,t){var n=Eo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Eo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(si(n,t)||(n=mt(),mo.lanes|=n,Rl|=n,e.baseState=!0),t)}function Jo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var i=po.transition;po.transition={};try{e(!1),t()}finally{_t=n,po.transition=i}}function es(){return Eo().memoizedState}function ts(e,t,n){var i=tu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},is(e))rs(t,n);else if(null!==(n=Ma(e,t,n,i))){nu(n,e,i,eu()),as(n,t,i)}}function ns(e,t,n){var i=tu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))rs(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,o)){var l=t.interleaved;return null===l?(r.next=r,Ea(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(u){}null!==(n=Ma(e,t,r,i))&&(nu(n,e,i,r=eu()),as(n,t,i))}}function is(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function rs(e,t){_o=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ta,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ta,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Co();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ts.bind(null,mo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Fo,useDebugValue:qo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=mo,r=Co();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&fo)||Lo(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Zo(zo.bind(null,i,o,e),[e]),i.flags|=2048,No(9,Oo.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Pl.identifierPrefix;if(ra){var n=$r;t=":"+t+"R"+(n=(Kr&~(1<<32-ot(Kr)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ta,useCallback:Ko,useContext:Ta,useEffect:Wo,useImperativeHandle:Xo,useInsertionEffect:Go,useLayoutEffect:Yo,useMemo:$o,useReducer:Po,useRef:jo,useState:function(){return Po(Mo)},useDebugValue:qo,useDeferredValue:function(e){return Qo(Eo(),vo.memoizedState,e)},useTransition:function(){return[Po(Mo)[0],Eo().memoizedState]},useMutableSource:Do,useSyncExternalStore:Io,useId:es,unstable_isNewReconciler:!1},us={readContext:Ta,useCallback:Ko,useContext:Ta,useEffect:Wo,useImperativeHandle:Xo,useInsertionEffect:Go,useLayoutEffect:Yo,useMemo:$o,useReducer:Ao,useRef:jo,useState:function(){return Ao(Mo)},useDebugValue:qo,useDeferredValue:function(e){var t=Eo();return null===vo?t.memoizedState=e:Qo(t,vo.memoizedState,e)},useTransition:function(){return[Ao(Mo)[0],Eo().memoizedState]},useMutableSource:Do,useSyncExternalStore:Io,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",i=t;do{n+=U(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=La(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=i),ds(0,t)},n}function ms(e,t,n){(n=La(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ps;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=La(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var _s=x.ReactCurrentOwner,xs=!1;function bs(e,t,n,i){t.child=null===e?$a(t,null,n,i):Ka(t,e.child,n,i)}function ws(e,t,n,i,r){n=n.render;var a=t.ref;return Sa(t,r),i=So(e,t,n,i,a,r),n=To(),null===e||xs?(ra&&n&&ea(t),t.flags|=1,bs(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function ks(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Iu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ws(e,t,r)}return t.flags|=1,(e=Lu(a,i)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(li(a,i)&&e.ref===t.ref){if(xs=!1,t.pendingProps=i=a,0===(e.lanes&r))return t.lanes=e.lanes,Ws(e,t,r);0!==(131072&e.flags)&&(xs=!0)}}return Es(e,t,n,i,r)}function Ts(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Ll,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Ll,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,Cr(Ll,Il),Il|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,Cr(Ll,Il),Il|=i;return bs(e,t,r,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,i,r){var a=Ir(n)?Ar:Mr.current;return a=Dr(t,a),Sa(t,r),n=So(e,t,n,i,a,r),i=To(),null===e||xs?(ra&&i&&ea(t),t.flags|=1,bs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function Ms(e,t,n,i,r){if(Ir(n)){var a=!0;Rr(t)}else a=!1;if(Sa(t,r),null===t.stateNode)Zs(e,t),Za(t,n,i),Ga(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ta(u):u=Dr(t,u=Ir(n)?Ar:Mr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||l!==u)&&Wa(t,o,i,u),Aa=!1;var d=t.memoizedState;o.state=d,Ba(t,i,o,r),l=t.memoizedState,s!==i||d!==l||Pr.current||Aa?("function"===typeof c&&(ja(t,n,c,i),l=t.memoizedState),(s=Aa||Va(t,n,s,i,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Ia(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:va(t.type,s),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ta(l):l=Dr(t,l=Ir(n)?Ar:Mr.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Wa(t,o,i,l),Aa=!1,d=t.memoizedState,o.state=d,Ba(t,i,o,r);var f=t.memoizedState;s!==h||d!==f||Pr.current||Aa?("function"===typeof p&&(ja(t,n,p,i),f=t.memoizedState),(u=Aa||Va(t,n,u,i,d,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Ps(e,t,n,i,a,r)}function Ps(e,t,n,i,r,a){Cs(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Br(t,n,!1),Ws(e,t,a);i=t.stateNode,_s.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Ka(t,e.child,null,a),t.child=Ka(t,null,s,a)):bs(e,t,s,a),t.memoizedState=i.state,r&&Br(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),io(e,t.containerInfo)}function Ds(e,t,n,i,r){return pa(),fa(r),t.flags|=256,bs(e,t,n,i),t.child}var Is,Ls,Os,zs={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var i,r=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Cr(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Ru(l,r,0,null),e=zu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=zs,e):Fs(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,s){if(n)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,i=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Ru({mode:"visible",children:i.children},r,0,null),(o=zu(o,r,s,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Ka(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=zs,o);if(0===(1&t.mode))return Ns(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ns(e,t,s,i=hs(o=Error(a(419)),i,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(i=Pl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Pa(e,r),nu(i,e,r,-1))}return mu(),Ns(e,t,s,i=hs(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Eu.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,ia=ur(r.nextSibling),na=t,ra=!0,aa=null,null!==e&&(Hr[Xr++]=Kr,Hr[Xr++]=$r,Hr[Xr++]=qr,Kr=e.id,$r=e.overflow,qr=t),(t=Fs(t,i.children)).flags|=4096,t)}(e,t,l,r,i,o,n);if(s){s=r.fallback,l=t.mode,i=(o=e.child).sibling;var u={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=u,t.deletions=null):(r=Lu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==i?s=Lu(i,s):(s=zu(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=zs,r}return e=(s=e.child).sibling,r=Lu(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fs(e,t){return(t=Ru({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,n,i){return null!==i&&fa(i),Ka(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ka(e.return,t,n)}function Us(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Vs(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(bs(e,t,i.children,n),0!==(2&(i=so.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr(so,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Us(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===lo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Us(t,!0,n,null,a);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Hs(e,t,n){var i=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Ir(t.type)&&Lr(),Ys(t),null;case 3:return i=t.stateNode,ro(),Tr(Pr),Tr(Mr),co(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),Ys(t),null;case 5:oo(t);var r=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ls(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Ys(t),null}if(e=no(Ja.current),ha(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[pr]=o,e=0!==(1&t.mode),n){case"dialog":Ni("cancel",i),Ni("close",i);break;case"iframe":case"object":case"embed":Ni("load",i);break;case"video":case"audio":for(r=0;r<zi.length;r++)Ni(zi[r],i);break;case"source":Ni("error",i);break;case"img":case"image":case"link":Ni("error",i),Ni("load",i);break;case"details":Ni("toggle",i);break;case"input":K(i,o),Ni("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ni("invalid",i);break;case"textarea":re(i,o),Ni("invalid",i)}for(var l in ge(n,o),r=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?i.textContent!==u&&(!0!==o.suppressHydrationWarning&&Qi(i.textContent,u,e),r=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Qi(i.textContent,u,e),r=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ni("scroll",i)}switch(n){case"input":Y(i),J(i,o,!0);break;case"textarea":Y(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[pr]=i,Is(e,t),t.stateNode=e;e:{switch(l=_e(n,i),n){case"dialog":Ni("cancel",e),Ni("close",e),r=i;break;case"iframe":case"object":case"embed":Ni("load",e),r=i;break;case"video":case"audio":for(r=0;r<zi.length;r++)Ni(zi[r],e);r=i;break;case"source":Ni("error",e),r=i;break;case"img":case"image":case"link":Ni("error",e),Ni("load",e),r=i;break;case"details":Ni("toggle",e),r=i;break;case"input":K(e,i),r=q(e,i),Ni("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=B({},i,{value:void 0}),Ni("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ni("invalid",e)}for(o in ge(n,r),u=r)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ni("scroll",e):null!=c&&_(e,o,c,l))}switch(n){case"input":Y(e),J(e,i,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),ha(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Ys(t),null;case 13:if(Tr(so),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==ia&&0!==(1&t.mode)&&0===(128&t.flags))da(),pa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[dr]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ol&&(Ol=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return ro(),null===e&&Vi(t.stateNode.containerInfo),Ys(t),null;case 10:return wa(t.type._context),Ys(t),null;case 19:if(Tr(so),null===(o=t.memoizedState))return Ys(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Gs(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Gs(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Vl&&(t.flags|=128,i=!0,Gs(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ra)return Ys(t),null}else 2*$e()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,i=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Cr(so,i?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return hu(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xs(e,t){switch(ta(t),t.tag){case 1:return Ir(t.type)&&Lr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),Tr(Pr),Tr(Mr),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Tr(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(so),null;case 4:return ro(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":r=q(e,r),i=q(e,i),o=[];break;case"select":r=B({},r,{value:void 0}),i=B({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(c in ge(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ni("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Os=function(e,t,n,i){n!==i&&(t.flags|=4)};var qs=!1,Ks=!1,$s="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Su(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Su(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&el(t,n,a)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[pr],delete t[mr],delete t[vr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Ks||Js(n,t);case 6:var i=cl,r=hl;cl=null,dl(e,t,n),hl=r,null!==(cl=i)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Vt(e)):lr(cl,n.stateNode));break;case 4:i=cl,r=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!Ks&&(Js(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Su(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ks=(i=Ks)||null!==n.memoizedState,dl(e,t,n),Ks=i):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var i=Mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));pl(o,s,r),cl=null,hl=!1;var u=r.alternate;null!==u&&(u.return=null),r.return=null}catch(c){Su(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(v){Su(e,e.return,v)}try{nl(5,e,e.return)}catch(v){Su(e,e.return,v)}}break;case 1:ml(t,e),yl(e),512&i&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),yl(e),512&i&&null!==n&&Js(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(v){Su(e,e.return,v)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),_e(l,s);var c=_e(l,o);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?ve(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):_(r,h,d,c)}switch(l){case"input":Q(r,o);break;case"textarea":ae(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[pr]=o}catch(v){Su(e,e.return,v)}}break;case 6:if(ml(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(v){Su(e,e.return,v)}}break;case 3:if(ml(t,e),yl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(v){Su(e,e.return,v)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=$e())),4&i&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(c=Ks)||h,ml(t,e),Ks=c):ml(t,e),yl(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Js(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Su(i,n,v)}}break;case 5:Js(p,p.return);break;case 22:if(null!==p.memoizedState){bl(d);continue}}null!==f?(f.return=p,Qs=f):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,c?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(v){Su(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Su(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&i&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,sl(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Su(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e,t,n){Qs=e,_l(e,t,n)}function _l(e,t,n){for(var i=0!==(1&e.mode);null!==Qs;){var r=Qs,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||qs;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=qs;var u=Ks;if(qs=o,(Ks=l)&&!u)for(Qs=r;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?wl(r):null!==l?(l.return=o,Qs=l):wl(r);for(;null!==a;)Qs=a,_l(a,t,n),a=a.sibling;Qs=r,qs=s,Ks=u}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Qs=a):xl(e)}}function xl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ks)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:va(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(a(163))}Ks||512&t.flags&&rl(t)}catch(p){Su(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function bl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Su(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Su(t,r,l)}}var a=t.return;try{rl(t)}catch(l){Su(t,a,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){Su(t,o,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var kl,Sl=Math.ceil,Tl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,El=x.ReactCurrentBatchConfig,Ml=0,Pl=null,Al=null,Dl=0,Il=0,Ll=Sr(0),Ol=0,zl=null,Rl=0,Bl=0,Fl=0,Nl=null,jl=null,Ul=0,Vl=1/0,Zl=null,Wl=!1,Gl=null,Yl=null,Hl=!1,Xl=null,ql=0,Kl=0,$l=null,Ql=-1,Jl=0;function eu(){return 0!==(6&Ml)?$e():-1!==Ql?Ql:Ql=$e()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Dl?Dl&-Dl:null!==ma.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nu(e,t,n,i){if(50<Kl)throw Kl=0,$l=null,Error(a(185));yt(e,n,i),0!==(2&Ml)&&e===Pl||(e===Pl&&(0===(2&Ml)&&(Bl|=n),4===Ol&&su(e,Dl)),iu(e,i),1===n&&0===Ml&&0===(1&t.mode)&&(Vl=$e()+500,Nr&&Vr()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=dt(e,e===Pl?Dl:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Nr=!0,Ur(e)}(lu.bind(null,e)):Ur(lu.bind(null,e)),or((function(){0===(6&Ml)&&Vr()})),n=null;else{switch(xt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pu(n,ru.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ru(e,t){if(Ql=-1,Jl=0,0!==(6&Ml))throw Error(a(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var i=dt(e,e===Pl?Dl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=vu(e,i);else{t=i;var r=Ml;Ml|=2;var o=fu();for(Pl===e&&Dl===t||(Zl=null,Vl=$e()+500,du(e,t));;)try{gu();break}catch(l){pu(e,l)}ba(),Tl.current=o,Ml=r,null!==Al?t=0:(Pl=null,Dl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=au(e,r))),1===t)throw n=zl,du(e,0),su(e,i),iu(e,$e()),n;if(6===t)su(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!si(a(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=vu(e,i))&&(0!==(o=ft(e))&&(i=o,t=au(e,o))),1===t))throw n=zl,du(e,0),su(e,i),iu(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:bu(e,jl,Zl);break;case 3:if(su(e,i),(130023424&i)===i&&10<(t=Ul+500-$e())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){eu(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(bu.bind(null,e,jl,Zl),t);break}bu(e,jl,Zl);break;case 4:if(su(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-ot(i);o=1<<s,(s=t[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sl(i/1960))-i)){e.timeoutHandle=ir(bu.bind(null,e,jl,Zl),i);break}bu(e,jl,Zl);break;default:throw Error(a(329))}}}return iu(e,$e()),e.callbackNode===n?ru.bind(null,e):null}function au(e,t){var n=Nl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=vu(e,t))&&(t=jl,jl=n,null!==t&&ou(t)),e}function ou(e){null===jl?jl=e:jl.push.apply(jl,e)}function su(e,t){for(t&=~Fl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function lu(e){if(0!==(6&Ml))throw Error(a(327));wu();var t=dt(e,0);if(0===(1&t))return iu(e,$e()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=au(e,i))}if(1===n)throw n=zl,du(e,0),su(e,t),iu(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bu(e,jl,Zl),iu(e,$e()),null}function uu(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Vl=$e()+500,Nr&&Vr())}}function cu(e){null!==Xl&&0===Xl.tag&&0===(6&Ml)&&wu();var t=Ml;Ml|=1;var n=El.transition,i=_t;try{if(El.transition=null,_t=1,e)return e()}finally{_t=i,El.transition=n,0===(6&(Ml=t))&&Vr()}}function hu(){Il=Ll.current,Tr(Ll)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Al)for(n=Al.return;null!==n;){var i=n;switch(ta(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:ro(),Tr(Pr),Tr(Mr),co();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:Tr(so);break;case 10:wa(i.type._context);break;case 22:case 23:hu()}n=n.return}if(Pl=e,Al=e=Lu(e.current,null),Dl=Il=t,Ol=0,zl=null,Fl=Bl=Rl=0,jl=Nl=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(i=(n=Ca[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}Ca=null}return e}function pu(e,t){for(;;){var n=Al;try{if(ba(),ho.current=os,go){for(var i=mo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}go=!1}if(fo=0,yo=vo=mo=null,_o=!1,xo=0,Cl.current=null,null===n||null===n.return){Ol=1,zl=t,Al=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Dl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,gs(f,s,l,0,t),1&f.mode&&vs(o,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var v=new Set;v.add(u),t.updateQueue=v}else m.add(u);break e}if(0===(1&t)){vs(o,c,t),mu();break e}u=Error(a(426))}else if(ra&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,l,0,t),fa(cs(u,l));break e}}o=u=cs(u,l),4!==Ol&&(Ol=2),null===Nl?Nl=[o]:Nl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ra(o,fs(0,u,t));break e;case 1:l=u;var g=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yl||!Yl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ra(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(x){t=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function fu(){var e=Tl.current;return Tl.current=os,null===e?os:e}function mu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Rl)&&0===(268435455&Bl)||su(Pl,Dl)}function vu(e,t){var n=Ml;Ml|=2;var i=fu();for(Pl===e&&Dl===t||(Zl=null,du(e,t));;)try{yu();break}catch(r){pu(e,r)}if(ba(),Ml=n,Tl.current=i,null!==Al)throw Error(a(261));return Pl=null,Dl=0,Ol}function yu(){for(;null!==Al;)_u(Al)}function gu(){for(;null!==Al&&!qe();)_u(Al)}function _u(e){var t=kl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?xu(e):Al=t,Cl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hs(n,t,Il)))return void(Al=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function bu(e,t,n){var i=_t,r=El.transition;try{El.transition=null,_t=1,function(e,t,n,i){do{wu()}while(null!==Xl);if(0!==(6&Ml))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,o),e===Pl&&(Al=Pl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Pu(tt,(function(){return wu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=El.transition,El.transition=null;var s=_t;_t=1;var l=Ml;Ml|=4,Cl.current=null,function(e,t){if(er=Wt,pi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==o||0!==i&&3!==d.nodeType||(u=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++c===r&&(l=s),p===o&&++h===i&&(u=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,y=m.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:va(t.type,v),y);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(b){Su(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),vl(n,e),fi(tr),Wt=!!er,tr=er=null,e.current=n,gl(n,e,r),Ke(),Ml=l,_t=s,El.transition=o}else e.current=n;if(Hl&&(Hl=!1,Xl=e,ql=r),0===(o=e.pendingLanes)&&(Yl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i((r=t[n]).value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&ql)&&0!==e.tag&&wu(),0!==(1&(o=e.pendingLanes))?e===$l?Kl++:(Kl=0,$l=e):Kl=0,Vr()}(e,t,n,i)}finally{El.transition=r,_t=i}return null}function wu(){if(null!==Xl){var e=xt(ql),t=El.transition,n=_t;try{if(El.transition=null,_t=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,ql=0,0!==(6&Ml))throw Error(a(331));var r=Ml;for(Ml|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var p=(h=Qs).sibling,f=h.return;if(al(h),h===c){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(null!==v)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Qs=g;break e}Qs=o.return}}var _=e.current;for(Qs=_;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=_;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Su(l,l.return,w)}if(l===s){Qs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qs=b;break e}Qs=l.return}}if(Ml=r,Vr(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{_t=n,El.transition=t}}return!1}function ku(e,t,n){e=Oa(e,t=fs(0,t=cs(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),iu(e,t))}function Su(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){t=Oa(t,e=ms(t,e=cs(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Dl&n)===n&&(4===Ol||3===Ol&&(130023424&Dl)===Dl&&500>$e()-Ul?du(e,0):Fl|=n),iu(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Pa(e,t))&&(yt(e,t,n),iu(e,n))}function Eu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Mu(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Cu(e,n)}function Pu(e,t){return He(e,t)}function Au(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(e,t,n,i){return new Au(e,t,n,i)}function Iu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lu(e,t){var n=e.alternate;return null===n?((n=Du(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,i,r,o){var s=2;if(i=e,"function"===typeof e)Iu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return zu(n.children,r,o,t);case S:s=8,r|=8;break;case T:return(e=Du(12,n,t,2|r)).elementType=T,e.lanes=o,e;case P:return(e=Du(13,n,t,r)).elementType=P,e.lanes=o,e;case A:return(e=Du(19,n,t,r)).elementType=A,e.lanes=o,e;case L:return Ru(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case E:s=9;break e;case M:s=11;break e;case D:s=14;break e;case I:s=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Du(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function zu(e,t,n,i){return(e=Du(7,e,i,t)).lanes=n,e}function Ru(e,t,n,i){return(e=Du(22,e,i,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return(e=Du(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Du(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nu(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,i,r,a,o,s,l){return e=new Nu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Du(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Uu(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Vu(e){if(!e)return Er;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ir(n))return zr(e,n,t)}return t}function Zu(e,t,n,i,r,a,o,s,l){return(e=ju(n,i,!0,e,0,a,0,s,l)).context=Vu(null),n=e.current,(a=La(i=eu(),r=tu(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,r),e.current.lanes=r,yt(e,r,i),iu(e,i),e}function Wu(e,t,n,i){var r=t.current,a=eu(),o=tu(r);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=La(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Oa(r,t,o))&&(nu(e,r,o,a),za(e,r,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:As(t),pa();break;case 5:ao(t);break;case 1:Ir(t.type)&&Rr(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(ya,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Cr(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Cr(so,1&so.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Vs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(so,so.current),i)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Ws(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ra&&0!==(1048576&t.flags)&&Jr(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Zs(e,t),e=t.pendingProps;var r=Dr(t,Mr.current);Sa(t,n),r=So(null,t,i,e,r,n);var o=To();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(i)?(o=!0,Rr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Da(t),r.updater=Ua,t.stateNode=r,r._reactInternals=t,Ga(t,i,e,n),t=Ps(null,t,i,!0,o,n)):(t.tag=0,ra&&o&&ea(t),bs(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Iu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===D)return 14}return 2}(i),e=va(i,e),r){case 0:t=Es(null,t,i,e,n);break e;case 1:t=Ms(null,t,i,e,n);break e;case 11:t=ws(null,t,i,e,n);break e;case 14:t=ks(null,t,i,va(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Es(e,t,i,r=t.elementType===i?r:va(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ms(e,t,i,r=t.elementType===i?r:va(i,r),n);case 3:e:{if(As(t),null===e)throw Error(a(387));i=t.pendingProps,r=(o=t.memoizedState).element,Ia(e,t),Ba(t,i,null,n);var s=t.memoizedState;if(i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,i,n,r=cs(Error(a(423)),t));break e}if(i!==r){t=Ds(e,t,i,n,r=cs(Error(a(424)),t));break e}for(ia=ur(t.stateNode.containerInfo.firstChild),na=t,ra=!0,aa=null,n=$a(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),i===r){t=Ws(e,t,n);break e}bs(e,t,i,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==o&&nr(i,o)&&(t.flags|=32),Cs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Bs(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ka(t,null,i,n):bs(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ws(e,t,i,r=t.elementType===i?r:va(i,r),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,Cr(ya,i._currentValue),i._currentValue=s,null!==o)if(si(o.value,s)){if(o.children===r.children&&!Pr.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===o.tag){(u=La(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),ka(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ka(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Sa(t,n),i=i(r=Ta(r)),t.flags|=1,bs(e,t,i,n),t.child;case 14:return r=va(i=t.type,t.pendingProps),ks(e,t,i,r=va(i.type,r),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:va(i,r),Zs(e,t),t.tag=1,Ir(i)?(e=!0,Rr(t)):e=!1,Sa(t,n),Za(t,i,r),Ga(t,i,r,n),Ps(null,t,i,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ts(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function qu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof r){var s=r;r=function(){var e=Gu(o);s.call(e)}}Wu(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var e=Gu(o);a.call(e)}}var o=Zu(t,i,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[fr]=o.current,Vi(8===e.nodeType?e.parentNode:e),cu(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var s=i;i=function(){var e=Gu(l);s.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[fr]=l.current,Vi(8===e.nodeType?e.parentNode:e),cu((function(){Wu(t,l,n,i)})),l}(n,t,e,r,i);return Gu(o)}Ku.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wu(e,t,null,null)},Ku.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Wu(null,e,null,null)})),t[fr]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Bt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),iu(t,$e()),0===(6&Ml)&&(Vl=$e()+500,Vr()))}break;case 13:cu((function(){var t=Pa(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Hu(e,1)}},wt=function(e){if(13===e.tag){var t=Pa(e,134217728);if(null!==t)nu(t,e,134217728,eu());Hu(e,134217728)}},kt=function(e){if(13===e.tag){var t=tu(e),n=Pa(e,t);if(null!==n)nu(n,e,t,eu());Hu(e,t)}},St=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=br(i);if(!r)throw Error(a(90));H(i),Q(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=uu,Pe=cu;var tc={usingClientEntryPoint:!1,Events:[_r,xr,br,Ce,Ee,uu]},nc={findFiberByHostInstance:gr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{rt=rc.inject(ic),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(a(200));return Uu(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(a(299));var n=!1,i="",r=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Vi(8===e.nodeType?e.parentNode:e),new qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Zu(t,null,e,1,null!=n?n:null,r,0,o,s),e[fr]=t.current,Vi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Ku(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Qu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var i=n(4164);t.s=i.createRoot,i.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,i=60106,r=60107,a=60108,o=60114,s=60109,l=60110,u=60112,c=60113,h=60120,d=60115,p=60116,f=60121,m=60122,v=60117,y=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),i=_("react.portal"),r=_("react.fragment"),a=_("react.strict_mode"),o=_("react.profiler"),s=_("react.provider"),l=_("react.context"),u=_("react.forward_ref"),c=_("react.suspense"),h=_("react.suspense_list"),d=_("react.memo"),p=_("react.lazy"),f=_("react.block"),m=_("react.server.block"),v=_("react.fundamental"),y=_("react.debug_trace_mode"),g=_("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case r:case o:case a:case c:case h:return e;default:switch(e=e&&e.$$typeof){case l:case u:case p:case d:case s:return e;default:return t}}case i:return t}}}},7441:function(e,t,n){"use strict";n(1372)},6374:function(e,t,n){"use strict";var i=n(2791),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,a={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}function g(){}function _(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var x=_.prototype=new g;x.constructor=_,m(x,y.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===a?"."+M(l,0):a,b(o)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),P(o,t,r,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",b(e))for(var u=0;u<e.length;u++){var c=a+M(s=e[u],u);l+=P(s,t,r,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=P(s=s.value,t,r,c=a+M(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},L={transition:null},O={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:L,ReactCurrentOwner:k};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!S.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=i;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<r&&0>a(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[s]=n,i=s);else{if(!(u<r&&0>a(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(u,t)}t=i(c)}}function b(e){if(v=!1,x(e),!m)if(null!==i(u))m=!0,L(w);else{var t=i(c);null!==t&&O(b,t.startTime-e)}}function w(e,n){m=!1,v&&(v=!1,g(C),C=-1),f=!0;var a=p;try{for(x(n),d=i(u);null!==d&&(!(d.expirationTime>n)||e&&!P());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===i(u)&&r(u),x(n)}else r(u);d=i(u)}if(null!==d)var l=!0;else{var h=i(c);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,T=null,C=-1,E=5,M=-1;function P(){return!(t.unstable_now()-M<E)}function A(){if(null!==T){var e=t.unstable_now();M=e;var n=!0;try{n=T(!0,e)}finally{n?k():(S=!1,T=null)}}else S=!1}if("function"===typeof _)k=function(){_(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,I=D.port2;D.port1.onmessage=A,k=function(){I.postMessage(null)}}else k=function(){y(A,0)};function L(e){T=e,S||(S=!0,k())}function O(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,L(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===i(u)&&e===i(c)&&(v?(g(C),C=-1):v=!0,O(b,a-o))):(e.sortIndex=s,n(u,e),m||f||(m=!0,L(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},907:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:function(){return i}})},7326:function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return i}})},3144:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}})},7462:function(e,t,n){"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}n.d(t,{Z:function(){return i}})},4578:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(9611);function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,i.Z)(e,t)}},5987:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(3366);function r(e,t){if(null==e)return{};var n,r,a=(0,i.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},3366:function(e,t,n){"use strict";function i(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}n.d(t,{Z:function(){return i}})},9611:function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}n.d(t,{Z:function(){return i}})},885:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(181);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||(0,i.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(907);var r=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,i.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{Z:function(){return i}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(907);function r(e,t){if(e){if("string"===typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}},9125:function(e){"use strict";e.exports=JSON.parse('{"cropinfo":{"grass":{"Lini":0,"Ldev":0,"Lmid":240,"Llate":0,"Kcini":1,"Kcmid":1,"Kcend":1},"cereals":{"Lini":20,"Ldev":35,"Lmid":60,"Llate":25,"Kcini":0.3,"Kcmid":1.15,"Kcend":0.3},"forages":{"Lini":10,"Ldev":15,"Lmid":20,"Llate":10,"Kcini":0.4,"Kcmid":1.2,"Kcend":1.1},"grapes":{"Lini":30,"Ldev":60,"Lmid":40,"Llate":80,"Kcini":0.3,"Kcmid":0.7,"Kcend":0.45},"legumes":{"Lini":20,"Ldev":30,"Lmid":30,"Llate":10,"Kcini":0.5,"Kcmid":1.1,"Kcend":1},"rootstubers":{"Lini":20,"Ldev":30,"Lmid":50,"Llate":20,"Kcini":0.5,"Kcmid":1.15,"Kcend":0.7},"vegsmallshort":{"Lini":20,"Ldev":35,"Lmid":35,"Llate":10,"Kcini":0.7,"Kcmid":1.05,"Kcend":0.95},"vegsmalllong":{"Lini":30,"Ldev":45,"Lmid":75,"Llate":30,"Kcini":0.7,"Kcmid":1.05,"Kcend":0.95},"vegsolanum":{"Lini":30,"Ldev":40,"Lmid":80,"Llate":30,"Kcini":0.6,"Kcmid":1.15,"Kcend":0.8},"vegcucumber":{"Lini":25,"Ldev":40,"Lmid":35,"Llate":20,"Kcini":0.5,"Kcmid":1,"Kcend":0.8}},"soildata":{"soilmoistureoptions":{"low":{"wiltingpoint":1,"prewiltingpoint":1.15,"stressthreshold":1.5,"fieldcapacity":2,"saturation":5},"medium":{"wiltingpoint":2,"prewiltingpoint":2.225,"stressthreshold":2.8,"fieldcapacity":3.5,"saturation":5.5},"high":{"wiltingpoint":3,"prewiltingpoint":3.3,"stressthreshold":4,"fieldcapacity":5,"saturation":6.5}},"soildrainageoptions":{"low":{"daysToDrainToFcFromSat":0.125},"medium":{"daysToDrainToFcFromSat":1},"high":{"daysToDrainToFcFromSat":2}}}}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return i[e]}}));return o.default=function(){return i},n.d(a,o),a}}(),n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e=n(2791),t=n(1250);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(3144),a=n(9611);function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,a.Z)(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=n(1002),u=n(7326);function c(e,t){if(t&&("object"===(0,l.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,u.Z)(e)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}var d=n(7576),p=n(7462),f=n(423),m=n(8444),v=n(9316);var y=function(t){var n=t.children,i=t.theme,r=(0,m.Z)(),a=e.useMemo((function(){var e=null===r?i:function(e,t){return"function"===typeof t?t(e):(0,p.Z)({},e,t)}(r,i);return null!=e&&(e[v.Z]=null!==r),e}),[i,r]);return e.createElement(f.Z.Provider,{value:a},n)},g=n(8317),_=n(5987),x=n(2110),b=n.n(x);function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.defaultTheme,i=function(t){var i=e.forwardRef((function(i,r){var a=i.innerRef,o=(0,_.Z)(i,["innerRef"]),s=(0,m.Z)()||n;return e.createElement(t,(0,p.Z)({theme:s,ref:a||r},o))}));return b()(i,t),i};return i}w();var k=n(663),S=w({defaultTheme:k.Z}),T=n(664),C=n(4942);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=n(8182),A=[0,1,2,3,4,5,6,7,8,9,10],D=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var L=e.forwardRef((function(t,n){var i=t.alignContent,r=void 0===i?"stretch":i,a=t.alignItems,o=void 0===a?"stretch":a,s=t.classes,l=t.className,u=t.component,c=void 0===u?"div":u,h=t.container,d=void 0!==h&&h,f=t.direction,m=void 0===f?"row":f,v=t.item,y=void 0!==v&&v,g=t.justify,x=t.justifyContent,b=void 0===x?"flex-start":x,w=t.lg,k=void 0!==w&&w,S=t.md,T=void 0!==S&&S,C=t.sm,E=void 0!==C&&C,M=t.spacing,A=void 0===M?0:M,D=t.wrap,I=void 0===D?"wrap":D,L=t.xl,O=void 0!==L&&L,z=t.xs,R=void 0!==z&&z,B=t.zeroMinWidth,F=void 0!==B&&B,N=(0,_.Z)(t,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),j=(0,P.Z)(s.root,l,d&&[s.container,0!==A&&s["spacing-xs-".concat(String(A))]],y&&s.item,F&&s.zeroMinWidth,"row"!==m&&s["direction-xs-".concat(String(m))],"wrap"!==I&&s["wrap-xs-".concat(String(I))],"stretch"!==o&&s["align-items-xs-".concat(String(o))],"stretch"!==r&&s["align-content-xs-".concat(String(r))],"flex-start"!==(g||b)&&s["justify-content-xs-".concat(String(g||b))],!1!==R&&s["grid-xs-".concat(String(R))],!1!==E&&s["grid-sm-".concat(String(E))],!1!==T&&s["grid-md-".concat(String(T))],!1!==k&&s["grid-lg-".concat(String(k))],!1!==O&&s["grid-xl-".concat(String(O))]);return e.createElement(c,(0,p.Z)({className:j,ref:n},N))})),O=(0,g.Z)((function(e){return(0,p.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return A.forEach((function(i){var r=e.spacing(i);0!==r&&(n["spacing-".concat(t,"-").concat(i)]={margin:"-".concat(I(r,2)),width:"calc(100% + ".concat(I(r),")"),"& > $item":{padding:I(r,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var i={};D.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var r="".concat(Math.round(e/12*1e8)/1e6,"%");i[t]={flexBasis:r,flexGrow:0,maxWidth:r}}else i[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else i[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,p.Z)(e,i):e[t.breakpoints.up(n)]=i}(t,e,n),t}),{}))}),{name:"MuiGrid"})(L),z=O,R=n(1122),B={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},F=e.forwardRef((function(t,n){var i=t.align,r=void 0===i?"inherit":i,a=t.classes,o=t.className,s=t.color,l=void 0===s?"initial":s,u=t.component,c=t.display,h=void 0===c?"initial":c,d=t.gutterBottom,f=void 0!==d&&d,m=t.noWrap,v=void 0!==m&&m,y=t.paragraph,g=void 0!==y&&y,x=t.variant,b=void 0===x?"body1":x,w=t.variantMapping,k=void 0===w?B:w,S=(0,_.Z)(t,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),T=u||(g?"p":k[b]||B[b])||"span";return e.createElement(T,(0,p.Z)({className:(0,P.Z)(a.root,o,"inherit"!==b&&a[b],"initial"!==l&&a["color".concat((0,R.Z)(l))],v&&a.noWrap,f&&a.gutterBottom,g&&a.paragraph,"inherit"!==r&&a["align".concat((0,R.Z)(r))],"initial"!==h&&a["display".concat((0,R.Z)(h))]),ref:n},S))})),N=(0,g.Z)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(F),j=n(2007),U=n.n(j),V=n(794);function Z(){return(0,m.Z)()||k.Z}var W=n(7121);function G(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,m.Z)(),r=(0,V.Z)({theme:i,name:"MuiUseMediaQuery",props:{}});var a="function"===typeof t?t(i):t;a=a.replace(/^@media( ?)/m,"");var o="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,s=(0,p.Z)({},r,n),l=s.defaultMatches,u=void 0!==l&&l,c=s.matchMedia,h=void 0===c?o?window.matchMedia:null:c,d=s.noSsr,f=void 0!==d&&d,v=s.ssrMatchMedia,y=void 0===v?null:v,g=e.useState((function(){return f&&o?h(a).matches:y?y(a).matches:u})),_=g[0],x=g[1];return e.useEffect((function(){var e=!0;if(o){var t=h(a),n=function(){e&&x(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[a,h,o]),_}var Y=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?W.X.indexOf(e)<=W.X.indexOf(t):W.X.indexOf(e)<W.X.indexOf(t)},H=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?W.X.indexOf(t)<=W.X.indexOf(e):W.X.indexOf(t)<W.X.indexOf(e)},X="undefined"===typeof window?e.useEffect:e.useLayoutEffect,q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var i=t.withTheme,r=void 0!==i&&i,a=t.noSSR,o=void 0!==a&&a,s=t.initialWidth;function l(t){var i=Z(),a=t.theme||i,l=(0,V.Z)({theme:a,name:"MuiWithWidth",props:(0,p.Z)({},t)}),u=l.initialWidth,c=l.width,h=(0,_.Z)(l,["initialWidth","width"]),d=e.useState(!1),f=d[0],m=d[1];X((function(){m(!0)}),[]);var v=a.breakpoints.keys.slice().reverse().reduce((function(e,t){var n=G(a.breakpoints.up(t));return!e&&n?t:e}),null),y=(0,p.Z)({width:c||(f||o?v:void 0)||u||s},r?{theme:a}:{},h);return void 0===y.width?null:e.createElement(n,y)}return b()(l,n),l}};function K(e){var t=e.children,n=e.only,i=e.width,r=Z(),a=!0;if(n)if(Array.isArray(n))for(var o=0;o<n.length;o+=1){if(i===n[o]){a=!1;break}}else n&&i===n&&(a=!1);if(a)for(var s=0;s<r.breakpoints.keys.length;s+=1){var l=r.breakpoints.keys[s],u=e["".concat(l,"Up")],c=e["".concat(l,"Down")];if(u&&Y(l,i)||c&&H(l,i)){a=!1;break}}return a?t:null}K.propTypes={children:U().node,className:U().string,implementation:U().oneOf(["js","css"]),initialWidth:U().oneOf(["xs","sm","md","lg","xl"]),lgDown:U().bool,lgUp:U().bool,mdDown:U().bool,mdUp:U().bool,only:U().oneOfType([U().oneOf(["xs","sm","md","lg","xl"]),U().arrayOf(U().oneOf(["xs","sm","md","lg","xl"]))]),smDown:U().bool,smUp:U().bool,width:U().string.isRequired,xlDown:U().bool,xlUp:U().bool,xsDown:U().bool,xsUp:U().bool};var $=q()(K);var Q=(0,g.Z)((function(e){var t={display:"none"};return e.breakpoints.keys.reduce((function(n,i){return n["only".concat((0,R.Z)(i))]=(0,C.Z)({},e.breakpoints.only(i),t),n["".concat(i,"Up")]=(0,C.Z)({},e.breakpoints.up(i),t),n["".concat(i,"Down")]=(0,C.Z)({},e.breakpoints.down(i),t),n}),{})}),{name:"PrivateHiddenCss"})((function(t){var n=t.children,i=t.classes,r=t.className,a=t.only,o=((0,_.Z)(t,["children","classes","className","only"]),Z()),s=[];r&&s.push(r);for(var l=0;l<o.breakpoints.keys.length;l+=1){var u=o.breakpoints.keys[l],c=t["".concat(u,"Up")],h=t["".concat(u,"Down")];c&&s.push(i["".concat(u,"Up")]),h&&s.push(i["".concat(u,"Down")])}return a&&(Array.isArray(a)?a:[a]).forEach((function(e){s.push(i["only".concat((0,R.Z)(e))])})),e.createElement("div",{className:s.join(" ")},n)}));var J=function(t){var n=t.implementation,i=void 0===n?"js":n,r=t.lgDown,a=void 0!==r&&r,o=t.lgUp,s=void 0!==o&&o,l=t.mdDown,u=void 0!==l&&l,c=t.mdUp,h=void 0!==c&&c,d=t.smDown,f=void 0!==d&&d,m=t.smUp,v=void 0!==m&&m,y=t.xlDown,g=void 0!==y&&y,x=t.xlUp,b=void 0!==x&&x,w=t.xsDown,k=void 0!==w&&w,S=t.xsUp,T=void 0!==S&&S,C=(0,_.Z)(t,["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"]);return"js"===i?e.createElement($,(0,p.Z)({lgDown:a,lgUp:s,mdDown:u,mdUp:h,smDown:f,smUp:v,xlDown:g,xlUp:b,xsDown:k,xsUp:T},C)):e.createElement(Q,(0,p.Z)({lgDown:a,lgUp:s,mdDown:u,mdUp:h,smDown:f,smUp:v,xlDown:g,xlUp:b,xsDown:k,xsUp:T},C))},ee=n(2426),te=n.n(ee),ne=n(4643),ie=n.n(ne),re=n(885);function ae(){ae=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof d?t:d,a=Object.create(r.prototype),o=new S(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return C()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=c(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var h={};function d(){}function p(){}function f(){}var m={};s(m,r,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(T([])));y&&y!==t&&n.call(y,r)&&(m=y);var g=f.prototype=d.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,a,o,s){var u=c(e[r],e,a);if("throw"!==u.type){var h=u.arg,d=h.value;return d&&"object"==(0,l.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(d).then((function(e){h.value=e,o(h)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var r;this._invoke=function(e,n){function a(){return new t((function(t,r){i(e,n,t,r)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function T(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new x(u(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(g),s(g,o,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function oe(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(i,r)}var se=n(5483),le=n.n(se),ue=e.createContext(null);var ce=n(181);function he(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,ce.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function de(e){var t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function pe(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function fe(e,t){var n=t.viewState||t,i=!1;if("longitude"in n&&"latitude"in n){var r=e.center;e.center=new r.constructor(n.longitude,n.latitude),i=i||r!==e.center}if("zoom"in n){var a=e.zoom;e.zoom=n.zoom,i=i||a!==e.zoom}if("bearing"in n){var o=e.bearing;e.bearing=n.bearing,i=i||o!==e.bearing}if("pitch"in n){var s=e.pitch;e.pitch=n.pitch,i=i||s!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(i=!0,e.padding=n.padding),i}var me=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ve(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;var t,n={},i=he(e.layers);try{for(i.s();!(t=i.n()).done;){var r=t.value;n[r.id]=r}}catch(o){i.e(o)}finally{i.f()}var a=e.layers.map((function(e){var t=n[e.ref],i=null;if("interactive"in e&&delete(i=M({},e)).interactive,t){delete(i=i||M({},e)).ref;var r,a=he(me);try{for(a.s();!(r=a.n()).done;){var s=r.value;s in t&&(i[s]=t[s])}}catch(o){a.e(o)}finally{a.f()}}return i||e}));return M(M({},e),{},{layers:a})}function ye(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!ye(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(var a=0,o=i;a<o.length;a++){var s=o[a];if(!t.hasOwnProperty(s))return!1;if(!ye(e[s],t[s]))return!1}return!0}return!1}var ge={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},_e={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},xe={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},be=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],we=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"],ke=function(){function e(t,n,r){var a=this;i(this,e),this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=function(e){var t=a.props[xe[e.type]];t&&t(e)},this._onPointerEvent=function(e){"mousemove"!==e.type&&"mouseout"!==e.type||a._updateHover(e);var t=a.props[ge[e.type]];if(t){if(a.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type){var n=a._hoveredFeatures||a._map.queryRenderedFeatures(e.point,{layers:a.props.interactiveLayerIds});if(!n.length)return;e.features=n}t(e),delete e.features}},this._onCameraEvent=function(e){if(!a._internalUpdate){var t=a.props[_e[e.type]];t&&t(e)}e.type in a._deferredEvents&&(a._deferredEvents[e.type]=!1)},this._MapClass=t,this.props=n,this._initialize(r)}return(0,r.Z)(e,[{key:"map",get:function(){return this._map}},{key:"transform",get:function(){return this._renderTransform}},{key:"setProps",value:function(e){var t=this.props;this.props=e;var n=this._updateSettings(e,t);n&&(this._renderTransform=de(this._map.transform));var i=this._updateSize(e),r=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||i||r&&!this._map.isMoving())&&this.redraw()}},{key:"_initialize",value:function(e){var t=this,n=this.props,i=M(M(M({},n),n.initialViewState),{},{accessToken:n.mapboxAccessToken||Se()||null,container:e,style:ve(n.mapStyle)}),r=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),n.gl){var a=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=a,n.gl}}var o=new this._MapClass(i);r.padding&&o.setPadding(r.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._renderTransform=de(o.transform);var s=o._render;o._render=function(e){t._inRender=!0,s.call(o,e),t._inRender=!1};var l=o._renderTaskQueue.run;o._renderTaskQueue.run=function(e){l.call(o._renderTaskQueue,e),t._onBeforeRepaint()},o.on("render",(function(){return t._onAfterRepaint()}));var u=o.fire;for(var c in o.fire=this._fireEvent.bind(this,u),o.on("resize",(function(){t._renderTransform.resize(o.transform.width,o.transform.height)})),o.on("styledata",(function(){return t._updateStyleComponents(t.props,{})})),o.on("sourcedata",(function(){return t._updateStyleComponents(t.props,{})})),ge)o.on(c,this._onPointerEvent);for(var h in _e)o.on(h,this._onCameraEvent);for(var d in xe)o.on(d,this._onEvent);this._map=o}},{key:"recycle",value:function(){e.savedMaps.push(this)}},{key:"destroy",value:function(){this._map.remove()}},{key:"redraw",value:function(){var e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"_updateSize",value:function(e){var t=e.viewState;if(t){var n=this._map;if(t.width!==n.transform.width||t.height!==n.transform.height)return n.resize(),!0}return!1}},{key:"_updateViewState",value:function(e,t){if(this._internalUpdate)return!1;var n=this._map,i=this._renderTransform,r=i.zoom,a=i.pitch,o=i.bearing,s=fe(i,M(M({},pe(n.transform)),e));if(s&&t){var l=this._deferredEvents;l.move=!0,l.zoom||(l.zoom=r!==i.zoom),l.rotate||(l.rotate=o!==i.bearing),l.pitch||(l.pitch=a!==i.pitch)}return n.isMoving()||fe(n.transform,e),s}},{key:"_updateSettings",value:function(e,t){var n,i=this._map,r=!1,a=he(be);try{for(a.s();!(n=a.n()).done;){var o=n.value;o in e&&!ye(e[o],t[o])&&(r=!0,i["set".concat(o[0].toUpperCase()).concat(o.slice(1))](e[o]))}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"_updateStyle",value:function(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){var n={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(n.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(ve(e.mapStyle),n),!0}return!1}},{key:"_updateStyleComponents",value:function(e,t){var n=this._map,i=!1;return n.style.loaded()&&("light"in e&&!ye(e.light,t.light)&&(i=!0,n.setLight(e.light)),"fog"in e&&!ye(e.fog,t.fog)&&(i=!0,n.setFog(e.fog)),"terrain"in e&&!ye(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(i=!0,n.setTerrain(e.terrain)))),i}},{key:"_updateHandlers",value:function(e,t){var n,i=this._map,r=!1,a=he(we);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=e[o];ye(s,t[o])||(r=!0,s?i[o].enable(s):i[o].disable())}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"_updateHover",value:function(e){var t,n=this.props;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){var i,r=e.type,a=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0;if("mousemove"===r)try{i=this._map.queryRenderedFeatures(e.point,{layers:n.interactiveLayerIds})}catch(s){i=[]}else i=[];var o=i.length>0;!o&&a&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=i,o&&!a&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=r}else this._hoveredFeatures=null}},{key:"_fireEvent",value:function(e,t,n){var i=this._map,r=i.transform,a="string"===typeof t?t:t.type;return"move"===a&&this._updateViewState(this.props,!1),a in _e&&("object"===typeof t&&(t.viewState=pe(r)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,t,n),i.transform=r,i):(e.call(i,t,n),i)}},{key:"_onBeforeRepaint",value:function(){var e=this,t=this._map;for(var n in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;var i=this._map.transform;this._map.transform=this._renderTransform,this._map.painter.transform=this._renderTransform,this._onAfterRepaint=function(){(i.elevation=e._renderTransform.elevation)&&i.updateElevation(!1),e._map.transform=i}}}],[{key:"reuse",value:function(t,n){var i=e.savedMaps.pop();if(!i)return null;var r=i.map,a=r.getContainer();for(n.className=a.className;a.childNodes.length>0;)n.appendChild(a.childNodes[0]);return r._container=n,t.initialViewState&&i._updateViewState(t.initialViewState,!1),r.resize(),i.setProps(M(M({},t),{},{styleDiffing:!1})),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(function(){return r.fire("load")})),i}}]),e}();function Se(){var e=null;if("undefined"!==typeof location){var t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/csf-waterdef-v4",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(n){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/csf-waterdef-v4",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(i){}return e}ke.savedMaps=[];var Te=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Ce(e,t){if(!e)return null;var n,i=e.map,r={getMap:function(){return i},getCenter:function(){return e.transform.center},getZoom:function(){return e.transform.zoom},getBearing:function(){return e.transform.bearing},getPitch:function(){return e.transform.pitch},getPadding:function(){return e.transform.padding},getBounds:function(){return e.transform.getBounds()},project:function(n){return e.transform.locationPoint(t.LngLat.convert(n))},unproject:function(n){return e.transform.pointLocation(t.Point.convert(n))}},a=he(function(e){var t=new Set,n=e;for(;n;){var i,r=he(Object.getOwnPropertyNames(n));try{for(r.s();!(i=r.n()).done;){var a=i.value;"_"!==a[0]&&"function"===typeof e[a]&&"fire"!==a&&"setEventedParent"!==a&&t.add(a)}}catch(o){r.e(o)}finally{r.f()}n=Object.getPrototypeOf(n)}return Array.from(t)}(i));try{for(a.s();!(n=a.n()).done;){var o=n.value;o in r||Te.includes(o)||(r[o]=i[o].bind(i))}}catch(s){a.e(s)}finally{a.f()}return r}var Ee="undefined"!==typeof document?e.useLayoutEffect:e.useEffect,Me=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];var Pe=e.createContext(null),Ae={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:function(e){return console.error(e.error)},RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},De=(0,e.forwardRef)((function(t,i){var r=(0,e.useContext)(ue),a=(0,e.useState)(null),o=(0,re.Z)(a,2),s=o[0],l=o[1],u=(0,e.useRef)(),c=(0,e.useRef)({mapLib:null,map:null}).current;(0,e.useEffect)((function(){var e,i=t.mapLib,a=!0;return Promise.resolve(i||Promise.resolve().then(n.t.bind(n,5483,23))).then((function(n){if(a){if(n.Map||(n=n.default),!n||!n.Map)throw new Error("Invalid mapLib");if(!n.supported(t))throw new Error("Map is not supported by this browser");!function(e,t){var n,i=he(Me);try{for(i.s();!(n=i.n()).done;){var r=n.value;r in t&&(e[r]=t[r])}}catch(a){i.e(a)}finally{i.f()}t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(function(e){e&&console.error(e)}),!1)}(n,t),t.reuseMaps&&(e=ke.reuse(t,u.current)),e||(e=new ke(n.Map,t,u.current)),c.map=Ce(e,n),c.mapLib=n,l(e),null===r||void 0===r||r.onMapMount(c.map,t.id)}})).catch((function(e){t.onError({type:"error",target:null,originalEvent:null,error:e})})),function(){a=!1,e&&(null===r||void 0===r||r.onMapUnmount(t.id),t.reuseMaps?e.recycle():e.destroy())}}),[]),Ee((function(){s&&s.setProps(t)})),(0,e.useImperativeHandle)(i,(function(){return c.map}),[s]);var h=(0,e.useMemo)((function(){return M({position:"relative",width:"100%",height:"100%"},t.style)}),[t.style]);return e.createElement("div",{id:t.id,ref:u,style:h},s&&e.createElement(Pe.Provider,{value:c},t.children))}));De.displayName="Map",De.defaultProps=Ae;var Ie=De,Le=n(4164),Oe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ze(e,t){if(e&&t){var n=e.style;for(var i in t){var r=t[i];Number.isFinite(r)&&!Oe.test(i)?n[i]="".concat(r,"px"):n[i]=r}}}function Re(t){var n=(0,e.useContext)(Pe),i=n.map,r=n.mapLib,a=(0,e.useRef)({props:t});a.current.props=t;var o=(0,e.useMemo)((function(){var n=!1;e.Children.forEach(t.children,(function(e){e&&(n=!0)}));var i=M(M({},t),{},{element:n?document.createElement("div"):null}),s=new r.Marker(i).setLngLat([t.longitude,t.latitude]);return s.getElement().addEventListener("click",(function(e){var t,n;null===(n=(t=a.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:s,originalEvent:e})})),s.on("dragstart",(function(e){var t,n,i=e;i.lngLat=o.getLngLat(),null===(n=(t=a.current.props).onDragStart)||void 0===n||n.call(t,i)})),s.on("drag",(function(e){var t,n,i=e;i.lngLat=o.getLngLat(),null===(n=(t=a.current.props).onDrag)||void 0===n||n.call(t,i)})),s.on("dragend",(function(e){var t,n,i=e;i.lngLat=o.getLngLat(),null===(n=(t=a.current.props).onDragEnd)||void 0===n||n.call(t,i)})),s}),[]);return(0,e.useEffect)((function(){return o.addTo(i.getMap()),function(){o.remove()}}),[]),(0,e.useEffect)((function(){ze(o.getElement(),t.style)}),[t.style]),o.getLngLat().lng===t.longitude&&o.getLngLat().lat===t.latitude||o.setLngLat([t.longitude,t.latitude]),t.offset&&!function(e,t){var n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,r=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return n===r&&i===a}(o.getOffset(),t.offset)&&o.setOffset(t.offset),o.isDraggable()!==t.draggable&&o.setDraggable(t.draggable),o.getRotation()!==t.rotation&&o.setRotation(t.rotation),o.getRotationAlignment()!==t.rotationAlignment&&o.setRotationAlignment(t.rotationAlignment),o.getPitchAlignment()!==t.pitchAlignment&&o.setPitchAlignment(t.pitchAlignment),o.getPopup()!==t.popup&&o.setPopup(t.popup),(0,Le.createPortal)(t.children,o.getElement())}Re.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};var Be=e.memo(Re);function Fe(e){return new Set(e?e.trim().split(/\s+/):[])}var Ne=e.memo((function(t){var n=(0,e.useContext)(Pe),i=n.map,r=n.mapLib,a=(0,e.useMemo)((function(){return document.createElement("div")}),[]),o=(0,e.useRef)({props:t});o.current.props=t;var s=(0,e.useMemo)((function(){var e=M({},t),n=new r.Popup(e).setLngLat([t.longitude,t.latitude]);return n.once("open",(function(e){var t,n;null===(n=(t=o.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,e.useEffect)((function(){var e=function(e){var t,n;null===(n=(t=o.current.props).onClose)||void 0===n||n.call(t,e)};return s.on("close",e),s.setDOMContent(a).addTo(i.getMap()),function(){s.off("close",e),s.isOpen()&&s.remove()}}),[]),(0,e.useEffect)((function(){ze(s.getElement(),t.style)}),[t.style]),s.isOpen()&&(s.getLngLat().lng===t.longitude&&s.getLngLat().lat===t.latitude||s.setLngLat([t.longitude,t.latitude]),t.offset&&!ye(s.options.offset,t.offset)&&s.setOffset(t.offset),s.options.anchor===t.anchor&&s.options.maxWidth===t.maxWidth||(s.options.anchor=t.anchor,s.setMaxWidth(t.maxWidth)),s.options.className!==t.className)){var l,u=Fe(s.options.className),c=Fe(t.className),h=he(u);try{for(h.s();!(l=h.n()).done;){var d=l.value;c.has(d)||s.removeClassName(d)}}catch(v){h.e(v)}finally{h.f()}var p,f=he(c);try{for(f.s();!(p=f.n()).done;){var m=p.value;u.has(m)||s.addClassName(m)}}catch(v){f.e(v)}finally{f.f()}s.options.className=t.className}return(0,Le.createPortal)(t.children,a)}));function je(t,n,i){var r=(0,e.useContext)(Pe),a=(0,e.useMemo)((function(){return t(r)}),[]);return(0,e.useEffect)((function(){var e,t=r.map;return t.hasControl(a)||t.addControl(a,null===(e=i||n)||void 0===e?void 0:e.position),function(){"function"===typeof n&&n(r),t.hasControl(a)&&t.removeControl(a)}}),[]),a}e.memo((function(t){var n=je((function(e){return new e.mapLib.AttributionControl(t)}),{position:t.position});return(0,e.useEffect)((function(){ze(n._container,t.style)}),[t.style]),null}));e.memo((function(t){var n=je((function(e){return new e.mapLib.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,e.useEffect)((function(){ze(n._controlContainer,t.style)}),[t.style]),null}));var Ue=(0,e.forwardRef)((function(t,n){var i=(0,e.useRef)({props:t}),r=je((function(e){var n=new e.mapLib.GeolocateControl(t),r=n._setupUI;return n._setupUI=function(e){n._container.hasChildNodes()||r(e)},n.on("geolocate",(function(e){var t,n;null===(n=(t=i.current.props).onGeolocate)||void 0===n||n.call(t,e)})),n.on("error",(function(e){var t,n;null===(n=(t=i.current.props).onError)||void 0===n||n.call(t,e)})),n.on("outofmaxbounds",(function(e){var t,n;null===(n=(t=i.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),n.on("trackuserlocationstart",(function(e){var t,n;null===(n=(t=i.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),n.on("trackuserlocationend",(function(e){var t,n;null===(n=(t=i.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),n}),{position:t.position});return i.current.props=t,(0,e.useImperativeHandle)(n,(function(){return{trigger:function(){return r.trigger()}}}),[]),(0,e.useEffect)((function(){ze(r._container,t.style)}),[t.style]),null}));Ue.displayName="GeolocateControl";e.memo(Ue);e.memo((function(t){var n=je((function(e){return new e.mapLib.NavigationControl(t)}),{position:t.position});return(0,e.useEffect)((function(){ze(n._container,t.style)}),[t.style]),null}));function Ve(t){var n=je((function(e){return new e.mapLib.ScaleControl(t)}),{position:t.position});return n.options.unit===t.unit&&n.options.maxWidth===t.maxWidth||(n.options.maxWidth=t.maxWidth,n.setUnit(t.unit)),(0,e.useEffect)((function(){ze(n._container,t.style)}),[t.style]),null}Ve.defaultProps={unit:"metric",maxWidth:100};e.memo(Ve);var Ze=n(184);function We(e){return(0,Ze.jsx)(Ze.Fragment,{children:Object.keys(e.pastLocations).map((function(t){var n=e.pastLocations[t],i=n.id===e.currentLocation.id;return(0,Ze.jsx)(Be,{longitude:n.lng,latitude:n.lat,onClick:function(t){return e.onMarkerClick(t,n)},style:{zIndex:i?2:1,top:-20},children:(0,Ze.jsx)("div",{className:i?"loc-curr-marker":"loc-marker",onMouseEnter:function(){return e.onMarkerMouseEnter(M(M({},n),{},{isSelected:i}))},onMouseLeave:e.onMarkerMouseLeave,onContextMenu:function(){return e.onMarkerRightClick(n,i)}})},n.address)}))})}function Ge(e,t){"string"===typeof e&&(e=parseFloat(e));var n=(Math.round(Math.round(e*Math.pow(10,t+1))/10)/Math.pow(10,t)).toFixed(t);return parseFloat(n)}function Ye(e,t,n,i){return fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e,",").concat(t,".json?limit=1&access_token=").concat(n),{method:"GET"}).then((function(e){return e.json()})).then((function(n){var r=n.features[0].context.find((function(e){return"region"===e.id.split(".")[0]}));if(i&&!i.includes(r.text))throw new Error("Out of Bounds");return{address:n.features[0].place_name.replace(", United States","").replace(/\s\d{5}/g,""),lng:e,lat:t}})).catch((function(){return!1}))}function He(e){var t=1/0,n=-1/0,i=1/0,r=-1/0;Object.values(e).forEach((function(e){e.lat>n&&(n=e.lat),e.lat<t&&(t=e.lat),e.lng>r&&(r=e.lng),e.lng<i&&(i=e.lng)}));var a=.1;return t===n&&(t-=a,n+=a),i===r&&(i-=a,r+=a),[i,t,r,n]}function Xe(t){le().accessToken=t.token;var n=(0,e.useState)(null),i=(0,re.Z)(n,2),r=i[0],a=i[1],o=(0,e.useState)({bounds:He(t.pastLocations),fitBoundsOptions:{padding:{top:100,bottom:10,left:15,right:15}}}),s=(0,re.Z)(o,2),l=s[0],u=s[1],c=function(){var e,n=(e=ae().mark((function e(n){var i,r,a;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.lngLat.lng,r=n.lngLat.lat,!(i>=t.bbox.west&&i<=t.bbox.east&&r>=t.bbox.south&&r<=t.bbox.north)){e.next=7;break}return e.next=5,Ye(i,r,t.token,t.allowedStates);case 5:(a=e.sent)&&t.mapRef.current&&(t.handleChangeLocations("add",a),t.mapRef.current.flyTo({center:[a.lng,a.lat],speed:.8,essential:!0}));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){oe(a,i,r,o,s,"next",e)}function s(e){oe(a,i,r,o,s,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,Ze.jsx)("div",{id:"loc-map",children:(0,Ze.jsxs)(Ie,M(M({},l),{},{ref:t.mapRef,mapStyle:"mapbox://styles/mapbox/satellite-streets-v11",boxZoom:!1,dragRotate:!1,touchPitch:!1,doubleClickZoom:!1,attributionControl:!1,onMove:function(e){return((n=e.viewState).latitude>t.bbox.north||n.latitude<t.bbox.south)&&(n.latitude=l.latitude),(n.longitude>t.bbox.east||n.longitude<t.bbox.west)&&(n.longitude=l.longitude),void u((function(e){return M(M({},e),n)}));var n},onClick:c,children:[(0,Ze.jsx)(We,{currentLocation:t.currentLocation,pastLocations:t.pastLocations,onMarkerMouseEnter:function(e){a(e)},onMarkerMouseLeave:function(){a(null)},onMarkerClick:function(e,n){e.originalEvent.stopPropagation(),t.handleChangeLocations("change",n)},onMarkerRightClick:function(e,n){n||(t.handleChangeLocations("remove",e),a(null))}}),r&&(0,Ze.jsxs)(Ne,{longitude:r.lng,latitude:r.lat,closeOnClick:!1,closeButton:!1,onClose:function(){return a(null)},offset:{center:[0,0],left:[12,0],right:[-12,0],top:[0,-6],"top-left":[10,3],"top-right":[-20,3],bottom:[0,-16],"bottom-left":[10,-12],"bottom-right":[-20,-12]},style:{zIndex:4},children:[(0,Ze.jsx)("h3",{children:r.address}),(0,Ze.jsxs)("h4",{children:["Coordinates: ",Ge(r.lng,5),", ",Ge(r.lat,5)]}),r.isSelected?"":(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("h5",{children:"Click to Use"}),"ontouchstart"in window||navigator.maxTouchPoints>0?(0,Ze.jsx)("h5",{children:"Click and Hold to Remove"}):(0,Ze.jsx)("h5",{children:"Right Click to Remove"})]})]})]}))})}function qe(t){var n=(0,e.useState)(""),i=(0,re.Z)(n,2),r=i[0],a=i[1],o=function(){fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(r.split(" ").join("%20"),".json?proximity=-75.37,43.21&country=US&types=postcode,place,address&access_token=").concat(t.token),{method:"GET"}).then((function(e){return e.json()})).then((function(e){var n=e.features.reduce((function(e,n){var i=n.context.find((function(e){return e.id.includes("region")&&(!t.allowedStates||t.allowedStates.includes(e.text))}));if(!e&&i&&n.center[0]>=t.bbox.west&&n.center[1]>=t.bbox.south){var r,a=n.place_type[0];if("postcode"===a)r=n.place_name.split(",").slice(0,2).join(",");else if("place"===a)r="".concat(n.text,", ").concat(i.text);else if("address"===a){var o=n.context.find((function(e){return e.id.includes("place")}));r="".concat(n.text,", ").concat(o.text,", ").concat(i.text)}return{address:r,lng:n.center[0],lat:n.center[1]}}return e}),!1);n&&(a(n.address),t.handleChangeLocations("add",n),t.mapRef.current.flyTo({center:[n.lng,n.lat],speed:.8,essential:!0}))})).catch((function(e){return console.log(e),!1}))};return(0,Ze.jsxs)("div",{id:"loc-map-bar",children:[(0,Ze.jsx)("input",{id:"loc-map-address-search",type:"text",onChange:function(e){return a(e.target.value)},onKeyDown:function(e){return"Enter"===e.key?o():""},value:r}),(0,Ze.jsx)("label",{id:"loc-map-bar-label",children:"Address Search"}),(0,Ze.jsx)("button",{id:"loc-map-bar-btn",onClick:o,children:"Search"}),(0,Ze.jsx)("div",{id:"loc-modal-close",onClick:t.handleClose,children:(0,Ze.jsx)("div",{id:"loc-modal-close-x",children:"X"})})]})}var Ke={north:47.53,south:37.09,east:-66.89,west:-82.7542},$e="default",Qe={default:{address:"213 Warren Road, Ithaca, New York",id:"default",lat:42.457975,lng:-76.46754}};function Je(t){var n=(0,e.useState)(!1),i=(0,re.Z)(n,2),r=i[0],a=i[1],o=(0,e.useState)(0),s=(0,re.Z)(o,2),l=s[0],u=s[1],c=(0,e.useState)(Object.keys(t.locations).length>0?t.locations:Qe),h=(0,re.Z)(c,2),d=h[0],p=h[1],f=(0,e.useState)(t.selected||$e),m=(0,re.Z)(f,2),v=m[0],y=m[1],g=(0,e.useRef)(null);(0,e.useEffect)((function(){""===t.selected&&t.newLocationsCallback($e,Qe)}),[]),(0,e.useEffect)((function(){!0===r?u("100vh"):!1===r&&setTimeout((function(){u(0)}),400)}),[r]);var _=function(){t.newLocationsCallback(v,d),a(!1)},x=function(e,t){"add"===e&&(t.id=String(Date.now()),p((function(e){return M(M({},e),{},(0,C.Z)({},t.id,M(M({},t),{},{id:t.id})))}))),"remove"===e&&p((function(e){var n=M({},e);return delete n[t.id],n})),"add"!==e&&"change"!==e||y(t.id)};return(0,Ze.jsxs)("div",{id:"loc-container",style:{zIndex:t.modalZIndex||100},children:[(0,Ze.jsx)("div",{id:"loc-location-text",children:d[v].address}),(0,Ze.jsx)("div",{id:"loc-location-change",onClick:function(){return a(!0)},children:(0,Ze.jsx)("button",{children:"Change Location"})}),(0,Ze.jsx)("div",{id:"loc-modal-container",style:{height:l,opacity:r?1:0},onMouseDown:_,children:(0,Ze.jsxs)("div",{id:"loc-modal-box",onMouseDown:function(e){return e.stopPropagation()},children:[(0,Ze.jsx)(qe,{token:t.token,bbox:t.bbox||Ke,allowedStates:t.allowedStates,mapRef:g,handleChangeLocations:x,handleClose:_}),(0,Ze.jsx)(Xe,{token:t.token,allowedStates:t.allowedStates,bbox:t.bbox||Ke,mapRef:g,handleChangeLocations:x,currentLocation:d[v],pastLocations:d})]})})]})}var et=window.location.protocol,tt=function(e){var t=e.param;return fetch("".concat(et,"//grid2.rcc-acis.org/GridData"),t).then((function(e){return e.json()})).then((function(e){return e||null}))};tt.propTypes={param:U().object.isRequired};var nt=tt,it=window.location.protocol,rt=function(e){var t=e.param;return fetch("".concat(it,"//hrly.nrcc.cornell.edu/locHrly"),t).then((function(e){return e.json()})).then((function(e){return e||null}))};rt.propTypes={param:U().object.isRequired};var at=rt,ot=function(e){o(n,e);var t=h(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).loadAllData=function(){setTimeout((function(){nt({param:r.getAcisParamsPcpnObs()}).then((function(e){var t=e.data,n=(t=t.filter((function(e){return-999!==e[1]}))).slice(-1)[0][0];r.handleStateVarChange("precipLastObsDate",n),r.handleStateVarChange("precipObsData",t),r.handleStateVarChange("precipObsDataIsLoading",!1),at({param:r.getAcisParamsPcpnFcst(n)}).then((function(e){var t,i,a,o,s,l=e.hrlyFields.indexOf("prcp"),u=e.fcstFields.indexOf("qpf"),c=e.hrlyData.map((function(e){return[e[0].split(":")[0],e[l]]})),h=e.fcstData.map((function(e){return[e[0].split(":")[0],e[u]]})),d=c.concat(h),p=(d=d.filter((function(e){return"M"!==e[1]}))).map((function(e){return e[0]})),f=[];[1,2,3,4,5,6,7,8,9,10].forEach((function(e,r){t=te()(n,"YYYY-MM-DD").add(e-1,"days").format("YYYY-MM-DD"),i=te()(n,"YYYY-MM-DD").add(e,"days").format("YYYY-MM-DD"),a=p.includes(t+"T09")?p.indexOf(t+"T09"):null,o=p.includes(i+"T08")?p.indexOf(i+"T08"):null,a&&o&&(s=d.slice(a,o+1).reduce((function(e,t){return e+parseFloat(t[1])}),0),f.push([i,s]))})),r.handleStateVarChange("precipFcstData",f),r.handleStateVarChange("precipFcstDataIsLoading",!1)}))})),nt({param:r.getAcisParamsPcpnObs()}).then((function(e){var t=e.data,n=(t=t.filter((function(e){return-999!==e[1]}))).slice(-1)[0][0];t=t.map((function(e){return[e[0],.1]})),r.handleStateVarChange("petObsData",t),r.handleStateVarChange("petObsDataIsLoading",!1),at({param:r.getAcisParamsPcpnFcst(n)}).then((function(e){var t=[[te()(n,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD"),.1],[te()(n,"YYYY-MM-DD").add(2,"days").format("YYYY-MM-DD"),.1],[te()(n,"YYYY-MM-DD").add(3,"days").format("YYYY-MM-DD"),.1]];r.handleStateVarChange("petFcstData",t),r.handleStateVarChange("petFcstDataIsLoading",!1)}))}))}),1e3)},r.getAcisParamsPcpnObs=function(){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loc:[r.props.locations[r.props.selected].lng,r.props.locations[r.props.selected].lat].join(),sdate:"2002-01-01",edate:te()().format("YYYY-MM-DD"),grid:"nrcc-model",elems:[{name:"pcpn",interval:[0,0,1]}]})}},r.getAcisParamsPcpnFcst=function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lat:r.props.locations[r.props.selected].lat,lon:r.props.locations[r.props.selected].lng,tzo:-5,sdate:e.replaceAll("-","")+"00",edate:"now"})}},r.handleStateVarChange=function(e,t){r.setState((0,C.Z)({},e,t))},r.state={precipLastObsDate:null,precipObsData:null,precipFcstData:null,petObsData:null,petFcstData:null,precipObsDataIsLoading:!0,precipFcstDataIsLoading:!0,petObsDataIsLoading:!0,petFcstDataIsLoading:!0},r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.props.locations&&this.props.selected&&this.loadAllData()}},{key:"componentDidUpdate",value:function(e,t){this.state.precipObsDataIsLoading||this.state.precipFcstDataIsLoading||this.state.petObsDataIsLoading||this.state.petFcstDataIsLoading||this.props.onchange_dataIsLoading(!1),this.state.precipObsData&&this.state.precipFcstData&&this.state.petObsData&&this.state.petFcstData&&this.state.precipLastObsDate&&this.props.onchange_pointData({last_obs_date:this.state.precipLastObsDate,precip:this.state.precipObsData,precip_fcst:this.state.precipFcstData,pet:this.state.petObsData,pet_fcst:this.state.petFcstData})}},{key:"render",value:function(){return null}}]),n}(e.Component),st=n(9718),lt=n.n(st),ut=n(1192),ct=n.n(ut),ht=n(6298),dt=n.n(ht),pt=n(3412),ft=n.n(pt),mt=n(2003),vt=n.n(mt),yt=44,gt=e.forwardRef((function(t,n){var i=t.classes,r=t.className,a=t.color,o=void 0===a?"primary":a,s=t.disableShrink,l=void 0!==s&&s,u=t.size,c=void 0===u?40:u,h=t.style,d=t.thickness,f=void 0===d?3.6:d,m=t.value,v=void 0===m?0:m,y=t.variant,g=void 0===y?"indeterminate":y,x=(0,_.Z)(t,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),b={},w={},k={};if("determinate"===g||"static"===g){var S=2*Math.PI*((yt-f)/2);b.strokeDasharray=S.toFixed(3),k["aria-valuenow"]=Math.round(v),b.strokeDashoffset="".concat(((100-v)/100*S).toFixed(3),"px"),w.transform="rotate(-90deg)"}return e.createElement("div",(0,p.Z)({className:(0,P.Z)(i.root,r,"inherit"!==o&&i["color".concat((0,R.Z)(o))],{determinate:i.determinate,indeterminate:i.indeterminate,static:i.static}[g]),style:(0,p.Z)({width:c,height:c},w,h),ref:n,role:"progressbar"},k,x),e.createElement("svg",{className:i.svg,viewBox:"".concat(22," ").concat(22," ").concat(yt," ").concat(yt)},e.createElement("circle",{className:(0,P.Z)(i.circle,l&&i.circleDisableShrink,{determinate:i.circleDeterminate,indeterminate:i.circleIndeterminate,static:i.circleStatic}[g]),style:b,cx:yt,cy:yt,r:(yt-f)/2,fill:"none",strokeWidth:f})))})),_t=(0,g.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(gt),xt=n(3366),bt=n(4578),wt=!1,kt=e.createContext(null),St="unmounted",Tt="exited",Ct="entering",Et="entered",Mt="exiting",Pt=function(t){function n(e,n){var i;i=t.call(this,e,n)||this;var r,a=n&&!n.isMounting?e.enter:e.appear;return i.appearStatus=null,e.in?a?(r=Tt,i.appearStatus=Ct):r=Et:r=e.unmountOnExit||e.mountOnEnter?St:Tt,i.state={status:r},i.nextCallback=null,i}(0,bt.Z)(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===St?{status:Tt}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ct&&n!==Et&&(t=Ct):n!==Ct&&n!==Et||(t=Mt)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!==typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Ct?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Tt&&this.setState({status:St})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,r=this.props.nodeRef?[i]:[Le.findDOMNode(this),i],a=r[0],o=r[1],s=this.getTimeouts(),l=i?s.appear:s.enter;!e&&!n||wt?this.safeSetState({status:Et},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:Ct},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:Et},(function(){t.props.onEntered(a,o)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:Le.findDOMNode(this);t&&!wt?(this.props.onExit(i),this.safeSetState({status:Mt},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Tt},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:Tt},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Le.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=r[0],o=r[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var t=this.state.status;if(t===St)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,xt.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(kt.Provider,{value:null},"function"===typeof i?i(t,r):e.cloneElement(e.Children.only(i),r))},n}(e.Component);function At(){}Pt.contextType=kt,Pt.propTypes={},Pt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:At,onEntering:At,onEntered:At,onExit:At,onExiting:At,onExited:At},Pt.UNMOUNTED=St,Pt.EXITED=Tt,Pt.ENTERING=Ct,Pt.ENTERED=Et,Pt.EXITING=Mt;var Dt=Pt,It=n(812),Lt=function(e){return e.scrollTop};function Ot(e,t){var n=e.timeout,i=e.style,r=void 0===i?{}:i;return{duration:r.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:r.transitionDelay}}var zt=n(9806),Rt={entering:{opacity:1},entered:{opacity:1}},Bt={enter:It.x9.enteringScreen,exit:It.x9.leavingScreen},Ft=e.forwardRef((function(t,n){var i=t.children,r=t.disableStrictModeCompat,a=void 0!==r&&r,o=t.in,s=t.onEnter,l=t.onEntered,u=t.onEntering,c=t.onExit,h=t.onExited,d=t.onExiting,f=t.style,m=t.TransitionComponent,v=void 0===m?Dt:m,y=t.timeout,g=void 0===y?Bt:y,x=(0,_.Z)(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),b=Z(),w=b.unstable_strictMode&&!a,k=e.useRef(null),S=(0,zt.Z)(i.ref,n),T=(0,zt.Z)(w?k:void 0,S),C=function(e){return function(t,n){if(e){var i=w?[k.current,t]:[t,n],r=(0,re.Z)(i,2),a=r[0],o=r[1];void 0===o?e(a):e(a,o)}}},E=C(u),M=C((function(e,t){Lt(e);var n=Ot({style:f,timeout:g},{mode:"enter"});e.style.webkitTransition=b.transitions.create("opacity",n),e.style.transition=b.transitions.create("opacity",n),s&&s(e,t)})),P=C(l),A=C(d),D=C((function(e){var t=Ot({style:f,timeout:g},{mode:"exit"});e.style.webkitTransition=b.transitions.create("opacity",t),e.style.transition=b.transitions.create("opacity",t),c&&c(e)})),I=C(h);return e.createElement(v,(0,p.Z)({appear:!0,in:o,nodeRef:w?k:void 0,onEnter:M,onEntered:P,onEntering:E,onExit:D,onExited:I,onExiting:A,timeout:g},x),(function(t,n){return e.cloneElement(i,(0,p.Z)({style:(0,p.Z)({opacity:0,visibility:"exited"!==t||o?void 0:"hidden"},Rt[t],f,i.props.style),ref:T},n))}))})),Nt=Ft,jt=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.className,o=t.invisible,s=void 0!==o&&o,l=t.open,u=t.transitionDuration,c=t.TransitionComponent,h=void 0===c?Nt:c,d=(0,_.Z)(t,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return e.createElement(h,(0,p.Z)({in:l,timeout:u},d),e.createElement("div",{className:(0,P.Z)(r.root,a,s&&r.invisible),"aria-hidden":!0,ref:n},i))})),Ut=(0,g.Z)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(jt);ct()(lt()),dt()(lt()),ft()(lt()),window.Highcharts=lt();var Vt=function(e){var t=te()().format("YYYY");return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(vt(),{containerProps:{style:{height:"100%"}},highcharts:lt(),options:function(n){var i,r=e.modeldata.soildata.soilmoistureoptions[e.locInfo.soilcapacity].saturation,a=e.modeldata.soildata.soilmoistureoptions[e.locInfo.soilcapacity].fieldcapacity,o=e.modeldata.soildata.soilmoistureoptions[e.locInfo.soilcapacity].stressthreshold,s=e.modeldata.soildata.soilmoistureoptions[e.locInfo.soilcapacity].prewiltingpoint,l=e.modeldata.soildata.soilmoistureoptions[e.locInfo.soilcapacity].wiltingpoint;i=e.chartWeatherData.dates&&e.chartWeatherData.dates.includes(e.chartWeatherData.firstFcstDate)?e.chartWeatherData.dates.indexOf(e.chartWeatherData.firstFcstDate):n.length;var u=e.locInfo.planting_date.slice(6),c=function(e,t){for(var n=[],i=null,l=0;l<e.length;l++)i=e[l]<=r-a&&e[l]>a-a?"rgba(0,128,0,0.8)":e[l]<=a-a&&e[l]>o-a?"rgba(255,255,0,0.8)":e[l]<=o-a&&e[l]>s-a?"rgba(255,128,0,0.8)":e[l]<=s-a&&e[l]>0-a?"rgba(255,0,0,0.8)":null,n.push({x:te().utc(t,"YYYY-MM-DD").add(l,"days").valueOf(),y:e[l],fillColor:i,color:i});return n};return{plotOptions:{line:{animation:!1},series:{states:{inactive:{opacity:1},hover:{enabled:!1}}}},chart:{spacingBottom:10,spacingTop:10,spacingLeft:10,spacingRight:10,backgroundColor:null,zoomType:"x",resetZoomButton:{theme:{fill:"white",stroke:"#006600","stroke-width":2,style:{color:"#006600"},r:10,states:{hover:{fill:"#006600",stroke:"#4ca20b",style:{color:"#ffffff"}}}}},events:{load:function(){var e=this.series[0].points.length,t=this.series[0].points[e-1];this.tooltip.refresh(t)}}},title:{text:"Water deficit for "+u,margin:5},subtitle:{text:"@ "+e.locInfo.address},exporting:{menuItemDefinitions:{downloadCSV:{text:"Download as CSV table"},downloadXLS:{text:"Download as XLS table"}},buttons:{contextButton:{menuItems:["printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS","openInCloud"]}}},credits:{enabled:!1},legend:{enabled:!1},xAxis:{type:"datetime",dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%d %b",week:"%d %b",month:"%b<br/>%Y",year:"%Y"},min:Date.UTC(parseInt(u,10),2,1),max:t===u?null:Date.UTC(parseInt(u,10),9,31),labels:{rotation:0,style:{color:"#000000"}},plotLines:[{color:"rgba(0,0,0,0.3)",width:2,dashStyle:"dash",value:"grass"!==e.locInfo.croptype&&e.locInfo.planting_date?te().utc(e.locInfo.planting_date,"MM/DD/YYYY"):null,label:{text:"Planting",rotation:90,y:10},zIndex:5},{color:"rgba(0,0,255,0.5)",width:2,dashStyle:"dash",value:e.irrigationIsEnabled&&e.locInfo.irrigation_date?te().utc(e.locInfo.irrigation_date,"MM/DD/YYYY"):null,label:{text:"Irrigation",rotation:90,y:10},zIndex:5}]},yAxis:{min:e.modeldata.soildata.soilmoistureoptions[e.locInfo.soilcapacity].wiltingpoint-e.modeldata.soildata.soilmoistureoptions[e.locInfo.soilcapacity].fieldcapacity-.3,max:Math.max(.3,Math.max.apply(null,n)),gridLineWidth:0,tickLength:8,tickWidth:1,tickPosition:"outside",tickInterval:.5,lineWidth:1,labels:{format:"{value:.1f}",style:{color:"#000000"}},title:{text:"Water Deficit (in/ft soil)",style:{color:"#000000"}},plotBands:[{color:t===u&&n[i-1]<=r-a&&n[i-1]>a-a?"rgba(0,128,0,0.5)":"transparent",from:0,to:r-a,label:{text:"No deficit for plant",style:{fontSize:"1.2em",color:t===u&&n[i-1]<=r-a&&n[i-1]>=a-a?"black":"gray",fontWeight:t===u&&n[i-1]<=r-a&&n[i-1]>=a-a?"bold":"lighter"},align:"left",verticalAlign:"middle",x:10,y:5}},{color:t===u&&n[i-1]<=a-a&&n[i-1]>o-a?"rgba(255,255,0,0.5)":"transparent",from:o-a,to:a-a,label:{text:"Deficit, no plant stress",style:{fontSize:"1.2em",color:t===u&&n[i-1]<=a-a&&n[i-1]>=o-a?"black":"gray",fontWeight:t===u&&n[i-1]<=a-a&&n[i-1]>=o-a?"bold":"lighter"},align:"left",verticalAlign:"middle",x:10,y:5}},{color:t===u&&n[i-1]<=o-a&&n[i-1]>s-a?"rgba(255,128,0,0.5)":"transparent",from:s-a,to:o-a,label:{text:"Deficit, plant stress likely",style:{fontSize:"1.2em",color:t===u&&n[i-1]<=o-a&&n[i-1]>=s-a?"black":"gray",fontWeight:t===u&&n[i-1]<=o-a&&n[i-1]>=s-a?"bold":"lighter"},align:"left",verticalAlign:"middle",x:10,y:5}},{color:t===u&&n[i-1]<=s-a&&n[i-1]>l-a?"rgba(255,0,0,0.5)":"transparent",from:l-a,to:s-a,label:{text:"Deficit, severe plant stress",style:{fontSize:"1.2em",color:t===u&&n[i-1]<=s-a&&n[i-1]>=l-a?"black":"gray",fontWeight:t===u&&n[i-1]<=s-a&&n[i-1]>=l-a?"bold":"lighter"},align:"left",verticalAlign:"middle",x:10,y:5}},{color:t===u&&n[i-1]<=l-a&&n[i-1]>0-a?"rgba(255,0,0,0.5)":"transparent",from:0-a,to:l-a,label:{text:"",style:{fontSize:"1.2em",color:t===u&&n[i-1]<=l-a&&n[i-1]>=0-a?"black":"gray",fontWeight:t===u&&n[i-1]<=l-a&&n[i-1]>=0-a?"bold":"lighter"},align:"left",verticalAlign:"middle",x:10,y:5}}],plotLines:[{value:r-a,width:1,color:"#808080",label:{text:"Saturation",style:{fontSize:"0.8em",color:t===u&&n[i-1]<=r-a&&n[i-1]>=a-a?"black":"gray",fontWeight:t===u&&n[i-1]<=r-a&&n[i-1]>=a-a?"bold":"lighter"},align:"right",x:-4,y:12},zIndex:6},{value:0,width:1,color:"#808080",label:{text:"Field Capacity",style:{fontSize:"0.8em",color:t===u&&n[i-1]<=a-a&&n[i-1]>=o-a?"black":"gray",fontWeight:t===u&&n[i-1]<=a-a&&n[i-1]>=o-a?"bold":"lighter"},align:"right",x:-4,y:12},zIndex:6},{value:o-a,width:1,color:"#808080",label:{text:"Plant Stress Begins",style:{fontSize:"0.8em",color:t===u&&n[i-1]<=o-a&&n[i-1]>=s-a?"black":"gray",fontWeight:t===u&&n[i-1]<=o-a&&n[i-1]>=s-a?"bold":"lighter"},align:"right",x:-4,y:12},zIndex:6},{value:s-a,width:1,color:"#808080",label:{text:"Wilting Danger Exists",style:{fontSize:"0.8em",color:t===u&&n[i-1]<=s-a&&n[i-1]>=l-a?"black":"gray",fontWeight:t===u&&n[i-1]<=s-a&&n[i-1]>=l-a?"bold":"lighter"},align:"right",x:-4,y:12},zIndex:6}]},tooltip:{backgroundColor:"transparent",borderColor:"black",borderRadius:1,borderWidth:0,shadow:!1,style:{padding:0,fontSize:"12px"},crosshairs:[{width:1,color:"gray",dashStyle:"solid"},{width:1,color:"transparent",dashStyle:"solid"}],useHTML:!0,formatter:function(){var e,t,n,i=null;i=(n=this.point.y)>a-a&&n<=r-a?"rgba(0,128,0,0.5)":n>o-a&&n<=a-a?"rgba(255,255,0,0.5)":n>s-a&&n<=o-a?"rgba(255,128,0,0.5)":n<=s-a?"rgba(255,0,0,0.5)":null,e="Deficit"===this.series.name?"Observed on":"Forecasted for",t="Deficit"===this.series.name?"rgba(0,0,255,1.0)":"rgba(255,0,0,1.0)";var l;l=this.point.y<0?this.point.y.toFixed(2)+'"':"NONE ("+this.point.y.toFixed(2)+'" surplus)';var u=[];return u.push("<div>"),u.push("<table>"),u.push("<tr>"),u.push("<td>"),u.push('<span style="font-weight:bold; color:'+t+';">'+e+": </span>"),u.push("</td>"),u.push("<td>"),u.push("<b>"+te().utc(this.x).format("MM/DD/YYYY")+" @ 8AM</b>"),u.push("</td>"),u.push("</tr>"),u.push("<tr>"),u.push("<td>"),u.push('<span style="font-weight:bold; color:'+t+';">Water Deficit: </span>'),u.push("</td>"),u.push("<td>"),u.push('<span style="background-color:'+i+'">'+l+"</span>"),u.push("</td>"),u.push("</tr>"),u.push("</table"),u.push("</div>"),u.join("")},positioner:function(e,t,n){var i;return i=this.chart.yAxis[0].toPixels(this.chart.yAxis[0].min),{x:this.chart.plotLeft,y:i-60}}},series:[{type:"line",name:"Deficit",color:"rgba(0,0,0,0.8)",marker:{enabled:!0,symbol:"circle",lineWidth:1,lineColor:"rgba(0,0,0,0.8)",radius:4},lineWidth:2,data:c(n.slice(0,i),e.chartWeatherData.dates[0])},{type:"line",name:"Deficit Fcst",color:"rgba(0,0,0,0.8)",marker:{enabled:!0,symbol:"circle",lineWidth:1,lineColor:"rgba(0,0,0,0.8)",radius:4},lineWidth:2,dashStyle:"dot",step:!1,data:c(n.slice(i),e.chartWeatherData.dates[i])}]}}(e.chartWeatherData.deficitDaily)}),e.dataIsLoading&&(0,Ze.jsx)(Ut,{style:{zIndex:1e3},invisible:!0,open:e.dataIsLoading,children:(0,Ze.jsx)(_t,{size:200,color:"primary"})})]})},Zt=n(2982),Wt=n(3060);function Gt(e,t){var n={};return Object.keys(e).forEach((function(i){-1===t.indexOf(i)&&(n[i]=e[i])})),n}function Yt(e){var t=function(t){var n=e(t);return t.css?(0,p.Z)({},(0,Wt.Z)(n,e((0,p.Z)({theme:t.theme},t.css))),Gt(t.css,[e.filterProps])):t.sx?(0,p.Z)({},(0,Wt.Z)(n,e((0,p.Z)({theme:t.theme},t.sx))),Gt(t.sx,[e.filterProps])):n};return t.propTypes={},t.filterProps=["css","sx"].concat((0,Zt.Z)(e.filterProps)),t}var Ht=Yt;var Xt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=function(e){return t.reduce((function(t,n){var i=n(e);return i?(0,Wt.Z)(t,i):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i},qt=n(8901);function Kt(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var $t=function(e){var t=e.prop,n=e.cssProperty,i=void 0===n?e.prop:n,r=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=Kt(e.theme,r)||{};return(0,qt.k)(e,n,(function(e){var t;return"function"===typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=Kt(o,e)||e,a&&(t=a(t))),!1===i?t:(0,C.Z)({},i,t)}))};return o.propTypes={},o.filterProps=[t],o};function Qt(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Jt=Xt($t({prop:"border",themeKey:"borders",transform:Qt}),$t({prop:"borderTop",themeKey:"borders",transform:Qt}),$t({prop:"borderRight",themeKey:"borders",transform:Qt}),$t({prop:"borderBottom",themeKey:"borders",transform:Qt}),$t({prop:"borderLeft",themeKey:"borders",transform:Qt}),$t({prop:"borderColor",themeKey:"palette"}),$t({prop:"borderRadius",themeKey:"shape"})),en=Xt($t({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),$t({prop:"display"}),$t({prop:"overflow"}),$t({prop:"textOverflow"}),$t({prop:"visibility"}),$t({prop:"whiteSpace"})),tn=Xt($t({prop:"flexBasis"}),$t({prop:"flexDirection"}),$t({prop:"flexWrap"}),$t({prop:"justifyContent"}),$t({prop:"alignItems"}),$t({prop:"alignContent"}),$t({prop:"order"}),$t({prop:"flex"}),$t({prop:"flexGrow"}),$t({prop:"flexShrink"}),$t({prop:"alignSelf"}),$t({prop:"justifyItems"}),$t({prop:"justifySelf"})),nn=Xt($t({prop:"gridGap"}),$t({prop:"gridColumnGap"}),$t({prop:"gridRowGap"}),$t({prop:"gridColumn"}),$t({prop:"gridRow"}),$t({prop:"gridAutoFlow"}),$t({prop:"gridAutoColumns"}),$t({prop:"gridAutoRows"}),$t({prop:"gridTemplateColumns"}),$t({prop:"gridTemplateRows"}),$t({prop:"gridTemplateAreas"}),$t({prop:"gridArea"})),rn=Xt($t({prop:"position"}),$t({prop:"zIndex",themeKey:"zIndex"}),$t({prop:"top"}),$t({prop:"right"}),$t({prop:"bottom"}),$t({prop:"left"})),an=Xt($t({prop:"color",themeKey:"palette"}),$t({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),on=$t({prop:"boxShadow",themeKey:"shadows"});function sn(e){return e<=1?"".concat(100*e,"%"):e}var ln=$t({prop:"width",transform:sn}),un=$t({prop:"maxWidth",transform:sn}),cn=$t({prop:"minWidth",transform:sn}),hn=$t({prop:"height",transform:sn}),dn=$t({prop:"maxHeight",transform:sn}),pn=$t({prop:"minHeight",transform:sn}),fn=($t({prop:"size",cssProperty:"width",transform:sn}),$t({prop:"size",cssProperty:"height",transform:sn}),Xt(ln,un,cn,hn,dn,pn,$t({prop:"boxSizing"}))),mn=n(2308),vn=Xt($t({prop:"fontFamily",themeKey:"typography"}),$t({prop:"fontSize",themeKey:"typography"}),$t({prop:"fontStyle",themeKey:"typography"}),$t({prop:"fontWeight",themeKey:"typography"}),$t({prop:"letterSpacing"}),$t({prop:"lineHeight"}),$t({prop:"textAlign"})),yn=n(4792);function gn(e,t){var n={};return Object.keys(e).forEach((function(i){-1===t.indexOf(i)&&(n[i]=e[i])})),n}var _n=function(t){var n=function(t){return function(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.name,o=(0,_.Z)(r,["name"]),s=a,l="function"===typeof n?function(e){return{root:function(t){return n((0,p.Z)({theme:e},t))}}}:{root:n},u=(0,yn.Z)(l,(0,p.Z)({Component:t,name:a||t.displayName,classNamePrefix:s},o));n.filterProps&&(i=n.filterProps,delete n.filterProps),n.propTypes&&(n.propTypes,delete n.propTypes);var c=e.forwardRef((function(n,r){var a=n.children,o=n.className,s=n.clone,l=n.component,c=(0,_.Z)(n,["children","className","clone","component"]),h=u(n),d=(0,P.Z)(h.root,o),f=c;if(i&&(f=gn(f,i)),s)return e.cloneElement(a,(0,p.Z)({className:(0,P.Z)(a.props.className,d)},f));if("function"===typeof a)return a((0,p.Z)({className:d},f));var m=l||t;return e.createElement(m,(0,p.Z)({ref:r,className:d},f),a)}));return b()(c,t),c}}(t);return function(e,t){return n(e,(0,p.Z)({defaultTheme:k.Z},t))}},xn=Ht(Xt(Jt,en,tn,nn,rn,an,on,fn,mn.Z,vn)),bn=_n("div")(xn,{name:"MuiBox"}),wn=n(5352),kn=n(2929),Sn=(n(7441),n(4667)),Tn=n(503),Cn=n(7636),En=n(7545),Mn=n(1565);var Pn="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,An=e.forwardRef((function(t,n){var i=t.children,r=t.container,a=t.disablePortal,o=void 0!==a&&a,s=t.onRendered,l=e.useState(null),u=l[0],c=l[1],h=(0,zt.Z)(e.isValidElement(i)?i.ref:null,n);return Pn((function(){o||c(function(e){return e="function"===typeof e?e():e,Le.findDOMNode(e)}(r)||document.body)}),[r,o]),Pn((function(){if(u&&!o)return(0,Mn.Z)(n,u),function(){(0,Mn.Z)(n,null)}}),[n,u,o]),Pn((function(){s&&(u||o)&&s()}),[s,u,o]),o?e.isValidElement(i)?e.cloneElement(i,{ref:h}):i:u?Le.createPortal(i,u):u}));var Dn=An,In=n(2216),Ln=n(9535);function On(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function zn(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Rn(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function Bn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4?arguments[4]:void 0,a=[t,n].concat((0,Zt.Z)(i)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===a.indexOf(e)&&-1===o.indexOf(e.tagName)&&zn(e,r)}))}function Fn(e,t){var n=-1;return e.some((function(e,i){return!!t(e)&&(n=i,!0)})),n}function Nn(e,t){var n,i=[],r=[],a=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,Sn.Z)(e);return t.body===e?(0,Cn.Z)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(a)){var o=On();i.push({value:a.style.paddingRight,key:"padding-right",el:a}),a.style["padding-right"]="".concat(Rn(a)+o,"px"),n=(0,Sn.Z)(a).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){r.push(e.style.paddingRight),e.style.paddingRight="".concat(Rn(e)+o,"px")}))}var s=a.parentElement,l="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:a;i.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){r[t]?e.style.paddingRight=r[t]:e.style.removeProperty("padding-right")})),i.forEach((function(e){var t=e.value,n=e.el,i=e.key;t?n.style.setProperty(i,t):n.style.removeProperty(i)}))}}var jn=function(){function e(){i(this,e),this.modals=[],this.containers=[]}return(0,r.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&zn(e.modalRef,!1);var i=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Bn(t,e.mountNode,e.modalRef,i,!0);var r=Fn(this.containers,(function(e){return e.container===t}));return-1!==r?(this.containers[r].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:i}),n)}},{key:"mount",value:function(e,t){var n=Fn(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[n];i.restore||(i.restore=Nn(i,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=Fn(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[n];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(t,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&zn(e.modalRef,!0),Bn(i.container,e.mountNode,e.modalRef,i.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var r=i.modals[i.modals.length-1];r.modalRef&&zn(r.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var Un=function(t){var n=t.children,i=t.disableAutoFocus,r=void 0!==i&&i,a=t.disableEnforceFocus,o=void 0!==a&&a,s=t.disableRestoreFocus,l=void 0!==s&&s,u=t.getDoc,c=t.isEnabled,h=t.open,d=e.useRef(),p=e.useRef(null),f=e.useRef(null),m=e.useRef(),v=e.useRef(null),y=e.useCallback((function(e){v.current=Le.findDOMNode(e)}),[]),g=(0,zt.Z)(n.ref,y),_=e.useRef();return e.useEffect((function(){_.current=h}),[h]),!_.current&&h&&"undefined"!==typeof window&&(m.current=u().activeElement),e.useEffect((function(){if(h){var e=(0,Sn.Z)(v.current);r||!v.current||v.current.contains(e.activeElement)||(v.current.hasAttribute("tabIndex")||v.current.setAttribute("tabIndex",-1),v.current.focus());var t=function(){null!==v.current&&(e.hasFocus()&&!o&&c()&&!d.current?v.current&&!v.current.contains(e.activeElement)&&v.current.focus():d.current=!1)},n=function(t){!o&&c()&&9===t.keyCode&&e.activeElement===v.current&&(d.current=!0,t.shiftKey?f.current.focus():p.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var i=setInterval((function(){t()}),50);return function(){clearInterval(i),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),l||(m.current&&m.current.focus&&m.current.focus(),m.current=null)}}}),[r,o,l,c,h]),e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelStart"}),e.cloneElement(n,{ref:g}),e.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelEnd"}))},Vn={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},Zn=e.forwardRef((function(t,n){var i=t.invisible,r=void 0!==i&&i,a=t.open,o=(0,_.Z)(t,["invisible","open"]);return a?e.createElement("div",(0,p.Z)({"aria-hidden":!0,ref:n},o,{style:(0,p.Z)({},Vn.root,r?Vn.invisible:{},o.style)})):null}));var Wn=new jn,Gn=e.forwardRef((function(t,n){var i=(0,m.Z)(),r=(0,V.Z)({name:"MuiModal",props:(0,p.Z)({},t),theme:i}),a=r.BackdropComponent,o=void 0===a?Zn:a,s=r.BackdropProps,l=r.children,u=r.closeAfterTransition,c=void 0!==u&&u,h=r.container,d=r.disableAutoFocus,f=void 0!==d&&d,v=r.disableBackdropClick,y=void 0!==v&&v,g=r.disableEnforceFocus,x=void 0!==g&&g,b=r.disableEscapeKeyDown,w=void 0!==b&&b,k=r.disablePortal,S=void 0!==k&&k,T=r.disableRestoreFocus,C=void 0!==T&&T,E=r.disableScrollLock,M=void 0!==E&&E,P=r.hideBackdrop,A=void 0!==P&&P,D=r.keepMounted,I=void 0!==D&&D,L=r.manager,O=void 0===L?Wn:L,z=r.onBackdropClick,R=r.onClose,B=r.onEscapeKeyDown,F=r.onRendered,N=r.open,j=(0,_.Z)(r,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),U=e.useState(!0),Z=U[0],W=U[1],G=e.useRef({}),Y=e.useRef(null),H=e.useRef(null),X=(0,zt.Z)(H,n),q=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(r),K=function(){return(0,Sn.Z)(Y.current)},$=function(){return G.current.modalRef=H.current,G.current.mountNode=Y.current,G.current},Q=function(){O.mount($(),{disableScrollLock:M}),H.current.scrollTop=0},J=(0,In.Z)((function(){var e=function(e){return e="function"===typeof e?e():e,Le.findDOMNode(e)}(h)||K().body;O.add($(),e),H.current&&Q()})),ee=e.useCallback((function(){return O.isTopModal($())}),[O]),te=(0,In.Z)((function(e){Y.current=e,e&&(F&&F(),N&&ee()?Q():zn(H.current,!0))})),ne=e.useCallback((function(){O.remove($())}),[O]);if(e.useEffect((function(){return function(){ne()}}),[ne]),e.useEffect((function(){N?J():q&&c||ne()}),[N,ne,q,c,J]),!I&&!N&&(!q||Z))return null;var ie=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(i||{zIndex:Ln.Z}),re={};return void 0===l.props.tabIndex&&(re.tabIndex=l.props.tabIndex||"-1"),q&&(re.onEnter=(0,En.Z)((function(){W(!1)}),l.props.onEnter),re.onExited=(0,En.Z)((function(){W(!0),c&&ne()}),l.props.onExited)),e.createElement(Dn,{ref:te,container:h,disablePortal:S},e.createElement("div",(0,p.Z)({ref:X,onKeyDown:function(e){"Escape"===e.key&&ee()&&(B&&B(e),w||(e.stopPropagation(),R&&R(e,"escapeKeyDown")))},role:"presentation"},j,{style:(0,p.Z)({},ie.root,!N&&Z?ie.hidden:{},j.style)}),A?null:e.createElement(o,(0,p.Z)({open:N,onClick:function(e){e.target===e.currentTarget&&(z&&z(e),!y&&R&&R(e,"backdropClick"))}},s)),e.createElement(Un,{disableEnforceFocus:x,disableAutoFocus:f,disableRestoreFocus:C,getDoc:K,isEnabled:ee,open:N},e.cloneElement(l,re))))})),Yn=Gn;function Hn(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var Xn={entering:{opacity:1,transform:Hn(1)},entered:{opacity:1,transform:"none"}},qn=e.forwardRef((function(t,n){var i=t.children,r=t.disableStrictModeCompat,a=void 0!==r&&r,o=t.in,s=t.onEnter,l=t.onEntered,u=t.onEntering,c=t.onExit,h=t.onExited,d=t.onExiting,f=t.style,m=t.timeout,v=void 0===m?"auto":m,y=t.TransitionComponent,g=void 0===y?Dt:y,x=(0,_.Z)(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),b=e.useRef(),w=e.useRef(),k=Z(),S=k.unstable_strictMode&&!a,T=e.useRef(null),C=(0,zt.Z)(i.ref,n),E=(0,zt.Z)(S?T:void 0,C),M=function(e){return function(t,n){if(e){var i=S?[T.current,t]:[t,n],r=(0,re.Z)(i,2),a=r[0],o=r[1];void 0===o?e(a):e(a,o)}}},P=M(u),A=M((function(e,t){Lt(e);var n,i=Ot({style:f,timeout:v},{mode:"enter"}),r=i.duration,a=i.delay;"auto"===v?(n=k.transitions.getAutoHeightDuration(e.clientHeight),w.current=n):n=r,e.style.transition=[k.transitions.create("opacity",{duration:n,delay:a}),k.transitions.create("transform",{duration:.666*n,delay:a})].join(","),s&&s(e,t)})),D=M(l),I=M(d),L=M((function(e){var t,n=Ot({style:f,timeout:v},{mode:"exit"}),i=n.duration,r=n.delay;"auto"===v?(t=k.transitions.getAutoHeightDuration(e.clientHeight),w.current=t):t=i,e.style.transition=[k.transitions.create("opacity",{duration:t,delay:r}),k.transitions.create("transform",{duration:.666*t,delay:r||.333*t})].join(","),e.style.opacity="0",e.style.transform=Hn(.75),c&&c(e)})),O=M(h);return e.useEffect((function(){return function(){clearTimeout(b.current)}}),[]),e.createElement(g,(0,p.Z)({appear:!0,in:o,nodeRef:S?T:void 0,onEnter:A,onEntered:D,onEntering:P,onExit:L,onExited:O,onExiting:I,addEndListener:function(e,t){var n=S?e:t;"auto"===v&&(b.current=setTimeout(n,w.current||0))},timeout:"auto"===v?null:v},x),(function(t,n){return e.cloneElement(i,(0,p.Z)({style:(0,p.Z)({opacity:0,transform:Hn(.75),visibility:"exited"!==t||o?void 0:"hidden"},Xn[t],f,i.props.style),ref:E},n))}))}));qn.muiSupportAuto=!0;var Kn=qn,$n=e.forwardRef((function(t,n){var i=t.classes,r=t.className,a=t.component,o=void 0===a?"div":a,s=t.square,l=void 0!==s&&s,u=t.elevation,c=void 0===u?1:u,h=t.variant,d=void 0===h?"elevation":h,f=(0,_.Z)(t,["classes","className","component","square","elevation","variant"]);return e.createElement(o,(0,p.Z)({className:(0,P.Z)(i.root,r,"outlined"===d?i.outlined:i["elevation".concat(c)],!l&&i.rounded),ref:n},f))})),Qn=(0,g.Z)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),(0,p.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})($n);function Jn(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function ei(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function ti(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function ni(e){return"function"===typeof e?e():e}var ii=e.forwardRef((function(t,n){var i=t.action,r=t.anchorEl,a=t.anchorOrigin,o=void 0===a?{vertical:"top",horizontal:"left"}:a,s=t.anchorPosition,l=t.anchorReference,u=void 0===l?"anchorEl":l,c=t.children,h=t.classes,d=t.className,f=t.container,m=t.elevation,v=void 0===m?8:m,y=t.getContentAnchorEl,g=t.marginThreshold,x=void 0===g?16:g,b=t.onEnter,w=t.onEntered,k=t.onEntering,S=t.onExit,T=t.onExited,C=t.onExiting,E=t.open,M=t.PaperProps,A=void 0===M?{}:M,D=t.transformOrigin,I=void 0===D?{vertical:"top",horizontal:"left"}:D,L=t.TransitionComponent,O=void 0===L?Kn:L,z=t.transitionDuration,R=void 0===z?"auto":z,B=t.TransitionProps,F=void 0===B?{}:B,N=(0,_.Z)(t,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),j=e.useRef(),U=e.useCallback((function(e){if("anchorPosition"===u)return s;var t=ni(r),n=(t&&1===t.nodeType?t:(0,Sn.Z)(j.current).body).getBoundingClientRect(),i=0===e?o.vertical:"center";return{top:n.top+Jn(n,i),left:n.left+ei(n,o.horizontal)}}),[r,o.horizontal,o.vertical,s,u]),V=e.useCallback((function(e){var t=0;if(y&&"anchorEl"===u){var n=y(e);if(n&&e.contains(n)){var i=function(e,t){for(var n=t,i=0;n&&n!==e;)i+=(n=n.parentElement).scrollTop;return i}(e,n);t=n.offsetTop+n.clientHeight/2-i||0}0}return t}),[o.vertical,u,y]),Z=e.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:Jn(e,I.vertical)+t,horizontal:ei(e,I.horizontal)}}),[I.horizontal,I.vertical]),W=e.useCallback((function(e){var t=V(e),n={width:e.offsetWidth,height:e.offsetHeight},i=Z(n,t);if("none"===u)return{top:null,left:null,transformOrigin:ti(i)};var a=U(t),o=a.top-i.vertical,s=a.left-i.horizontal,l=o+n.height,c=s+n.width,h=(0,Cn.Z)(ni(r)),d=h.innerHeight-x,p=h.innerWidth-x;if(o<x){var f=o-x;o-=f,i.vertical+=f}else if(l>d){var m=l-d;o-=m,i.vertical+=m}if(s<x){var v=s-x;s-=v,i.horizontal+=v}else if(c>p){var y=c-p;s-=y,i.horizontal+=y}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:ti(i)}}),[r,u,U,V,Z,x]),G=e.useCallback((function(){var e=j.current;if(e){var t=W(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[W]),Y=e.useCallback((function(e){j.current=Le.findDOMNode(e)}),[]);e.useEffect((function(){E&&G()})),e.useImperativeHandle(i,(function(){return E?{updatePosition:function(){G()}}:null}),[E,G]),e.useEffect((function(){if(E){var e=(0,Tn.Z)((function(){G()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[E,G]);var H=R;"auto"!==R||O.muiSupportAuto||(H=void 0);var X=f||(r?(0,Sn.Z)(ni(r)).body:void 0);return e.createElement(Yn,(0,p.Z)({container:X,open:E,ref:n,BackdropProps:{invisible:!0},className:(0,P.Z)(h.root,d)},N),e.createElement(O,(0,p.Z)({appear:!0,in:E,onEnter:b,onEntered:w,onExit:S,onExited:T,onExiting:C,timeout:H},F,{onEntering:(0,En.Z)((function(e,t){k&&k(e,t),G()}),F.onEntering)}),e.createElement(Qn,(0,p.Z)({elevation:v,ref:Y},A,{className:(0,P.Z)(h.paper,A.className)}),c)))})),ri=(0,g.Z)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(ii);var ai=e.createContext({}),oi=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.className,o=t.component,s=void 0===o?"ul":o,l=t.dense,u=void 0!==l&&l,c=t.disablePadding,h=void 0!==c&&c,d=t.subheader,f=(0,_.Z)(t,["children","classes","className","component","dense","disablePadding","subheader"]),m=e.useMemo((function(){return{dense:u}}),[u]);return e.createElement(ai.Provider,{value:m},e.createElement(s,(0,p.Z)({className:(0,P.Z)(r.root,a,u&&r.dense,!h&&r.padding,d&&r.subheader),ref:n},f),d,i))})),si=(0,g.Z)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(oi);function li(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function ui(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function ci(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function hi(e,t,n,i,r,a){for(var o=!1,s=r(e,t,!!t&&n);s;){if(s===e.firstChild){if(o)return;o=!0}var l=!i&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&ci(s,a)&&!l)return void s.focus();s=r(e,s,n)}}var di="undefined"===typeof window?e.useEffect:e.useLayoutEffect,pi=e.forwardRef((function(t,n){var i=t.actions,r=t.autoFocus,a=void 0!==r&&r,o=t.autoFocusItem,s=void 0!==o&&o,l=t.children,u=t.className,c=t.disabledItemsFocusable,h=void 0!==c&&c,d=t.disableListWrap,f=void 0!==d&&d,m=t.onKeyDown,v=t.variant,y=void 0===v?"selectedMenu":v,g=(0,_.Z)(t,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),x=e.useRef(null),b=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});di((function(){a&&x.current.focus()}),[a]),e.useImperativeHandle(i,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!x.current.style.width;if(e.clientHeight<x.current.clientHeight&&n){var i="".concat(On(),"px");x.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=i,x.current.style.width="calc(100% + ".concat(i,")")}return x.current}}}),[]);var w=e.useCallback((function(e){x.current=Le.findDOMNode(e)}),[]),k=(0,zt.Z)(w,n),S=-1;e.Children.forEach(l,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===y&&t.props.selected||-1===S)&&(S=n))}));var T=e.Children.map(l,(function(t,n){if(n===S){var i={};return s&&(i.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===y&&(i.tabIndex=0),e.cloneElement(t,i)}return t}));return e.createElement(si,(0,p.Z)({role:"menu",ref:k,className:u,onKeyDown:function(e){var t=x.current,n=e.key,i=(0,Sn.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),hi(t,i,f,h,li);else if("ArrowUp"===n)e.preventDefault(),hi(t,i,f,h,ui);else if("Home"===n)e.preventDefault(),hi(t,null,f,h,li);else if("End"===n)e.preventDefault(),hi(t,null,f,h,ui);else if(1===n.length){var r=b.current,a=n.toLowerCase(),o=performance.now();r.keys.length>0&&(o-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&a!==r.keys[0]&&(r.repeating=!1)),r.lastTime=o,r.keys.push(a);var s=i&&!r.repeating&&ci(i,r);r.previousKeyMatched&&(s||hi(t,i,!1,h,li,r))?e.preventDefault():r.previousKeyMatched=!1}m&&m(e)},tabIndex:a?0:-1},g),T)})),fi=pi,mi={vertical:"top",horizontal:"right"},vi={vertical:"top",horizontal:"left"},yi=e.forwardRef((function(t,n){var i=t.autoFocus,r=void 0===i||i,a=t.children,o=t.classes,s=t.disableAutoFocusItem,l=void 0!==s&&s,u=t.MenuListProps,c=void 0===u?{}:u,h=t.onClose,d=t.onEntering,f=t.open,m=t.PaperProps,v=void 0===m?{}:m,y=t.PopoverClasses,g=t.transitionDuration,x=void 0===g?"auto":g,b=t.TransitionProps,w=(b=void 0===b?{}:b).onEntering,k=(0,_.Z)(b,["onEntering"]),S=t.variant,T=void 0===S?"selectedMenu":S,C=(0,_.Z)(t,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),E=Z(),M=r&&!l&&f,A=e.useRef(null),D=e.useRef(null),I=-1;e.Children.map(a,(function(t,n){e.isValidElement(t)&&(t.props.disabled||("menu"!==T&&t.props.selected||-1===I)&&(I=n))}));var L=e.Children.map(a,(function(t,n){return n===I?e.cloneElement(t,{ref:function(e){D.current=Le.findDOMNode(e),(0,Mn.Z)(t.ref,e)}}):t}));return e.createElement(ri,(0,p.Z)({getContentAnchorEl:function(){return D.current},classes:y,onClose:h,TransitionProps:(0,p.Z)({onEntering:function(e,t){A.current&&A.current.adjustStyleForScrollbar(e,E),d&&d(e,t),w&&w(e,t)}},k),anchorOrigin:"rtl"===E.direction?mi:vi,transformOrigin:"rtl"===E.direction?mi:vi,PaperProps:(0,p.Z)({},v,{classes:(0,p.Z)({},v.classes,{root:o.paper})}),open:f,ref:n,transitionDuration:x},C),e.createElement(fi,(0,p.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))},actions:A,autoFocus:r&&(-1===I||l),autoFocusItem:M,variant:T},c,{className:(0,P.Z)(o.list,c.className)}),L))})),gi=(0,g.Z)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(yi);function _i(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function xi(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(_i(e.value)&&""!==e.value||t&&_i(e.defaultValue)&&""!==e.defaultValue)}var bi=n(2497);function wi(e,t){return"object"===(0,l.Z)(t)&&null!==t?e===t:String(e)===String(t)}var ki=e.forwardRef((function(t,n){var i=t["aria-label"],r=t.autoFocus,a=t.autoWidth,o=t.children,s=t.classes,l=t.className,u=t.defaultValue,c=t.disabled,h=t.displayEmpty,d=t.IconComponent,f=t.inputRef,m=t.labelId,v=t.MenuProps,y=void 0===v?{}:v,g=t.multiple,x=t.name,b=t.onBlur,w=t.onChange,k=t.onClose,S=t.onFocus,T=t.onOpen,C=t.open,E=t.readOnly,M=t.renderValue,A=t.SelectDisplayProps,D=void 0===A?{}:A,I=t.tabIndex,L=(t.type,t.value),O=t.variant,z=void 0===O?"standard":O,B=(0,_.Z)(t,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),F=(0,bi.Z)({controlled:L,default:u,name:"Select"}),N=(0,re.Z)(F,2),j=N[0],U=N[1],V=e.useRef(null),Z=e.useState(null),W=Z[0],G=Z[1],Y=e.useRef(null!=C).current,H=e.useState(),X=H[0],q=H[1],K=e.useState(!1),$=K[0],Q=K[1],J=(0,zt.Z)(n,f);e.useImperativeHandle(J,(function(){return{focus:function(){W.focus()},node:V.current,value:j}}),[W,j]),e.useEffect((function(){r&&W&&W.focus()}),[r,W]),e.useEffect((function(){if(W){var e=(0,Sn.Z)(W).getElementById(m);if(e){var t=function(){getSelection().isCollapsed&&W.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[m,W]);var ee,te,ne=function(e,t){e?T&&T(t):k&&k(t),Y||(q(a?null:W.clientWidth),Q(e))},ie=e.Children.toArray(o),ae=function(e){return function(t){var n;if(g||ne(!1,t),g){n=Array.isArray(j)?j.slice():[];var i=j.indexOf(e.props.value);-1===i?n.push(e.props.value):n.splice(i,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),j!==n&&(U(n),w&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:x}}),w(t,e)))}},oe=null!==W&&(Y?C:$);delete B["aria-invalid"];var se=[],le=!1;(xi({value:j})||h)&&(M?ee=M(j):le=!0);var ue=ie.map((function(t){if(!e.isValidElement(t))return null;var n;if(g){if(!Array.isArray(j))throw new Error((0,kn.Z)(2));(n=j.some((function(e){return wi(e,t.props.value)})))&&le&&se.push(t.props.children)}else(n=wi(j,t.props.value))&&le&&(te=t.props.children);return n&&!0,e.cloneElement(t,{"aria-selected":n?"true":void 0,onClick:ae(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:n,value:void 0,"data-value":t.props.value})}));le&&(ee=g?se.join(", "):te);var ce,he=X;!a&&Y&&W&&(he=W.clientWidth),ce="undefined"!==typeof I?I:c?null:0;var de=D.id||(x?"mui-component-select-".concat(x):void 0);return e.createElement(e.Fragment,null,e.createElement("div",(0,p.Z)({className:(0,P.Z)(s.root,s.select,s.selectMenu,s[z],l,c&&s.disabled),ref:G,tabIndex:ce,role:"button","aria-disabled":c?"true":void 0,"aria-expanded":oe?"true":void 0,"aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[m,de].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!E){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ne(!0,e))}},onMouseDown:c||E?null:function(e){0===e.button&&(e.preventDefault(),W.focus(),ne(!0,e))},onBlur:function(e){!oe&&b&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:j,name:x}}),b(e))},onFocus:S},D,{id:de}),function(e){return null==e||"string"===typeof e&&!e.trim()}(ee)?e.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):ee),e.createElement("input",(0,p.Z)({value:Array.isArray(j)?j.join(","):j,name:x,ref:V,"aria-hidden":!0,onChange:function(e){var t=ie.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ie[t];U(n.props.value),w&&w(e,n)}},tabIndex:-1,className:s.nativeInput,autoFocus:r},B)),e.createElement(d,{className:(0,P.Z)(s.icon,s["icon".concat((0,R.Z)(z))],oe&&s.iconOpen,c&&s.disabled)}),e.createElement(gi,(0,p.Z)({id:"menu-".concat(x||""),anchorEl:W,open:oe,onClose:function(e){ne(!1,e)}},y,{MenuListProps:(0,p.Z)({"aria-labelledby":m,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:(0,p.Z)({},y.PaperProps,{style:(0,p.Z)({minWidth:he},null!=y.PaperProps?y.PaperProps.style:null)})}),ue))})),Si=ki;function Ti(e){var t=e.props,n=e.states,i=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],i&&"undefined"===typeof t[n]&&(e[n]=i[n]),e}),{})}var Ci=e.createContext();function Ei(){return e.useContext(Ci)}var Mi=Ci;function Pi(){return e.useContext(Mi)}var Ai=n(4327),Di=(0,Ai.Z)(e.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function Ii(e,t){return parseInt(e[t],10)||0}var Li="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,Oi={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},zi=e.forwardRef((function(t,n){var i=t.onChange,r=t.rows,a=t.rowsMax,o=t.rowsMin,s=t.maxRows,l=t.minRows,u=void 0===l?1:l,c=t.style,h=t.value,d=(0,_.Z)(t,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),f=s||a,m=r||o||u,v=e.useRef(null!=h).current,y=e.useRef(null),g=(0,zt.Z)(n,y),x=e.useRef(null),b=e.useRef(0),w=e.useState({}),k=w[0],S=w[1],T=e.useCallback((function(){var e=y.current,n=window.getComputedStyle(e),i=x.current;i.style.width=n.width,i.value=e.value||t.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");var r=n["box-sizing"],a=Ii(n,"padding-bottom")+Ii(n,"padding-top"),o=Ii(n,"border-bottom-width")+Ii(n,"border-top-width"),s=i.scrollHeight-a;i.value="x";var l=i.scrollHeight-a,u=s;m&&(u=Math.max(Number(m)*l,u)),f&&(u=Math.min(Number(f)*l,u));var c=(u=Math.max(u,l))+("border-box"===r?a+o:0),h=Math.abs(u-s)<=1;S((function(e){return b.current<20&&(c>0&&Math.abs((e.outerHeightStyle||0)-c)>1||e.overflow!==h)?(b.current+=1,{overflow:h,outerHeightStyle:c}):e}))}),[f,m,t.placeholder]);e.useEffect((function(){var e=(0,Tn.Z)((function(){b.current=0,T()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[T]),Li((function(){T()})),e.useEffect((function(){b.current=0}),[h]);return e.createElement(e.Fragment,null,e.createElement("textarea",(0,p.Z)({value:h,onChange:function(e){b.current=0,v||T(),i&&i(e)},ref:g,rows:m,style:(0,p.Z)({height:k.outerHeightStyle,overflow:k.overflow?"hidden":null},c)},d)),e.createElement("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:x,tabIndex:-1,style:(0,p.Z)({},Oi,c)}))})),Ri=zi,Bi="undefined"===typeof window?e.useEffect:e.useLayoutEffect,Fi=e.forwardRef((function(t,n){var i=t["aria-describedby"],r=t.autoComplete,a=t.autoFocus,o=t.classes,s=t.className,l=(t.color,t.defaultValue),u=t.disabled,c=t.endAdornment,h=(t.error,t.fullWidth),d=void 0!==h&&h,f=t.id,m=t.inputComponent,v=void 0===m?"input":m,y=t.inputProps,g=void 0===y?{}:y,x=t.inputRef,b=(t.margin,t.multiline),w=void 0!==b&&b,k=t.name,S=t.onBlur,T=t.onChange,C=t.onClick,E=t.onFocus,M=t.onKeyDown,A=t.onKeyUp,D=t.placeholder,I=t.readOnly,L=t.renderSuffix,O=t.rows,z=t.rowsMax,B=t.rowsMin,F=t.maxRows,N=t.minRows,j=t.startAdornment,U=t.type,V=void 0===U?"text":U,Z=t.value,W=(0,_.Z)(t,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),G=null!=g.value?g.value:Z,Y=e.useRef(null!=G).current,H=e.useRef(),X=e.useCallback((function(e){0}),[]),q=(0,zt.Z)(g.ref,X),K=(0,zt.Z)(x,q),$=(0,zt.Z)(H,K),Q=e.useState(!1),J=Q[0],ee=Q[1],te=Ei();var ne=Ti({props:t,muiFormControl:te,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ne.focused=te?te.focused:J,e.useEffect((function(){!te&&u&&J&&(ee(!1),S&&S())}),[te,u,J,S]);var ie=te&&te.onFilled,re=te&&te.onEmpty,ae=e.useCallback((function(e){xi(e)?ie&&ie():re&&re()}),[ie,re]);Bi((function(){Y&&ae({value:G})}),[G,ae,Y]);e.useEffect((function(){ae(H.current)}),[]);var oe=v,se=(0,p.Z)({},g,{ref:$});"string"!==typeof oe?se=(0,p.Z)({inputRef:$,type:V},se,{ref:null}):w?!O||F||N||z||B?(se=(0,p.Z)({minRows:O||N,rowsMax:z,maxRows:F},se),oe=Ri):oe="textarea":se=(0,p.Z)({type:V},se);return e.useEffect((function(){te&&te.setAdornedStart(Boolean(j))}),[te,j]),e.createElement("div",(0,p.Z)({className:(0,P.Z)(o.root,o["color".concat((0,R.Z)(ne.color||"primary"))],s,ne.disabled&&o.disabled,ne.error&&o.error,d&&o.fullWidth,ne.focused&&o.focused,te&&o.formControl,w&&o.multiline,j&&o.adornedStart,c&&o.adornedEnd,"dense"===ne.margin&&o.marginDense),onClick:function(e){H.current&&e.currentTarget===e.target&&H.current.focus(),C&&C(e)},ref:n},W),j,e.createElement(Mi.Provider,{value:null},e.createElement(oe,(0,p.Z)({"aria-invalid":ne.error,"aria-describedby":i,autoComplete:r,autoFocus:a,defaultValue:l,disabled:ne.disabled,id:f,onAnimationStart:function(e){ae("mui-auto-fill-cancel"===e.animationName?H.current:{value:"x"})},name:k,placeholder:D,readOnly:I,required:ne.required,rows:O,value:G,onKeyDown:M,onKeyUp:A},se,{className:(0,P.Z)(o.input,g.className,ne.disabled&&o.disabled,w&&o.inputMultiline,ne.hiddenLabel&&o.inputHiddenLabel,j&&o.inputAdornedStart,c&&o.inputAdornedEnd,"search"===V&&o.inputTypeSearch,"dense"===ne.margin&&o.inputMarginDense),onBlur:function(e){S&&S(e),g.onBlur&&g.onBlur(e),te&&te.onBlur?te.onBlur(e):ee(!1)},onChange:function(e){if(!Y){var t=e.target||H.current;if(null==t)throw new Error((0,kn.Z)(1));ae({value:t.value})}for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];g.onChange&&g.onChange.apply(g,[e].concat(i)),T&&T.apply(void 0,[e].concat(i))},onFocus:function(e){ne.disabled?e.stopPropagation():(E&&E(e),g.onFocus&&g.onFocus(e),te&&te.onFocus?te.onFocus(e):ee(!0))}}))),c,L?L((0,p.Z)({},ne,{startAdornment:j})):null)})),Ni=(0,g.Z)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},r={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,p.Z)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":r,"&:focus::-moz-placeholder":r,"&:focus:-ms-input-placeholder":r,"&:focus::-ms-input-placeholder":r},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(Fi),ji=e.forwardRef((function(t,n){var i=t.disableUnderline,r=t.classes,a=t.fullWidth,o=void 0!==a&&a,s=t.inputComponent,l=void 0===s?"input":s,u=t.multiline,c=void 0!==u&&u,h=t.type,d=void 0===h?"text":h,f=(0,_.Z)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return e.createElement(Ni,(0,p.Z)({classes:(0,p.Z)({},r,{root:(0,P.Z)(r.root,!i&&r.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:c,ref:n,type:d},f))}));ji.muiName="Input";var Ui=(0,g.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(ji),Vi=e.forwardRef((function(t,n){var i=t.classes,r=t.className,a=t.disabled,o=t.IconComponent,s=t.inputRef,l=t.variant,u=void 0===l?"standard":l,c=(0,_.Z)(t,["classes","className","disabled","IconComponent","inputRef","variant"]);return e.createElement(e.Fragment,null,e.createElement("select",(0,p.Z)({className:(0,P.Z)(i.root,i.select,i[u],r,a&&i.disabled),disabled:a,ref:s||n},c)),t.multiple?null:e.createElement(o,{className:(0,P.Z)(i.icon,i["icon".concat((0,R.Z)(u))],a&&i.disabled)}))})),Zi=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},Wi=e.createElement(Ui,null),Gi=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.IconComponent,o=void 0===a?Di:a,s=t.input,l=void 0===s?Wi:s,u=t.inputProps,c=(t.variant,(0,_.Z)(t,["children","classes","IconComponent","input","inputProps","variant"])),h=Ti({props:t,muiFormControl:Pi(),states:["variant"]});return e.cloneElement(l,(0,p.Z)({inputComponent:Vi,inputProps:(0,p.Z)({children:i,classes:r,IconComponent:o,variant:h.variant,type:void 0},u,l?l.props.inputProps:{}),ref:n},c))}));Gi.muiName="Select";(0,g.Z)(Zi,{name:"MuiNativeSelect"})(Gi);var Yi=e.forwardRef((function(t,n){var i=t.disableUnderline,r=t.classes,a=t.fullWidth,o=void 0!==a&&a,s=t.inputComponent,l=void 0===s?"input":s,u=t.multiline,c=void 0!==u&&u,h=t.type,d=void 0===h?"text":h,f=(0,_.Z)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return e.createElement(Ni,(0,p.Z)({classes:(0,p.Z)({},r,{root:(0,P.Z)(r.root,!i&&r.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:c,ref:n,type:d},f))}));Yi.muiName="Input";var Hi=(0,g.Z)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:i,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:i}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(Yi),Xi=e.forwardRef((function(t,n){t.children;var i=t.classes,r=t.className,a=t.label,o=t.labelWidth,s=t.notched,l=t.style,u=(0,_.Z)(t,["children","classes","className","label","labelWidth","notched","style"]),c="rtl"===Z().direction?"right":"left";if(void 0!==a)return e.createElement("fieldset",(0,p.Z)({"aria-hidden":!0,className:(0,P.Z)(i.root,r),ref:n,style:l},u),e.createElement("legend",{className:(0,P.Z)(i.legendLabelled,s&&i.legendNotched)},a?e.createElement("span",null,a):e.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var h=o>0?.75*o+8:.01;return e.createElement("fieldset",(0,p.Z)({"aria-hidden":!0,style:(0,p.Z)((0,C.Z)({},"padding".concat((0,R.Z)(c)),8),l),className:(0,P.Z)(i.root,r),ref:n},u),e.createElement("legend",{className:i.legend,style:{width:s?h:.01}},e.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),qi=(0,g.Z)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(Xi),Ki=e.forwardRef((function(t,n){var i=t.classes,r=t.fullWidth,a=void 0!==r&&r,o=t.inputComponent,s=void 0===o?"input":o,l=t.label,u=t.labelWidth,c=void 0===u?0:u,h=t.multiline,d=void 0!==h&&h,f=t.notched,m=t.type,v=void 0===m?"text":m,y=(0,_.Z)(t,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return e.createElement(Ni,(0,p.Z)({renderSuffix:function(t){return e.createElement(qi,{className:i.notchedOutline,label:l,labelWidth:c,notched:"undefined"!==typeof f?f:Boolean(t.startAdornment||t.filled||t.focused)})},classes:(0,p.Z)({},i,{root:(0,P.Z)(i.root,i.underline),notchedOutline:null}),fullWidth:a,inputComponent:s,multiline:d,ref:n,type:v},y))}));Ki.muiName="Input";var $i=(0,g.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(Ki),Qi=Zi,Ji=e.createElement(Ui,null),er=e.createElement(Hi,null),tr=e.forwardRef((function t(n,i){var r=n.autoWidth,a=void 0!==r&&r,o=n.children,s=n.classes,l=n.displayEmpty,u=void 0!==l&&l,c=n.IconComponent,h=void 0===c?Di:c,d=n.id,f=n.input,m=n.inputProps,v=n.label,y=n.labelId,g=n.labelWidth,x=void 0===g?0:g,b=n.MenuProps,w=n.multiple,k=void 0!==w&&w,S=n.native,T=void 0!==S&&S,C=n.onClose,E=n.onOpen,M=n.open,P=n.renderValue,A=n.SelectDisplayProps,D=n.variant,I=void 0===D?"standard":D,L=(0,_.Z)(n,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),O=T?Vi:Si,z=Ti({props:n,muiFormControl:Pi(),states:["variant"]}).variant||I,R=f||{standard:Ji,outlined:e.createElement($i,{label:v,labelWidth:x}),filled:er}[z];return e.cloneElement(R,(0,p.Z)({inputComponent:O,inputProps:(0,p.Z)({children:o,IconComponent:h,variant:z,type:void 0,multiple:k},T?{id:d}:{autoWidth:a,displayEmpty:u,labelId:y,MenuProps:b,onClose:C,onOpen:E,open:M,renderValue:P,SelectDisplayProps:(0,p.Z)({id:d},A)},m,{classes:m?(0,wn.Z)({baseClasses:s,newClasses:m.classes,Component:t}):s},f?f.props.inputProps:{}),ref:i},L))}));tr.muiName="Select";var nr=(0,g.Z)(Qi,{name:"MuiSelect"})(tr),ir=n(3375),rr=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.className,o=t.color,s=void 0===o?"primary":o,l=t.component,u=void 0===l?"div":l,c=t.disabled,h=void 0!==c&&c,d=t.error,f=void 0!==d&&d,m=t.fullWidth,v=void 0!==m&&m,y=t.focused,g=t.hiddenLabel,x=void 0!==g&&g,b=t.margin,w=void 0===b?"none":b,k=t.required,S=void 0!==k&&k,T=t.size,C=t.variant,E=void 0===C?"standard":C,M=(0,_.Z)(t,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),A=e.useState((function(){var t=!1;return i&&e.Children.forEach(i,(function(e){if((0,ir.Z)(e,["Input","Select"])){var n=(0,ir.Z)(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)}})),t})),D=A[0],I=A[1],L=e.useState((function(){var t=!1;return i&&e.Children.forEach(i,(function(e){(0,ir.Z)(e,["Input","Select"])&&xi(e.props,!0)&&(t=!0)})),t})),O=L[0],z=L[1],B=e.useState(!1),F=B[0],N=B[1],j=void 0!==y?y:F;h&&j&&N(!1);var U=e.useCallback((function(){z(!0)}),[]),V={adornedStart:D,setAdornedStart:I,color:s,disabled:h,error:f,filled:O,focused:j,fullWidth:v,hiddenLabel:x,margin:("small"===T?"dense":void 0)||w,onBlur:function(){N(!1)},onEmpty:e.useCallback((function(){z(!1)}),[]),onFilled:U,onFocus:function(){N(!0)},registerEffect:undefined,required:S,variant:E};return e.createElement(Mi.Provider,{value:V},e.createElement(u,(0,p.Z)({className:(0,P.Z)(r.root,a,"none"!==w&&r["margin".concat((0,R.Z)(w))],v&&r.fullWidth),ref:n},M),i))})),ar=(0,g.Z)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(rr),or=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.className,o=(t.color,t.component),s=void 0===o?"label":o,l=(t.disabled,t.error,t.filled,t.focused,t.required,(0,_.Z)(t,["children","classes","className","color","component","disabled","error","filled","focused","required"])),u=Ti({props:t,muiFormControl:Pi(),states:["color","required","focused","disabled","error","filled"]});return e.createElement(s,(0,p.Z)({className:(0,P.Z)(r.root,r["color".concat((0,R.Z)(u.color||"primary"))],a,u.disabled&&r.disabled,u.error&&r.error,u.filled&&r.filled,u.focused&&r.focused,u.required&&r.required),ref:n},l),i,u.required&&e.createElement("span",{"aria-hidden":!0,className:(0,P.Z)(r.asterisk,u.error&&r.error)},"\u2009","*"))})),sr=(0,g.Z)((function(e){return{root:(0,p.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(or),lr=e.forwardRef((function(t,n){var i=t.classes,r=t.className,a=t.disableAnimation,o=void 0!==a&&a,s=(t.margin,t.shrink),l=(t.variant,(0,_.Z)(t,["classes","className","disableAnimation","margin","shrink","variant"])),u=Pi(),c=s;"undefined"===typeof c&&u&&(c=u.filled||u.focused||u.adornedStart);var h=Ti({props:t,muiFormControl:u,states:["margin","variant"]});return e.createElement(sr,(0,p.Z)({"data-shrink":c,className:(0,P.Z)(i.root,r,u&&i.formControl,!o&&i.animated,c&&i.shrink,"dense"===h.margin&&i.marginDense,{filled:i.filled,outlined:i.outlined}[h.variant]),classes:{focused:i.focused,disabled:i.disabled,error:i.error,required:i.required,asterisk:i.asterisk},ref:n},l))})),ur=(0,g.Z)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(lr),cr=n(1175);function hr(t,n){var i=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){i[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),i}function dr(e,t,n){return null!=n[t]?n[t]:e.props[t]}function pr(t,n,i){var r=hr(t.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var i,r=Object.create(null),a=[];for(var o in e)o in t?a.length&&(r[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(r[l])for(i=0;i<r[l].length;i++){var u=r[l][i];s[r[l][i]]=n(u)}s[l]=n(l)}for(i=0;i<a.length;i++)s[a[i]]=n(a[i]);return s}(n,r);return Object.keys(a).forEach((function(o){var s=a[o];if((0,e.isValidElement)(s)){var l=o in n,u=o in r,c=n[o],h=(0,e.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&(0,e.isValidElement)(c)&&(a[o]=(0,e.cloneElement)(s,{onExited:i.bind(null,s),in:c.props.in,exit:dr(s,"exit",t),enter:dr(s,"enter",t)})):a[o]=(0,e.cloneElement)(s,{in:!1}):a[o]=(0,e.cloneElement)(s,{onExited:i.bind(null,s),in:!0,exit:dr(s,"exit",t),enter:dr(s,"enter",t)})}})),a}var fr=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},mr=function(t){function n(e,n){var i,r=(i=t.call(this,e,n)||this).handleExited.bind((0,u.Z)(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}(0,bt.Z)(n,t);var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var i,r,a=n.children,o=n.handleExited;return{children:n.firstRender?(i=t,r=o,hr(i.children,(function(t){return(0,e.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:dr(t,"appear",i),enter:dr(t,"enter",i),exit:dr(t,"exit",i)})}))):pr(t,a,o),firstRender:!1}},i.handleExited=function(e,t){var n=hr(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,p.Z)({},t.children);return delete n[e.key],{children:n}})))},i.render=function(){var t=this.props,n=t.component,i=t.childFactory,r=(0,xt.Z)(t,["component","childFactory"]),a=this.state.contextValue,o=fr(this.state.children).map(i);return delete r.appear,delete r.enter,delete r.exit,null===n?e.createElement(kt.Provider,{value:a},o):e.createElement(kt.Provider,{value:a},e.createElement(n,r,o))},n}(e.Component);mr.propTypes={},mr.defaultProps={component:"div",childFactory:function(e){return e}};var vr=mr,yr="undefined"===typeof window?e.useEffect:e.useLayoutEffect;var gr=function(t){var n=t.classes,i=t.pulsate,r=void 0!==i&&i,a=t.rippleX,o=t.rippleY,s=t.rippleSize,l=t.in,u=t.onExited,c=void 0===u?function(){}:u,h=t.timeout,d=e.useState(!1),p=d[0],f=d[1],m=(0,P.Z)(n.ripple,n.rippleVisible,r&&n.ripplePulsate),v={width:s,height:s,top:-s/2+o,left:-s/2+a},y=(0,P.Z)(n.child,p&&n.childLeaving,r&&n.childPulsate),g=(0,In.Z)(c);return yr((function(){if(!l){f(!0);var e=setTimeout(g,h);return function(){clearTimeout(e)}}}),[g,l,h]),e.createElement("span",{className:m,style:v},e.createElement("span",{className:y}))},_r=e.forwardRef((function(t,n){var i=t.center,r=void 0!==i&&i,a=t.classes,o=t.className,s=(0,_.Z)(t,["center","classes","className"]),l=e.useState([]),u=l[0],c=l[1],h=e.useRef(0),d=e.useRef(null);e.useEffect((function(){d.current&&(d.current(),d.current=null)}),[u]);var f=e.useRef(!1),m=e.useRef(null),v=e.useRef(null),y=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(m.current)}}),[]);var g=e.useCallback((function(t){var n=t.pulsate,i=t.rippleX,r=t.rippleY,o=t.rippleSize,s=t.cb;c((function(t){return[].concat((0,Zt.Z)(t),[e.createElement(gr,{key:h.current,classes:a,timeout:550,pulsate:n,rippleX:i,rippleY:r,rippleSize:o})])})),h.current+=1,d.current=s}),[a]),x=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t.pulsate,a=void 0!==i&&i,o=t.center,s=void 0===o?r||t.pulsate:o,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&f.current)f.current=!1;else{"touchstart"===e.type&&(f.current=!0);var c,h,d,p=u?null:y.current,_=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(_.width/2),h=Math.round(_.height/2);else{var x=e.touches?e.touches[0]:e,b=x.clientX,w=x.clientY;c=Math.round(b-_.left),h=Math.round(w-_.top)}if(s)(d=Math.sqrt((2*Math.pow(_.width,2)+Math.pow(_.height,2))/3))%2===0&&(d+=1);else{var k=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,S=2*Math.max(Math.abs((p?p.clientHeight:0)-h),h)+2;d=Math.sqrt(Math.pow(k,2)+Math.pow(S,2))}e.touches?null===v.current&&(v.current=function(){g({pulsate:a,rippleX:c,rippleY:h,rippleSize:d,cb:n})},m.current=setTimeout((function(){v.current&&(v.current(),v.current=null)}),80)):g({pulsate:a,rippleX:c,rippleY:h,rippleSize:d,cb:n})}}),[r,g]),b=e.useCallback((function(){x({},{pulsate:!0})}),[x]),w=e.useCallback((function(e,t){if(clearTimeout(m.current),"touchend"===e.type&&v.current)return e.persist(),v.current(),v.current=null,void(m.current=setTimeout((function(){w(e,t)})));v.current=null,c((function(e){return e.length>0?e.slice(1):e})),d.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:b,start:x,stop:w}}),[b,x,w]),e.createElement("span",(0,p.Z)({className:(0,P.Z)(a.root,o),ref:y},s),e.createElement(vr,{component:null,exit:!0},u))})),xr=(0,g.Z)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(e.memo(_r)),br=e.forwardRef((function(t,n){var i=t.action,r=t.buttonRef,a=t.centerRipple,o=void 0!==a&&a,s=t.children,l=t.classes,u=t.className,c=t.component,h=void 0===c?"button":c,d=t.disabled,f=void 0!==d&&d,m=t.disableRipple,v=void 0!==m&&m,y=t.disableTouchRipple,g=void 0!==y&&y,x=t.focusRipple,b=void 0!==x&&x,w=t.focusVisibleClassName,k=t.onBlur,S=t.onClick,T=t.onFocus,C=t.onFocusVisible,E=t.onKeyDown,M=t.onKeyUp,A=t.onMouseDown,D=t.onMouseLeave,I=t.onMouseUp,L=t.onTouchEnd,O=t.onTouchMove,z=t.onTouchStart,R=t.onDragLeave,B=t.tabIndex,F=void 0===B?0:B,N=t.TouchRippleProps,j=t.type,U=void 0===j?"button":j,V=(0,_.Z)(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),Z=e.useRef(null);var W=e.useRef(null),G=e.useState(!1),Y=G[0],H=G[1];f&&Y&&H(!1);var X=(0,cr.Z)(),q=X.isFocusVisible,K=X.onBlurVisible,$=X.ref;function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return(0,In.Z)((function(i){return t&&t(i),!n&&W.current&&W.current[e](i),!0}))}e.useImperativeHandle(i,(function(){return{focusVisible:function(){H(!0),Z.current.focus()}}}),[]),e.useEffect((function(){Y&&b&&!v&&W.current.pulsate()}),[v,b,Y]);var J=Q("start",A),ee=Q("stop",R),te=Q("stop",I),ne=Q("stop",(function(e){Y&&e.preventDefault(),D&&D(e)})),ie=Q("start",z),re=Q("stop",L),ae=Q("stop",O),oe=Q("stop",(function(e){Y&&(K(e),H(!1)),k&&k(e)}),!1),se=(0,In.Z)((function(e){Z.current||(Z.current=e.currentTarget),q(e)&&(H(!0),C&&C(e)),T&&T(e)})),le=function(){var e=Le.findDOMNode(Z.current);return h&&"button"!==h&&!("A"===e.tagName&&e.href)},ue=e.useRef(!1),ce=(0,In.Z)((function(e){b&&!ue.current&&Y&&W.current&&" "===e.key&&(ue.current=!0,e.persist(),W.current.stop(e,(function(){W.current.start(e)}))),e.target===e.currentTarget&&le()&&" "===e.key&&e.preventDefault(),E&&E(e),e.target===e.currentTarget&&le()&&"Enter"===e.key&&!f&&(e.preventDefault(),S&&S(e))})),he=(0,In.Z)((function(e){b&&" "===e.key&&W.current&&Y&&!e.defaultPrevented&&(ue.current=!1,e.persist(),W.current.stop(e,(function(){W.current.pulsate(e)}))),M&&M(e),S&&e.target===e.currentTarget&&le()&&" "===e.key&&!e.defaultPrevented&&S(e)})),de=h;"button"===de&&V.href&&(de="a");var pe={};"button"===de?(pe.type=U,pe.disabled=f):("a"===de&&V.href||(pe.role="button"),pe["aria-disabled"]=f);var fe=(0,zt.Z)(r,n),me=(0,zt.Z)($,Z),ve=(0,zt.Z)(fe,me),ye=e.useState(!1),ge=ye[0],_e=ye[1];e.useEffect((function(){_e(!0)}),[]);var xe=ge&&!v&&!f;return e.createElement(de,(0,p.Z)({className:(0,P.Z)(l.root,u,Y&&[l.focusVisible,w],f&&l.disabled),onBlur:oe,onClick:S,onFocus:se,onKeyDown:ce,onKeyUp:he,onMouseDown:J,onMouseLeave:ne,onMouseUp:te,onDragLeave:ee,onTouchEnd:re,onTouchMove:ae,onTouchStart:ie,ref:ve,tabIndex:f?-1:F},pe,V),s,xe?e.createElement(xr,(0,p.Z)({ref:W,center:o},N)):null)})),wr=(0,g.Z)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(br),kr="undefined"===typeof window?e.useEffect:e.useLayoutEffect,Sr=e.forwardRef((function(t,n){var i=t.alignItems,r=void 0===i?"center":i,a=t.autoFocus,o=void 0!==a&&a,s=t.button,l=void 0!==s&&s,u=t.children,c=t.classes,h=t.className,d=t.component,f=t.ContainerComponent,m=void 0===f?"li":f,v=t.ContainerProps,y=(v=void 0===v?{}:v).className,g=(0,_.Z)(v,["className"]),x=t.dense,b=void 0!==x&&x,w=t.disabled,k=void 0!==w&&w,S=t.disableGutters,T=void 0!==S&&S,C=t.divider,E=void 0!==C&&C,M=t.focusVisibleClassName,A=t.selected,D=void 0!==A&&A,I=(0,_.Z)(t,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),L=e.useContext(ai),O={dense:b||L.dense||!1,alignItems:r},z=e.useRef(null);kr((function(){o&&z.current&&z.current.focus()}),[o]);var R=e.Children.toArray(u),B=R.length&&(0,ir.Z)(R[R.length-1],["ListItemSecondaryAction"]),F=e.useCallback((function(e){z.current=Le.findDOMNode(e)}),[]),N=(0,zt.Z)(F,n),j=(0,p.Z)({className:(0,P.Z)(c.root,h,O.dense&&c.dense,!T&&c.gutters,E&&c.divider,k&&c.disabled,l&&c.button,"center"!==r&&c.alignItemsFlexStart,B&&c.secondaryAction,D&&c.selected),disabled:k},I),U=d||"li";return l&&(j.component=d||"div",j.focusVisibleClassName=(0,P.Z)(c.focusVisible,M),U=wr),B?(U=j.component||d?U:"div","li"===m&&("li"===U?U="div":"li"===j.component&&(j.component="div")),e.createElement(ai.Provider,{value:O},e.createElement(m,(0,p.Z)({className:(0,P.Z)(c.container,y),ref:N},g),e.createElement(U,j,R),R.pop()))):e.createElement(ai.Provider,{value:O},e.createElement(U,(0,p.Z)({ref:N},j),R))})),Tr=(0,g.Z)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(Sr),Cr=e.forwardRef((function(t,n){var i,r=t.classes,a=t.className,o=t.component,s=void 0===o?"li":o,l=t.disableGutters,u=void 0!==l&&l,c=t.ListItemClasses,h=t.role,d=void 0===h?"menuitem":h,f=t.selected,m=t.tabIndex,v=(0,_.Z)(t,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return t.disabled||(i=void 0!==m?m:-1),e.createElement(Tr,(0,p.Z)({button:!0,role:d,tabIndex:i,component:s,selected:f,disableGutters:u,classes:(0,p.Z)({dense:r.dense},c),className:(0,P.Z)(r.root,a,f&&r.selected,!u&&r.gutters),ref:n},v))})),Er=(0,g.Z)((function(e){return{root:(0,p.Z)({},e.typography.body1,(0,C.Z)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:(0,p.Z)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(Cr),Mr=function(e,t){return t[e]},Pr=(0,g.Z)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:180,maxWidth:180},menuPaper:{maxHeight:190,backgroundColor:T.Z[600],color:"#ffffff"}}}))((function(e){var t=e.classes;return(0,Ze.jsx)("form",{className:t.root,autoComplete:"off",children:(0,Ze.jsxs)(ar,{className:t.formControl,children:[(0,Ze.jsx)(ur,{htmlFor:"soilcapacity",children:"Soil Water Capacity"}),(0,Ze.jsx)(nr,{value:e.value,onChange:e.onchange,margin:"none",MenuProps:{classes:{paper:t.menuPaper}},inputProps:{name:"soilcapacity",id:"soilcapacity"},children:e.values&&e.values.map((function(t,n){return(0,Ze.jsx)(Er,{value:t,children:Mr(t,e.labels)},n)}))})]})})})),Ar=function(e,t){return t[e]},Dr=(0,g.Z)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{minWidth:180,maxWidth:180},menuPaper:{maxHeight:190,backgroundColor:T.Z[600],color:"#ffffff"}}}))((function(e){var t=e.classes;return(0,Ze.jsx)("form",{className:t.root,autoComplete:"off",children:(0,Ze.jsxs)(ar,{className:t.formControl,children:[(0,Ze.jsx)(ur,{htmlFor:"croptype",children:"Crop Type"}),(0,Ze.jsx)(nr,{value:e.value,onChange:e.onchange,margin:"none",MenuProps:{classes:{paper:t.menuPaper}},inputProps:{name:"croptype",id:"croptype"},children:e.values&&e.values.map((function(t,n){return(0,Ze.jsx)(Er,{value:t,children:Ar(t,e.labels)},n)}))})]})})}));function Ir(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Lr(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Or(e){Lr(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function zr(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}function Rr(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var r=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+i+1,0);var o=a.getDate();return r>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function Br(e,t){Lr(2,arguments);var n=Ir(t);return Rr(e,12*n)}function Fr(e){Lr(1,arguments);var t=Or(e);return t.setHours(23,59,59,999),t}function Nr(e,t){Lr(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,a=null==r?0:Ir(r),o=null==n.weekStartsOn?a:Ir(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Or(e),l=s.getDay(),u=6+(l<o?-7:0)-(l-o);return s.setDate(s.getDate()+u),s.setHours(23,59,59,999),s}function jr(e){Lr(1,arguments);var t=Or(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function Ur(e){return Lr(1,arguments),e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Vr(e){if(Lr(1,arguments),!Ur(e)&&"number"!==typeof e)return!1;var t=Or(e);return!isNaN(Number(t))}var Zr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wr=function(e,t,n){var i,r=Zr[e];return i="string"===typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Gr(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,i=e.formats[n]||e.formats[e.defaultWidth];return i}}var Yr={date:Gr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Gr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Gr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Hr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xr=function(e,t,n,i){return Hr[e]};function qr(e){return function(t,n){var i,r=n||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=r.width?String(r.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,l=r.width?String(r.width):e.defaultWidth;i=e.values[l]||e.values[s]}return i[e.argumentCallback?e.argumentCallback(t):t]}}var Kr={ordinalNumber:function(e,t){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:qr({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:qr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:qr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:qr({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:qr({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function $r(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.width,r=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(r);if(!a)return null;var o,s=a[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Jr(l,(function(e){return e.test(s)})):Qr(l,(function(e){return e.test(s)}));o=e.valueCallback?e.valueCallback(u):u,o=n.valueCallback?n.valueCallback(o):o;var c=t.slice(s.length);return{value:o,rest:c}}}function Qr(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function Jr(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var ea,ta={ordinalNumber:(ea={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(ea.matchPattern);if(!n)return null;var i=n[0],r=e.match(ea.parsePattern);if(!r)return null;var a=ea.valueCallback?ea.valueCallback(r[0]):r[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(i.length);return{value:a,rest:o}}),era:$r({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:$r({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:$r({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:$r({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:$r({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},na={code:"en-US",formatDistance:Wr,formatLong:Yr,formatRelative:Xr,localize:Kr,match:ta,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ia(e,t){Lr(2,arguments);var n=Or(e).getTime(),i=Ir(t);return new Date(n+i)}function ra(e,t){Lr(2,arguments);var n=Ir(t);return ia(e,-n)}var aa=864e5;function oa(e){Lr(1,arguments);var t=1,n=Or(e),i=n.getUTCDay(),r=(i<t?7:0)+i-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function sa(e){Lr(1,arguments);var t=Or(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var r=oa(i),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=oa(a);return t.getTime()>=r.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function la(e){Lr(1,arguments);var t=sa(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var i=oa(n);return i}var ua=6048e5;function ca(e){Lr(1,arguments);var t=Or(e),n=oa(t).getTime()-la(t).getTime();return Math.round(n/ua)+1}function ha(e,t){Lr(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,a=null==r?0:Ir(r),o=null==n.weekStartsOn?a:Ir(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Or(e),l=s.getUTCDay(),u=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function da(e,t){Lr(1,arguments);var n=Or(e),i=n.getUTCFullYear(),r=t||{},a=r.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=null==o?1:Ir(o),l=null==r.firstWeekContainsDate?s:Ir(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(i+1,0,l),u.setUTCHours(0,0,0,0);var c=ha(u,t),h=new Date(0);h.setUTCFullYear(i,0,l),h.setUTCHours(0,0,0,0);var d=ha(h,t);return n.getTime()>=c.getTime()?i+1:n.getTime()>=d.getTime()?i:i-1}function pa(e,t){Lr(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.firstWeekContainsDate,a=null==r?1:Ir(r),o=null==n.firstWeekContainsDate?a:Ir(n.firstWeekContainsDate),s=da(e,t),l=new Date(0);l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0);var u=ha(l,t);return u}var fa=6048e5;function ma(e,t){Lr(1,arguments);var n=Or(e),i=ha(n,t).getTime()-pa(n,t).getTime();return Math.round(i/fa)+1}function va(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}var ya={y:function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return va("yy"===t?i%100:i,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):va(n+1,2)},d:function(e,t){return va(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return va(e.getUTCHours()%12||12,t.length)},H:function(e,t){return va(e.getUTCHours(),t.length)},m:function(e,t){return va(e.getUTCMinutes(),t.length)},s:function(e,t){return va(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,i=e.getUTCMilliseconds();return va(Math.floor(i*Math.pow(10,n-3)),t.length)}},ga=ya,_a="midnight",xa="noon",ba="morning",wa="afternoon",ka="evening",Sa="night",Ta={G:function(e,t,n){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return ga.y(e,t)},Y:function(e,t,n,i){var r=da(e,i),a=r>0?r:1-r;return"YY"===t?va(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):va(a,t.length)},R:function(e,t){return va(sa(e),t.length)},u:function(e,t){return va(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return va(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return va(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return ga.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return va(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){var r=ma(e,i);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):va(r,t.length)},I:function(e,t,n){var i=ca(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):va(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):ga.d(e,t)},D:function(e,t,n){var i=function(e){Lr(1,arguments);var t=Or(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),r=n-i;return Math.floor(r/aa)+1}(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):va(i,t.length)},E:function(e,t,n){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){var r=e.getUTCDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return va(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){var r=e.getUTCDay(),a=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return va(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){var i=e.getUTCDay(),r=0===i?7:i;switch(t){case"i":return String(r);case"ii":return va(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var i,r=e.getUTCHours();switch(i=12===r?xa:0===r?_a:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){var i,r=e.getUTCHours();switch(i=r>=17?ka:r>=12?wa:r>=4?ba:Sa,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return ga.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ga.H(e,t)},K:function(e,t,n){var i=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):va(i,t.length)},k:function(e,t,n){var i=e.getUTCHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):va(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ga.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ga.s(e,t)},S:function(e,t){return ga.S(e,t)},X:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Ea(r);case"XXXX":case"XX":return Ma(r);default:return Ma(r,":")}},x:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"x":return Ea(r);case"xxxx":case"xx":return Ma(r);default:return Ma(r,":")}},O:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ca(r,":");default:return"GMT"+Ma(r,":")}},z:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ca(r,":");default:return"GMT"+Ma(r,":")}},t:function(e,t,n,i){var r=i._originalDate||e;return va(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,n,i){return va((i._originalDate||e).getTime(),t.length)}};function Ca(e,t){var n=e>0?"-":"+",i=Math.abs(e),r=Math.floor(i/60),a=i%60;if(0===a)return n+String(r);var o=t||"";return n+String(r)+o+va(a,2)}function Ea(e,t){return e%60===0?(e>0?"-":"+")+va(Math.abs(e)/60,2):Ma(e,t)}function Ma(e,t){var n=t||"",i=e>0?"-":"+",r=Math.abs(e);return i+va(Math.floor(r/60),2)+n+va(r%60,2)}var Pa=Ta;function Aa(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function Da(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var Ia={p:Da,P:function(e,t){var n,i=e.match(/(P+)(p+)?/)||[],r=i[1],a=i[2];if(!a)return Aa(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Aa(r,t)).replace("{{time}}",Da(a,t))}},La=Ia;function Oa(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var za=["D","DD"],Ra=["YY","YYYY"];function Ba(e){return-1!==za.indexOf(e)}function Fa(e){return-1!==Ra.indexOf(e)}function Na(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var ja=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ua=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Va=/^'([^]*?)'?$/,Za=/''/g,Wa=/[a-zA-Z]/;function Ga(e){return e.match(Va)[1].replace(Za,"'")}function Ya(e,t){Lr(2,arguments);var n=Or(e),i=Or(t);return n.getTime()>i.getTime()}function Ha(e,t){Lr(2,arguments);var n=Or(e),i=Or(t);return n.getTime()<i.getTime()}function Xa(e){Lr(1,arguments);var t=Or(e);return t.setHours(0,0,0,0),t}function qa(e){Lr(1,arguments);var t=Or(e);return t.setMinutes(0,0,0),t}function Ka(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function $a(e,t,n){Lr(2,arguments);var i=n||{},r=i.locale,a=r&&r.options&&r.options.weekStartsOn,o=null==a?0:Ir(a),s=null==i.weekStartsOn?o:Ir(i.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=Or(e),u=Ir(t),c=l.getUTCDay(),h=u%7,d=(h+7)%7,p=(d<s?7:0)+u-c;return l.setUTCDate(l.getUTCDate()+p),l}var Qa=/^(1[0-2]|0?\d)/,Ja=/^(3[0-1]|[0-2]?\d)/,eo=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,to=/^(5[0-3]|[0-4]?\d)/,no=/^(2[0-3]|[0-1]?\d)/,io=/^(2[0-4]|[0-1]?\d)/,ro=/^(1[0-1]|0?\d)/,ao=/^(1[0-2]|0?\d)/,oo=/^[0-5]?\d/,so=/^[0-5]?\d/,lo=/^\d/,uo=/^\d{1,2}/,co=/^\d{1,3}/,ho=/^\d{1,4}/,po=/^-?\d+/,fo=/^-?\d/,mo=/^-?\d{1,2}/,vo=/^-?\d{1,3}/,yo=/^-?\d{1,4}/,go=/^([+-])(\d{2})(\d{2})?|Z/,_o=/^([+-])(\d{2})(\d{2})|Z/,xo=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,bo=/^([+-])(\d{2}):(\d{2})|Z/,wo=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ko(e,t,n){var i=t.match(e);if(!i)return null;var r=parseInt(i[0],10);return{value:n?n(r):r,rest:t.slice(i[0].length)}}function So(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function To(e,t){return ko(po,e,t)}function Co(e,t,n){switch(e){case 1:return ko(lo,t,n);case 2:return ko(uo,t,n);case 3:return ko(co,t,n);case 4:return ko(ho,t,n);default:return ko(new RegExp("^\\d{1,"+e+"}"),t,n)}}function Eo(e,t,n){switch(e){case 1:return ko(fo,t,n);case 2:return ko(mo,t,n);case 3:return ko(vo,t,n);case 4:return ko(yo,t,n);default:return ko(new RegExp("^-?\\d{1,"+e+"}"),t,n)}}function Mo(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Po(e,t){var n,i=t>0,r=i?t:1-t;if(r<=50)n=e||100;else{var a=r+50;n=e+100*Math.floor(a/100)-(e>=a%100?100:0)}return i?n:1-n}var Ao=[31,28,31,30,31,30,31,31,30,31,30,31],Do=[31,29,31,30,31,30,31,31,30,31,30,31];function Io(e){return e%400===0||e%4===0&&e%100!==0}var Lo={G:{priority:140,parse:function(e,t,n,i){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}},set:function(e,t,n,i){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,n,i){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Co(4,e,r);case"yo":return n.ordinalNumber(e,{unit:"year",valueCallback:r});default:return Co(t.length,e,r)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,i){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var a=Po(n.year,r);return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,n,i){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Co(4,e,r);case"Yo":return n.ordinalNumber(e,{unit:"year",valueCallback:r});default:return Co(t.length,e,r)}},validate:function(e,t,n){return t.isTwoDigitYear||t.year>0},set:function(e,t,n,i){var r=da(e,i);if(n.isTwoDigitYear){var a=Po(n.year,r);return e.setUTCFullYear(a,0,i.firstWeekContainsDate),e.setUTCHours(0,0,0,0),ha(e,i)}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,i.firstWeekContainsDate),e.setUTCHours(0,0,0,0),ha(e,i)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,n,i){return Eo("R"===t?4:t.length,e)},set:function(e,t,n,i){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),oa(r)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,n,i){return Eo("u"===t?4:t.length,e)},set:function(e,t,n,i){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,n,i){switch(t){case"Q":case"QQ":return Co(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,i){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,n,i){switch(t){case"q":case"qq":return Co(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=1&&t<=4},set:function(e,t,n,i){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,n,i){var r=function(e){return e-1};switch(t){case"M":return ko(Qa,e,r);case"MM":return Co(2,e,r);case"Mo":return n.ordinalNumber(e,{unit:"month",valueCallback:r});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,i){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,n,i){var r=function(e){return e-1};switch(t){case"L":return ko(Qa,e,r);case"LL":return Co(2,e,r);case"Lo":return n.ordinalNumber(e,{unit:"month",valueCallback:r});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,i){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,n,i){switch(t){case"w":return ko(to,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,i){return ha(function(e,t,n){Lr(2,arguments);var i=Or(e),r=Ir(t),a=ma(i,n)-r;return i.setUTCDate(i.getUTCDate()-7*a),i}(e,n,i),i)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,n,i){switch(t){case"I":return ko(to,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=53},set:function(e,t,n,i){return oa(function(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t),r=ca(n)-i;return n.setUTCDate(n.getUTCDate()-7*r),n}(e,n,i),i)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,n,i){switch(t){case"d":return ko(Ja,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Co(t.length,e)}},validate:function(e,t,n){var i=Io(e.getUTCFullYear()),r=e.getUTCMonth();return i?t>=1&&t<=Do[r]:t>=1&&t<=Ao[r]},set:function(e,t,n,i){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,n,i){switch(t){case"D":case"DD":return ko(eo,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Co(t.length,e)}},validate:function(e,t,n){return Io(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,n,i){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,n,i){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,i){return(e=$a(e,n,i)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,n,i){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+i.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Co(t.length,e,r);case"eo":return n.ordinalNumber(e,{unit:"day",valueCallback:r});case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,i){return(e=$a(e,n,i)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,n,i){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+i.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Co(t.length,e,r);case"co":return n.ordinalNumber(e,{unit:"day",valueCallback:r});case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,n){return t>=0&&t<=6},set:function(e,t,n,i){return(e=$a(e,n,i)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,n,i){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Co(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiii":return n.day(e,{width:"narrow",context:"formatting",valueCallback:r});case"iiiiii":return n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r});default:return n.day(e,{width:"wide",context:"formatting",valueCallback:r})||n.day(e,{width:"abbreviated",context:"formatting",valueCallback:r})||n.day(e,{width:"short",context:"formatting",valueCallback:r})||n.day(e,{width:"narrow",context:"formatting",valueCallback:r})}},validate:function(e,t,n){return t>=1&&t<=7},set:function(e,t,n,i){return e=function(e,t){Lr(2,arguments);var n=Ir(t);n%7===0&&(n-=7);var i=1,r=Or(e),a=r.getUTCDay(),o=((n%7+7)%7<i?7:0)+n-a;return r.setUTCDate(r.getUTCDate()+o),r}(e,n,i),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,n,i){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,i){return e.setUTCHours(Mo(n),0,0,0),e},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(e,t,n,i){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,i){return e.setUTCHours(Mo(n),0,0,0),e},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(e,t,n,i){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,n,i){return e.setUTCHours(Mo(n),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,n,i){switch(t){case"h":return ko(ao,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=12},set:function(e,t,n,i){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,n,i){switch(t){case"H":return ko(no,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=23},set:function(e,t,n,i){return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,n,i){switch(t){case"K":return ko(ro,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=11},set:function(e,t,n,i){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(e,t,n,i){switch(t){case"k":return ko(io,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=1&&t<=24},set:function(e,t,n,i){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,n,i){switch(t){case"m":return ko(oo,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,i){return e.setUTCMinutes(n,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,n,i){switch(t){case"s":return ko(so,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Co(t.length,e)}},validate:function(e,t,n){return t>=0&&t<=59},set:function(e,t,n,i){return e.setUTCSeconds(n,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,n,i){return Co(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,n,i){return e.setUTCMilliseconds(n),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,n,i){switch(t){case"X":return So(go,e);case"XX":return So(_o,e);case"XXXX":return So(xo,e);case"XXXXX":return So(wo,e);default:return So(bo,e)}},set:function(e,t,n,i){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,n,i){switch(t){case"x":return So(go,e);case"xx":return So(_o,e);case"xxxx":return So(xo,e);case"xxxxx":return So(wo,e);default:return So(bo,e)}},set:function(e,t,n,i){return t.timestampIsSet?e:new Date(e.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,n,i){return To(e)},set:function(e,t,n,i){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,n,i){return To(e)},set:function(e,t,n,i){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},Oo=Lo,zo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ro=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Bo=/^'([^]*?)'?$/,Fo=/''/g,No=/\S/,jo=/[a-zA-Z]/;function Uo(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}function Vo(e){return e.match(Bo)[1].replace(Fo,"'")}function Zo(e){Lr(1,arguments);var t=Or(e),n=t.getFullYear(),i=t.getMonth(),r=new Date(0);return r.setFullYear(n,i+1,0),r.setHours(0,0,0,0),r.getDate()}function Wo(e){Lr(1,arguments);var t=Or(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Go(e){Lr(1,arguments);var t=Or(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Yo(e,t){Lr(1,arguments);var n=t||{},i=n.locale,r=i&&i.options&&i.options.weekStartsOn,a=null==r?0:Ir(r),o=null==n.weekStartsOn?a:Ir(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=Or(e),l=s.getDay(),u=(l<o?7:0)+l-o;return s.setDate(s.getDate()-u),s.setHours(0,0,0,0),s}function Ho(e){Lr(1,arguments);var t=Or(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}var Xo=function(){function e(e){var t=(void 0===e?{}:e).locale;this.yearFormat="yyyy",this.yearMonthFormat="MMMM yyyy",this.dateTime12hFormat="MMMM do hh:mm aaaa",this.dateTime24hFormat="MMMM do HH:mm",this.time12hFormat="hh:mm a",this.time24hFormat="HH:mm",this.dateFormat="MMMM do",this.locale=t}return e.prototype.addDays=function(e,t){return zr(e,t)},e.prototype.isValid=function(e){return Vr(this.date(e))},e.prototype.getDiff=function(e,t){return function(e,t){return Lr(2,arguments),Or(e).getTime()-Or(t).getTime()}(e,this.date(t))},e.prototype.isAfter=function(e,t){return Ya(e,t)},e.prototype.isBefore=function(e,t){return Ha(e,t)},e.prototype.startOfDay=function(e){return Xa(e)},e.prototype.endOfDay=function(e){return Fr(e)},e.prototype.getHours=function(e){return function(e){return Lr(1,arguments),Or(e).getHours()}(e)},e.prototype.setHours=function(e,t){return function(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t);return n.setHours(i),n}(e,t)},e.prototype.setMinutes=function(e,t){return function(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t);return n.setMinutes(i),n}(e,t)},e.prototype.getSeconds=function(e){return function(e){return Lr(1,arguments),Or(e).getSeconds()}(e)},e.prototype.setSeconds=function(e,t){return function(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t);return n.setSeconds(i),n}(e,t)},e.prototype.isSameDay=function(e,t){return function(e,t){Lr(2,arguments);var n=Xa(e),i=Xa(t);return n.getTime()===i.getTime()}(e,t)},e.prototype.isSameMonth=function(e,t){return function(e,t){Lr(2,arguments);var n=Or(e),i=Or(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}(e,t)},e.prototype.isSameYear=function(e,t){return function(e,t){Lr(2,arguments);var n=Or(e),i=Or(t);return n.getFullYear()===i.getFullYear()}(e,t)},e.prototype.isSameHour=function(e,t){return function(e,t){Lr(2,arguments);var n=qa(e),i=qa(t);return n.getTime()===i.getTime()}(e,t)},e.prototype.startOfMonth=function(e){return Wo(e)},e.prototype.endOfMonth=function(e){return Go(e)},e.prototype.getYear=function(e){return function(e){return Lr(1,arguments),Or(e).getFullYear()}(e)},e.prototype.setYear=function(e,t){return function(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(i),n)}(e,t)},e.prototype.date=function(e){return"undefined"===typeof e?new Date:null===e?null:new Date(e)},e.prototype.parse=function(e,t){return""===e?null:function(e,t,n,i){Lr(3,arguments);var r=String(e),a=String(t),o=i||{},s=o.locale||na;if(!s.match)throw new RangeError("locale must contain match property");var l=s.options&&s.options.firstWeekContainsDate,u=null==l?1:Ir(l),c=null==o.firstWeekContainsDate?u:Ir(o.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=s.options&&s.options.weekStartsOn,d=null==h?0:Ir(h),p=null==o.weekStartsOn?d:Ir(o.weekStartsOn);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===a)return""===r?Or(n):new Date(NaN);var f,m={firstWeekContainsDate:c,weekStartsOn:p,locale:s},v=[{priority:10,subPriority:-1,set:Uo,index:0}],y=a.match(Ro).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,La[t])(e,s.formatLong,m):e})).join("").match(zo),g=[];for(f=0;f<y.length;f++){var _=y[f];!o.useAdditionalWeekYearTokens&&Fa(_)&&Na(_,a,e),!o.useAdditionalDayOfYearTokens&&Ba(_)&&Na(_,a,e);var x=_[0],b=Oo[x];if(b){var w=b.incompatibleTokens;if(Array.isArray(w)){for(var k=void 0,S=0;S<g.length;S++){var T=g[S].token;if(-1!==w.indexOf(T)||T===x){k=g[S];break}}if(k)throw new RangeError("The format string mustn't contain `".concat(k.fullToken,"` and `").concat(_,"` at the same time"))}else if("*"===b.incompatibleTokens&&g.length)throw new RangeError("The format string mustn't contain `".concat(_,"` and any other token at the same time"));g.push({token:x,fullToken:_});var C=b.parse(r,_,s.match,m);if(!C)return new Date(NaN);v.push({priority:b.priority,subPriority:b.subPriority||0,set:b.set,validate:b.validate,value:C.value,index:v.length}),r=C.rest}else{if(x.match(jo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if("''"===_?_="'":"'"===x&&(_=Vo(_)),0!==r.indexOf(_))return new Date(NaN);r=r.slice(_.length)}}if(r.length>0&&No.test(r))return new Date(NaN);var E=v.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return v.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),M=Or(n);if(isNaN(M))return new Date(NaN);var P=ra(M,Oa(M)),A={};for(f=0;f<E.length;f++){var D=E[f];if(D.validate&&!D.validate(P,D.value,m))return new Date(NaN);var I=D.set(P,A,D.value,m);I[0]?(P=I[0],Ka(A,I[1])):P=I}return P}(e,t,new Date,{locale:this.locale})},e.prototype.format=function(e,t){return function(e,t,n){Lr(2,arguments);var i=String(t),r=n||{},a=r.locale||na,o=a.options&&a.options.firstWeekContainsDate,s=null==o?1:Ir(o),l=null==r.firstWeekContainsDate?s:Ir(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=a.options&&a.options.weekStartsOn,c=null==u?0:Ir(u),h=null==r.weekStartsOn?c:Ir(r.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var d=Or(e);if(!Vr(d))throw new RangeError("Invalid time value");var p=Oa(d),f=ra(d,p),m={firstWeekContainsDate:l,weekStartsOn:h,locale:a,_originalDate:d};return i.match(Ua).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,La[t])(e,a.formatLong,m):e})).join("").match(ja).map((function(n){if("''"===n)return"'";var i=n[0];if("'"===i)return Ga(n);var o=Pa[i];if(o)return!r.useAdditionalWeekYearTokens&&Fa(n)&&Na(n,t,e),!r.useAdditionalDayOfYearTokens&&Ba(n)&&Na(n,t,e),o(f,n,a.localize,m);if(i.match(Wa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return n})).join("")}(e,t,{locale:this.locale})},e.prototype.isEqual=function(e,t){return null===e&&null===t||function(e,t){Lr(2,arguments);var n=Or(e),i=Or(t);return n.getTime()===i.getTime()}(e,t)},e.prototype.isNull=function(e){return null===e},e.prototype.isAfterDay=function(e,t){return Ya(e,Fr(t))},e.prototype.isBeforeDay=function(e,t){return Ha(e,Xa(t))},e.prototype.isBeforeYear=function(e,t){return Ha(e,Ho(t))},e.prototype.isAfterYear=function(e,t){return Ya(e,jr(t))},e.prototype.formatNumber=function(e){return e},e.prototype.getMinutes=function(e){return e.getMinutes()},e.prototype.getMonth=function(e){return e.getMonth()},e.prototype.setMonth=function(e,t){return function(e,t){Lr(2,arguments);var n=Or(e),i=Ir(t),r=n.getFullYear(),a=n.getDate(),o=new Date(0);o.setFullYear(r,i,15),o.setHours(0,0,0,0);var s=Zo(o);return n.setMonth(i,Math.min(a,s)),n}(e,t)},e.prototype.getMeridiemText=function(e){return"am"===e?"AM":"PM"},e.prototype.getNextMonth=function(e){return Rr(e,1)},e.prototype.getPreviousMonth=function(e){return Rr(e,-1)},e.prototype.getMonthArray=function(e){for(var t=[Ho(e)];t.length<12;){var n=t[t.length-1];t.push(this.getNextMonth(n))}return t},e.prototype.mergeDateAndTime=function(e,t){return this.setMinutes(this.setHours(e,this.getHours(t)),this.getMinutes(t))},e.prototype.getWeekdays=function(){var e=this,t=new Date;return function(e,t){Lr(1,arguments);var n=e||{},i=Or(n.start),r=Or(n.end).getTime();if(!(i.getTime()<=r))throw new RangeError("Invalid interval");var a=[],o=i;o.setHours(0,0,0,0);var s=t&&"step"in t?Number(t.step):1;if(s<1||isNaN(s))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=r;)a.push(Or(o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return a}({start:Yo(t,{locale:this.locale}),end:Nr(t,{locale:this.locale})}).map((function(t){return e.format(t,"EEEEEE")}))},e.prototype.getWeekArray=function(e){for(var t=Yo(Wo(e),{locale:this.locale}),n=Nr(Go(e),{locale:this.locale}),i=0,r=t,a=[];Ha(r,n);){var o=Math.floor(i/7);a[o]=a[o]||[],a[o].push(r),r=zr(r,1),i+=1}return a},e.prototype.getYearRange=function(e,t){for(var n=Ho(e),i=jr(t),r=[],a=n;Ha(a,i);)r.push(a),a=Br(a,1);return r},e.prototype.getCalendarHeaderText=function(e){return this.format(e,this.yearMonthFormat)},e.prototype.getYearText=function(e){return this.format(e,"yyyy")},e.prototype.getDatePickerHeaderText=function(e){return this.format(e,"EEE, MMM d")},e.prototype.getDateTimePickerHeaderText=function(e){return this.format(e,"MMM d")},e.prototype.getMonthText=function(e){return this.format(e,"MMMM")},e.prototype.getDayText=function(e){return this.format(e,"d")},e.prototype.getHourText=function(e,t){return this.format(e,t?"hh":"HH")},e.prototype.getMinuteText=function(e){return this.format(e,"mm")},e.prototype.getSecondText=function(e){return this.format(e,"ss")},e}(),qo=Xo,Ko=(0,e.createContext)(null),$o=function(t){var n=t.utils,i=t.children,r=t.locale,a=t.libInstance,o=(0,e.useMemo)((function(){return new n({locale:r,instance:a})}),[n,a,r]);return(0,e.createElement)(Ko.Provider,{value:o,children:i})};function Qo(){var t=(0,e.useContext)(Ko);return function(e){if(!e)throw new Error("Can not find utils in context. You either a) forgot to wrap your component tree in MuiPickersUtilsProvider; or b) mixed named and direct file imports.  Recommendation: use named imports from the module index.")}(t),t}var Jo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,yn.Z)(e,(0,p.Z)({defaultTheme:k.Z},t))},es=n(3108);var ts=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.className,o=t.color,s=void 0===o?"default":o,l=t.component,u=void 0===l?"button":l,c=t.disabled,h=void 0!==c&&c,d=t.disableElevation,f=void 0!==d&&d,m=t.disableFocusRipple,v=void 0!==m&&m,y=t.endIcon,g=t.focusVisibleClassName,x=t.fullWidth,b=void 0!==x&&x,w=t.size,k=void 0===w?"medium":w,S=t.startIcon,T=t.type,C=void 0===T?"button":T,E=t.variant,M=void 0===E?"text":E,A=(0,_.Z)(t,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),D=S&&e.createElement("span",{className:(0,P.Z)(r.startIcon,r["iconSize".concat((0,R.Z)(k))])},S),I=y&&e.createElement("span",{className:(0,P.Z)(r.endIcon,r["iconSize".concat((0,R.Z)(k))])},y);return e.createElement(wr,(0,p.Z)({className:(0,P.Z)(r.root,r[M],a,"inherit"===s?r.colorInherit:"default"!==s&&r["".concat(M).concat((0,R.Z)(s))],"medium"!==k&&[r["".concat(M,"Size").concat((0,R.Z)(k))],r["size".concat((0,R.Z)(k))]],f&&r.disableElevation,h&&r.disabled,b&&r.fullWidth),component:u,disabled:h,focusRipple:!v,focusVisibleClassName:(0,P.Z)(r.focusVisible,g),ref:n,type:C},A),e.createElement("span",{className:r.label},D,i,I))})),ns=(0,g.Z)((function(e){return{root:(0,p.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,es.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat((0,es.Fq)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat((0,es.Fq)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(ts),is=e.forwardRef((function(t,n){var i=t.classes,r=t.className,a=t.component,o=void 0===a?"div":a,s=t.disableGutters,l=void 0!==s&&s,u=t.variant,c=void 0===u?"regular":u,h=(0,_.Z)(t,["classes","className","component","disableGutters","variant"]);return e.createElement(o,(0,p.Z)({className:(0,P.Z)(i.root,i[c],r,!l&&i.gutters),ref:n},h))})),rs=(0,g.Z)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:(0,C.Z)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(is),as=e.forwardRef((function(t,n){var i=t.disableSpacing,r=void 0!==i&&i,a=t.classes,o=t.className,s=(0,_.Z)(t,["disableSpacing","classes","className"]);return e.createElement("div",(0,p.Z)({className:(0,P.Z)(a.root,o,!r&&a.spacing),ref:n},s))})),os=(0,g.Z)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(as),ss=e.forwardRef((function(t,n){var i=t.classes,r=t.className,a=t.dividers,o=void 0!==a&&a,s=(0,_.Z)(t,["classes","className","dividers"]);return e.createElement("div",(0,p.Z)({className:(0,P.Z)(i.root,r,o&&i.dividers),ref:n},s))})),ls=(0,g.Z)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(ss),us={enter:It.x9.enteringScreen,exit:It.x9.leavingScreen},cs=e.forwardRef((function(t,n){var i=t.BackdropProps,r=t.children,a=t.classes,o=t.className,s=t.disableBackdropClick,l=void 0!==s&&s,u=t.disableEscapeKeyDown,c=void 0!==u&&u,h=t.fullScreen,d=void 0!==h&&h,f=t.fullWidth,m=void 0!==f&&f,v=t.maxWidth,y=void 0===v?"sm":v,g=t.onBackdropClick,x=t.onClose,b=t.onEnter,w=t.onEntered,k=t.onEntering,S=t.onEscapeKeyDown,T=t.onExit,C=t.onExited,E=t.onExiting,M=t.open,A=t.PaperComponent,D=void 0===A?Qn:A,I=t.PaperProps,L=void 0===I?{}:I,O=t.scroll,z=void 0===O?"paper":O,B=t.TransitionComponent,F=void 0===B?Nt:B,N=t.transitionDuration,j=void 0===N?us:N,U=t.TransitionProps,V=t["aria-describedby"],Z=t["aria-labelledby"],W=(0,_.Z)(t,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),G=e.useRef();return e.createElement(Yn,(0,p.Z)({className:(0,P.Z)(a.root,o),BackdropComponent:Ut,BackdropProps:(0,p.Z)({transitionDuration:j},i),closeAfterTransition:!0},l?{disableBackdropClick:l}:{},{disableEscapeKeyDown:c,onEscapeKeyDown:S,onClose:x,open:M,ref:n},W),e.createElement(F,(0,p.Z)({appear:!0,in:M,timeout:j,onEnter:b,onEntering:k,onEntered:w,onExit:T,onExiting:E,onExited:C,role:"none presentation"},U),e.createElement("div",{className:(0,P.Z)(a.container,a["scroll".concat((0,R.Z)(z))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===G.current&&(G.current=null,g&&g(e),!l&&x&&x(e,"backdropClick"))},onMouseDown:function(e){G.current=e.target}},e.createElement(D,(0,p.Z)({elevation:24,role:"dialog","aria-describedby":V,"aria-labelledby":Z},L,{className:(0,P.Z)(a.paper,a["paperScroll".concat((0,R.Z)(z))],a["paperWidth".concat((0,R.Z)(String(y)))],L.className,d&&a.paperFullScreen,m&&a.paperFullWidth)}),r))))})),hs=(0,g.Z)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":(0,C.Z)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":(0,C.Z)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":(0,C.Z)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":(0,C.Z)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":(0,C.Z)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(cs);function ds(e,t){return Array.isArray(t)?t.every((function(t){return-1!==e.indexOf(t)})):-1!==e.indexOf(t)}var ps=Jo((function(e){return{staticWrapperRoot:{overflow:"hidden",minWidth:310,display:"flex",flexDirection:"column",backgroundColor:e.palette.background.paper}}}),{name:"MuiPickersStaticWrapper"}),fs=function(t){var n=t.children,i=ps();return(0,e.createElement)("div",{className:i.staticWrapperRoot,children:n})},ms=function(t){var n=t.children,i=t.classes,r=t.onAccept,a=t.onDismiss,o=t.onClear,s=t.onSetToday,l=t.okLabel,u=t.cancelLabel,c=t.clearLabel,h=t.todayLabel,d=t.clearable,f=t.showTodayButton,m=(t.showTabs,t.wider),v=(0,_.Z)(t,["children","classes","onAccept","onDismiss","onClear","onSetToday","okLabel","cancelLabel","clearLabel","todayLabel","clearable","showTodayButton","showTabs","wider"]);return(0,e.createElement)(hs,(0,p.Z)({role:"dialog",onClose:a,classes:{paper:(0,P.Z)(i.dialogRoot,m&&i.dialogRootWider)}},v),(0,e.createElement)(ls,{children:n,className:i.dialog}),(0,e.createElement)(os,{classes:{root:(0,P.Z)((d||f)&&i.withAdditionalAction)}},d&&(0,e.createElement)(ns,{color:"primary",onClick:o},c),f&&(0,e.createElement)(ns,{color:"primary",onClick:s},h),u&&(0,e.createElement)(ns,{color:"primary",onClick:a},u),l&&(0,e.createElement)(ns,{color:"primary",onClick:r},l)))};ms.displayName="ModalDialog";var vs={dialogRoot:{minWidth:310},dialogRootWider:{minWidth:325},dialog:{"&:first-child":{padding:0}},withAdditionalAction:{justifyContent:"flex-start","& > *:first-child":{marginRight:"auto"}}},ys=(0,g.Z)(vs,{name:"MuiPickersModal"})(ms),gs="undefined"===typeof window?e.useEffect:e.useLayoutEffect;function _s(e,t){var n=t[e.key];n&&(n(),e.preventDefault())}function xs(t,n){var i=(0,e.useRef)(n);i.current=n,gs((function(){if(t){var e=function(e){_s(e,i.current)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[t])}var bs=function(t){var n=t.open,i=t.children,r=t.okLabel,a=t.cancelLabel,o=t.clearLabel,s=t.todayLabel,l=t.showTodayButton,u=t.clearable,c=t.DialogProps,h=t.showTabs,d=t.wider,f=t.InputComponent,m=t.DateInputProps,v=t.onClear,y=t.onAccept,g=t.onDismiss,x=t.onSetToday,b=(0,_.Z)(t,["open","children","okLabel","cancelLabel","clearLabel","todayLabel","showTodayButton","clearable","DialogProps","showTabs","wider","InputComponent","DateInputProps","onClear","onAccept","onDismiss","onSetToday"]);return xs(n,{Enter:y}),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(f,(0,p.Z)({},b,m)),(0,e.createElement)(ys,(0,p.Z)({wider:d,showTabs:h,open:n,onClear:v,onAccept:y,onDismiss:g,onSetToday:x,clearLabel:o,todayLabel:s,okLabel:r,cancelLabel:a,clearable:u,showTodayButton:l,children:i},c)))};bs.defaultProps={okLabel:"OK",cancelLabel:"Cancel",clearLabel:"Clear",todayLabel:"Today",clearable:!1,showTodayButton:!1};var ws=function(t){var n=t.open,i=(t.wider,t.children),r=t.PopoverProps,a=(t.onClear,t.onDismiss),o=(t.onSetToday,t.onAccept),s=(t.showTabs,t.DateInputProps),l=t.InputComponent,u=(0,_.Z)(t,["open","wider","children","PopoverProps","onClear","onDismiss","onSetToday","onAccept","showTabs","DateInputProps","InputComponent"]),c=(0,e.useRef)();return xs(n,{Enter:o}),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l,(0,p.Z)({},u,s,{inputRef:c})),(0,e.createElement)(ri,(0,p.Z)({open:n,onClose:a,anchorEl:c.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:i},r)))};var ks=(0,e.createContext)(null),Ss=function(t){var n=t.variant,i=(0,_.Z)(t,["variant"]),r=function(e){switch(e){case"inline":return ws;case"static":return fs;default:return bs}}(n);return(0,e.createElement)(ks.Provider,{value:n||"dialog"},(0,e.createElement)(r,i))},Ts=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.className,o=t.component,s=void 0===o?"p":o,l=(t.disabled,t.error,t.filled,t.focused,t.margin,t.required,t.variant,(0,_.Z)(t,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),u=Ti({props:t,muiFormControl:Pi(),states:["variant","margin","disabled","error","filled","focused","required"]});return e.createElement(s,(0,p.Z)({className:(0,P.Z)(r.root,("filled"===u.variant||"outlined"===u.variant)&&r.contained,a,u.disabled&&r.disabled,u.error&&r.error,u.filled&&r.filled,u.focused&&r.focused,u.required&&r.required,"dense"===u.margin&&r.marginDense),ref:n},l)," "===i?e.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):i)})),Cs=(0,g.Z)((function(e){return{root:(0,p.Z)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(Ts),Es={standard:Ui,filled:Hi,outlined:$i},Ms=e.forwardRef((function(t,n){var i=t.autoComplete,r=t.autoFocus,a=void 0!==r&&r,o=t.children,s=t.classes,l=t.className,u=t.color,c=void 0===u?"primary":u,h=t.defaultValue,d=t.disabled,f=void 0!==d&&d,m=t.error,v=void 0!==m&&m,y=t.FormHelperTextProps,g=t.fullWidth,x=void 0!==g&&g,b=t.helperText,w=t.hiddenLabel,k=t.id,S=t.InputLabelProps,T=t.inputProps,C=t.InputProps,E=t.inputRef,M=t.label,A=t.multiline,D=void 0!==A&&A,I=t.name,L=t.onBlur,O=t.onChange,z=t.onFocus,R=t.placeholder,B=t.required,F=void 0!==B&&B,N=t.rows,j=t.rowsMax,U=t.maxRows,V=t.minRows,Z=t.select,W=void 0!==Z&&Z,G=t.SelectProps,Y=t.type,H=t.value,X=t.variant,q=void 0===X?"standard":X,K=(0,_.Z)(t,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var $={};if("outlined"===q&&(S&&"undefined"!==typeof S.shrink&&($.notched=S.shrink),M)){var Q,J=null!==(Q=null===S||void 0===S?void 0:S.required)&&void 0!==Q?Q:F;$.label=e.createElement(e.Fragment,null,M,J&&"\xa0*")}W&&(G&&G.native||($.id=void 0),$["aria-describedby"]=void 0);var ee=b&&k?"".concat(k,"-helper-text"):void 0,te=M&&k?"".concat(k,"-label"):void 0,ne=Es[q],ie=e.createElement(ne,(0,p.Z)({"aria-describedby":ee,autoComplete:i,autoFocus:a,defaultValue:h,fullWidth:x,multiline:D,name:I,rows:N,rowsMax:j,maxRows:U,minRows:V,type:Y,value:H,id:k,inputRef:E,onBlur:L,onChange:O,onFocus:z,placeholder:R,inputProps:T},$,C));return e.createElement(ar,(0,p.Z)({className:(0,P.Z)(s.root,l),disabled:f,error:v,fullWidth:x,hiddenLabel:w,ref:n,required:F,color:c,variant:q},K),M&&e.createElement(ur,(0,p.Z)({htmlFor:k,id:te},S),M),W?e.createElement(nr,(0,p.Z)({"aria-describedby":ee,id:k,labelId:te,value:H,input:ie},G),o):ie,b&&e.createElement(Cs,(0,p.Z)({id:ee},y),b))})),Ps=(0,g.Z)({root:{}},{name:"MuiTextField"})(Ms),As=e.forwardRef((function(t,n){var i=t.edge,r=void 0!==i&&i,a=t.children,o=t.classes,s=t.className,l=t.color,u=void 0===l?"default":l,c=t.disabled,h=void 0!==c&&c,d=t.disableFocusRipple,f=void 0!==d&&d,m=t.size,v=void 0===m?"medium":m,y=(0,_.Z)(t,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return e.createElement(wr,(0,p.Z)({className:(0,P.Z)(o.root,s,"default"!==u&&o["color".concat((0,R.Z)(u))],h&&o.disabled,"small"===v&&o["size".concat((0,R.Z)(v))],{start:o.edgeStart,end:o.edgeEnd}[r]),centerRipple:!0,focusRipple:!f,disabled:h,ref:n},y),e.createElement("span",{className:o.label},a))})),Ds=(0,g.Z)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,es.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(As),Is=e.forwardRef((function(t,n){var i=t.children,r=t.classes,a=t.className,o=t.component,s=void 0===o?"div":o,l=t.disablePointerEvents,u=void 0!==l&&l,c=t.disableTypography,h=void 0!==c&&c,d=t.position,f=t.variant,m=(0,_.Z)(t,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),v=Ei()||{},y=f;return f&&v.variant,v&&!y&&(y=v.variant),e.createElement(Mi.Provider,{value:null},e.createElement(s,(0,p.Z)({className:(0,P.Z)(r.root,a,"end"===d?r.positionEnd:r.positionStart,u&&r.disablePointerEvents,v.hiddenLabel&&r.hiddenLabel,"filled"===y&&r.filled,"dense"===v.margin&&r.marginDense),ref:n},m),"string"!==typeof i||h?i:e.createElement(N,{color:"textSecondary"},i)))})),Ls=(0,g.Z)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(Is),Os=function(e){function t(t){var n;return(n=e.call(this,t)||this)._state=null,n._del=!1,n._handleChange=function(e){var t=n.state.value,i=e.target.value,r=e.target,a=i.length>t.length,o=n._del,s=t===n.props.format(i);n.setState({value:i,local:!0},(function(){var e=r.selectionStart,l=n.props.refuse||/[^\d]+/g,u=i.substr(0,e).replace(l,"");if(n._state={input:r,before:u,op:a,di:o&&s,del:o},n.props.replace&&n.props.replace(t)&&a&&!s){for(var c=-1,h=0;h!==u.length;++h)c=Math.max(c,i.toLowerCase().indexOf(u[h].toLowerCase(),c+1));var d=i.substr(c+1).replace(l,"")[0];c=i.indexOf(d,c+1),i=""+i.substr(0,c)+i.substr(c+1)}var p=n.props.format(i);t===p?n.setState({value:i}):n.props.onChange(p)}))},n._hKD=function(e){"Delete"===e.code&&(n._del=!0)},n._hKU=function(e){"Delete"===e.code&&(n._del=!1)},n.state={value:t.value,local:!0},n}(0,bt.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return{value:t.local?t.value:e.value,local:!1}};var n=t.prototype;return n.render=function(){var e=this._handleChange,t=this.state.value;return(0,this.props.children)({value:t,onChange:e})},n.componentWillUnmount=function(){document.removeEventListener("keydown",this._hKD),document.removeEventListener("keyup",this._hKU)},n.componentDidMount=function(){document.addEventListener("keydown",this._hKD),document.addEventListener("keyup",this._hKU)},n.componentDidUpdate=function(){var e=this._state;if(e){for(var t=this.state.value,n=-1,i=0;i!==e.before.length;++i)n=Math.max(n,t.toLowerCase().indexOf(e.before[i].toLowerCase(),n+1));if(this.props.replace&&(e.op||e.del&&!e.di))for(;t[n+1]&&(this.props.refuse||/[^\d]+/).test(t[n+1]);)n+=1;e.input.selectionStart=e.input.selectionEnd=n+1+(e.di?1:0)}this._state=null},t}(e.Component),zs=n(6608),Rs=Jo((function(e){return{day:{width:36,height:36,fontSize:e.typography.caption.fontSize,margin:"0 2px",color:e.palette.text.primary,fontWeight:e.typography.fontWeightMedium,padding:0},hidden:{opacity:0,pointerEvents:"none"},current:{color:e.palette.primary.main,fontWeight:600},daySelected:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{backgroundColor:e.palette.primary.main}},dayDisabled:{pointerEvents:"none",color:e.palette.text.hint}}}),{name:"MuiPickersDay"}),Bs=function(t){var n=t.children,i=t.disabled,r=t.hidden,a=t.current,o=t.selected,s=(0,_.Z)(t,["children","disabled","hidden","current","selected"]),l=Rs(),u=(0,P.Z)(l.day,r&&l.hidden,a&&l.current,o&&l.daySelected,i&&l.dayDisabled);return(0,e.createElement)(Ds,(0,p.Z)({className:u,tabIndex:r||i?-1:0},s),(0,e.createElement)(N,{variant:"body2",color:"inherit"},n))};Bs.displayName="Day",Bs.defaultProps={disabled:!1,hidden:!1,current:!1,selected:!1};var Fs=Bs;function Ns(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var js=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return i=t,void((n=e).classList?n.classList.remove(i):"string"===typeof n.className?n.className=Ns(n.className,i):n.setAttribute("class",Ns(n.className&&n.className.baseVal||"",i)));var n,i}))},Us=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(t,n){var i=e.resolveArguments(t,n),r=i[0],a=i[1];e.removeClasses(r,"exit"),e.addClass(r,a?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(t,n)},e.onEntering=function(t,n){var i=e.resolveArguments(t,n),r=i[0],a=i[1]?"appear":"enter";e.addClass(r,a,"active"),e.props.onEntering&&e.props.onEntering(t,n)},e.onEntered=function(t,n){var i=e.resolveArguments(t,n),r=i[0],a=i[1]?"appear":"enter";e.removeClasses(r,a),e.addClass(r,a,"done"),e.props.onEntered&&e.props.onEntered(t,n)},e.onExit=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"appear"),e.removeClasses(n,"enter"),e.addClass(n,"exit","base"),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var n=e.resolveArguments(t)[0];e.addClass(n,"exit","active"),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"exit"),e.addClass(n,"exit","done"),e.props.onExited&&e.props.onExited(t)},e.resolveArguments=function(t,n){return e.props.nodeRef?[e.props.nodeRef.current,t]:[t,n]},e.getClassNames=function(t){var n=e.props.classNames,i="string"===typeof n,r=i?""+(i&&n?n+"-":"")+t:n[t];return{baseClassName:r,activeClassName:i?r+"-active":n[t+"Active"],doneClassName:i?r+"-done":n[t+"Done"]}},e}(0,bt.Z)(n,t);var i=n.prototype;return i.addClass=function(e,t,n){var i=this.getClassNames(t)[n+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&r&&(i+=" "+r),"active"===n&&e&&e.scrollTop,i&&(this.appliedClasses[t][n]=i,function(e,t){e&&t&&t.split(" ").forEach((function(t){return i=t,void((n=e).classList?n.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,i)||("string"===typeof n.className?n.className=n.className+" "+i:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+i)));var n,i}))}(e,i))},i.removeClasses=function(e,t){var n=this.appliedClasses[t],i=n.base,r=n.active,a=n.done;this.appliedClasses[t]={},i&&js(e,i),r&&js(e,r),a&&js(e,a)},i.render=function(){var t=this.props,n=(t.classNames,(0,xt.Z)(t,["classNames"]));return e.createElement(Dt,(0,p.Z)({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(e.Component);Us.defaultProps={classNames:""},Us.propTypes={};var Vs=Us,Zs=function(e){return 1===e.length&&"year"===e[0]},Ws=function(e){return 2===e.length&&ds(e,"month")&&ds(e,"year")},Gs=function(t){var n=t.children,i=t.value,r=t.disabled,a=t.onSelect,o=t.dayInCurrentMonth,s=(0,_.Z)(t,["children","value","disabled","onSelect","dayInCurrentMonth"]),l=(0,e.useCallback)((function(){return a(i)}),[a,i]);return(0,e.createElement)("div",(0,p.Z)({role:"presentation",onClick:o&&!r?l:void 0,onKeyPress:o&&!r?l:void 0},s),n)},Ys=Jo((function(e){var t=e.transitions.create("transform",{duration:350,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{transitionContainer:{display:"block",position:"relative","& > *":{position:"absolute",top:0,right:0,left:0}},"slideEnter-left":{willChange:"transform",transform:"translate(100%)"},"slideEnter-right":{willChange:"transform",transform:"translate(-100%)"},slideEnterActive:{transform:"translate(0%)",transition:t},slideExit:{transform:"translate(0%)"},"slideExitActiveLeft-left":{willChange:"transform",transform:"translate(-200%)",transition:t},"slideExitActiveLeft-right":{willChange:"transform",transform:"translate(200%)",transition:t}}}),{name:"MuiPickersSlideTransition"}),Hs=function(t){var n=t.children,i=t.transKey,r=t.slideDirection,a=t.className,o=void 0===a?null:a,s=Ys(),l={exit:s.slideExit,enterActive:s.slideEnterActive,enter:s["slideEnter-"+r],exitActive:s["slideExitActiveLeft-"+r]};return(0,e.createElement)(vr,{className:(0,P.Z)(s.transitionContainer,o),childFactory:function(t){return(0,e.cloneElement)(t,{classNames:l})}},(0,e.createElement)(Vs,{mountOnEnter:!0,unmountOnExit:!0,key:i+r,timeout:350,classNames:l,children:n}))},Xs=Jo((function(e){return{switchHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:e.spacing(.5),marginBottom:e.spacing(1)},transitionContainer:{width:"100%",overflow:"hidden",height:23},iconButton:{zIndex:1,backgroundColor:e.palette.background.paper},daysHeader:{display:"flex",justifyContent:"center",alignItems:"center",maxHeight:16},dayLabel:{width:36,margin:"0 2px",textAlign:"center",color:e.palette.text.hint}}}),{name:"MuiPickersCalendarHeader"}),qs=function(t){var n=t.currentMonth,i=t.onMonthChange,r=t.leftArrowIcon,a=t.rightArrowIcon,o=t.leftArrowButtonProps,s=t.rightArrowButtonProps,l=t.disablePrevMonth,u=t.disableNextMonth,c=t.slideDirection,h=Qo(),d=Xs(),f="rtl"===Z().direction;return(0,e.createElement)("div",null,(0,e.createElement)("div",{className:d.switchHeader},(0,e.createElement)(Ds,(0,p.Z)({},o,{disabled:l,onClick:function(){return i(h.getPreviousMonth(n),"right")},className:d.iconButton}),f?a:r),(0,e.createElement)(Hs,{slideDirection:c,transKey:n.toString(),className:d.transitionContainer},(0,e.createElement)(N,{align:"center",variant:"body1"},h.getCalendarHeaderText(n))),(0,e.createElement)(Ds,(0,p.Z)({},s,{disabled:u,onClick:function(){return i(h.getNextMonth(n),"left")},className:d.iconButton}),f?r:a)),(0,e.createElement)("div",{className:d.daysHeader},h.getWeekdays().map((function(t,n){return(0,e.createElement)(N,{key:n,variant:"caption",className:d.dayLabel},t)}))))};qs.displayName="CalendarHeader",qs.defaultProps={leftArrowIcon:(0,e.createElement)((function(t){return e.createElement(zs.Z,t,e.createElement("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),e.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}),null),rightArrowIcon:(0,e.createElement)((function(t){return e.createElement(zs.Z,t,e.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),e.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}),null),disablePrevMonth:!1,disableNextMonth:!1};var Ks=function(t){var n=t.onKeyDown;return(0,e.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[n]),null},$s=function(t){function n(){var t,r;i(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(r=c(this,(t=s(n)).call.apply(t,[this].concat(o)))).state={slideDirection:"left",currentMonth:r.props.utils.startOfMonth(r.props.date),loadingQueue:0},r.pushToLoadingQueue=function(){var e=r.state.loadingQueue+1;r.setState({loadingQueue:e})},r.popFromLoadingQueue=function(){var e=r.state.loadingQueue;e=e<=0?0:e-1,r.setState({loadingQueue:e})},r.handleChangeMonth=function(e,t){if(r.setState({currentMonth:e,slideDirection:t}),r.props.onMonthChange){var n=r.props.onMonthChange(e);n&&(r.pushToLoadingQueue(),n.then((function(){r.popFromLoadingQueue()})))}},r.validateMinMaxDate=function(e){var t=r.props,n=t.minDate,i=t.maxDate,a=t.utils,o=t.disableFuture,s=t.disablePast,l=a.date();return Boolean(o&&a.isAfterDay(e,l)||s&&a.isBeforeDay(e,l)||n&&a.isBeforeDay(e,a.date(n))||i&&a.isAfterDay(e,a.date(i)))},r.shouldDisablePrevMonth=function(){var e=r.props,t=e.utils,n=e.disablePast,i=e.minDate,a=t.date(),o=t.startOfMonth(n&&t.isAfter(a,t.date(i))?a:t.date(i));return!t.isBefore(o,r.state.currentMonth)},r.shouldDisableNextMonth=function(){var e=r.props,t=e.utils,n=e.disableFuture,i=e.maxDate,a=t.date(),o=t.startOfMonth(n&&t.isBefore(a,t.date(i))?a:t.date(i));return!t.isAfter(o,r.state.currentMonth)},r.shouldDisableDate=function(e){var t=r.props.shouldDisableDate;return r.validateMinMaxDate(e)||Boolean(t&&t(e))},r.handleDaySelect=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.props,i=n.date,a=n.utils;r.props.onChange(a.mergeDateAndTime(e,i),t)},r.moveToDay=function(e){var t=r.props.utils;e&&!r.shouldDisableDate(e)&&(t.getMonth(e)!==t.getMonth(r.state.currentMonth)&&r.handleChangeMonth(t.startOfMonth(e),"left"),r.handleDaySelect(e,!1))},r.handleKeyDown=function(e){var t=r.props,n=t.theme,i=t.date,a=t.utils;_s(e,{ArrowUp:function(){return r.moveToDay(a.addDays(i,-7))},ArrowDown:function(){return r.moveToDay(a.addDays(i,7))},ArrowLeft:function(){return r.moveToDay(a.addDays(i,"ltr"===n.direction?-1:1))},ArrowRight:function(){return r.moveToDay(a.addDays(i,"ltr"===n.direction?1:-1))}})},r.renderWeeks=function(){var t=r.props,n=t.utils,i=t.classes;return n.getWeekArray(r.state.currentMonth).map((function(t){return(0,e.createElement)("div",{key:"week-".concat(t[0].toString()),className:i.week},r.renderDays(t))}))},r.renderDays=function(t){var n=r.props,i=n.date,a=n.renderDay,o=n.utils,s=o.date(),l=o.startOfDay(i),u=o.getMonth(r.state.currentMonth);return t.map((function(t){var n=r.shouldDisableDate(t),i=o.getMonth(t)===u,c=(0,e.createElement)(Fs,{disabled:n,current:o.isSameDay(t,s),hidden:!i,selected:o.isSameDay(l,t)},o.getDayText(t));return a&&(c=a(t,l,i,c)),(0,e.createElement)(Gs,{value:t,key:t.toString(),disabled:n,dayInCurrentMonth:i,onSelect:r.handleDaySelect},c)}))},r}return o(n,t),(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.date,n=e.minDate,i=e.maxDate,r=e.utils,a=e.disablePast,o=e.disableFuture;if(this.shouldDisableDate(t)){var s=function(e){var t=e.date,n=e.utils,i=e.minDate,r=e.maxDate,a=e.disableFuture,o=e.disablePast,s=e.shouldDisableDate,l=n.startOfDay(n.date());o&&n.isBefore(i,l)&&(i=l),a&&n.isAfter(r,l)&&(r=l);var u=t,c=t;for(n.isBefore(t,i)&&(u=n.date(i),c=null),n.isAfter(t,r)&&(c&&(c=n.date(r)),u=null);u||c;){if(u&&n.isAfter(u,r)&&(u=null),c&&n.isBefore(c,i)&&(c=null),u){if(!s(u))return u;u=n.addDays(u,1)}if(c){if(!s(c))return c;c=n.addDays(c,-1)}}return n.date()}({date:t,utils:r,minDate:r.date(n),maxDate:r.date(i),disablePast:Boolean(a),disableFuture:Boolean(o),shouldDisableDate:this.shouldDisableDate});this.handleDaySelect(s,!1)}}},{key:"render",value:function(){var t=this.state,n=t.currentMonth,i=t.slideDirection,r=this.props,a=r.classes,o=r.allowKeyboardControl,s=r.leftArrowButtonProps,l=r.leftArrowIcon,u=r.rightArrowButtonProps,c=r.rightArrowIcon,h=r.loadingIndicator,d=h||(0,e.createElement)(_t,null);return(0,e.createElement)(e.Fragment,null,o&&"static"!==this.context&&(0,e.createElement)(Ks,{onKeyDown:this.handleKeyDown}),(0,e.createElement)(qs,{currentMonth:n,slideDirection:i,onMonthChange:this.handleChangeMonth,leftArrowIcon:l,leftArrowButtonProps:s,rightArrowIcon:c,rightArrowButtonProps:u,disablePrevMonth:this.shouldDisablePrevMonth(),disableNextMonth:this.shouldDisableNextMonth()}),(0,e.createElement)(Hs,{slideDirection:i,transKey:n.toString(),className:a.transitionContainer},(0,e.createElement)(e.Fragment,null,this.state.loadingQueue>0&&(0,e.createElement)("div",{className:a.progressContainer},d)||(0,e.createElement)("div",null,this.renderWeeks()))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.utils,i=e.date;if(!n.isEqual(i,t.lastDate)){var r=n.getMonth(i),a=t.lastDate||i,o=n.getMonth(a);return{lastDate:i,currentMonth:e.utils.startOfMonth(i),slideDirection:r===o?t.slideDirection:n.isAfterDay(i,a)?"left":"right"}}return null}}]),n}(e.Component);$s.contextType=ks,$s.defaultProps={minDate:new Date("1900-01-01"),maxDate:new Date("2100-01-01"),disablePast:!1,disableFuture:!1,allowKeyboardControl:!0};var Qs,Js=(0,g.Z)((function(e){return{transitionContainer:{minHeight:216,marginTop:e.spacing(1.5)},progressContainer:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},week:{display:"flex",justifyContent:"center"}}}),{name:"MuiPickersCalendar",withTheme:!0})(function(t){var n=function(n){var i=Qo();return(0,e.createElement)(t,(0,p.Z)({utils:i},n))};return n.displayName="WithUtils(".concat(t.displayName||t.name,")"),n}($s));!function(e){e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds"}(Qs||(Qs={}));var el=Qs,tl=function(t){function n(){var e,t;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=c(this,(e=s(n)).call.apply(e,[this].concat(a)))).state={toAnimateTransform:!1,previousType:void 0},t.getAngleStyle=function(){var e=t.props,n=e.value,i=e.isInner,r=e.type,a=360/(r===el.HOURS?12:60)*n;return r===el.HOURS&&n>12&&(a-=360),{height:i?"26%":"40%",transform:"rotateZ(".concat(a,"deg)")}},t}return o(n,t),(0,r.Z)(n,[{key:"render",value:function(){var t=this.props,n=t.classes,i=t.hasSelected;return(0,e.createElement)("div",{style:this.getAngleStyle(),className:(0,P.Z)(n.pointer,this.state.toAnimateTransform&&n.animateTransform)},(0,e.createElement)("div",{className:(0,P.Z)(n.thumb,i&&n.noPoint)}))}}]),n}(e.Component);tl.getDerivedStateFromProps=function(e,t){return e.type!==t.previousType?{toAnimateTransform:!0,previousType:e.type}:{toAnimateTransform:!1,previousType:e.type}};var nl=(0,g.Z)((function(e){return{pointer:{width:2,backgroundColor:e.palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},animateTransform:{transition:e.transitions.create(["transform","height"])},thumb:{width:4,height:4,backgroundColor:e.palette.primary.contrastText,borderRadius:"100%",position:"absolute",top:-21,left:-15,border:"14px solid ".concat(e.palette.primary.main),boxSizing:"content-box"},noPoint:{backgroundColor:e.palette.primary.main}}}),{name:"MuiPickersClockPointer"})(tl),il={x:130,y:130},rl=il.x-il.x,al=0-il.y,ol=function(e,t,n){var i=t-il.x,r=n-il.y,a=Math.atan2(rl,al)-Math.atan2(i,r),o=57.29577951308232*a;o=Math.round(o/e)*e,o%=360;var s=Math.floor(o/e)||0,l=Math.pow(i,2)+Math.pow(r,2);return{value:s,distance:Math.sqrt(l)}},sl=function(e,t,n){var i=ol(30,e,t),r=i.value,a=i.distance;return r=r||12,n?r%=12:a<90&&(r+=12,r%=24),r},ll=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=6*n,r=ol(i,e,t),a=r.value;return a=a*n%60},ul=function(t){function n(){var e,t;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=c(this,(e=s(n)).call.apply(e,[this].concat(a)))).isMoving=!1,t.handleTouchMove=function(e){t.isMoving=!0,t.setTime(e)},t.handleTouchEnd=function(e){t.isMoving&&(t.setTime(e,!0),t.isMoving=!1)},t.handleMove=function(e){e.preventDefault(),e.stopPropagation(),("undefined"===typeof e.buttons?1===e.nativeEvent.which:1===e.buttons)&&t.setTime(e.nativeEvent,!1)},t.handleMouseUp=function(e){t.isMoving&&(t.isMoving=!1),t.setTime(e.nativeEvent,!0)},t.hasSelected=function(){var e=t.props,n=e.type,i=e.value;return n===el.HOURS||i%5===0},t}return o(n,t),(0,r.Z)(n,[{key:"setTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.offsetX,i=e.offsetY;if("undefined"===typeof n){var r=e.target.getBoundingClientRect();n=e.changedTouches[0].clientX-r.left,i=e.changedTouches[0].clientY-r.top}var a=this.props.type===el.SECONDS||this.props.type===el.MINUTES?ll(n,i,this.props.minutesStep):sl(n,i,Boolean(this.props.ampm));this.props.onChange(a,t)}},{key:"render",value:function(){var t=this.props,n=t.classes,i=t.value,r=t.children,a=t.type,o=!t.ampm&&a===el.HOURS&&(i<1||i>12);return(0,e.createElement)("div",{className:n.container},(0,e.createElement)("div",{className:n.clock},(0,e.createElement)("div",{role:"menu",tabIndex:-1,className:n.squareMask,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMove}),(0,e.createElement)("div",{className:n.pin}),(0,e.createElement)(nl,{type:a,value:i,isInner:o,hasSelected:this.hasSelected()}),r))}}]),n}(e.Component);ul.defaultProps={ampm:!1,minutesStep:1};var cl=(0,g.Z)((function(e){return{container:{display:"flex",justifyContent:"center",alignItems:"flex-end",margin:"".concat(e.spacing(2),"px 0 ").concat(e.spacing(1),"px")},clock:{backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:260,width:260,position:"relative",pointerEvents:"none"},squareMask:{width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:"none",touchActions:"none",userSelect:"none","&:active":{cursor:"move"}},pin:{width:6,height:6,borderRadius:"50%",backgroundColor:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}),{name:"MuiPickersClock"})(ul),hl={0:[0,40],1:[55,19.6],2:[94.4,59.5],3:[109,114],4:[94.4,168.5],5:[54.5,208.4],6:[0,223],7:[-54.5,208.4],8:[-94.4,168.5],9:[-109,114],10:[-94.4,59.5],11:[-54.5,19.6],12:[0,5],13:[36.9,49.9],14:[64,77],15:[74,114],16:[64,151],17:[37,178],18:[0,188],19:[-37,178],20:[-64,151],21:[-74,114],22:[-64,77],23:[-37,50]},dl=Jo((function(e){var t=e.spacing(4);return{clockNumber:{width:t,height:32,userSelect:"none",position:"absolute",left:"calc((100% - ".concat("number"===typeof t?"".concat(t,"px"):t,") / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:"light"===e.palette.type?e.palette.text.primary:e.palette.text.hint},clockNumberSelected:{color:e.palette.primary.contrastText}}}),{name:"MuiPickersClockNumber"}),pl=function(t){var n=t.selected,i=t.label,r=t.index,a=t.isInner,o=dl(),s=(0,P.Z)(o.clockNumber,n&&o.clockNumberSelected),l=(0,e.useMemo)((function(){var e=hl[r];return{transform:"translate(".concat(e[0],"px, ").concat(e[1],"px")}}),[r]);return(0,e.createElement)(N,{component:"span",className:s,variant:a?"body2":"body1",style:l,children:i})},fl=function(t){for(var n=t.ampm,i=t.utils,r=t.date,a=i.getHours(r),o=[],s=n?12:23,l=function(e){return n?12===e?12===a||0===a:a===e||a-12===e:a===e},u=n?1:0;u<=s;u+=1){var c=u.toString();0===u&&(c="00");var h={index:u,label:i.formatNumber(c),selected:l(u),isInner:!n&&(0===u||u>12)};o.push((0,e.createElement)(pl,(0,p.Z)({key:u},h)))}return o},ml=function(t){var n=t.value,i=t.utils.formatNumber;return[(0,e.createElement)(pl,{label:i("00"),selected:0===n,index:12,key:12}),(0,e.createElement)(pl,{label:i("05"),selected:5===n,index:1,key:1}),(0,e.createElement)(pl,{label:i("10"),selected:10===n,index:2,key:2}),(0,e.createElement)(pl,{label:i("15"),selected:15===n,index:3,key:3}),(0,e.createElement)(pl,{label:i("20"),selected:20===n,index:4,key:4}),(0,e.createElement)(pl,{label:i("25"),selected:25===n,index:5,key:5}),(0,e.createElement)(pl,{label:i("30"),selected:30===n,index:6,key:6}),(0,e.createElement)(pl,{label:i("35"),selected:35===n,index:7,key:7}),(0,e.createElement)(pl,{label:i("40"),selected:40===n,index:8,key:8}),(0,e.createElement)(pl,{label:i("45"),selected:45===n,index:9,key:9}),(0,e.createElement)(pl,{label:i("50"),selected:50===n,index:10,key:10}),(0,e.createElement)(pl,{label:i("55"),selected:55===n,index:11,key:11})]},vl=function(t){var n=t.type,i=t.onHourChange,r=t.onMinutesChange,a=t.onSecondsChange,o=t.ampm,s=t.date,l=t.minutesStep,u=Qo(),c=(0,e.useMemo)((function(){switch(n){case el.HOURS:return{value:u.getHours(s),children:fl({date:s,utils:u,ampm:Boolean(o)}),onChange:function(e,t){var n=function(e,t){return t.getHours(e)>=12?"pm":"am"}(s,u),r=function(e,t,n,i){if(n&&(i.getHours(e)>=12?"pm":"am")!==t){var r="am"===t?i.getHours(e)-12:i.getHours(e)+12;return i.setHours(e,r)}return e}(u.setHours(s,e),n,Boolean(o),u);i(r,t)}};case el.MINUTES:var e=u.getMinutes(s);return{value:e,children:ml({value:e,utils:u}),onChange:function(e,t){var n=u.setMinutes(s,e);r(n,t)}};case el.SECONDS:var t=u.getSeconds(s);return{value:t,children:ml({value:t,utils:u}),onChange:function(e,t){var n=u.setSeconds(s,e);a(n,t)}};default:throw new Error("You must provide the type for TimePickerView")}}),[o,s,i,r,a,n,u]);return(0,e.createElement)(cl,(0,p.Z)({type:n,ampm:o,minutesStep:l},c))};vl.displayName="TimePickerView",vl.defaultProps={ampm:!0,minutesStep:1};(0,e.memo)(vl);function yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(0,j.oneOfType)([j.object,j.string,j.number,(0,j.instanceOf)(Date)]),(0,j.oneOf)(["year","month","day"]);var gl={minDate:new Date("1900-01-01"),maxDate:new Date("2100-01-01"),invalidDateMessage:"Invalid Date Format",minDateMessage:"Date should not be before minimal date",maxDateMessage:"Date should not be after maximal date",allowKeyboardControl:!0};!function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yl(n,!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}({},{ampm:!0,invalidDateMessage:"Invalid Time Format"},{},gl,{showTabs:!0});var _l=Jo((function(e){return{root:{height:40,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",outline:"none","&:focus":{color:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium}},yearSelected:{margin:"10px 0",fontWeight:e.typography.fontWeightMedium},yearDisabled:{pointerEvents:"none",color:e.palette.text.hint}}}),{name:"MuiPickersYear"}),xl=function(t){var n=t.onSelect,i=t.forwardedRef,r=t.value,a=t.selected,o=t.disabled,s=t.children,l=(0,_.Z)(t,["onSelect","forwardedRef","value","selected","disabled","children"]),u=_l(),c=(0,e.useCallback)((function(){return n(r)}),[n,r]);return(0,e.createElement)(N,(0,p.Z)({role:"button",component:"div",tabIndex:o?-1:0,onClick:c,onKeyPress:c,color:a?"primary":void 0,variant:a?"h5":"subtitle1",children:s,ref:i,className:(0,P.Z)(u.root,a&&u.yearSelected,o&&u.yearDisabled)},l))};xl.displayName="Year";var bl=(0,e.forwardRef)((function(t,n){return(0,e.createElement)(xl,(0,p.Z)({},t,{forwardedRef:n}))})),wl=Jo({container:{height:300,overflowY:"auto"}},{name:"MuiPickersYearSelection"}),kl=function(t){var n=t.date,i=t.onChange,r=t.onYearChange,a=t.minDate,o=t.maxDate,s=t.disablePast,l=t.disableFuture,u=t.animateYearScrolling,c=Qo(),h=wl(),d=(0,e.useContext)(ks),p=(0,e.useRef)(null);(0,e.useEffect)((function(){if(p.current&&p.current.scrollIntoView)try{p.current.scrollIntoView({block:"static"===d?"nearest":"center",behavior:u?"smooth":"auto"})}catch(e){p.current.scrollIntoView()}}),[]);var f=c.getYear(n),m=(0,e.useCallback)((function(e){var t=c.setYear(n,e);r&&r(t),i(t,!0)}),[n,i,r,c]);return(0,e.createElement)("div",{className:h.container},c.getYearRange(a,o).map((function(t){var n=c.getYear(t),i=n===f;return(0,e.createElement)(bl,{key:c.getYearText(t),selected:i,value:n,onSelect:m,ref:i?p:void 0,disabled:Boolean(s&&c.isBeforeYear(t,c.date())||l&&c.isAfterYear(t,c.date()))},c.getYearText(t))})))},Sl=Jo((function(e){return{root:{flex:"1 0 33.33%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",outline:"none",height:75,transition:e.transitions.create("font-size",{duration:"100ms"}),"&:focus":{color:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium}},monthSelected:{color:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium},monthDisabled:{pointerEvents:"none",color:e.palette.text.hint}}}),{name:"MuiPickersMonth"}),Tl=function(t){var n=t.selected,i=t.onSelect,r=t.disabled,a=t.value,o=t.children,s=(0,_.Z)(t,["selected","onSelect","disabled","value","children"]),l=Sl(),u=(0,e.useCallback)((function(){i(a)}),[i,a]);return(0,e.createElement)(N,(0,p.Z)({role:"button",component:"div",className:(0,P.Z)(l.root,n&&l.monthSelected,r&&l.monthDisabled),tabIndex:r?-1:0,onClick:u,onKeyPress:u,color:n?"primary":void 0,variant:n?"h5":"subtitle1",children:o},s))};Tl.displayName="Month";var Cl=Jo({container:{width:310,display:"flex",flexWrap:"wrap",alignContent:"stretch"}},{name:"MuiPickersMonthSelection"}),El=function(t){var n=t.disablePast,i=t.disableFuture,r=t.minDate,a=t.maxDate,o=t.date,s=t.onMonthChange,l=t.onChange,u=Qo(),c=Cl(),h=u.getMonth(o),d=function(e){var t=u.date(),o=u.date(r),s=u.date(a),l=u.startOfMonth(n&&u.isAfter(t,o)?t:o),c=u.startOfMonth(i&&u.isBefore(t,s)?t:s),h=u.isBefore(e,l),d=u.isAfter(e,c);return h||d},p=(0,e.useCallback)((function(e){var t=u.setMonth(o,e);l(t,!0),s&&s(t)}),[o,l,s,u]);return(0,e.createElement)("div",{className:c.container},u.getMonthArray(o).map((function(t){var n=u.getMonth(t),i=u.format(t,"MMM");return(0,e.createElement)(Tl,{key:i,value:n,selected:n===h,onSelect:p,disabled:d(t)},i)})))},Ml=function(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"};function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Al={year:kl,month:El,date:Js,hours:vl,minutes:vl,seconds:vl},Dl=Jo({container:{display:"flex",flexDirection:"column"},containerLandscape:{flexDirection:"row"},pickerView:{overflowX:"hidden",minHeight:305,minWidth:310,maxWidth:325,display:"flex",flexDirection:"column",justifyContent:"center"},pickerViewLandscape:{padding:"0 8px"}},{name:"MuiPickersBasePicker"}),Il=function(t){var n=t.date,i=t.views,r=t.disableToolbar,a=t.onChange,o=t.openTo,s=t.minDate,l=t.maxDate,u=t.ToolbarComponent,c=t.orientation,h=(0,_.Z)(t,["date","views","disableToolbar","onChange","openTo","minDate","maxDate","ToolbarComponent","orientation"]),d=Qo(),f=Dl(),m=function(t){var n=(0,e.useState)(Ml()),i=(0,re.Z)(n,2),r=i[0],a=i[1],o=(0,e.useCallback)((function(){return a(Ml())}),[]);return gs((function(){return window.addEventListener("orientationchange",o),function(){return window.removeEventListener("orientationchange",o)}}),[o]),"landscape"===(t||r)}(c),v=function(t,n,i){var r=(0,e.useState)(n&&ds(t,n)?n:t[0]),a=(0,re.Z)(r,2),o=a[0],s=a[1],l=(0,e.useCallback)((function(e,n){var r=t[t.indexOf(o)+1];if(n&&r)return i(e,!1),void s(r);i(e,Boolean(n))}),[i,o,t]);return{handleChangeAndOpenNext:l,openView:o,setOpenView:s}}(i,o,a),y=v.openView,g=v.setOpenView,x=v.handleChangeAndOpenNext,b=(0,e.useMemo)((function(){return d.date(s)}),[s,d]),w=(0,e.useMemo)((function(){return d.date(l)}),[l,d]);return(0,e.createElement)("div",{className:(0,P.Z)(f.container,m&&f.containerLandscape)},!r&&(0,e.createElement)(u,(0,p.Z)({},h,{views:i,isLandscape:m,date:n,onChange:a,setOpenView:g,openView:y})),(0,e.createElement)("div",{className:(0,P.Z)(f.pickerView,m&&f.pickerViewLandscape)},"year"===y&&(0,e.createElement)(kl,(0,p.Z)({},h,{date:n,onChange:x,minDate:b,maxDate:w})),"month"===y&&(0,e.createElement)(El,(0,p.Z)({},h,{date:n,onChange:x,minDate:b,maxDate:w})),"date"===y&&(0,e.createElement)(Js,(0,p.Z)({},h,{date:n,onChange:x,minDate:b,maxDate:w})),("hours"===y||"minutes"===y||"seconds"===y)&&(0,e.createElement)(vl,(0,p.Z)({},h,{date:n,type:y,onHourChange:x,onMinutesChange:x,onSecondsChange:x}))))};Il.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(n,!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},gl,{views:Object.keys(Al)});var Ll=Jo((function(e){var t="light"===e.palette.type?e.palette.primary.contrastText:e.palette.getContrastText(e.palette.background.default);return{toolbarTxt:{color:(0,es.U1)(t,.54)},toolbarBtnSelected:{color:t}}}),{name:"MuiPickersToolbarText"}),Ol=function(t){var n=t.selected,i=t.label,r=t.className,a=void 0===r?null:r,o=(0,_.Z)(t,["selected","label","className"]),s=Ll();return(0,e.createElement)(N,(0,p.Z)({children:i,className:(0,P.Z)(s.toolbarTxt,a,n&&s.toolbarBtnSelected)},o))},zl=function(t){var n=t.classes,i=t.className,r=void 0===i?null:i,a=t.label,o=t.selected,s=t.variant,l=t.align,u=t.typographyClassName,c=(0,_.Z)(t,["classes","className","label","selected","variant","align","typographyClassName"]);return(0,e.createElement)(ns,(0,p.Z)({variant:"text",className:(0,P.Z)(n.toolbarBtn,r)},c),(0,e.createElement)(Ol,{align:l,className:u,variant:s,label:a,selected:o}))};zl.defaultProps={className:""};var Rl={toolbarBtn:{padding:0,minWidth:"16px",textTransform:"none"}},Bl=(0,g.Z)(Rl,{name:"MuiPickersToolbarButton"})(zl),Fl=Jo((function(e){return{toolbar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:100,backgroundColor:"light"===e.palette.type?e.palette.primary.main:e.palette.background.default},toolbarLandscape:{height:"auto",maxWidth:150,padding:8,justifyContent:"flex-start"}}}),{name:"MuiPickersToolbar"}),Nl=function(t){var n=t.children,i=t.isLandscape,r=t.className,a=void 0===r?null:r,o=(0,_.Z)(t,["children","isLandscape","className"]),s=Fl();return(0,e.createElement)(rs,(0,p.Z)({className:(0,P.Z)(s.toolbar,a,i&&s.toolbarLandscape)},o),n)};function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Ul=function(t){var n=t.inputValue,i=t.inputVariant,r=t.validationError,a=t.InputProps,o=t.openPicker,s=t.TextFieldComponent,l=void 0===s?Ps:s,u=(0,_.Z)(t,["inputValue","inputVariant","validationError","InputProps","openPicker","TextFieldComponent"]),c=(0,e.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(n,!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{readOnly:!0})}),[a]);return(0,e.createElement)(l,(0,p.Z)({error:Boolean(r),helperText:r},u,{onClick:o,value:n,variant:i,InputProps:c,onKeyDown:function(e){32===e.keyCode&&(e.stopPropagation(),o())}}))};Ul.displayName="PureDateInput";var Vl=function(e,t,n,i,r){var a=r.invalidLabel,o=r.emptyLabel,s=r.labelFunc,l=n.date(e);return s?s(i?null:l,a):i?o||"":n.isValid(l)?n.format(l,t):a},Zl=function(e,t,n){return t?n:e.endOfDay(n)},Wl=function(e,t,n){return t?n:e.startOfDay(n)};function Gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gl(n,!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hl=function(t){var n=t.inputValue,i=t.inputVariant,r=t.validationError,a=t.KeyboardButtonProps,o=t.InputAdornmentProps,s=t.openPicker,l=t.onChange,u=t.InputProps,c=t.mask,h=t.maskChar,d=void 0===h?"_":h,f=t.refuse,m=void 0===f?/[^\d]+/gi:f,v=t.format,y=t.keyboardIcon,g=t.disabled,x=t.rifmFormatter,b=t.TextFieldComponent,w=void 0===b?Ps:b,k=(0,_.Z)(t,["inputValue","inputVariant","validationError","KeyboardButtonProps","InputAdornmentProps","openPicker","onChange","InputProps","mask","maskChar","refuse","format","keyboardIcon","disabled","rifmFormatter","TextFieldComponent"]),S=c||function(e,t){return e.replace(/[a-z]/gi,t)}(v,d),T=(0,e.useMemo)((function(){return function(e,t,n){return function(i){var r="",a=i.replace(n,"");if(""===a)return a;for(var o=0,s=0;o<e.length;){var l=e[o];l===t&&s<a.length?(r+=a[s],s+=1):r+=l,o+=1}return r}}(S,d,m)}),[S,d,m]),E=o&&o.position?o.position:"end";return(0,e.createElement)(Os,{key:S,value:n,onChange:function(e){l(""===e||e===S?null:e)},refuse:m,format:x||T},(function(t){var n=t.onChange,l=t.value;return(0,e.createElement)(w,(0,p.Z)({disabled:g,error:Boolean(r),helperText:r},k,{value:l,onChange:n,variant:i,InputProps:Yl({},u,(0,C.Z)({},"".concat(E,"Adornment"),(0,e.createElement)(Ls,(0,p.Z)({position:E},o),(0,e.createElement)(Ds,(0,p.Z)({disabled:g},a,{onClick:s}),y))))}))}))};Hl.defaultProps={keyboardIcon:(0,e.createElement)((function(t){return e.createElement(zs.Z,t,e.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),e.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}))}),null)};function Xl(t,n){var i=function(t,n){var i=n.value,r=n.initialFocusedDate,a=(0,e.useRef)(t.date()),o=t.date(i||r||a.current);return o&&t.isValid(o)?o:a.current}(Qo(),t);return{date:i,format:t.format||n.getDefaultFormat()}}function ql(t,n){var i=t.autoOk,r=t.disabled,a=t.readOnly,o=t.onAccept,s=t.onChange,l=t.onError,u=t.value,c=t.variant,h=Qo(),d=function(t){var n=t.open,i=t.onOpen,r=t.onClose,a=null;if(void 0===n||null===n){var o=(0,e.useState)(!1),s=(0,re.Z)(o,2);n=s[0],a=s[1]}return{isOpen:n,setIsOpen:(0,e.useCallback)((function(e){return a&&a(e),e?i&&i():r&&r()}),[i,r,a])}}(t),p=d.isOpen,f=d.setIsOpen,m=Xl(t,n),v=m.date,y=m.format,g=(0,e.useState)(v),_=(0,re.Z)(g,2),x=_[0],b=_[1];(0,e.useEffect)((function(){p||h.isEqual(x,v)||b(v)}),[v,p,x,h]);var w=(0,e.useCallback)((function(e){s(e),o&&o(e),f(!1)}),[o,s,f]),k=(0,e.useMemo)((function(){return{format:y,open:p,onClear:function(){return w(null)},onAccept:function(){return w(x)},onSetToday:function(){return b(h.date())},onDismiss:function(){f(!1)}}}),[w,y,p,x,f,h]),S=(0,e.useMemo)((function(){return{date:x,onChange:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b(e),t&&i?w(e):"inline"!==c&&"static"!==c||(s(e),o&&o(e))}}}),[w,i,o,s,x,c]),T=function(e,t,n){var i=n.maxDate,r=n.minDate,a=n.disablePast,o=n.disableFuture,s=n.maxDateMessage,l=n.minDateMessage,u=n.invalidDateMessage,c=n.strictCompareDates,h=t.date(e);return null===e?"":t.isValid(e)?i&&t.isAfter(h,Zl(t,!!c,t.date(i)))||o&&t.isAfter(h,Zl(t,!!c,t.date()))?s:r&&t.isBefore(h,Wl(t,!!c,t.date(r)))||a&&t.isBefore(h,Wl(t,!!c,t.date()))?l:"":u}(u,h,t);(0,e.useEffect)((function(){l&&l(T,u)}),[l,T,u]);var C=Vl(v,y,h,null===u,t),E={pickerProps:S,inputProps:(0,e.useMemo)((function(){return{inputValue:C,validationError:T,openPicker:function(){return!a&&!r&&f(!0)}}}),[r,C,a,f,T]),wrapperProps:k};return(0,e.useDebugValue)(E),E}function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(n,!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ql(t){var n=t.Input,i=t.useState,r=t.useOptions,a=t.getCustomProps,o=t.DefaultToolbarComponent;return function(t){var s=t.allowKeyboardControl,l=t.ampm,u=t.animateYearScrolling,c=(t.autoOk,t.dateRangeIcon),h=t.disableFuture,d=t.disablePast,f=t.disableToolbar,m=(t.emptyLabel,t.format,t.forwardedRef,t.hideTabs),v=(t.initialFocusedDate,t.invalidDateMessage,t.invalidLabel,t.labelFunc,t.leftArrowButtonProps),y=t.leftArrowIcon,g=t.loadingIndicator,x=t.maxDate,b=(t.maxDateMessage,t.minDate),w=(t.minDateMessage,t.minutesStep),k=(t.onAccept,t.onChange,t.onClose,t.onMonthChange),S=(t.onOpen,t.onYearChange),T=t.openTo,C=t.orientation,E=t.renderDay,M=t.rightArrowButtonProps,P=t.rightArrowIcon,A=t.shouldDisableDate,D=t.strictCompareDates,I=t.timeIcon,L=t.ToolbarComponent,O=void 0===L?o:L,z=(t.value,t.variant),R=t.views,B=(0,_.Z)(t,["allowKeyboardControl","ampm","animateYearScrolling","autoOk","dateRangeIcon","disableFuture","disablePast","disableToolbar","emptyLabel","format","forwardedRef","hideTabs","initialFocusedDate","invalidDateMessage","invalidLabel","labelFunc","leftArrowButtonProps","leftArrowIcon","loadingIndicator","maxDate","maxDateMessage","minDate","minDateMessage","minutesStep","onAccept","onChange","onClose","onMonthChange","onOpen","onYearChange","openTo","orientation","renderDay","rightArrowButtonProps","rightArrowIcon","shouldDisableDate","strictCompareDates","timeIcon","ToolbarComponent","value","variant","views"]),F=a?a(t):{},N=r(t),j=i(t,N),U=j.pickerProps,V=j.inputProps,Z=j.wrapperProps;return(0,e.createElement)(Ss,(0,p.Z)({variant:z,InputComponent:n,DateInputProps:V},F,Z,B),(0,e.createElement)(Il,(0,p.Z)({},U,{allowKeyboardControl:s,ampm:l,animateYearScrolling:u,dateRangeIcon:c,disableFuture:h,disablePast:d,disableToolbar:f,hideTabs:m,leftArrowButtonProps:v,leftArrowIcon:y,loadingIndicator:g,maxDate:x,minDate:b,minutesStep:w,onMonthChange:k,onYearChange:S,openTo:T,orientation:C,renderDay:E,rightArrowButtonProps:M,rightArrowIcon:P,shouldDisableDate:A,strictCompareDates:D,timeIcon:I,ToolbarComponent:O,views:R})))}}var Jl=Jo({toolbar:{flexDirection:"column",alignItems:"flex-start"},toolbarLandscape:{padding:16},dateLandscape:{marginRight:16}},{name:"MuiPickersDatePickerRoot"}),eu=function(t){var n=t.date,i=t.views,r=t.setOpenView,a=t.isLandscape,o=t.openView,s=Qo(),l=Jl(),u=(0,e.useMemo)((function(){return Zs(i)}),[i]),c=(0,e.useMemo)((function(){return Ws(i)}),[i]);return(0,e.createElement)(Nl,{isLandscape:a,className:(0,P.Z)(!u&&l.toolbar,a&&l.toolbarLandscape)},(0,e.createElement)(Bl,{variant:u?"h3":"subtitle1",onClick:function(){return r("year")},selected:"year"===o,label:s.getYearText(n)}),!u&&!c&&(0,e.createElement)(Bl,{variant:"h4",selected:"date"===o,onClick:function(){return r("date")},align:a?"left":"center",label:s.getDatePickerHeaderText(n),className:(0,P.Z)(a&&l.dateLandscape)}),c&&(0,e.createElement)(Bl,{variant:"h4",onClick:function(){return r("month")},selected:"month"===o,label:s.getMonthText(n)}))};function tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var nu=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tu(n,!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},gl,{openTo:"date",views:["year","date"]});function iu(e){var t=Qo();return{getDefaultFormat:function(){return function(e,t){return Zs(e)?t.yearFormat:Ws(e)?t.yearMonthFormat:t.dateFormat}(e.views,t)}}}var ru=Ql({useOptions:iu,Input:Ul,useState:ql,DefaultToolbarComponent:eu}),au=Ql({useOptions:iu,Input:Hl,useState:function(t,n){var i=t.format,r=void 0===i?n.getDefaultFormat():i,a=t.inputValue,o=t.onChange,s=t.value,l=Qo(),u=Vl(s,r,l,null===s,t),c=(0,e.useState)(u),h=(0,re.Z)(c,2),d=h[0],p=h[1],f=a?function(e,t,n){try{return t.parse(e,n)}catch(i){return null}}(a,l,r):s;(0,e.useEffect)((function(){(null===s||l.isValid(s))&&p(u)}),[u,p,l,s]);var m=(0,e.useCallback)((function(e){o(e,null===e?null:l.format(e,r))}),[r,o,l]),v=ql($l({},t,{value:f,onChange:m}),n),y=v.inputProps,g=v.wrapperProps,_=v.pickerProps,x=(0,e.useMemo)((function(){return $l({},y,{format:g.format,inputValue:a||d,onChange:function(e){p(e||"");var t=null===e?null:l.parse(e,g.format);o(t,e)}})}),[y,d,a,o,l,g.format]);return{inputProps:x,wrapperProps:g,pickerProps:_}},DefaultToolbarComponent:eu});ru.defaultProps=nu,au.defaultProps=nu;var ou=(0,g.Z)((function(e){return{}}))((function(e){return(0,Ze.jsx)($o,{utils:qo,children:(0,Ze.jsx)(au,{disableToolbar:!0,views:["date"],variant:"inline",format:"MM/dd/yyyy",minDate:"01/01/1980",maxDate:"12/31/2022",PopoverProps:{style:M({},{left:"180px",top:"-140px"})},margin:"none",id:"date-picker-inline",label:"Planting/Budbreak",value:e.value,onChange:e.onchange,autoOk:!0,InputProps:{readOnly:!1},KeyboardButtonProps:{"aria-label":"change planting date"},style:{width:180}})})})),su=e.forwardRef((function(t,n){var i=t.autoFocus,r=t.checked,a=t.checkedIcon,o=t.classes,s=t.className,l=t.defaultChecked,u=t.disabled,c=t.icon,h=t.id,d=t.inputProps,f=t.inputRef,m=t.name,v=t.onBlur,y=t.onChange,g=t.onFocus,x=t.readOnly,b=t.required,w=t.tabIndex,k=t.type,S=t.value,T=(0,_.Z)(t,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),C=(0,bi.Z)({controlled:r,default:Boolean(l),name:"SwitchBase",state:"checked"}),E=(0,re.Z)(C,2),M=E[0],A=E[1],D=Pi(),I=u;D&&"undefined"===typeof I&&(I=D.disabled);var L="checkbox"===k||"radio"===k;return e.createElement(Ds,(0,p.Z)({component:"span",className:(0,P.Z)(o.root,s,M&&o.checked,I&&o.disabled),disabled:I,tabIndex:null,role:void 0,onFocus:function(e){g&&g(e),D&&D.onFocus&&D.onFocus(e)},onBlur:function(e){v&&v(e),D&&D.onBlur&&D.onBlur(e)},ref:n},T),e.createElement("input",(0,p.Z)({autoFocus:i,checked:r,defaultChecked:l,className:o.input,disabled:I,id:L&&h,name:m,onChange:function(e){var t=e.target.checked;A(t),y&&y(e,t)},readOnly:x,ref:f,required:b,tabIndex:w,type:k,value:S},d)),M?a:c)})),lu=(0,g.Z)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(su),uu=(0,Ai.Z)(e.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),cu=(0,Ai.Z)(e.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),hu=(0,Ai.Z)(e.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),du=e.createElement(cu,null),pu=e.createElement(uu,null),fu=e.createElement(hu,null),mu=e.forwardRef((function(t,n){var i=t.checkedIcon,r=void 0===i?du:i,a=t.classes,o=t.color,s=void 0===o?"secondary":o,l=t.icon,u=void 0===l?pu:l,c=t.indeterminate,h=void 0!==c&&c,d=t.indeterminateIcon,f=void 0===d?fu:d,m=t.inputProps,v=t.size,y=void 0===v?"medium":v,g=(0,_.Z)(t,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),x=h?f:u,b=h?f:r;return e.createElement(lu,(0,p.Z)({type:"checkbox",classes:{root:(0,P.Z)(a.root,a["color".concat((0,R.Z)(s))],h&&a.indeterminate),checked:a.checked,disabled:a.disabled},color:s,inputProps:(0,p.Z)({"data-indeterminate":h},m),icon:e.cloneElement(x,{fontSize:void 0===x.props.fontSize&&"small"===y?y:x.props.fontSize}),checkedIcon:e.cloneElement(b,{fontSize:void 0===b.props.fontSize&&"small"===y?y:b.props.fontSize}),ref:n},g))})),vu=(0,g.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(mu),yu=n(4806),gu=e.forwardRef((function(t,n){t.checked;var i=t.classes,r=t.className,a=t.control,o=t.disabled,s=(t.inputRef,t.label),l=t.labelPlacement,u=void 0===l?"end":l,c=(t.name,t.onChange,t.value,(0,_.Z)(t,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),h=Pi(),d=o;"undefined"===typeof d&&"undefined"!==typeof a.props.disabled&&(d=a.props.disabled),"undefined"===typeof d&&h&&(d=h.disabled);var f={disabled:d};return["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof a.props[e]&&"undefined"!==typeof t[e]&&(f[e]=t[e])})),e.createElement("label",(0,p.Z)({className:(0,P.Z)(i.root,r,"end"!==u&&i["labelPlacement".concat((0,R.Z)(u))],d&&i.disabled),ref:n},c),e.cloneElement(a,f),e.createElement(N,{component:"span",className:(0,P.Z)(i.label,d&&i.disabled)},s))})),_u=(0,g.Z)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(gu),xu=(0,g.Z)({root:{color:yu.Z[600],"&$checked":{color:yu.Z[800]}},checked:{}})((function(e){return(0,Ze.jsx)(vu,M({color:"default"},e))})),bu=function(e){o(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,Ze.jsx)(_u,{control:(0,Ze.jsx)(xu,{checked:this.props.value,onChange:this.props.onchange,name:"enableTarget"})})}}]),n}(e.Component),wu=bu,ku=(0,g.Z)((function(e){return{}}))((function(e){return(0,Ze.jsx)($o,{utils:qo,children:(0,Ze.jsx)(au,{disableToolbar:!0,disabled:!e.enabled,views:["date"],variant:"inline",format:"MM/dd/yyyy",minDate:"01/01/1980",maxDate:"12/31/2022",PopoverProps:{style:M({},{left:"180px",top:"-140px"})},margin:"none",id:"date-picker-inline",label:"Last Irrigation",value:e.value,onChange:e.onchange,autoOk:!0,InputProps:{readOnly:!1},KeyboardButtonProps:{"aria-label":"change irrigation date"},style:{width:140}})})})),Su=function(e){o(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,Ze.jsx)(bn,{padding:2,border:0,borderRadius:4,borderColor:"primary.main",children:(0,Ze.jsx)(z,{container:!0,item:!0,direction:"column",spacing:3,children:(0,Ze.jsxs)(z,{item:!0,container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,children:[(0,Ze.jsx)(z,{item:!0,children:(0,Ze.jsx)(Pr,{value:this.props.locations[this.props.selected].soilcapacity,values:this.props.soilcapacity_list,labels:this.props.soilcapacity_labels,onchange:this.props.onchange_locInfo})}),(0,Ze.jsx)(z,{item:!0,children:(0,Ze.jsx)(Dr,{value:this.props.locations[this.props.selected].croptype,values:this.props.croptype_list,labels:this.props.croptype_labels,onchange:this.props.onchange_locInfo})}),(0,Ze.jsx)(z,{item:!0,children:(0,Ze.jsx)(ou,{value:this.props.locations[this.props.selected].planting_date,onchange:this.props.onchange_plantingDate})}),(0,Ze.jsxs)(z,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"flex-end",children:[(0,Ze.jsx)(wu,{value:this.props.irrigationIsEnabled,onchange:this.props.onchange_irrigationIsEnabled}),(0,Ze.jsx)(ku,{value:this.props.locations[this.props.selected].irrigation_date,enabled:this.props.irrigationIsEnabled,onchange:this.props.onchange_irrigationDate})]})]})})})}}]),n}(e.Component),Tu=Su,Cu=n(7595),Eu=function(e){o(n,e);var t=h(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.state.anchorEl,t=Boolean(e);return(0,Ze.jsxs)("div",{children:[(0,Ze.jsxs)(ns,{variant:"text",color:"secondary",size:"small",onClick:this.handleClick,children:[(0,Ze.jsx)(Cu.Z,{}),"Select chart details"]}),(0,Ze.jsx)(ri,{id:"simple-popper",open:t,anchorEl:e,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,Ze.jsx)(bn,{paddingTop:1,border:2,borderRadius:4,borderColor:"primary.main",children:this.props.content})})]})}}]),n}(e.Component),Mu=(0,g.Z)((function(e){return{typography:{margin:e.spacing(2)}}}))(Eu),Pu=function(){return(0,Ze.jsxs)(bn,{maxWidth:800,padding:1,border:1,borderRadius:4,borderColor:"primary.main",bgcolor:"#f5f5dc",children:[(0,Ze.jsx)("h2",{children:"Data sources and methods"}),(0,Ze.jsxs)("h4",{children:[(0,Ze.jsx)("br",{}),"ABOUT THE WATER BALANCE MODEL"]}),(0,Ze.jsx)("p",{children:"This tool uses precipitation, evapotranspiration, drainage and runoff to calculate daily estimates of the soil water content within a crop\u2019s effective root zone for the Northeast US. The resulting water deficit information provides the amount of irrigation or natural rainfall needed to return the soil in this root zone to field capacity. The use of gridded precipitation, calculated from surface observations and radar estimates (Degaetano and Wilks, 2009), results in the availability of water deficit estimates on a 2.5 x 2.5 mile grid. Model results are calculated and displayed for the grid point closest in proximity to the user-provided location."}),(0,Ze.jsx)("p",{children:"Evapotranspiration (ET) is calculated for specific crops and soil moisture conditions in this model. A variation of the Penman-Monteith equation, as implemented in a modified version of the British Meteorological Office Rainfall and Evaporation Calculation System (MORECS), is first used to determine ET from a hypothetical grass reference surface (Degaetano et al., 1994). Coefficient curves are then applied to this reference ET in order to better represent the typical ET progression observed throughout the growth cycle of each specific crop. Crops with similar coefficient curves are grouped together for selection in this tool. In order to account for the reduced ET observed for plants experiencing stress due to dry conditions, crop ET is further adjusted by applying a water stress coefficient that is a function of soil water content. Coefficient curves and ET adjustments for water stress are applied as outlined in the FAO Irrigation and Drainage Paper No. 56 (Allen et al., 2006)."}),(0,Ze.jsx)("p",{children:"Surface runoff is assumed for any water amount in excess of soil saturation. Drainage is estimated based on user-selected soil types (clay, loam, or sand). If the soil water content is greater than field capacity, drainage continues until field capacity is reached."}),(0,Ze.jsx)("p",{children:"Together, precipitation, ET, drainage and runoff determine daily water deficit estimates throughout the season."}),(0,Ze.jsx)("h4",{children:"FORECASTS"}),(0,Ze.jsx)("p",{children:"Three-day precipitation forecasts obtained through the National Weather Service\u2019s National Digital Forecast Database (Glahn and Ruth, 2003) provides the means to produce 3-day water deficit forecasts."}),(0,Ze.jsx)("h4",{children:"ACCESS TO GRIDDED PRECIPITATION DATA"}),(0,Ze.jsxs)("p",{children:["Gridded 2.5 x 2.5 mile daily precipitation data (Degaetano and Wilks, 2009) are produced for the Northeast United States by the ",(0,Ze.jsx)("a",{href:"http://www.nrcc.cornell.edu",target:"_blank",rel:"noopener noreferrer",children:"Northeast Regional Climate Center"}),", and are publicly available through the Applied Climate Information System (",(0,Ze.jsx)("a",{href:"http://www.rcc-acis.org",target:"_blank",rel:"noopener noreferrer",children:"ACIS"}),") web service."]}),(0,Ze.jsx)("h4",{children:"REFERENCES"}),(0,Ze.jsx)("p",{children:"Allen R.G., L.S. Pereira, D. Raes and M. Smith, Crop evapotranspiration \u2013 Guidelines for computing crop water requirements \u2013 FAO Irrigation and drainage paper 56. FAO, Rome 300 (9), D05109."}),(0,Ze.jsx)("p",{children:"Degaetano, Arthur & S. Wilks, Daniel. (2009). Radar\u2010guided interpolation of climatological precipitation data. International Journal of Climatology. 29. 185 - 196. 10.1002/joc.1714."}),(0,Ze.jsx)("p",{children:"Degaetano, A.T., K.L. Eggleston and W.W. Knapp, 1994, Daily Evapotranspiration and Soil Moisture Estimates for the Northeastern United States, NRCC Research Publication RR 94-1. 11 pp."}),(0,Ze.jsx)("p",{children:"Glahn, H. R., and D. P. Ruth, 2003: The new digital forecast database of the National Weather Service. Bull. Amer. Meteor. Soc., 84, 195\u2013201."})]})},Au=n(9323),Du=function(e){o(n,e);var t=h(n);function n(){var e;i(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,n=Boolean(t);return(0,Ze.jsxs)("div",{children:[(0,Ze.jsx)(Ds,{color:"inherit","aria-label":"Help",className:e.menuButton,onClick:this.handleClick,children:(0,Ze.jsx)(Au.Z,{})}),(0,Ze.jsx)(ri,{id:"simple-popper",open:n,anchorEl:t,onClick:this.handleClose,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:this.props.content})]})}}]),n}(e.Component),Iu=(0,g.Z)((function(e){return{typography:{margin:e.spacing(2)},menuButton:{marginRight:-60,marginTop:-10}}}))(Du),Lu=n(9125);function Ou(e){return Lu.soildata.soilmoistureoptions[e].fieldcapacity-Lu.soildata.soilmoistureoptions[e].wiltingpoint}function zu(e,t){var n=null;return n=(e*=-1)<=.5*t?1:(t-e)/(.5*t),n=Math.max(n,0)}function Ru(e,t){var n=Lu.cropinfo[t].Lini,i=Lu.cropinfo[t].Ldev,r=Lu.cropinfo[t].Lmid,a=Lu.cropinfo[t].Llate,o=Lu.cropinfo[t].Kcini,s=Lu.cropinfo[t].Kcmid,l=Lu.cropinfo[t].Kcend;return e<=n?o:e>n&&e<n+i?o+(e-n)*(s-o)/i:e>=n+i&&e<=n+i+r?s:e>n+i+r&&e<n+i+r+a?s-(e-(n+i+r))*(s-l)/a:l}function Bu(e,t,n,i,r,a,o){var s,l=null,u=null,c=null,h=null,d=null,p=null,f=null,m=null,v=null,y=null,g=null,_=null,x=null,b=[],w=[],k=[],S=[],T=[],C=[];l=n,b.push(l),w.push(null),k.push(null),S.push(null),C.push(null),T.push(null),s=function(e){return(Lu.soildata.soilmoistureoptions[e].saturation-Lu.soildata.soilmoistureoptions[e].fieldcapacity)/Lu.soildata.soildrainageoptions[e].daysToDrainToFcFromSat}(a),u=Math.floor((Date.parse(i)-Date.parse(r))/864e5);for(var E=1;E<t.length;E++){u+=1,c=Ou(a),h=zu(b[E-1],c),d=Ru(u,o),p=0,f=0,v=-1*t[E]*d*h,y=(m=e[E])/24,g=-1*v/24,x=s/24;for(var M=1;M<=24;M++)p-=_=l>0?Math.min(l,x):0,f-=Math.max(l+y-g-_-(Lu.soildata.soilmoistureoptions[a].saturation-Lu.soildata.soilmoistureoptions[a].fieldcapacity),0),l=Math.min(l+y-g-_,Lu.soildata.soilmoistureoptions[a].saturation-Lu.soildata.soilmoistureoptions[a].fieldcapacity),l=Math.max(l,-1*(Lu.soildata.soilmoistureoptions[a].fieldcapacity-Lu.soildata.soilmoistureoptions[a].wiltingpoint));w.push(l-b[b.length-1]),b.push(l),k.push(p),S.push(f),C.push(v),T.push(m)}return{deficitDailyChange:w,deficitDaily:b,drainageDaily:k,runoffDaily:S,petDaily:C,precipDaily:T}}function Fu(e){return e.map((function(e){return[(t=e[0],te()(t,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")),e[1],e[2]];var t}))}function Nu(e,t,n,i,r,a,o,s,l,u){var c={},h=function(e,t,n,i,r){var a,o,s,l=r.slice(6,10),u=null,c=null,h=null,d=null,p=null,f=null,m=null,v=-999;function y(e,t,n){return e[0].split("-")[0]===l&&l+"-03-01"<=e[0]}u=null,c=(u=e.filter(y)).map((function(e){return e[0]})),h=u.map((function(e){return e[1]!==v?e[1]:null})),u=null,a=(u=t.filter(y)).map((function(e){return e[0]})),o=u.map((function(e){return e[1]!==v?e[1]:null})),u=null,d=(u=n.filter(y)).map((function(e){return e[1]!==v?e[1]:null})),u=null,s=(u=i.filter(y)).map((function(e){return e[1]!==v?e[1]:null})),p=c.concat(a),f=h.concat(o),m=d.concat(s);var g=Math.min(p.length,f.length,m.length);return{dates:p.slice(0,g),precip:f.slice(0,g),pet:m.slice(0,g)}}(e,t,Fu(n),Fu(i),a),d=null,p=null;l&&u?(p=l.slice(6,10)+"-"+l.slice(0,2)+"-"+l.slice(3,5),d=h.dates.includes(p)?h.dates.indexOf(p):null):d=null;var f=h.dates[0],m=Bu(h.precip,h.pet,0,f,a,o,s),v=null;if(d){var y=h.dates[d];v=Bu(h.precip.slice(d),h.pet.slice(d),0,y,a,o,s)}else v=JSON.parse(JSON.stringify(m));var g=m.deficitDaily;return d&&g.splice.apply(g,[d,g.length].concat((0,Zt.Z)(v.deficitDaily))),c=M(M(M(M({},c),{deficitDaily:g}),{dates:h.dates}),function(e){return{firstFcstDate:te()(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")}}(r)),c}var ju=n(9125),Uu=function(e){o(n,e);var t=h(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).addOneDayToStringDate=function(e){return te()(e,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD")},r.subtractOneDayToStringDate=function(e){return te()(e,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD")},r.handleSelectedLocationChange=function(e){r.setState({selected:e})},r.handleLocationInfoChange=function(e){var t=e.target.name,n=e.target.value;r.setState((function(e){return M(M({},e),{},{locations:M(M({},e.locations),(0,C.Z)({},e.selected,M(M({},e.locations[e.selected]),{},(0,C.Z)({},t,n))))})}))},r.handleLocationPickerOutput=function(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&(r.state.locations.hasOwnProperty(i)?n[i]=M(M(M({},r.defaultLocation),t[i]),r.state.locations[i]):n[i]=M(M({},r.defaultLocation),t[i]));r.setState({locations:n,selected:e})},r.handleDataChange=function(e){r.setState({pointData:e})},r.handleDataIsLoadingChange=function(e){r.setState({dataIsLoading:e})},r.handlePlantingDateChange=function(){var e={target:{name:"planting_date",value:arguments.length<=1?void 0:arguments[1]}};r.handleLocationInfoChange(e)},r.handleIrrigationDateChange=function(){var e={target:{name:"irrigation_date",value:arguments.length<=1?void 0:arguments[1]}};r.handleLocationInfoChange(e)},r.handleIrrigationIsEnabledChange=function(){r.setState((function(e){return{irrigationIsEnabled:!e.irrigationIsEnabled}}))},r.toolName="CSF-WATER",r.token="pk.eyJ1IjoiYm5iMiIsImEiOiJjazJtYTgwajQwZnFiM29waGo4NHI1MWpnIn0.Xmb6eYeJArqqBQtKkWorUQ",r.soilcapacity_list=["high","medium","low"],r.soilcapacity_labels={high:"High (Clay)",medium:"Medium (Loam)",low:"Low (Sand)"},r.croptype_list=["grass","cereals","forages","grapes","legumes","rootstubers","vegsmallshort","vegsmalllong","vegsolanum","vegcucumber"],r.croptype_labels={grass:"Grass Reference",cereals:"Cereals",forages:"Forages",grapes:"Grapes (wine)",legumes:"Legumes",rootstubers:"Roots and Tubers",vegsmallshort:"Vegetables (Small) - Short Season",vegsmalllong:"Vegetables (Small) - Long Season",vegsolanum:"Vegetables (Solanum Family)",vegcucumber:"Vegetables (Cucumber Family)"},r.defaultLocation={address:"Cornell University, Ithaca, NY",lat:42.45,lng:-76.48,id:"default",planting_date:"05/15/2022",soilcapacity:"high",croptype:"grass",irrigation_date:null},r.defaultLocations={default:r.defaultLocation},r.state={locations:ie()(r.toolName+".locations")||r.defaultLocations,selected:ie()(r.toolName+".selected")||r.defaultLocation.id,pointData:null,irrigationIsEnabled:!1,dataIsLoading:!1},r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.state.locations&&this.state.selected&&this.handleDataIsLoadingChange(!0)}},{key:"componentDidUpdate",value:function(e,t){t.selected!==this.state.selected&&this.handleDataIsLoadingChange(!0),t.locations!==this.state.locations&&ie().set(this.toolName+".locations",this.state.locations),t.selected!==this.state.selected&&ie().set(this.toolName+".selected",this.state.selected)}},{key:"render",value:function(){var e;return e=(0,Ze.jsx)(Tu,{locations:this.state.locations,selected:this.state.selected,irrigationIsEnabled:this.state.irrigationIsEnabled,soilcapacity_list:this.soilcapacity_list,soilcapacity_labels:this.soilcapacity_labels,croptype_list:this.croptype_list,croptype_labels:this.croptype_labels,onchange_locationPicker:this.handleLocationPickerOutput,onchange_plantingDate:this.handlePlantingDateChange,onchange_locInfo:this.handleLocationInfoChange,onchange_irrigationIsEnabled:this.handleIrrigationIsEnabledChange,onchange_irrigationDate:this.handleIrrigationDateChange}),(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsxs)(z,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:[(0,Ze.jsx)(z,{item:!0,children:(0,Ze.jsx)(N,{variant:"h6",children:(0,Ze.jsx)(Je,{locations:this.state.locations,selected:this.state.selected,newLocationsCallback:this.handleLocationPickerOutput,token:this.token,modalZIndex:150})})}),(0,Ze.jsx)(z,{item:!0}),(0,Ze.jsxs)(z,{container:!0,direction:"row",justifyContent:"center",children:[(0,Ze.jsxs)(z,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",spacing:1,md:!0,children:[(0,Ze.jsx)(J,{mdUp:!0,children:(0,Ze.jsx)(z,{item:!0,children:(0,Ze.jsx)(Mu,{content:e})})}),(0,Ze.jsx)(J,{smDown:!0,children:(0,Ze.jsx)(z,{item:!0,children:e})})]}),(0,Ze.jsxs)(z,{item:!0,container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:1,md:9,children:[(0,Ze.jsx)(z,{item:!0,style:{width:"100%",height:"70vh"},children:this.state.pointData&&(0,Ze.jsx)(Vt,{modeldata:ju,locInfo:this.state.locations[this.state.selected],irrigationIsEnabled:this.state.irrigationIsEnabled,chartWeatherData:Nu(this.state.pointData.precip,this.state.pointData.precip_fcst,this.state.pointData.pet,this.state.pointData.pet_fcst,this.state.pointData.last_obs_date,this.state.locations[this.state.selected].planting_date,this.state.locations[this.state.selected].soilcapacity,this.state.locations[this.state.selected].croptype,this.state.locations[this.state.selected].irrigation_date,this.state.irrigationIsEnabled),dataIsLoading:this.state.dataIsLoading})}),(0,Ze.jsx)(z,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:1,children:(0,Ze.jsx)(z,{item:!0,children:this.state.pointData&&(0,Ze.jsx)(Iu,{content:(0,Ze.jsx)(Pu,{})})})})]})]})]}),this.state.dataIsLoading&&(0,Ze.jsx)(ot,{locations:this.state.locations,selected:this.state.selected,onchange_pointData:this.handleDataChange,onchange_dataIsLoading:this.handleDataIsLoadingChange},Math.random().toString(36).slice(2,7))]})}}]),n}(e.Component),Vu=Uu,Zu=(0,d.Z)({shadows:Array(25).fill("none"),palette:{primary:{main:T.Z[800]},alternativeTextColor:T.Z[800]},overrides:{MUIDataTableBodyRow:{root:{"&:nth-child(odd)":{backgroundColor:"#D3D3D3"}}}},typography:{body2:{fontSize:"0.8rem","@media (min-width:960px)":{fontSize:"1.0rem"}}}}),Wu=function(e){o(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,Ze.jsx)(y,{theme:Zu,children:(0,Ze.jsx)("div",{id:"container",className:"App",children:(0,Ze.jsx)(Vu,{})})})}}]),n}(e.Component),Gu=(0,g.Z)((function(e){return{root:{}}}))(S(Wu)),Yu=document.getElementById("csftool-content");(0,t.s)(Yu).render((0,Ze.jsx)(Gu,{}))}()}();
//# sourceMappingURL=toolinit.js.map